(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function Zx(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var RA={exports:{}},vg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dC;function HN(){if(dC)return vg;dC=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,a){var r=null;if(a!==void 0&&(r=""+a),s.key!==void 0&&(r=""+s.key),"key"in s){a={};for(var l in s)l!=="key"&&(a[l]=s[l])}else a=s;return s=a.ref,{$$typeof:i,type:n,key:r,ref:s!==void 0?s:null,props:a}}return vg.Fragment=e,vg.jsx=t,vg.jsxs=t,vg}var pC;function VN(){return pC||(pC=1,RA.exports=HN()),RA.exports}var oe=VN(),DA={exports:{}},vn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mC;function kN(){if(mC)return vn;mC=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),r=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function v(H){return H===null||typeof H!="object"?null:(H=g&&H[g]||H["@@iterator"],typeof H=="function"?H:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,A={};function M(H,G,K){this.props=H,this.context=G,this.refs=A,this.updater=K||y}M.prototype.isReactComponent={},M.prototype.setState=function(H,G){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,G,"setState")},M.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function b(){}b.prototype=M.prototype;function C(H,G,K){this.props=H,this.context=G,this.refs=A,this.updater=K||y}var w=C.prototype=new b;w.constructor=C,S(w,M.prototype),w.isPureReactComponent=!0;var R=Array.isArray,U={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function I(H,G,K,se,J,ne){return K=ne.ref,{$$typeof:i,type:H,key:G,ref:K!==void 0?K:null,props:ne}}function P(H,G){return I(H.type,G,void 0,void 0,void 0,H.props)}function N(H){return typeof H=="object"&&H!==null&&H.$$typeof===i}function L(H){var G={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(K){return G[K]})}var k=/\/+/g;function X(H,G){return typeof H=="object"&&H!==null&&H.key!=null?L(""+H.key):G.toString(36)}function W(){}function $(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(W,W):(H.status="pending",H.then(function(G){H.status==="pending"&&(H.status="fulfilled",H.value=G)},function(G){H.status==="pending"&&(H.status="rejected",H.reason=G)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function ce(H,G,K,se,J){var ne=typeof H;(ne==="undefined"||ne==="boolean")&&(H=null);var ue=!1;if(H===null)ue=!0;else switch(ne){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(H.$$typeof){case i:case e:ue=!0;break;case d:return ue=H._init,ce(ue(H._payload),G,K,se,J)}}if(ue)return J=J(H),ue=se===""?"."+X(H,0):se,R(J)?(K="",ue!=null&&(K=ue.replace(k,"$&/")+"/"),ce(J,G,K,"",function(Ve){return Ve})):J!=null&&(N(J)&&(J=P(J,K+(J.key==null||H&&H.key===J.key?"":(""+J.key).replace(k,"$&/")+"/")+ue)),G.push(J)),1;ue=0;var pe=se===""?".":se+":";if(R(H))for(var ve=0;ve<H.length;ve++)se=H[ve],ne=pe+X(se,ve),ue+=ce(se,G,K,ne,J);else if(ve=v(H),typeof ve=="function")for(H=ve.call(H),ve=0;!(se=H.next()).done;)se=se.value,ne=pe+X(se,ve++),ue+=ce(se,G,K,ne,J);else if(ne==="object"){if(typeof H.then=="function")return ce($(H),G,K,se,J);throw G=String(H),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return ue}function z(H,G,K){if(H==null)return H;var se=[],J=0;return ce(H,se,"","",function(ne){return G.call(K,ne,J++)}),se}function q(H){if(H._status===-1){var G=H._result;G=G(),G.then(function(K){(H._status===0||H._status===-1)&&(H._status=1,H._result=K)},function(K){(H._status===0||H._status===-1)&&(H._status=2,H._result=K)}),H._status===-1&&(H._status=0,H._result=G)}if(H._status===1)return H._result.default;throw H._result}var Q=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)};function re(){}return vn.Children={map:z,forEach:function(H,G,K){z(H,function(){G.apply(this,arguments)},K)},count:function(H){var G=0;return z(H,function(){G++}),G},toArray:function(H){return z(H,function(G){return G})||[]},only:function(H){if(!N(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},vn.Component=M,vn.Fragment=t,vn.Profiler=s,vn.PureComponent=C,vn.StrictMode=n,vn.Suspense=c,vn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,vn.__COMPILER_RUNTIME={__proto__:null,c:function(H){return U.H.useMemoCache(H)}},vn.cache=function(H){return function(){return H.apply(null,arguments)}},vn.cloneElement=function(H,G,K){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var se=S({},H.props),J=H.key,ne=void 0;if(G!=null)for(ue in G.ref!==void 0&&(ne=void 0),G.key!==void 0&&(J=""+G.key),G)!O.call(G,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&G.ref===void 0||(se[ue]=G[ue]);var ue=arguments.length-2;if(ue===1)se.children=K;else if(1<ue){for(var pe=Array(ue),ve=0;ve<ue;ve++)pe[ve]=arguments[ve+2];se.children=pe}return I(H.type,J,void 0,void 0,ne,se)},vn.createContext=function(H){return H={$$typeof:r,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:a,_context:H},H},vn.createElement=function(H,G,K){var se,J={},ne=null;if(G!=null)for(se in G.key!==void 0&&(ne=""+G.key),G)O.call(G,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(J[se]=G[se]);var ue=arguments.length-2;if(ue===1)J.children=K;else if(1<ue){for(var pe=Array(ue),ve=0;ve<ue;ve++)pe[ve]=arguments[ve+2];J.children=pe}if(H&&H.defaultProps)for(se in ue=H.defaultProps,ue)J[se]===void 0&&(J[se]=ue[se]);return I(H,ne,void 0,void 0,null,J)},vn.createRef=function(){return{current:null}},vn.forwardRef=function(H){return{$$typeof:l,render:H}},vn.isValidElement=N,vn.lazy=function(H){return{$$typeof:d,_payload:{_status:-1,_result:H},_init:q}},vn.memo=function(H,G){return{$$typeof:f,type:H,compare:G===void 0?null:G}},vn.startTransition=function(H){var G=U.T,K={};U.T=K;try{var se=H(),J=U.S;J!==null&&J(K,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(re,Q)}catch(ne){Q(ne)}finally{U.T=G}},vn.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},vn.use=function(H){return U.H.use(H)},vn.useActionState=function(H,G,K){return U.H.useActionState(H,G,K)},vn.useCallback=function(H,G){return U.H.useCallback(H,G)},vn.useContext=function(H){return U.H.useContext(H)},vn.useDebugValue=function(){},vn.useDeferredValue=function(H,G){return U.H.useDeferredValue(H,G)},vn.useEffect=function(H,G,K){var se=U.H;if(typeof K=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(H,G)},vn.useId=function(){return U.H.useId()},vn.useImperativeHandle=function(H,G,K){return U.H.useImperativeHandle(H,G,K)},vn.useInsertionEffect=function(H,G){return U.H.useInsertionEffect(H,G)},vn.useLayoutEffect=function(H,G){return U.H.useLayoutEffect(H,G)},vn.useMemo=function(H,G){return U.H.useMemo(H,G)},vn.useOptimistic=function(H,G){return U.H.useOptimistic(H,G)},vn.useReducer=function(H,G,K){return U.H.useReducer(H,G,K)},vn.useRef=function(H){return U.H.useRef(H)},vn.useState=function(H){return U.H.useState(H)},vn.useSyncExternalStore=function(H,G,K){return U.H.useSyncExternalStore(H,G,K)},vn.useTransition=function(){return U.H.useTransition()},vn.version="19.1.0",vn}var gC;function Zm(){return gC||(gC=1,DA.exports=kN()),DA.exports}var ge=Zm();const j_=Zx(ge);var BA={exports:{}},yg={},UA={exports:{}},LA={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vC;function XN(){return vC||(vC=1,function(i){function e(z,q){var Q=z.length;z.push(q);e:for(;0<Q;){var re=Q-1>>>1,H=z[re];if(0<s(H,q))z[re]=q,z[Q]=H,Q=re;else break e}}function t(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var q=z[0],Q=z.pop();if(Q!==q){z[0]=Q;e:for(var re=0,H=z.length,G=H>>>1;re<G;){var K=2*(re+1)-1,se=z[K],J=K+1,ne=z[J];if(0>s(se,Q))J<H&&0>s(ne,se)?(z[re]=ne,z[J]=Q,re=J):(z[re]=se,z[K]=Q,re=K);else if(J<H&&0>s(ne,Q))z[re]=ne,z[J]=Q,re=J;else break e}}return q}function s(z,q){var Q=z.sortIndex-q.sortIndex;return Q!==0?Q:z.id-q.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var r=Date,l=r.now();i.unstable_now=function(){return r.now()-l}}var c=[],f=[],d=1,g=null,v=3,y=!1,S=!1,A=!1,M=!1,b=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function R(z){for(var q=t(f);q!==null;){if(q.callback===null)n(f);else if(q.startTime<=z)n(f),q.sortIndex=q.expirationTime,e(c,q);else break;q=t(f)}}function U(z){if(A=!1,R(z),!S)if(t(c)!==null)S=!0,O||(O=!0,X());else{var q=t(f);q!==null&&ce(U,q.startTime-z)}}var O=!1,I=-1,P=5,N=-1;function L(){return M?!0:!(i.unstable_now()-N<P)}function k(){if(M=!1,O){var z=i.unstable_now();N=z;var q=!0;try{e:{S=!1,A&&(A=!1,C(I),I=-1),y=!0;var Q=v;try{t:{for(R(z),g=t(c);g!==null&&!(g.expirationTime>z&&L());){var re=g.callback;if(typeof re=="function"){g.callback=null,v=g.priorityLevel;var H=re(g.expirationTime<=z);if(z=i.unstable_now(),typeof H=="function"){g.callback=H,R(z),q=!0;break t}g===t(c)&&n(c),R(z)}else n(c);g=t(c)}if(g!==null)q=!0;else{var G=t(f);G!==null&&ce(U,G.startTime-z),q=!1}}break e}finally{g=null,v=Q,y=!1}q=void 0}}finally{q?X():O=!1}}}var X;if(typeof w=="function")X=function(){w(k)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,$=W.port2;W.port1.onmessage=k,X=function(){$.postMessage(null)}}else X=function(){b(k,0)};function ce(z,q){I=b(function(){z(i.unstable_now())},q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(z){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var Q=v;v=q;try{return z()}finally{v=Q}},i.unstable_requestPaint=function(){M=!0},i.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=v;v=z;try{return q()}finally{v=Q}},i.unstable_scheduleCallback=function(z,q,Q){var re=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?re+Q:re):Q=re,z){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Q+H,z={id:d++,callback:q,priorityLevel:z,startTime:Q,expirationTime:H,sortIndex:-1},Q>re?(z.sortIndex=Q,e(f,z),t(c)===null&&z===t(f)&&(A?(C(I),I=-1):A=!0,ce(U,Q-re))):(z.sortIndex=H,e(c,z),S||y||(S=!0,O||(O=!0,X()))),z},i.unstable_shouldYield=L,i.unstable_wrapCallback=function(z){var q=v;return function(){var Q=v;v=q;try{return z.apply(this,arguments)}finally{v=Q}}}}(LA)),LA}var yC;function jN(){return yC||(yC=1,UA.exports=XN()),UA.exports}var OA={exports:{}},Ca={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _C;function YN(){if(_C)return Ca;_C=1;var i=Zm();function e(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(c,f,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:c,containerInfo:f,implementation:d}}var r=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ca.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ca.createPortal=function(c,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(c,f,null,d)},Ca.flushSync=function(c){var f=r.T,d=n.p;try{if(r.T=null,n.p=2,c)return c()}finally{r.T=f,n.p=d,n.d.f()}},Ca.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(c,f))},Ca.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Ca.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var d=f.as,g=l(d,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?n.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:y}):d==="script"&&n.d.X(c,{crossOrigin:g,integrity:v,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ca.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=l(f.as,f.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(c)},Ca.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,g=l(d,f.crossOrigin);n.d.L(c,d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ca.preloadModule=function(c,f){if(typeof c=="string")if(f){var d=l(f.as,f.crossOrigin);n.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(c)},Ca.requestFormReset=function(c){n.d.r(c)},Ca.unstable_batchedUpdates=function(c,f){return c(f)},Ca.useFormState=function(c,f,d){return r.H.useFormState(c,f,d)},Ca.useFormStatus=function(){return r.H.useHostTransitionStatus()},Ca.version="19.1.0",Ca}var xC;function WN(){if(xC)return OA.exports;xC=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),OA.exports=YN(),OA.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SC;function qN(){if(SC)return yg;SC=1;var i=jN(),e=Zm(),t=WN();function n(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var u=o,m=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(m=u.return),o=u.return;while(o)}return u.tag===3?m:null}function r(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(a(o)!==o)throw Error(n(188))}function c(o){var u=o.alternate;if(!u){if(u=a(o),u===null)throw Error(n(188));return u!==o?null:o}for(var m=o,_=u;;){var T=m.return;if(T===null)break;var D=T.alternate;if(D===null){if(_=T.return,_!==null){m=_;continue}break}if(T.child===D.child){for(D=T.child;D;){if(D===m)return l(T),o;if(D===_)return l(T),u;D=D.sibling}throw Error(n(188))}if(m.return!==_.return)m=T,_=D;else{for(var j=!1,ie=T.child;ie;){if(ie===m){j=!0,m=T,_=D;break}if(ie===_){j=!0,_=T,m=D;break}ie=ie.sibling}if(!j){for(ie=D.child;ie;){if(ie===m){j=!0,m=D,_=T;break}if(ie===_){j=!0,_=D,m=T;break}ie=ie.sibling}if(!j)throw Error(n(189))}}if(m.alternate!==_)throw Error(n(190))}if(m.tag!==3)throw Error(n(188));return m.stateNode.current===m?o:u}function f(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=f(o),u!==null)return u;o=o.sibling}return null}var d=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),w=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function X(o){return o===null||typeof o!="object"?null:(o=k&&o[k]||o["@@iterator"],typeof o=="function"?o:null)}var W=Symbol.for("react.client.reference");function $(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===W?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case S:return"Fragment";case M:return"Profiler";case A:return"StrictMode";case U:return"Suspense";case O:return"SuspenseList";case N:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case y:return"Portal";case w:return(o.displayName||"Context")+".Provider";case C:return(o._context.displayName||"Context")+".Consumer";case R:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case I:return u=o.displayName||null,u!==null?u:$(o.type)||"Memo";case P:u=o._payload,o=o._init;try{return $(o(u))}catch{}}return null}var ce=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},re=[],H=-1;function G(o){return{current:o}}function K(o){0>H||(o.current=re[H],re[H]=null,H--)}function se(o,u){H++,re[H]=o.current,o.current=u}var J=G(null),ne=G(null),ue=G(null),pe=G(null);function ve(o,u){switch(se(ue,u),se(ne,o),se(J,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?HE(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=HE(u),o=VE(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}K(J),se(J,o)}function Ve(){K(J),K(ne),K(ue)}function ze(o){o.memoizedState!==null&&se(pe,o);var u=J.current,m=VE(u,o.type);u!==m&&(se(ne,o),se(J,m))}function Qe(o){ne.current===o&&(K(J),K(ne)),pe.current===o&&(K(pe),hg._currentValue=Q)}var Ie=Object.prototype.hasOwnProperty,rt=i.unstable_scheduleCallback,Z=i.unstable_cancelCallback,Le=i.unstable_shouldYield,Ue=i.unstable_requestPaint,Re=i.unstable_now,me=i.unstable_getCurrentPriorityLevel,Pe=i.unstable_ImmediatePriority,Se=i.unstable_UserBlockingPriority,ye=i.unstable_NormalPriority,nt=i.unstable_LowPriority,ee=i.unstable_IdlePriority,V=i.log,de=i.unstable_setDisableYieldValue,Be=null,be=null;function Me(o){if(typeof V=="function"&&de(o),be&&typeof be.setStrictMode=="function")try{be.setStrictMode(Be,o)}catch{}}var $e=Math.clz32?Math.clz32:Y,at=Math.log,ut=Math.LN2;function Y(o){return o>>>=0,o===0?32:31-(at(o)/ut|0)|0}var Oe=256,Ke=4194304;function it(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function fe(o,u,m){var _=o.pendingLanes;if(_===0)return 0;var T=0,D=o.suspendedLanes,j=o.pingedLanes;o=o.warmLanes;var ie=_&134217727;return ie!==0?(_=ie&~D,_!==0?T=it(_):(j&=ie,j!==0?T=it(j):m||(m=ie&~o,m!==0&&(T=it(m))))):(ie=_&~D,ie!==0?T=it(ie):j!==0?T=it(j):m||(m=_&~o,m!==0&&(T=it(m)))),T===0?0:u!==0&&u!==T&&(u&D)===0&&(D=T&-T,m=u&-u,D>=m||D===32&&(m&4194048)!==0)?u:T}function Ae(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function st(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function he(){var o=Oe;return Oe<<=1,(Oe&4194048)===0&&(Oe=256),o}function je(){var o=Ke;return Ke<<=1,(Ke&62914560)===0&&(Ke=4194304),o}function He(o){for(var u=[],m=0;31>m;m++)u.push(o);return u}function gt(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function et(o,u,m,_,T,D){var j=o.pendingLanes;o.pendingLanes=m,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=m,o.entangledLanes&=m,o.errorRecoveryDisabledLanes&=m,o.shellSuspendCounter=0;var ie=o.entanglements,_e=o.expirationTimes,Xe=o.hiddenUpdates;for(m=j&~m;0<m;){var ct=31-$e(m),dt=1<<ct;ie[ct]=0,_e[ct]=-1;var qe=Xe[ct];if(qe!==null)for(Xe[ct]=null,ct=0;ct<qe.length;ct++){var Je=qe[ct];Je!==null&&(Je.lane&=-536870913)}m&=~dt}_!==0&&Ge(o,_,0),D!==0&&T===0&&o.tag!==0&&(o.suspendedLanes|=D&~(j&~u))}function Ge(o,u,m){o.pendingLanes|=u,o.suspendedLanes&=~u;var _=31-$e(u);o.entangledLanes|=u,o.entanglements[_]=o.entanglements[_]|1073741824|m&4194090}function pt(o,u){var m=o.entangledLanes|=u;for(o=o.entanglements;m;){var _=31-$e(m),T=1<<_;T&u|o[_]&u&&(o[_]|=u),m&=~T}}function vt(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function mt(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function At(){var o=q.p;return o!==0?o:(o=window.event,o===void 0?32:oC(o.type))}function Vt(o,u){var m=q.p;try{return q.p=o,u()}finally{q.p=m}}var Pt=Math.random().toString(36).slice(2),ot="__reactFiber$"+Pt,tn="__reactProps$"+Pt,gn="__reactContainer$"+Pt,zn="__reactEvents$"+Pt,en="__reactListeners$"+Pt,ci="__reactHandles$"+Pt,jn="__reactResources$"+Pt,Bn="__reactMarker$"+Pt;function Kt(o){delete o[ot],delete o[tn],delete o[zn],delete o[en],delete o[ci]}function ui(o){var u=o[ot];if(u)return u;for(var m=o.parentNode;m;){if(u=m[gn]||m[ot]){if(m=u.alternate,u.child!==null||m!==null&&m.child!==null)for(o=YE(o);o!==null;){if(m=o[ot])return m;o=YE(o)}return u}o=m,m=o.parentNode}return null}function bn(o){if(o=o[ot]||o[gn]){var u=o.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return o}return null}function Ti(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(n(33))}function cs(o){var u=o[jn];return u||(u=o[jn]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Gn(o){o[Bn]=!0}var ni=new Set,gi={};function _n(o,u){te(o,u),te(o+"Capture",u)}function te(o,u){for(gi[o]=u,o=0;o<u.length;o++)ni.add(u[o])}var Ee=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ye={},Te={};function De(o){return Ie.call(Te,o)?!0:Ie.call(Ye,o)?!1:Ee.test(o)?Te[o]=!0:(Ye[o]=!0,!1)}function ht(o,u,m){if(De(u))if(m===null)o.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var _=u.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+m)}}function yt(o,u,m){if(m===null)o.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+m)}}function Mt(o,u,m,_){if(_===null)o.removeAttribute(m);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(m);return}o.setAttributeNS(u,m,""+_)}}var bt,Bt;function Rt(o){if(bt===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);bt=u&&u[1]||"",Bt=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bt+o+Bt}var wt=!1;function Yt(o,u){if(!o||wt)return"";wt=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(u){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Je){var qe=Je}Reflect.construct(o,[],dt)}else{try{dt.call()}catch(Je){qe=Je}o.call(dt.prototype)}}else{try{throw Error()}catch(Je){qe=Je}(dt=o())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(Je){if(Je&&qe&&typeof Je.stack=="string")return[Je.stack,qe.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var T=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");T&&T.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=_.DetermineComponentFrameRoot(),j=D[0],ie=D[1];if(j&&ie){var _e=j.split(`
`),Xe=ie.split(`
`);for(T=_=0;_<_e.length&&!_e[_].includes("DetermineComponentFrameRoot");)_++;for(;T<Xe.length&&!Xe[T].includes("DetermineComponentFrameRoot");)T++;if(_===_e.length||T===Xe.length)for(_=_e.length-1,T=Xe.length-1;1<=_&&0<=T&&_e[_]!==Xe[T];)T--;for(;1<=_&&0<=T;_--,T--)if(_e[_]!==Xe[T]){if(_!==1||T!==1)do if(_--,T--,0>T||_e[_]!==Xe[T]){var ct=`
`+_e[_].replace(" at new "," at ");return o.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",o.displayName)),ct}while(1<=_&&0<=T);break}}}finally{wt=!1,Error.prepareStackTrace=m}return(m=o?o.displayName||o.name:"")?Rt(m):""}function fn(o){switch(o.tag){case 26:case 27:case 5:return Rt(o.type);case 16:return Rt("Lazy");case 13:return Rt("Suspense");case 19:return Rt("SuspenseList");case 0:case 15:return Yt(o.type,!1);case 11:return Yt(o.type.render,!1);case 1:return Yt(o.type,!0);case 31:return Rt("Activity");default:return""}}function Rn(o){try{var u="";do u+=fn(o),o=o.return;while(o);return u}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function Xt(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function nn(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Ut(o){var u=nn(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,u),_=""+o[u];if(!o.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var T=m.get,D=m.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return T.call(this)},set:function(j){_=""+j,D.call(this,j)}}),Object.defineProperty(o,u,{enumerable:m.enumerable}),{getValue:function(){return _},setValue:function(j){_=""+j},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Un(o){o._valueTracker||(o._valueTracker=Ut(o))}function Jt(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var m=u.getValue(),_="";return o&&(_=nn(o)?o.checked?"true":"false":o.value),o=_,o!==m?(u.setValue(o),!0):!1}function ii(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var _s=/[\n"\\]/g;function Tn(o){return o.replace(_s,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Ei(o,u,m,_,T,D,j,ie){o.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?o.type=j:o.removeAttribute("type"),u!=null?j==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+Xt(u)):o.value!==""+Xt(u)&&(o.value=""+Xt(u)):j!=="submit"&&j!=="reset"||o.removeAttribute("value"),u!=null?Mi(o,j,Xt(u)):m!=null?Mi(o,j,Xt(m)):_!=null&&o.removeAttribute("value"),T==null&&D!=null&&(o.defaultChecked=!!D),T!=null&&(o.checked=T&&typeof T!="function"&&typeof T!="symbol"),ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?o.name=""+Xt(ie):o.removeAttribute("name")}function Hn(o,u,m,_,T,D,j,ie){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(o.type=D),u!=null||m!=null){if(!(D!=="submit"&&D!=="reset"||u!=null))return;m=m!=null?""+Xt(m):"",u=u!=null?""+Xt(u):m,ie||u===o.value||(o.value=u),o.defaultValue=u}_=_??T,_=typeof _!="function"&&typeof _!="symbol"&&!!_,o.checked=ie?o.checked:!!_,o.defaultChecked=!!_,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(o.name=j)}function Mi(o,u,m){u==="number"&&ii(o.ownerDocument)===o||o.defaultValue===""+m||(o.defaultValue=""+m)}function $n(o,u,m,_){if(o=o.options,u){u={};for(var T=0;T<m.length;T++)u["$"+m[T]]=!0;for(m=0;m<o.length;m++)T=u.hasOwnProperty("$"+o[m].value),o[m].selected!==T&&(o[m].selected=T),T&&_&&(o[m].defaultSelected=!0)}else{for(m=""+Xt(m),u=null,T=0;T<o.length;T++){if(o[T].value===m){o[T].selected=!0,_&&(o[T].defaultSelected=!0);return}u!==null||o[T].disabled||(u=o[T])}u!==null&&(u.selected=!0)}}function Ci(o,u,m){if(u!=null&&(u=""+Xt(u),u!==o.value&&(o.value=u),m==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=m!=null?""+Xt(m):""}function vi(o,u,m,_){if(u==null){if(_!=null){if(m!=null)throw Error(n(92));if(ce(_)){if(1<_.length)throw Error(n(93));_=_[0]}m=_}m==null&&(m=""),u=m}m=Xt(u),o.defaultValue=m,_=o.textContent,_===m&&_!==""&&_!==null&&(o.value=_)}function Bi(o,u){if(u){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=u;return}}o.textContent=u}var ks=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fo(o,u,m){var _=u.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?_?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":_?o.setProperty(u,m):typeof m!="number"||m===0||ks.has(u)?u==="float"?o.cssFloat=m:o[u]=(""+m).trim():o[u]=m+"px"}function Gl(o,u,m){if(u!=null&&typeof u!="object")throw Error(n(62));if(o=o.style,m!=null){for(var _ in m)!m.hasOwnProperty(_)||u!=null&&u.hasOwnProperty(_)||(_.indexOf("--")===0?o.setProperty(_,""):_==="float"?o.cssFloat="":o[_]="");for(var T in u)_=u[T],u.hasOwnProperty(T)&&m[T]!==_&&fo(o,T,_)}else for(var D in u)u.hasOwnProperty(D)&&fo(o,D,u[D])}function Hl(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$f=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ho(o){return $f.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Or=null;function Nr(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ga=null,po=null;function qo(o){var u=bn(o);if(u&&(o=u.stateNode)){var m=o[tn]||null;e:switch(o=u.stateNode,u.type){case"input":if(Ei(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),u=m.name,m.type==="radio"&&u!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Tn(""+u)+'"][type="radio"]'),u=0;u<m.length;u++){var _=m[u];if(_!==o&&_.form===o.form){var T=_[tn]||null;if(!T)throw Error(n(90));Ei(_,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name)}}for(u=0;u<m.length;u++)_=m[u],_.form===o.form&&Jt(_)}break e;case"textarea":Ci(o,m.value,m.defaultValue);break e;case"select":u=m.value,u!=null&&$n(o,!!m.multiple,u,!1)}}}var Ko=!1;function Nc(o,u,m){if(Ko)return o(u,m);Ko=!0;try{var _=o(u);return _}finally{if(Ko=!1,(ga!==null||po!==null)&&(Ro(),ga&&(u=ga,o=po,po=ga=null,qo(u),o)))for(u=0;u<o.length;u++)qo(o[u])}}function Jo(o,u){var m=o.stateNode;if(m===null)return null;var _=m[tn]||null;if(_===null)return null;m=_[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(o=o.type,_=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!_;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(n(231,u,typeof m));return m}var $s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zo=!1;if($s)try{var Qo={};Object.defineProperty(Qo,"passive",{get:function(){Zo=!0}}),window.addEventListener("test",Qo,Qo),window.removeEventListener("test",Qo,Qo)}catch{Zo=!1}var Vi=null,Pc=null,Ic=null;function Du(){if(Ic)return Ic;var o,u=Pc,m=u.length,_,T="value"in Vi?Vi.value:Vi.textContent,D=T.length;for(o=0;o<m&&u[o]===T[o];o++);var j=m-o;for(_=1;_<=j&&u[m-_]===T[D-_];_++);return Ic=T.slice(o,1<_?1-_:void 0)}function lr(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function $o(){return!0}function Vl(){return!1}function ki(o){function u(m,_,T,D,j){this._reactName=m,this._targetInst=T,this.type=_,this.nativeEvent=D,this.target=j,this.currentTarget=null;for(var ie in o)o.hasOwnProperty(ie)&&(m=o[ie],this[ie]=m?m(D):D[ie]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?$o:Vl,this.isPropagationStopped=Vl,this}return d(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=$o)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=$o)},persist:function(){},isPersistent:$o}),u}var va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ea=ki(va),el=d({},va,{view:0,detail:0}),Bu=ki(el),Fa,cr,tl,ur=d({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nh,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==tl&&(tl&&o.type==="mousemove"?(Fa=o.screenX-tl.screenX,cr=o.screenY-tl.screenY):cr=Fa=0,tl=o),Fa)},movementY:function(o){return"movementY"in o?o.movementY:cr}}),Fc=ki(ur),Xs=d({},ur,{dataTransfer:0}),c0=ki(Xs),Ui=d({},el,{relatedTarget:0}),nl=ki(Ui),eh=d({},va,{animationName:0,elapsedTime:0,pseudoElement:0}),Wd=ki(eh),Bs=d({},va,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),ya=ki(Bs),es=d({},va,{data:0}),za=ki(es),th={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u0(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=l1[o])?!!u[o]:!1}function nh(){return u0}var c1=d({},el,{key:function(o){if(o.key){var u=th[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=lr(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?o1[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nh,charCode:function(o){return o.type==="keypress"?lr(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?lr(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),f0=ki(c1),h0=d({},ur,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qd=ki(h0),u1=d({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nh}),d0=ki(u1),f1=d({},va,{propertyName:0,elapsedTime:0,pseudoElement:0}),il=ki(f1),p0=d({},ur,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),qS=ki(p0),h1=d({},va,{newState:0,oldState:0}),kl=ki(h1),sl=[9,13,27,32],ih=$s&&"CompositionEvent"in window,zc=null;$s&&"documentMode"in document&&(zc=document.documentMode);var sh=$s&&"TextEvent"in window&&!zc,ah=$s&&(!ih||zc&&8<zc&&11>=zc),Xl=" ",Us=!1;function rh(o,u){switch(o){case"keyup":return sl.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function m0(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var jl=!1;function oh(o,u){switch(o){case"compositionend":return m0(u);case"keypress":return u.which!==32?null:(Us=!0,Xl);case"textInput":return o=u.data,o===Xl&&Us?null:o;default:return null}}function g0(o,u){if(jl)return o==="compositionend"||!ih&&rh(o,u)?(o=Du(),Ic=Pc=Vi=null,jl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return ah&&u.locale!=="ko"?null:u.data;default:return null}}var Kd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function v0(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!Kd[o.type]:u==="textarea"}function _a(o,u,m,_){ga?po?po.push(_):po=[_]:ga=_,u=fy(u,"onChange"),0<u.length&&(m=new ea("onChange","change",null,m,_),o.push({event:m,listeners:u}))}var Uu=null,Gc=null;function d1(o){PE(o,0)}function lh(o){var u=Ti(o);if(Jt(u))return o}function Jd(o,u){if(o==="change")return u}var Zd=!1;if($s){var Qd;if($s){var Lu="oninput"in document;if(!Lu){var Ou=document.createElement("div");Ou.setAttribute("oninput","return;"),Lu=typeof Ou.oninput=="function"}Qd=Lu}else Qd=!1;Zd=Qd&&(!document.documentMode||9<document.documentMode)}function bi(){Uu&&(Uu.detachEvent("onpropertychange",p1),Gc=Uu=null)}function p1(o){if(o.propertyName==="value"&&lh(Gc)){var u=[];_a(u,Gc,o,Nr(o)),Nc(d1,u)}}function KS(o,u,m){o==="focusin"?(bi(),Uu=u,Gc=m,Uu.attachEvent("onpropertychange",p1)):o==="focusout"&&bi()}function m1(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return lh(Gc)}function ch(o,u){if(o==="click")return lh(u)}function Yl(o,u){if(o==="input"||o==="change")return lh(u)}function g1(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var xa=typeof Object.is=="function"?Object.is:g1;function Pr(o,u){if(xa(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var m=Object.keys(o),_=Object.keys(u);if(m.length!==_.length)return!1;for(_=0;_<m.length;_++){var T=m[_];if(!Ie.call(u,T)||!xa(o[T],u[T]))return!1}return!0}function Sa(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function y0(o,u){var m=Sa(o);o=0;for(var _;m;){if(m.nodeType===3){if(_=o+m.textContent.length,o<=u&&_>=u)return{node:m,offset:u-o};o=_}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Sa(m)}}function _0(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?_0(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function x0(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=ii(o.document);u instanceof o.HTMLIFrameElement;){try{var m=typeof u.contentWindow.location.href=="string"}catch{m=!1}if(m)o=u.contentWindow;else break;u=ii(o.document)}return u}function uh(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var S0=$s&&"documentMode"in document&&11>=document.documentMode,al=null,$d=null,fh=null,ep=!1;function A0(o,u,m){var _=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;ep||al==null||al!==ii(_)||(_=al,"selectionStart"in _&&uh(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),fh&&Pr(fh,_)||(fh=_,_=fy($d,"onSelect"),0<_.length&&(u=new ea("onSelect","select",null,u,m),o.push({event:u,listeners:_}),u.target=al)))}function Ls(o,u){var m={};return m[o.toLowerCase()]=u.toLowerCase(),m["Webkit"+o]="webkit"+u,m["Moz"+o]="moz"+u,m}var Wl={animationend:Ls("Animation","AnimationEnd"),animationiteration:Ls("Animation","AnimationIteration"),animationstart:Ls("Animation","AnimationStart"),transitionrun:Ls("Transition","TransitionRun"),transitionstart:Ls("Transition","TransitionStart"),transitioncancel:Ls("Transition","TransitionCancel"),transitionend:Ls("Transition","TransitionEnd")},tp={},v1={};$s&&(v1=document.createElement("div").style,"AnimationEvent"in window||(delete Wl.animationend.animation,delete Wl.animationiteration.animation,delete Wl.animationstart.animation),"TransitionEvent"in window||delete Wl.transitionend.transition);function rl(o){if(tp[o])return tp[o];if(!Wl[o])return o;var u=Wl[o],m;for(m in u)if(u.hasOwnProperty(m)&&m in v1)return tp[o]=u[m];return o}var ta=rl("animationend"),M0=rl("animationiteration"),Aa=rl("animationstart"),y1=rl("transitionrun"),ol=rl("transitionstart"),Nu=rl("transitioncancel"),ll=rl("transitionend"),np=new Map,hh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hh.push("scrollEnd");function xs(o,u){np.set(o,u),_n(u,[o])}var b0=new WeakMap;function Os(o,u){if(typeof o=="object"&&o!==null){var m=b0.get(o);return m!==void 0?m:(u={value:o,source:u,stack:Rn(u)},b0.set(o,u),u)}return{value:o,source:u,stack:Rn(u)}}var js=[],fr=0,ip=0;function dh(){for(var o=fr,u=ip=fr=0;u<o;){var m=js[u];js[u++]=null;var _=js[u];js[u++]=null;var T=js[u];js[u++]=null;var D=js[u];if(js[u++]=null,_!==null&&T!==null){var j=_.pending;j===null?T.next=T:(T.next=j.next,j.next=T),_.pending=T}D!==0&&T0(m,T,D)}}function ql(o,u,m,_){js[fr++]=o,js[fr++]=u,js[fr++]=m,js[fr++]=_,ip|=_,o.lanes|=_,o=o.alternate,o!==null&&(o.lanes|=_)}function sp(o,u,m,_){return ql(o,u,m,_),Pu(o)}function cl(o,u){return ql(o,null,null,u),Pu(o)}function T0(o,u,m){o.lanes|=m;var _=o.alternate;_!==null&&(_.lanes|=m);for(var T=!1,D=o.return;D!==null;)D.childLanes|=m,_=D.alternate,_!==null&&(_.childLanes|=m),D.tag===22&&(o=D.stateNode,o===null||o._visibility&1||(T=!0)),o=D,D=D.return;return o.tag===3?(D=o.stateNode,T&&u!==null&&(T=31-$e(m),o=D.hiddenUpdates,_=o[T],_===null?o[T]=[u]:_.push(u),u.lane=m|536870912),D):null}function Pu(o){if(50<wo)throw wo=0,su=null,Error(n(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var Kl={};function E0(o,u,m,_){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ma(o,u,m,_){return new E0(o,u,m,_)}function ph(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Xi(o,u){var m=o.alternate;return m===null?(m=Ma(o.tag,u,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=u,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&65011712,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,u=o.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m.refCleanup=o.refCleanup,m}function C0(o,u){o.flags&=65011714;var m=o.alternate;return m===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=m.childLanes,o.lanes=m.lanes,o.child=m.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=m.memoizedProps,o.memoizedState=m.memoizedState,o.updateQueue=m.updateQueue,o.type=m.type,u=m.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function Ss(o,u,m,_,T,D){var j=0;if(_=o,typeof o=="function")ph(o)&&(j=1);else if(typeof o=="string")j=wN(o,m,J.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case N:return o=Ma(31,m,u,T),o.elementType=N,o.lanes=D,o;case S:return Jl(m.children,T,D,u);case A:j=8,T|=24;break;case M:return o=Ma(12,m,u,T|2),o.elementType=M,o.lanes=D,o;case U:return o=Ma(13,m,u,T),o.elementType=U,o.lanes=D,o;case O:return o=Ma(19,m,u,T),o.elementType=O,o.lanes=D,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case b:case w:j=10;break e;case C:j=9;break e;case R:j=11;break e;case I:j=14;break e;case P:j=16,_=null;break e}j=29,m=Error(n(130,o===null?"null":typeof o,"")),_=null}return u=Ma(j,m,u,T),u.elementType=o,u.type=_,u.lanes=D,u}function Jl(o,u,m,_){return o=Ma(7,o,_,u),o.lanes=m,o}function mh(o,u,m){return o=Ma(6,o,null,u),o.lanes=m,o}function ap(o,u,m){return u=Ma(4,o.children!==null?o.children:[],o.key,u),u.lanes=m,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var Iu=[],ba=0,gh=null,Fu=0,Ns=[],Ga=0,Zl=null,mo=1,go="";function ul(o,u){Iu[ba++]=Fu,Iu[ba++]=gh,gh=o,Fu=u}function rp(o,u,m){Ns[Ga++]=mo,Ns[Ga++]=go,Ns[Ga++]=Zl,Zl=o;var _=mo;o=go;var T=32-$e(_)-1;_&=~(1<<T),m+=1;var D=32-$e(u)+T;if(30<D){var j=T-T%5;D=(_&(1<<j)-1).toString(32),_>>=j,T-=j,mo=1<<32-$e(u)+T|m<<T|_,go=D+o}else mo=1<<D|m<<T|_,go=o}function w0(o){o.return!==null&&(ul(o,1),rp(o,1,0))}function R0(o){for(;o===gh;)gh=Iu[--ba],Iu[ba]=null,Fu=Iu[--ba],Iu[ba]=null;for(;o===Zl;)Zl=Ns[--Ga],Ns[Ga]=null,go=Ns[--Ga],Ns[Ga]=null,mo=Ns[--Ga],Ns[Ga]=null}var na=null,wi=null,Vn=!1,hr=null,Ha=!1,op=Error(n(519));function Ql(o){var u=Error(n(418,""));throw Hc(Os(u,o)),op}function _1(o){var u=o.stateNode,m=o.type,_=o.memoizedProps;switch(u[ot]=o,u[tn]=_,m){case"dialog":En("cancel",u),En("close",u);break;case"iframe":case"object":case"embed":En("load",u);break;case"video":case"audio":for(m=0;m<rg.length;m++)En(rg[m],u);break;case"source":En("error",u);break;case"img":case"image":case"link":En("error",u),En("load",u);break;case"details":En("toggle",u);break;case"input":En("invalid",u),Hn(u,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0),Un(u);break;case"select":En("invalid",u);break;case"textarea":En("invalid",u),vi(u,_.value,_.defaultValue,_.children),Un(u)}m=_.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||u.textContent===""+m||_.suppressHydrationWarning===!0||GE(u.textContent,m)?(_.popover!=null&&(En("beforetoggle",u),En("toggle",u)),_.onScroll!=null&&En("scroll",u),_.onScrollEnd!=null&&En("scrollend",u),_.onClick!=null&&(u.onclick=hy),u=!0):u=!1,u||Ql(o)}function D0(o){for(na=o.return;na;)switch(na.tag){case 5:case 13:Ha=!1;return;case 27:case 3:Ha=!0;return;default:na=na.return}}function Ir(o){if(o!==na)return!1;if(!Vn)return D0(o),Vn=!0,!1;var u=o.tag,m;if((m=u!==3&&u!==27)&&((m=u===5)&&(m=o.type,m=!(m!=="form"&&m!=="button")||mA(o.type,o.memoizedProps)),m=!m),m&&wi&&Ql(o),D0(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(n(317));e:{for(o=o.nextSibling,u=0;o;){if(o.nodeType===8)if(m=o.data,m==="/$"){if(u===0){wi=bl(o.nextSibling);break e}u--}else m!=="$"&&m!=="$!"&&m!=="$?"||u++;o=o.nextSibling}wi=null}}else u===27?(u=wi,uf(o.type)?(o=_A,_A=null,wi=o):wi=u):wi=na?bl(o.stateNode.nextSibling):null;return!0}function zu(){wi=na=null,Vn=!1}function Yn(){var o=hr;return o!==null&&(Gt===null?Gt=o:Gt.push.apply(Gt,o),hr=null),o}function Hc(o){hr===null?hr=[o]:hr.push(o)}var B0=G(null),$l=null,fl=null;function ec(o,u,m){se(B0,u._currentValue),u._currentValue=m}function hl(o){o._currentValue=B0.current,K(B0)}function U0(o,u,m){for(;o!==null;){var _=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,_!==null&&(_.childLanes|=u)):_!==null&&(_.childLanes&u)!==u&&(_.childLanes|=u),o===m)break;o=o.return}}function vh(o,u,m,_){var T=o.child;for(T!==null&&(T.return=o);T!==null;){var D=T.dependencies;if(D!==null){var j=T.child;D=D.firstContext;e:for(;D!==null;){var ie=D;D=T;for(var _e=0;_e<u.length;_e++)if(ie.context===u[_e]){D.lanes|=m,ie=D.alternate,ie!==null&&(ie.lanes|=m),U0(D.return,m,o),_||(j=null);break e}D=ie.next}}else if(T.tag===18){if(j=T.return,j===null)throw Error(n(341));j.lanes|=m,D=j.alternate,D!==null&&(D.lanes|=m),U0(j,m,o),j=null}else j=T.child;if(j!==null)j.return=T;else for(j=T;j!==null;){if(j===o){j=null;break}if(T=j.sibling,T!==null){T.return=j.return,j=T;break}j=j.return}T=j}}function dr(o,u,m,_){o=null;for(var T=u,D=!1;T!==null;){if(!D){if((T.flags&524288)!==0)D=!0;else if((T.flags&262144)!==0)break}if(T.tag===10){var j=T.alternate;if(j===null)throw Error(n(387));if(j=j.memoizedProps,j!==null){var ie=T.type;xa(T.pendingProps.value,j.value)||(o!==null?o.push(ie):o=[ie])}}else if(T===pe.current){if(j=T.alternate,j===null)throw Error(n(387));j.memoizedState.memoizedState!==T.memoizedState.memoizedState&&(o!==null?o.push(hg):o=[hg])}T=T.return}o!==null&&vh(u,o,m,_),u.flags|=262144}function yh(o){for(o=o.firstContext;o!==null;){if(!xa(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function vo(o){$l=o,fl=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Li(o){return lp($l,o)}function _h(o,u){return $l===null&&vo(o),lp(o,u)}function lp(o,u){var m=u._currentValue;if(u={context:u,memoizedValue:m,next:null},fl===null){if(o===null)throw Error(n(308));fl=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else fl=fl.next=u;return m}var L0=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(m,_){o.push(_)}};this.abort=function(){u.aborted=!0,o.forEach(function(m){return m()})}},JS=i.unstable_scheduleCallback,x1=i.unstable_NormalPriority,ts={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cp(){return{controller:new L0,data:new Map,refCount:0}}function Gu(o){o.refCount--,o.refCount===0&&JS(x1,function(){o.controller.abort()})}var Hu=null,xh=0,on=0,Vu=null;function Va(o,u){if(Hu===null){var m=Hu=[];xh=0,on=rA(),Vu={status:"pending",value:void 0,then:function(_){m.push(_)}}}return xh++,u.then(up,up),u}function up(){if(--xh===0&&Hu!==null){Vu!==null&&(Vu.status="fulfilled");var o=Hu;Hu=null,on=0,Vu=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function ZS(o,u){var m=[],_={status:"pending",value:null,reason:null,then:function(T){m.push(T)}};return o.then(function(){_.status="fulfilled",_.value=u;for(var T=0;T<m.length;T++)(0,m[T])(u)},function(T){for(_.status="rejected",_.reason=T,T=0;T<m.length;T++)(0,m[T])(void 0)}),_}var Sh=z.S;z.S=function(o,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&Va(o,u),Sh!==null&&Sh(o,u)};var pr=G(null);function tc(){var o=pr.current;return o!==null?o:sn.pooledCache}function Ah(o,u){u===null?se(pr,pr.current):se(pr,u.pool)}function fp(){var o=tc();return o===null?null:{parent:ts._currentValue,pool:o}}var Mh=Error(n(460)),O0=Error(n(474)),Fr=Error(n(542)),bh={then:function(){}};function hp(o){return o=o.status,o==="fulfilled"||o==="rejected"}function ku(){}function dp(o,u,m){switch(m=o[m],m===void 0?o.push(u):m!==u&&(u.then(ku,ku),u=m),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,S1(o),o;default:if(typeof u.status=="string")u.then(ku,ku);else{if(o=sn,o!==null&&100<o.shellSuspendCounter)throw Error(n(482));o=u,o.status="pending",o.then(function(_){if(u.status==="pending"){var T=u;T.status="fulfilled",T.value=_}},function(_){if(u.status==="pending"){var T=u;T.status="rejected",T.reason=_}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,S1(o),o}throw mr=u,Mh}}var mr=null;function N0(){if(mr===null)throw Error(n(459));var o=mr;return mr=null,o}function S1(o){if(o===Mh||o===Fr)throw Error(n(483))}var dl=!1;function P0(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wt(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function yo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function pl(o,u,m){var _=o.updateQueue;if(_===null)return null;if(_=_.shared,(Wn&2)!==0){var T=_.pending;return T===null?u.next=u:(u.next=T.next,T.next=u),_.pending=u,u=Pu(o),T0(o,null,m),u}return ql(o,_,u,m),Pu(o)}function Vc(o,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194048)!==0)){var _=u.lanes;_&=o.pendingLanes,m|=_,u.lanes=m,pt(o,m)}}function Xu(o,u){var m=o.updateQueue,_=o.alternate;if(_!==null&&(_=_.updateQueue,m===_)){var T=null,D=null;if(m=m.firstBaseUpdate,m!==null){do{var j={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};D===null?T=D=j:D=D.next=j,m=m.next}while(m!==null);D===null?T=D=u:D=D.next=u}else T=D=u;m={baseState:_.baseState,firstBaseUpdate:T,lastBaseUpdate:D,shared:_.shared,callbacks:_.callbacks},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=u:o.next=u,m.lastBaseUpdate=u}var I0=!1;function Th(){if(I0){var o=Vu;if(o!==null)throw o}}function ju(o,u,m,_){I0=!1;var T=o.updateQueue;dl=!1;var D=T.firstBaseUpdate,j=T.lastBaseUpdate,ie=T.shared.pending;if(ie!==null){T.shared.pending=null;var _e=ie,Xe=_e.next;_e.next=null,j===null?D=Xe:j.next=Xe,j=_e;var ct=o.alternate;ct!==null&&(ct=ct.updateQueue,ie=ct.lastBaseUpdate,ie!==j&&(ie===null?ct.firstBaseUpdate=Xe:ie.next=Xe,ct.lastBaseUpdate=_e))}if(D!==null){var dt=T.baseState;j=0,ct=Xe=_e=null,ie=D;do{var qe=ie.lane&-536870913,Je=qe!==ie.lane;if(Je?(It&qe)===qe:(_&qe)===qe){qe!==0&&qe===on&&(I0=!0),ct!==null&&(ct=ct.next={lane:0,tag:ie.tag,payload:ie.payload,callback:null,next:null});e:{var Zt=o,kt=ie;qe=u;var mi=m;switch(kt.tag){case 1:if(Zt=kt.payload,typeof Zt=="function"){dt=Zt.call(mi,dt,qe);break e}dt=Zt;break e;case 3:Zt.flags=Zt.flags&-65537|128;case 0:if(Zt=kt.payload,qe=typeof Zt=="function"?Zt.call(mi,dt,qe):Zt,qe==null)break e;dt=d({},dt,qe);break e;case 2:dl=!0}}qe=ie.callback,qe!==null&&(o.flags|=64,Je&&(o.flags|=8192),Je=T.callbacks,Je===null?T.callbacks=[qe]:Je.push(qe))}else Je={lane:qe,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},ct===null?(Xe=ct=Je,_e=dt):ct=ct.next=Je,j|=qe;if(ie=ie.next,ie===null){if(ie=T.shared.pending,ie===null)break;Je=ie,ie=Je.next,Je.next=null,T.lastBaseUpdate=Je,T.shared.pending=null}}while(!0);ct===null&&(_e=dt),T.baseState=_e,T.firstBaseUpdate=Xe,T.lastBaseUpdate=ct,D===null&&(T.shared.lanes=0),Yr|=j,o.lanes=j,o.memoizedState=dt}}function Yu(o,u){if(typeof o!="function")throw Error(n(191,o));o.call(u)}function A1(o,u){var m=o.callbacks;if(m!==null)for(o.callbacks=null,o=0;o<m.length;o++)Yu(m[o],u)}var Wu=G(null),pp=G(0);function M1(o,u){o=Sr,se(pp,o),se(Wu,u),Sr=o|u.baseLanes}function F0(){se(pp,Sr),se(Wu,Wu.current)}function Eh(){Sr=pp.current,K(Wu),K(pp)}var ml=0,ln=null,Qn=null,ns=null,mp=!1,nc=!1,ia=!1,us=0,gr=0,Ps=null,b1=0;function ji(){throw Error(n(321))}function Ys(o,u){if(u===null)return!1;for(var m=0;m<u.length&&m<o.length;m++)if(!xa(o[m],u[m]))return!1;return!0}function gl(o,u,m,_,T,D){return ml=D,ln=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,z.H=o===null||o.memoizedState===null?bp:eg,ia=!1,D=m(_,T),ia=!1,nc&&(D=E1(u,m,_,T)),T1(o),D}function T1(o){z.H=Rh;var u=Qn!==null&&Qn.next!==null;if(ml=0,ns=Qn=ln=null,mp=!1,gr=0,Ps=null,u)throw Error(n(300));o===null||As||(o=o.dependencies,o!==null&&yh(o)&&(As=!0))}function E1(o,u,m,_){ln=o;var T=0;do{if(nc&&(Ps=null),gr=0,nc=!1,25<=T)throw Error(n(301));if(T+=1,ns=Qn=null,o.updateQueue!=null){var D=o.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}z.H=Q1,D=u(m,_)}while(nc);return D}function QS(){var o=z.H,u=o.useState()[0];return u=typeof u.then=="function"?zr(u):u,o=o.useState()[0],(Qn!==null?Qn.memoizedState:null)!==o&&(ln.flags|=1024),u}function z0(){var o=us!==0;return us=0,o}function gp(o,u,m){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~m}function G0(o){if(mp){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}mp=!1}ml=0,ns=Qn=ln=null,nc=!1,gr=us=0,Ps=null}function sa(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ns===null?ln.memoizedState=ns=o:ns=ns.next=o,ns}function is(){if(Qn===null){var o=ln.alternate;o=o!==null?o.memoizedState:null}else o=Qn.next;var u=ns===null?ln.memoizedState:ns.next;if(u!==null)ns=u,Qn=o;else{if(o===null)throw ln.alternate===null?Error(n(467)):Error(n(310));Qn=o,o={memoizedState:Qn.memoizedState,baseState:Qn.baseState,baseQueue:Qn.baseQueue,queue:Qn.queue,next:null},ns===null?ln.memoizedState=ns=o:ns=ns.next=o}return ns}function ic(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zr(o){var u=gr;return gr+=1,Ps===null&&(Ps=[]),o=dp(Ps,o,u),u=ln,(ns===null?u.memoizedState:ns.next)===null&&(u=u.alternate,z.H=u===null||u.memoizedState===null?bp:eg),o}function vp(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return zr(o);if(o.$$typeof===w)return Li(o)}throw Error(n(438,String(o)))}function H0(o){var u=null,m=ln.updateQueue;if(m!==null&&(u=m.memoCache),u==null){var _=ln.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(u={data:_.data.map(function(T){return T.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),m===null&&(m=ic(),ln.updateQueue=m),m.memoCache=u,m=u.data[u.index],m===void 0)for(m=u.data[u.index]=Array(o),_=0;_<o;_++)m[_]=L;return u.index++,m}function vl(o,u){return typeof u=="function"?u(o):u}function sc(o){var u=is();return V0(u,Qn,o)}function V0(o,u,m){var _=o.queue;if(_===null)throw Error(n(311));_.lastRenderedReducer=m;var T=o.baseQueue,D=_.pending;if(D!==null){if(T!==null){var j=T.next;T.next=D.next,D.next=j}u.baseQueue=T=D,_.pending=null}if(D=o.baseState,T===null)o.memoizedState=D;else{u=T.next;var ie=j=null,_e=null,Xe=u,ct=!1;do{var dt=Xe.lane&-536870913;if(dt!==Xe.lane?(It&dt)===dt:(ml&dt)===dt){var qe=Xe.revertLane;if(qe===0)_e!==null&&(_e=_e.next={lane:0,revertLane:0,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),dt===on&&(ct=!0);else if((ml&qe)===qe){Xe=Xe.next,qe===on&&(ct=!0);continue}else dt={lane:0,revertLane:Xe.revertLane,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},_e===null?(ie=_e=dt,j=D):_e=_e.next=dt,ln.lanes|=qe,Yr|=qe;dt=Xe.action,ia&&m(D,dt),D=Xe.hasEagerState?Xe.eagerState:m(D,dt)}else qe={lane:dt,revertLane:Xe.revertLane,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},_e===null?(ie=_e=qe,j=D):_e=_e.next=qe,ln.lanes|=dt,Yr|=dt;Xe=Xe.next}while(Xe!==null&&Xe!==u);if(_e===null?j=D:_e.next=ie,!xa(D,o.memoizedState)&&(As=!0,ct&&(m=Vu,m!==null)))throw m;o.memoizedState=D,o.baseState=j,o.baseQueue=_e,_.lastRenderedState=D}return T===null&&(_.lanes=0),[o.memoizedState,_.dispatch]}function k0(o){var u=is(),m=u.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=o;var _=m.dispatch,T=m.pending,D=u.memoizedState;if(T!==null){m.pending=null;var j=T=T.next;do D=o(D,j.action),j=j.next;while(j!==T);xa(D,u.memoizedState)||(As=!0),u.memoizedState=D,u.baseQueue===null&&(u.baseState=D),m.lastRenderedState=D}return[D,_]}function C1(o,u,m){var _=ln,T=is(),D=Vn;if(D){if(m===void 0)throw Error(n(407));m=m()}else m=u();var j=!xa((Qn||T).memoizedState,m);j&&(T.memoizedState=m,As=!0),T=T.queue;var ie=R1.bind(null,_,T,o);if(Ju(2048,8,ie,[o]),T.getSnapshot!==u||j||ns!==null&&ns.memoizedState.tag&1){if(_.flags|=2048,Ku(9,Ch(),w1.bind(null,_,T,m,u),null),sn===null)throw Error(n(349));D||(ml&124)!==0||qu(_,u,m)}return m}function qu(o,u,m){o.flags|=16384,o={getSnapshot:u,value:m},u=ln.updateQueue,u===null?(u=ic(),ln.updateQueue=u,u.stores=[o]):(m=u.stores,m===null?u.stores=[o]:m.push(o))}function w1(o,u,m,_){u.value=m,u.getSnapshot=_,D1(u)&&B1(o)}function R1(o,u,m){return m(function(){D1(u)&&B1(o)})}function D1(o){var u=o.getSnapshot;o=o.value;try{var m=u();return!xa(o,m)}catch{return!0}}function B1(o){var u=cl(o,2);u!==null&&oa(u,o,2)}function X0(o){var u=sa();if(typeof o=="function"){var m=o;if(o=m(),ia){Me(!0);try{m()}finally{Me(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:o},u}function U1(o,u,m,_){return o.baseState=m,V0(o,Qn,typeof _=="function"?_:vl)}function $S(o,u,m,_,T){if(Mp(o))throw Error(n(485));if(o=u.action,o!==null){var D={payload:T,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){D.listeners.push(j)}};z.T!==null?m(!0):D.isTransition=!1,_(D),m=u.pending,m===null?(D.next=u.pending=D,L1(u,D)):(D.next=m.next,u.pending=m.next=D)}}function L1(o,u){var m=u.action,_=u.payload,T=o.state;if(u.isTransition){var D=z.T,j={};z.T=j;try{var ie=m(T,_),_e=z.S;_e!==null&&_e(j,ie),O1(o,u,ie)}catch(Xe){j0(o,u,Xe)}finally{z.T=D}}else try{D=m(T,_),O1(o,u,D)}catch(Xe){j0(o,u,Xe)}}function O1(o,u,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(_){N1(o,u,_)},function(_){return j0(o,u,_)}):N1(o,u,m)}function N1(o,u,m){u.status="fulfilled",u.value=m,P1(u),o.state=m,u=o.pending,u!==null&&(m=u.next,m===u?o.pending=null:(m=m.next,u.next=m,L1(o,m)))}function j0(o,u,m){var _=o.pending;if(o.pending=null,_!==null){_=_.next;do u.status="rejected",u.reason=m,P1(u),u=u.next;while(u!==_)}o.action=null}function P1(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function Y0(o,u){return u}function I1(o,u){if(Vn){var m=sn.formState;if(m!==null){e:{var _=ln;if(Vn){if(wi){t:{for(var T=wi,D=Ha;T.nodeType!==8;){if(!D){T=null;break t}if(T=bl(T.nextSibling),T===null){T=null;break t}}D=T.data,T=D==="F!"||D==="F"?T:null}if(T){wi=bl(T.nextSibling),_=T.data==="F!";break e}}Ql(_)}_=!1}_&&(u=m[0])}}return m=sa(),m.memoizedState=m.baseState=u,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Y0,lastRenderedState:u},m.queue=_,m=J1.bind(null,ln,_),_.dispatch=m,_=X0(!1),D=Ap.bind(null,ln,!1,_.queue),_=sa(),T={state:u,dispatch:null,action:o,pending:null},_.queue=T,m=$S.bind(null,ln,T,D,m),T.dispatch=m,_.memoizedState=o,[u,m,!1]}function F1(o){var u=is();return z1(u,Qn,o)}function z1(o,u,m){if(u=V0(o,u,Y0)[0],o=sc(vl)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var _=zr(u)}catch(j){throw j===Mh?Fr:j}else _=u;u=is();var T=u.queue,D=T.dispatch;return m!==u.memoizedState&&(ln.flags|=2048,Ku(9,Ch(),eA.bind(null,T,m),null)),[_,D,o]}function eA(o,u){o.action=u}function G1(o){var u=is(),m=Qn;if(m!==null)return z1(u,m,o);is(),u=u.memoizedState,m=is();var _=m.queue.dispatch;return m.memoizedState=o,[u,_,!1]}function Ku(o,u,m,_){return o={tag:o,create:m,deps:_,inst:u,next:null},u=ln.updateQueue,u===null&&(u=ic(),ln.updateQueue=u),m=u.lastEffect,m===null?u.lastEffect=o.next=o:(_=m.next,m.next=o,o.next=_,u.lastEffect=o),o}function Ch(){return{destroy:void 0,resource:void 0}}function W0(){return is().memoizedState}function yp(o,u,m,_){var T=sa();_=_===void 0?null:_,ln.flags|=o,T.memoizedState=Ku(1|u,Ch(),m,_)}function Ju(o,u,m,_){var T=is();_=_===void 0?null:_;var D=T.memoizedState.inst;Qn!==null&&_!==null&&Ys(_,Qn.memoizedState.deps)?T.memoizedState=Ku(u,D,m,_):(ln.flags|=o,T.memoizedState=Ku(1|u,D,m,_))}function q0(o,u){yp(8390656,8,o,u)}function K0(o,u){Ju(2048,8,o,u)}function _p(o,u){return Ju(4,2,o,u)}function xp(o,u){return Ju(4,4,o,u)}function H1(o,u){if(typeof u=="function"){o=o();var m=u(o);return function(){typeof m=="function"?m():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function V1(o,u,m){m=m!=null?m.concat([o]):null,Ju(4,4,H1.bind(null,u,o),m)}function J0(){}function k1(o,u){var m=is();u=u===void 0?null:u;var _=m.memoizedState;return u!==null&&Ys(u,_[1])?_[0]:(m.memoizedState=[o,u],o)}function Z0(o,u){var m=is();u=u===void 0?null:u;var _=m.memoizedState;if(u!==null&&Ys(u,_[1]))return _[0];if(_=o(),ia){Me(!0);try{o()}finally{Me(!1)}}return m.memoizedState=[_,u],_}function Sp(o,u,m){return m===void 0||(ml&1073741824)!==0?o.memoizedState=u:(o.memoizedState=m,o=Np(),ln.lanes|=o,Yr|=o,m)}function X1(o,u,m,_){return xa(m,u)?m:Wu.current!==null?(o=Sp(o,m,_),xa(o,u)||(As=!0),o):(ml&42)===0?(As=!0,o.memoizedState=m):(o=Np(),ln.lanes|=o,Yr|=o,u)}function j1(o,u,m,_,T){var D=q.p;q.p=D!==0&&8>D?D:8;var j=z.T,ie={};z.T=ie,Ap(o,!1,u,m);try{var _e=T(),Xe=z.S;if(Xe!==null&&Xe(ie,_e),_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var ct=ZS(_e,_);wh(o,u,ct,Pi(o))}else wh(o,u,_,Pi(o))}catch(dt){wh(o,u,{then:function(){},status:"rejected",reason:dt},Pi())}finally{q.p=D,z.T=j}}function tA(){}function Q0(o,u,m,_){if(o.tag!==5)throw Error(n(476));var T=Y1(o).queue;j1(o,T,u,Q,m===null?tA:function(){return W1(o),m(_)})}function Y1(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:Q},next:null};var m={};return u.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:m},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function W1(o){var u=Y1(o).next.queue;wh(o,u,{},Pi())}function $0(){return Li(hg)}function q1(){return is().memoizedState}function K1(){return is().memoizedState}function nA(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var m=Pi();o=yo(m);var _=pl(u,o,m);_!==null&&(oa(_,u,m),Vc(_,u,m)),u={cache:cp()},o.payload=u;return}u=u.return}}function iA(o,u,m){var _=Pi();m={lane:_,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},Mp(o)?Z1(u,m):(m=sp(o,u,m,_),m!==null&&(oa(m,o,_),ka(m,u,_)))}function J1(o,u,m){var _=Pi();wh(o,u,m,_)}function wh(o,u,m,_){var T={lane:_,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(Mp(o))Z1(u,T);else{var D=o.alternate;if(o.lanes===0&&(D===null||D.lanes===0)&&(D=u.lastRenderedReducer,D!==null))try{var j=u.lastRenderedState,ie=D(j,m);if(T.hasEagerState=!0,T.eagerState=ie,xa(ie,j))return ql(o,u,T,0),sn===null&&dh(),!1}catch{}finally{}if(m=sp(o,u,T,_),m!==null)return oa(m,o,_),ka(m,u,_),!0}return!1}function Ap(o,u,m,_){if(_={lane:2,revertLane:rA(),action:_,hasEagerState:!1,eagerState:null,next:null},Mp(o)){if(u)throw Error(n(479))}else u=sp(o,m,_,2),u!==null&&oa(u,o,2)}function Mp(o){var u=o.alternate;return o===ln||u!==null&&u===ln}function Z1(o,u){nc=mp=!0;var m=o.pending;m===null?u.next=u:(u.next=m.next,m.next=u),o.pending=u}function ka(o,u,m){if((m&4194048)!==0){var _=u.lanes;_&=o.pendingLanes,m|=_,u.lanes=m,pt(o,m)}}var Rh={readContext:Li,use:vp,useCallback:ji,useContext:ji,useEffect:ji,useImperativeHandle:ji,useLayoutEffect:ji,useInsertionEffect:ji,useMemo:ji,useReducer:ji,useRef:ji,useState:ji,useDebugValue:ji,useDeferredValue:ji,useTransition:ji,useSyncExternalStore:ji,useId:ji,useHostTransitionStatus:ji,useFormState:ji,useActionState:ji,useOptimistic:ji,useMemoCache:ji,useCacheRefresh:ji},bp={readContext:Li,use:vp,useCallback:function(o,u){return sa().memoizedState=[o,u===void 0?null:u],o},useContext:Li,useEffect:q0,useImperativeHandle:function(o,u,m){m=m!=null?m.concat([o]):null,yp(4194308,4,H1.bind(null,u,o),m)},useLayoutEffect:function(o,u){return yp(4194308,4,o,u)},useInsertionEffect:function(o,u){yp(4,2,o,u)},useMemo:function(o,u){var m=sa();u=u===void 0?null:u;var _=o();if(ia){Me(!0);try{o()}finally{Me(!1)}}return m.memoizedState=[_,u],_},useReducer:function(o,u,m){var _=sa();if(m!==void 0){var T=m(u);if(ia){Me(!0);try{m(u)}finally{Me(!1)}}}else T=u;return _.memoizedState=_.baseState=T,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:T},_.queue=o,o=o.dispatch=iA.bind(null,ln,o),[_.memoizedState,o]},useRef:function(o){var u=sa();return o={current:o},u.memoizedState=o},useState:function(o){o=X0(o);var u=o.queue,m=J1.bind(null,ln,u);return u.dispatch=m,[o.memoizedState,m]},useDebugValue:J0,useDeferredValue:function(o,u){var m=sa();return Sp(m,o,u)},useTransition:function(){var o=X0(!1);return o=j1.bind(null,ln,o.queue,!0,!1),sa().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,m){var _=ln,T=sa();if(Vn){if(m===void 0)throw Error(n(407));m=m()}else{if(m=u(),sn===null)throw Error(n(349));(It&124)!==0||qu(_,u,m)}T.memoizedState=m;var D={value:m,getSnapshot:u};return T.queue=D,q0(R1.bind(null,_,D,o),[o]),_.flags|=2048,Ku(9,Ch(),w1.bind(null,_,D,m,u),null),m},useId:function(){var o=sa(),u=sn.identifierPrefix;if(Vn){var m=go,_=mo;m=(_&~(1<<32-$e(_)-1)).toString(32)+m,u=""+u+"R"+m,m=us++,0<m&&(u+="H"+m.toString(32)),u+=""}else m=b1++,u=""+u+"r"+m.toString(32)+"";return o.memoizedState=u},useHostTransitionStatus:$0,useFormState:I1,useActionState:I1,useOptimistic:function(o){var u=sa();u.memoizedState=u.baseState=o;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=m,u=Ap.bind(null,ln,!0,m),m.dispatch=u,[o,u]},useMemoCache:H0,useCacheRefresh:function(){return sa().memoizedState=nA.bind(null,ln)}},eg={readContext:Li,use:vp,useCallback:k1,useContext:Li,useEffect:K0,useImperativeHandle:V1,useInsertionEffect:_p,useLayoutEffect:xp,useMemo:Z0,useReducer:sc,useRef:W0,useState:function(){return sc(vl)},useDebugValue:J0,useDeferredValue:function(o,u){var m=is();return X1(m,Qn.memoizedState,o,u)},useTransition:function(){var o=sc(vl)[0],u=is().memoizedState;return[typeof o=="boolean"?o:zr(o),u]},useSyncExternalStore:C1,useId:q1,useHostTransitionStatus:$0,useFormState:F1,useActionState:F1,useOptimistic:function(o,u){var m=is();return U1(m,Qn,o,u)},useMemoCache:H0,useCacheRefresh:K1},Q1={readContext:Li,use:vp,useCallback:k1,useContext:Li,useEffect:K0,useImperativeHandle:V1,useInsertionEffect:_p,useLayoutEffect:xp,useMemo:Z0,useReducer:k0,useRef:W0,useState:function(){return k0(vl)},useDebugValue:J0,useDeferredValue:function(o,u){var m=is();return Qn===null?Sp(m,o,u):X1(m,Qn.memoizedState,o,u)},useTransition:function(){var o=k0(vl)[0],u=is().memoizedState;return[typeof o=="boolean"?o:zr(o),u]},useSyncExternalStore:C1,useId:q1,useHostTransitionStatus:$0,useFormState:G1,useActionState:G1,useOptimistic:function(o,u){var m=is();return Qn!==null?U1(m,Qn,o,u):(m.baseState=o,[o,m.queue.dispatch])},useMemoCache:H0,useCacheRefresh:K1},kc=null,Dh=0;function Bh(o){var u=Dh;return Dh+=1,kc===null&&(kc=[]),dp(kc,o,u)}function Zu(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Tp(o,u){throw u.$$typeof===g?Error(n(525)):(o=Object.prototype.toString.call(u),Error(n(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function $1(o){var u=o._init;return u(o._payload)}function ey(o){function u(Ne,we){if(o){var ke=Ne.deletions;ke===null?(Ne.deletions=[we],Ne.flags|=16):ke.push(we)}}function m(Ne,we){if(!o)return null;for(;we!==null;)u(Ne,we),we=we.sibling;return null}function _(Ne){for(var we=new Map;Ne!==null;)Ne.key!==null?we.set(Ne.key,Ne):we.set(Ne.index,Ne),Ne=Ne.sibling;return we}function T(Ne,we){return Ne=Xi(Ne,we),Ne.index=0,Ne.sibling=null,Ne}function D(Ne,we,ke){return Ne.index=ke,o?(ke=Ne.alternate,ke!==null?(ke=ke.index,ke<we?(Ne.flags|=67108866,we):ke):(Ne.flags|=67108866,we)):(Ne.flags|=1048576,we)}function j(Ne){return o&&Ne.alternate===null&&(Ne.flags|=67108866),Ne}function ie(Ne,we,ke,ft){return we===null||we.tag!==6?(we=mh(ke,Ne.mode,ft),we.return=Ne,we):(we=T(we,ke),we.return=Ne,we)}function _e(Ne,we,ke,ft){var Lt=ke.type;return Lt===S?ct(Ne,we,ke.props.children,ft,ke.key):we!==null&&(we.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===P&&$1(Lt)===we.type)?(we=T(we,ke.props),Zu(we,ke),we.return=Ne,we):(we=Ss(ke.type,ke.key,ke.props,null,Ne.mode,ft),Zu(we,ke),we.return=Ne,we)}function Xe(Ne,we,ke,ft){return we===null||we.tag!==4||we.stateNode.containerInfo!==ke.containerInfo||we.stateNode.implementation!==ke.implementation?(we=ap(ke,Ne.mode,ft),we.return=Ne,we):(we=T(we,ke.children||[]),we.return=Ne,we)}function ct(Ne,we,ke,ft,Lt){return we===null||we.tag!==7?(we=Jl(ke,Ne.mode,ft,Lt),we.return=Ne,we):(we=T(we,ke),we.return=Ne,we)}function dt(Ne,we,ke){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return we=mh(""+we,Ne.mode,ke),we.return=Ne,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case v:return ke=Ss(we.type,we.key,we.props,null,Ne.mode,ke),Zu(ke,we),ke.return=Ne,ke;case y:return we=ap(we,Ne.mode,ke),we.return=Ne,we;case P:var ft=we._init;return we=ft(we._payload),dt(Ne,we,ke)}if(ce(we)||X(we))return we=Jl(we,Ne.mode,ke,null),we.return=Ne,we;if(typeof we.then=="function")return dt(Ne,Bh(we),ke);if(we.$$typeof===w)return dt(Ne,_h(Ne,we),ke);Tp(Ne,we)}return null}function qe(Ne,we,ke,ft){var Lt=we!==null?we.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return Lt!==null?null:ie(Ne,we,""+ke,ft);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case v:return ke.key===Lt?_e(Ne,we,ke,ft):null;case y:return ke.key===Lt?Xe(Ne,we,ke,ft):null;case P:return Lt=ke._init,ke=Lt(ke._payload),qe(Ne,we,ke,ft)}if(ce(ke)||X(ke))return Lt!==null?null:ct(Ne,we,ke,ft,null);if(typeof ke.then=="function")return qe(Ne,we,Bh(ke),ft);if(ke.$$typeof===w)return qe(Ne,we,_h(Ne,ke),ft);Tp(Ne,ke)}return null}function Je(Ne,we,ke,ft,Lt){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return Ne=Ne.get(ke)||null,ie(we,Ne,""+ft,Lt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case v:return Ne=Ne.get(ft.key===null?ke:ft.key)||null,_e(we,Ne,ft,Lt);case y:return Ne=Ne.get(ft.key===null?ke:ft.key)||null,Xe(we,Ne,ft,Lt);case P:var An=ft._init;return ft=An(ft._payload),Je(Ne,we,ke,ft,Lt)}if(ce(ft)||X(ft))return Ne=Ne.get(ke)||null,ct(we,Ne,ft,Lt,null);if(typeof ft.then=="function")return Je(Ne,we,ke,Bh(ft),Lt);if(ft.$$typeof===w)return Je(Ne,we,ke,_h(we,ft),Lt);Tp(we,ft)}return null}function Zt(Ne,we,ke,ft){for(var Lt=null,An=null,Nt=we,jt=we=0,Ks=null;Nt!==null&&jt<ke.length;jt++){Nt.index>jt?(Ks=Nt,Nt=null):Ks=Nt.sibling;var Kn=qe(Ne,Nt,ke[jt],ft);if(Kn===null){Nt===null&&(Nt=Ks);break}o&&Nt&&Kn.alternate===null&&u(Ne,Nt),we=D(Kn,we,jt),An===null?Lt=Kn:An.sibling=Kn,An=Kn,Nt=Ks}if(jt===ke.length)return m(Ne,Nt),Vn&&ul(Ne,jt),Lt;if(Nt===null){for(;jt<ke.length;jt++)Nt=dt(Ne,ke[jt],ft),Nt!==null&&(we=D(Nt,we,jt),An===null?Lt=Nt:An.sibling=Nt,An=Nt);return Vn&&ul(Ne,jt),Lt}for(Nt=_(Nt);jt<ke.length;jt++)Ks=Je(Nt,Ne,jt,ke[jt],ft),Ks!==null&&(o&&Ks.alternate!==null&&Nt.delete(Ks.key===null?jt:Ks.key),we=D(Ks,we,jt),An===null?Lt=Ks:An.sibling=Ks,An=Ks);return o&&Nt.forEach(function(mf){return u(Ne,mf)}),Vn&&ul(Ne,jt),Lt}function kt(Ne,we,ke,ft){if(ke==null)throw Error(n(151));for(var Lt=null,An=null,Nt=we,jt=we=0,Ks=null,Kn=ke.next();Nt!==null&&!Kn.done;jt++,Kn=ke.next()){Nt.index>jt?(Ks=Nt,Nt=null):Ks=Nt.sibling;var mf=qe(Ne,Nt,Kn.value,ft);if(mf===null){Nt===null&&(Nt=Ks);break}o&&Nt&&mf.alternate===null&&u(Ne,Nt),we=D(mf,we,jt),An===null?Lt=mf:An.sibling=mf,An=mf,Nt=Ks}if(Kn.done)return m(Ne,Nt),Vn&&ul(Ne,jt),Lt;if(Nt===null){for(;!Kn.done;jt++,Kn=ke.next())Kn=dt(Ne,Kn.value,ft),Kn!==null&&(we=D(Kn,we,jt),An===null?Lt=Kn:An.sibling=Kn,An=Kn);return Vn&&ul(Ne,jt),Lt}for(Nt=_(Nt);!Kn.done;jt++,Kn=ke.next())Kn=Je(Nt,Ne,jt,Kn.value,ft),Kn!==null&&(o&&Kn.alternate!==null&&Nt.delete(Kn.key===null?jt:Kn.key),we=D(Kn,we,jt),An===null?Lt=Kn:An.sibling=Kn,An=Kn);return o&&Nt.forEach(function(GN){return u(Ne,GN)}),Vn&&ul(Ne,jt),Lt}function mi(Ne,we,ke,ft){if(typeof ke=="object"&&ke!==null&&ke.type===S&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case v:e:{for(var Lt=ke.key;we!==null;){if(we.key===Lt){if(Lt=ke.type,Lt===S){if(we.tag===7){m(Ne,we.sibling),ft=T(we,ke.props.children),ft.return=Ne,Ne=ft;break e}}else if(we.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===P&&$1(Lt)===we.type){m(Ne,we.sibling),ft=T(we,ke.props),Zu(ft,ke),ft.return=Ne,Ne=ft;break e}m(Ne,we);break}else u(Ne,we);we=we.sibling}ke.type===S?(ft=Jl(ke.props.children,Ne.mode,ft,ke.key),ft.return=Ne,Ne=ft):(ft=Ss(ke.type,ke.key,ke.props,null,Ne.mode,ft),Zu(ft,ke),ft.return=Ne,Ne=ft)}return j(Ne);case y:e:{for(Lt=ke.key;we!==null;){if(we.key===Lt)if(we.tag===4&&we.stateNode.containerInfo===ke.containerInfo&&we.stateNode.implementation===ke.implementation){m(Ne,we.sibling),ft=T(we,ke.children||[]),ft.return=Ne,Ne=ft;break e}else{m(Ne,we);break}else u(Ne,we);we=we.sibling}ft=ap(ke,Ne.mode,ft),ft.return=Ne,Ne=ft}return j(Ne);case P:return Lt=ke._init,ke=Lt(ke._payload),mi(Ne,we,ke,ft)}if(ce(ke))return Zt(Ne,we,ke,ft);if(X(ke)){if(Lt=X(ke),typeof Lt!="function")throw Error(n(150));return ke=Lt.call(ke),kt(Ne,we,ke,ft)}if(typeof ke.then=="function")return mi(Ne,we,Bh(ke),ft);if(ke.$$typeof===w)return mi(Ne,we,_h(Ne,ke),ft);Tp(Ne,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,we!==null&&we.tag===6?(m(Ne,we.sibling),ft=T(we,ke),ft.return=Ne,Ne=ft):(m(Ne,we),ft=mh(ke,Ne.mode,ft),ft.return=Ne,Ne=ft),j(Ne)):m(Ne,we)}return function(Ne,we,ke,ft){try{Dh=0;var Lt=mi(Ne,we,ke,ft);return kc=null,Lt}catch(Nt){if(Nt===Mh||Nt===Fr)throw Nt;var An=Ma(29,Nt,null,Ne.mode);return An.lanes=ft,An.return=Ne,An}finally{}}}var Xc=ey(!0),ty=ey(!1),si=G(null),Gr=null;function ac(o){var u=o.alternate;se(Yi,Yi.current&1),se(si,o),Gr===null&&(u===null||Wu.current!==null||u.memoizedState!==null)&&(Gr=o)}function ny(o){if(o.tag===22){if(se(Yi,Yi.current),se(si,o),Gr===null){var u=o.alternate;u!==null&&u.memoizedState!==null&&(Gr=o)}}else rc()}function rc(){se(Yi,Yi.current),se(si,si.current)}function _o(o){K(si),Gr===o&&(Gr=null),K(Yi)}var Yi=G(0);function yl(o){for(var u=o;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||yA(m)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function oc(o,u,m,_){u=o.memoizedState,m=m(_,u),m=m==null?u:d({},u,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var aa={enqueueSetState:function(o,u,m){o=o._reactInternals;var _=Pi(),T=yo(_);T.payload=u,m!=null&&(T.callback=m),u=pl(o,T,_),u!==null&&(oa(u,o,_),Vc(u,o,_))},enqueueReplaceState:function(o,u,m){o=o._reactInternals;var _=Pi(),T=yo(_);T.tag=1,T.payload=u,m!=null&&(T.callback=m),u=pl(o,T,_),u!==null&&(oa(u,o,_),Vc(u,o,_))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var m=Pi(),_=yo(m);_.tag=2,u!=null&&(_.callback=u),u=pl(o,_,m),u!==null&&(oa(u,o,m),Vc(u,o,m))}};function iy(o,u,m,_,T,D,j){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(_,D,j):u.prototype&&u.prototype.isPureReactComponent?!Pr(m,_)||!Pr(T,D):!0}function sy(o,u,m,_){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,_),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,_),u.state!==o&&aa.enqueueReplaceState(u,u.state,null)}function xo(o,u){var m=u;if("ref"in u){m={};for(var _ in u)_!=="ref"&&(m[_]=u[_])}if(o=o.defaultProps){m===u&&(m=d({},m));for(var T in o)m[T]===void 0&&(m[T]=o[T])}return m}var jc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function Uh(o){jc(o)}function Ep(o){console.error(o)}function ay(o){jc(o)}function Cp(o,u){try{var m=o.onUncaughtError;m(u.value,{componentStack:u.stack})}catch(_){setTimeout(function(){throw _})}}function vr(o,u,m){try{var _=o.onCaughtError;_(m.value,{componentStack:m.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(T){setTimeout(function(){throw T})}}function wp(o,u,m){return m=yo(m),m.tag=3,m.payload={element:null},m.callback=function(){Cp(o,u)},m}function ry(o){return o=yo(o),o.tag=3,o}function Rp(o,u,m,_){var T=m.type.getDerivedStateFromError;if(typeof T=="function"){var D=_.value;o.payload=function(){return T(D)},o.callback=function(){vr(u,m,_)}}var j=m.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(o.callback=function(){vr(u,m,_),typeof T!="function"&&(Za===null?Za=new Set([this]):Za.add(this));var ie=_.stack;this.componentDidCatch(_.value,{componentStack:ie!==null?ie:""})})}function sA(o,u,m,_,T){if(m.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(u=m.alternate,u!==null&&dr(u,m,T,!0),m=si.current,m!==null){switch(m.tag){case 13:return Gr===null?h():m.alternate===null&&yi===0&&(yi=3),m.flags&=-257,m.flags|=65536,m.lanes=T,_===bh?m.flags|=16384:(u=m.updateQueue,u===null?m.updateQueue=new Set([_]):u.add(_),Ze(o,_,T)),!1;case 22:return m.flags|=65536,_===bh?m.flags|=16384:(u=m.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([_])},m.updateQueue=u):(m=u.retryQueue,m===null?u.retryQueue=new Set([_]):m.add(_)),Ze(o,_,T)),!1}throw Error(n(435,m.tag))}return Ze(o,_,T),h(),!1}if(Vn)return u=si.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=T,_!==op&&(o=Error(n(422),{cause:_}),Hc(Os(o,m)))):(_!==op&&(u=Error(n(423),{cause:_}),Hc(Os(u,m))),o=o.current.alternate,o.flags|=65536,T&=-T,o.lanes|=T,_=Os(_,m),T=wp(o.stateNode,_,T),Xu(o,T),yi!==4&&(yi=2)),!1;var D=Error(n(520),{cause:_});if(D=Os(D,m),qn===null?qn=[D]:qn.push(D),yi!==4&&(yi=2),u===null)return!0;_=Os(_,m),m=u;do{switch(m.tag){case 3:return m.flags|=65536,o=T&-T,m.lanes|=o,o=wp(m.stateNode,_,o),Xu(m,o),!1;case 1:if(u=m.type,D=m.stateNode,(m.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Za===null||!Za.has(D))))return m.flags|=65536,T&=-T,m.lanes|=T,T=ry(T),Rp(T,o,m,_),Xu(m,T),!1}m=m.return}while(m!==null);return!1}var oy=Error(n(461)),As=!1;function Wi(o,u,m,_){u.child=o===null?ty(u,null,m,_):Xc(u,o.child,m,_)}function Ta(o,u,m,_,T){m=m.render;var D=u.ref;if("ref"in _){var j={};for(var ie in _)ie!=="ref"&&(j[ie]=_[ie])}else j=_;return vo(u),_=gl(o,u,m,j,D,T),ie=z0(),o!==null&&!As?(gp(o,u,T),Ms(o,u,T)):(Vn&&ie&&w0(u),u.flags|=1,Wi(o,u,_,T),u.child)}function Ea(o,u,m,_,T){if(o===null){var D=m.type;return typeof D=="function"&&!ph(D)&&D.defaultProps===void 0&&m.compare===null?(u.tag=15,u.type=D,tg(o,u,D,_,T)):(o=Ss(m.type,null,_,u,u.mode,T),o.ref=u.ref,o.return=u,u.child=o)}if(D=o.child,!Lh(o,T)){var j=D.memoizedProps;if(m=m.compare,m=m!==null?m:Pr,m(j,_)&&o.ref===u.ref)return Ms(o,u,T)}return u.flags|=1,o=Xi(D,_),o.ref=u.ref,o.return=u,u.child=o}function tg(o,u,m,_,T){if(o!==null){var D=o.memoizedProps;if(Pr(D,_)&&o.ref===u.ref)if(As=!1,u.pendingProps=_=D,Lh(o,T))(o.flags&131072)!==0&&(As=!0);else return u.lanes=o.lanes,Ms(o,u,T)}return Qu(o,u,m,_,T)}function Yc(o,u,m){var _=u.pendingProps,T=_.children,D=o!==null?o.memoizedState:null;if(_.mode==="hidden"){if((u.flags&128)!==0){if(_=D!==null?D.baseLanes|m:m,o!==null){for(T=u.child=o.child,D=0;T!==null;)D=D|T.lanes|T.childLanes,T=T.sibling;u.childLanes=D&~_}else u.childLanes=0,u.child=null;return Wc(o,u,_,m)}if((m&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Ah(u,D!==null?D.cachePool:null),D!==null?M1(u,D):F0(),ny(u);else return u.lanes=u.childLanes=536870912,Wc(o,u,D!==null?D.baseLanes|m:m,m)}else D!==null?(Ah(u,D.cachePool),M1(u,D),rc(),u.memoizedState=null):(o!==null&&Ah(u,null),F0(),rc());return Wi(o,u,T,m),u.child}function Wc(o,u,m,_){var T=tc();return T=T===null?null:{parent:ts._currentValue,pool:T},u.memoizedState={baseLanes:m,cachePool:T},o!==null&&Ah(u,null),F0(),ny(u),o!==null&&dr(o,u,_,!0),null}function qc(o,u){var m=u.ref;if(m===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(n(284));(o===null||o.ref!==m)&&(u.flags|=4194816)}}function Qu(o,u,m,_,T){return vo(u),m=gl(o,u,m,_,void 0,T),_=z0(),o!==null&&!As?(gp(o,u,T),Ms(o,u,T)):(Vn&&_&&w0(u),u.flags|=1,Wi(o,u,m,T),u.child)}function Xa(o,u,m,_,T,D){return vo(u),u.updateQueue=null,m=E1(u,_,m,T),T1(o),_=z0(),o!==null&&!As?(gp(o,u,D),Ms(o,u,D)):(Vn&&_&&w0(u),u.flags|=1,Wi(o,u,m,D),u.child)}function ja(o,u,m,_,T){if(vo(u),u.stateNode===null){var D=Kl,j=m.contextType;typeof j=="object"&&j!==null&&(D=Li(j)),D=new m(_,D),u.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=aa,u.stateNode=D,D._reactInternals=u,D=u.stateNode,D.props=_,D.state=u.memoizedState,D.refs={},P0(u),j=m.contextType,D.context=typeof j=="object"&&j!==null?Li(j):Kl,D.state=u.memoizedState,j=m.getDerivedStateFromProps,typeof j=="function"&&(oc(u,m,j,_),D.state=u.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(j=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),j!==D.state&&aa.enqueueReplaceState(D,D.state,null),ju(u,_,D,T),Th(),D.state=u.memoizedState),typeof D.componentDidMount=="function"&&(u.flags|=4194308),_=!0}else if(o===null){D=u.stateNode;var ie=u.memoizedProps,_e=xo(m,ie);D.props=_e;var Xe=D.context,ct=m.contextType;j=Kl,typeof ct=="object"&&ct!==null&&(j=Li(ct));var dt=m.getDerivedStateFromProps;ct=typeof dt=="function"||typeof D.getSnapshotBeforeUpdate=="function",ie=u.pendingProps!==ie,ct||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(ie||Xe!==j)&&sy(u,D,_,j),dl=!1;var qe=u.memoizedState;D.state=qe,ju(u,_,D,T),Th(),Xe=u.memoizedState,ie||qe!==Xe||dl?(typeof dt=="function"&&(oc(u,m,dt,_),Xe=u.memoizedState),(_e=dl||iy(u,m,_e,_,qe,Xe,j))?(ct||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(u.flags|=4194308)):(typeof D.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=_,u.memoizedState=Xe),D.props=_,D.state=Xe,D.context=j,_=_e):(typeof D.componentDidMount=="function"&&(u.flags|=4194308),_=!1)}else{D=u.stateNode,Wt(o,u),j=u.memoizedProps,ct=xo(m,j),D.props=ct,dt=u.pendingProps,qe=D.context,Xe=m.contextType,_e=Kl,typeof Xe=="object"&&Xe!==null&&(_e=Li(Xe)),ie=m.getDerivedStateFromProps,(Xe=typeof ie=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(j!==dt||qe!==_e)&&sy(u,D,_,_e),dl=!1,qe=u.memoizedState,D.state=qe,ju(u,_,D,T),Th();var Je=u.memoizedState;j!==dt||qe!==Je||dl||o!==null&&o.dependencies!==null&&yh(o.dependencies)?(typeof ie=="function"&&(oc(u,m,ie,_),Je=u.memoizedState),(ct=dl||iy(u,m,ct,_,qe,Je,_e)||o!==null&&o.dependencies!==null&&yh(o.dependencies))?(Xe||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(_,Je,_e),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(_,Je,_e)),typeof D.componentDidUpdate=="function"&&(u.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof D.componentDidUpdate!="function"||j===o.memoizedProps&&qe===o.memoizedState||(u.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&qe===o.memoizedState||(u.flags|=1024),u.memoizedProps=_,u.memoizedState=Je),D.props=_,D.state=Je,D.context=_e,_=ct):(typeof D.componentDidUpdate!="function"||j===o.memoizedProps&&qe===o.memoizedState||(u.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&qe===o.memoizedState||(u.flags|=1024),_=!1)}return D=_,qc(o,u),_=(u.flags&128)!==0,D||_?(D=u.stateNode,m=_&&typeof m.getDerivedStateFromError!="function"?null:D.render(),u.flags|=1,o!==null&&_?(u.child=Xc(u,o.child,null,T),u.child=Xc(u,null,m,T)):Wi(o,u,m,T),u.memoizedState=D.state,o=u.child):o=Ms(o,u,T),o}function lc(o,u,m,_){return zu(),u.flags|=256,Wi(o,u,m,_),u.child}var Hr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vr(o){return{baseLanes:o,cachePool:fp()}}function fs(o,u,m){return o=o!==null?o.childLanes&~m:0,u&&(o|=Ar),o}function $u(o,u,m){var _=u.pendingProps,T=!1,D=(u.flags&128)!==0,j;if((j=D)||(j=o!==null&&o.memoizedState===null?!1:(Yi.current&2)!==0),j&&(T=!0,u.flags&=-129),j=(u.flags&32)!==0,u.flags&=-33,o===null){if(Vn){if(T?ac(u):rc(),Vn){var ie=wi,_e;if(_e=ie){e:{for(_e=ie,ie=Ha;_e.nodeType!==8;){if(!ie){ie=null;break e}if(_e=bl(_e.nextSibling),_e===null){ie=null;break e}}ie=_e}ie!==null?(u.memoizedState={dehydrated:ie,treeContext:Zl!==null?{id:mo,overflow:go}:null,retryLane:536870912,hydrationErrors:null},_e=Ma(18,null,null,0),_e.stateNode=ie,_e.return=u,u.child=_e,na=u,wi=null,_e=!0):_e=!1}_e||Ql(u)}if(ie=u.memoizedState,ie!==null&&(ie=ie.dehydrated,ie!==null))return yA(ie)?u.lanes=32:u.lanes=536870912,null;_o(u)}return ie=_.children,_=_.fallback,T?(rc(),T=u.mode,ie=Kc({mode:"hidden",children:ie},T),_=Jl(_,T,m,null),ie.return=u,_.return=u,ie.sibling=_,u.child=ie,T=u.child,T.memoizedState=Vr(m),T.childLanes=fs(o,j,m),u.memoizedState=Hr,_):(ac(u),So(u,ie))}if(_e=o.memoizedState,_e!==null&&(ie=_e.dehydrated,ie!==null)){if(D)u.flags&256?(ac(u),u.flags&=-257,u=Is(o,u,m)):u.memoizedState!==null?(rc(),u.child=o.child,u.flags|=128,u=null):(rc(),T=_.fallback,ie=u.mode,_=Kc({mode:"visible",children:_.children},ie),T=Jl(T,ie,m,null),T.flags|=2,_.return=u,T.return=u,_.sibling=T,u.child=_,Xc(u,o.child,null,m),_=u.child,_.memoizedState=Vr(m),_.childLanes=fs(o,j,m),u.memoizedState=Hr,u=T);else if(ac(u),yA(ie)){if(j=ie.nextSibling&&ie.nextSibling.dataset,j)var Xe=j.dgst;j=Xe,_=Error(n(419)),_.stack="",_.digest=j,Hc({value:_,source:null,stack:null}),u=Is(o,u,m)}else if(As||dr(o,u,m,!1),j=(m&o.childLanes)!==0,As||j){if(j=sn,j!==null&&(_=m&-m,_=(_&42)!==0?1:vt(_),_=(_&(j.suspendedLanes|m))!==0?0:_,_!==0&&_!==_e.retryLane))throw _e.retryLane=_,cl(o,_),oa(j,o,_),oy;ie.data==="$?"||h(),u=Is(o,u,m)}else ie.data==="$?"?(u.flags|=192,u.child=o.child,u=null):(o=_e.treeContext,wi=bl(ie.nextSibling),na=u,Vn=!0,hr=null,Ha=!1,o!==null&&(Ns[Ga++]=mo,Ns[Ga++]=go,Ns[Ga++]=Zl,mo=o.id,go=o.overflow,Zl=u),u=So(u,_.children),u.flags|=4096);return u}return T?(rc(),T=_.fallback,ie=u.mode,_e=o.child,Xe=_e.sibling,_=Xi(_e,{mode:"hidden",children:_.children}),_.subtreeFlags=_e.subtreeFlags&65011712,Xe!==null?T=Xi(Xe,T):(T=Jl(T,ie,m,null),T.flags|=2),T.return=u,_.return=u,_.sibling=T,u.child=_,_=T,T=u.child,ie=o.child.memoizedState,ie===null?ie=Vr(m):(_e=ie.cachePool,_e!==null?(Xe=ts._currentValue,_e=_e.parent!==Xe?{parent:Xe,pool:Xe}:_e):_e=fp(),ie={baseLanes:ie.baseLanes|m,cachePool:_e}),T.memoizedState=ie,T.childLanes=fs(o,j,m),u.memoizedState=Hr,_):(ac(u),m=o.child,o=m.sibling,m=Xi(m,{mode:"visible",children:_.children}),m.return=u,m.sibling=null,o!==null&&(j=u.deletions,j===null?(u.deletions=[o],u.flags|=16):j.push(o)),u.child=m,u.memoizedState=null,m)}function So(o,u){return u=Kc({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function Kc(o,u){return o=Ma(22,o,null,u),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function Is(o,u,m){return Xc(u,o.child,null,m),o=So(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function Fs(o,u,m){o.lanes|=u;var _=o.alternate;_!==null&&(_.lanes|=u),U0(o.return,u,m)}function Dn(o,u,m,_,T){var D=o.memoizedState;D===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:_,tail:m,tailMode:T}:(D.isBackwards=u,D.rendering=null,D.renderingStartTime=0,D.last=_,D.tail=m,D.tailMode=T)}function yr(o,u,m){var _=u.pendingProps,T=_.revealOrder,D=_.tail;if(Wi(o,u,_.children,m),_=Yi.current,(_&2)!==0)_=_&1|2,u.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Fs(o,m,u);else if(o.tag===19)Fs(o,m,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}_&=1}switch(se(Yi,_),T){case"forwards":for(m=u.child,T=null;m!==null;)o=m.alternate,o!==null&&yl(o)===null&&(T=m),m=m.sibling;m=T,m===null?(T=u.child,u.child=null):(T=m.sibling,m.sibling=null),Dn(u,!1,T,m,D);break;case"backwards":for(m=null,T=u.child,u.child=null;T!==null;){if(o=T.alternate,o!==null&&yl(o)===null){u.child=T;break}o=T.sibling,T.sibling=m,m=T,T=o}Dn(u,!0,m,null,D);break;case"together":Dn(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ms(o,u,m){if(o!==null&&(u.dependencies=o.dependencies),Yr|=u.lanes,(m&u.childLanes)===0)if(o!==null){if(dr(o,u,m,!1),(m&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(n(153));if(u.child!==null){for(o=u.child,m=Xi(o,o.pendingProps),u.child=m,m.return=u;o.sibling!==null;)o=o.sibling,m=m.sibling=Xi(o,o.pendingProps),m.return=u;m.sibling=null}return u.child}function Lh(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&yh(o)))}function _r(o,u,m){switch(u.tag){case 3:ve(u,u.stateNode.containerInfo),ec(u,ts,o.memoizedState.cache),zu();break;case 27:case 5:ze(u);break;case 4:ve(u,u.stateNode.containerInfo);break;case 10:ec(u,u.type,u.memoizedProps.value);break;case 13:var _=u.memoizedState;if(_!==null)return _.dehydrated!==null?(ac(u),u.flags|=128,null):(m&u.child.childLanes)!==0?$u(o,u,m):(ac(u),o=Ms(o,u,m),o!==null?o.sibling:null);ac(u);break;case 19:var T=(o.flags&128)!==0;if(_=(m&u.childLanes)!==0,_||(dr(o,u,m,!1),_=(m&u.childLanes)!==0),T){if(_)return yr(o,u,m);u.flags|=128}if(T=u.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),se(Yi,Yi.current),_)break;return null;case 22:case 23:return u.lanes=0,Yc(o,u,m);case 24:ec(u,ts,o.memoizedState.cache)}return Ms(o,u,m)}function Jc(o,u,m){if(o!==null)if(o.memoizedProps!==u.pendingProps)As=!0;else{if(!Lh(o,m)&&(u.flags&128)===0)return As=!1,_r(o,u,m);As=(o.flags&131072)!==0}else As=!1,Vn&&(u.flags&1048576)!==0&&rp(u,Fu,u.index);switch(u.lanes=0,u.tag){case 16:e:{o=u.pendingProps;var _=u.elementType,T=_._init;if(_=T(_._payload),u.type=_,typeof _=="function")ph(_)?(o=xo(_,o),u.tag=1,u=ja(null,u,_,o,m)):(u.tag=0,u=Qu(null,u,_,o,m));else{if(_!=null){if(T=_.$$typeof,T===R){u.tag=11,u=Ta(null,u,_,o,m);break e}else if(T===I){u.tag=14,u=Ea(null,u,_,o,m);break e}}throw u=$(_)||_,Error(n(306,u,""))}}return u;case 0:return Qu(o,u,u.type,u.pendingProps,m);case 1:return _=u.type,T=xo(_,u.pendingProps),ja(o,u,_,T,m);case 3:e:{if(ve(u,u.stateNode.containerInfo),o===null)throw Error(n(387));_=u.pendingProps;var D=u.memoizedState;T=D.element,Wt(o,u),ju(u,_,null,m);var j=u.memoizedState;if(_=j.cache,ec(u,ts,_),_!==D.cache&&vh(u,[ts],m,!0),Th(),_=j.element,D.isDehydrated)if(D={element:_,isDehydrated:!1,cache:j.cache},u.updateQueue.baseState=D,u.memoizedState=D,u.flags&256){u=lc(o,u,_,m);break e}else if(_!==T){T=Os(Error(n(424)),u),Hc(T),u=lc(o,u,_,m);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(wi=bl(o.firstChild),na=u,Vn=!0,hr=null,Ha=!0,m=ty(u,null,_,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(zu(),_===T){u=Ms(o,u,m);break e}Wi(o,u,_,m)}u=u.child}return u;case 26:return qc(o,u),o===null?(m=JE(u.type,null,u.pendingProps,null))?u.memoizedState=m:Vn||(m=u.type,o=u.pendingProps,_=dy(ue.current).createElement(m),_[ot]=u,_[tn]=o,la(_,m,o),Gn(_),u.stateNode=_):u.memoizedState=JE(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return ze(u),o===null&&Vn&&(_=u.stateNode=WE(u.type,u.pendingProps,ue.current),na=u,Ha=!0,T=wi,uf(u.type)?(_A=T,wi=bl(_.firstChild)):wi=T),Wi(o,u,u.pendingProps.children,m),qc(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&Vn&&((T=_=wi)&&(_=mN(_,u.type,u.pendingProps,Ha),_!==null?(u.stateNode=_,na=u,wi=bl(_.firstChild),Ha=!1,T=!0):T=!1),T||Ql(u)),ze(u),T=u.type,D=u.pendingProps,j=o!==null?o.memoizedProps:null,_=D.children,mA(T,D)?_=null:j!==null&&mA(T,j)&&(u.flags|=32),u.memoizedState!==null&&(T=gl(o,u,QS,null,null,m),hg._currentValue=T),qc(o,u),Wi(o,u,_,m),u.child;case 6:return o===null&&Vn&&((o=m=wi)&&(m=gN(m,u.pendingProps,Ha),m!==null?(u.stateNode=m,na=u,wi=null,o=!0):o=!1),o||Ql(u)),null;case 13:return $u(o,u,m);case 4:return ve(u,u.stateNode.containerInfo),_=u.pendingProps,o===null?u.child=Xc(u,null,_,m):Wi(o,u,_,m),u.child;case 11:return Ta(o,u,u.type,u.pendingProps,m);case 7:return Wi(o,u,u.pendingProps,m),u.child;case 8:return Wi(o,u,u.pendingProps.children,m),u.child;case 12:return Wi(o,u,u.pendingProps.children,m),u.child;case 10:return _=u.pendingProps,ec(u,u.type,_.value),Wi(o,u,_.children,m),u.child;case 9:return T=u.type._context,_=u.pendingProps.children,vo(u),T=Li(T),_=_(T),u.flags|=1,Wi(o,u,_,m),u.child;case 14:return Ea(o,u,u.type,u.pendingProps,m);case 15:return tg(o,u,u.type,u.pendingProps,m);case 19:return yr(o,u,m);case 31:return _=u.pendingProps,m=u.mode,_={mode:_.mode,children:_.children},o===null?(m=Kc(_,m),m.ref=u.ref,u.child=m,m.return=u,u=m):(m=Xi(o.child,_),m.ref=u.ref,u.child=m,m.return=u,u=m),u;case 22:return Yc(o,u,m);case 24:return vo(u),_=Li(ts),o===null?(T=tc(),T===null&&(T=sn,D=cp(),T.pooledCache=D,D.refCount++,D!==null&&(T.pooledCacheLanes|=m),T=D),u.memoizedState={parent:_,cache:T},P0(u),ec(u,ts,T)):((o.lanes&m)!==0&&(Wt(o,u),ju(u,null,null,m),Th()),T=o.memoizedState,D=u.memoizedState,T.parent!==_?(T={parent:_,cache:_},u.memoizedState=T,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=T),ec(u,ts,_)):(_=D.cache,ec(u,ts,_),_!==T.cache&&vh(u,[ts],m,!0))),Wi(o,u,u.pendingProps.children,m),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function kr(o){o.flags|=4}function Oh(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!tC(u)){if(u=si.current,u!==null&&((It&4194048)===It?Gr!==null:(It&62914560)!==It&&(It&536870912)===0||u!==Gr))throw mr=bh,O0;o.flags|=8192}}function _l(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?je():536870912,o.lanes|=u,On|=u)}function Zc(o,u){if(!Vn)switch(o.tailMode){case"hidden":u=o.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var _=null;m!==null;)m.alternate!==null&&(_=m),m=m.sibling;_===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:_.sibling=null}}function fi(o){var u=o.alternate!==null&&o.alternate.child===o.child,m=0,_=0;if(u)for(var T=o.child;T!==null;)m|=T.lanes|T.childLanes,_|=T.subtreeFlags&65011712,_|=T.flags&65011712,T.return=o,T=T.sibling;else for(T=o.child;T!==null;)m|=T.lanes|T.childLanes,_|=T.subtreeFlags,_|=T.flags,T.return=o,T=T.sibling;return o.subtreeFlags|=_,o.childLanes=m,u}function ng(o,u,m){var _=u.pendingProps;switch(R0(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fi(u),null;case 1:return fi(u),null;case 3:return m=u.stateNode,_=null,o!==null&&(_=o.memoizedState.cache),u.memoizedState.cache!==_&&(u.flags|=2048),hl(ts),Ve(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(Ir(u)?kr(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Yn())),fi(u),null;case 26:return m=u.memoizedState,o===null?(kr(u),m!==null?(fi(u),Oh(u,m)):(fi(u),u.flags&=-16777217)):m?m!==o.memoizedState?(kr(u),fi(u),Oh(u,m)):(fi(u),u.flags&=-16777217):(o.memoizedProps!==_&&kr(u),fi(u),u.flags&=-16777217),null;case 27:Qe(u),m=ue.current;var T=u.type;if(o!==null&&u.stateNode!=null)o.memoizedProps!==_&&kr(u);else{if(!_){if(u.stateNode===null)throw Error(n(166));return fi(u),null}o=J.current,Ir(u)?_1(u):(o=WE(T,_,m),u.stateNode=o,kr(u))}return fi(u),null;case 5:if(Qe(u),m=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==_&&kr(u);else{if(!_){if(u.stateNode===null)throw Error(n(166));return fi(u),null}if(o=J.current,Ir(u))_1(u);else{switch(T=dy(ue.current),o){case 1:o=T.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:o=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":o=T.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":o=T.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":o=T.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof _.is=="string"?T.createElement("select",{is:_.is}):T.createElement("select"),_.multiple?o.multiple=!0:_.size&&(o.size=_.size);break;default:o=typeof _.is=="string"?T.createElement(m,{is:_.is}):T.createElement(m)}}o[ot]=u,o[tn]=_;e:for(T=u.child;T!==null;){if(T.tag===5||T.tag===6)o.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===u)break e;for(;T.sibling===null;){if(T.return===null||T.return===u)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}u.stateNode=o;e:switch(la(o,m,_),m){case"button":case"input":case"select":case"textarea":o=!!_.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&kr(u)}}return fi(u),u.flags&=-16777217,null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==_&&kr(u);else{if(typeof _!="string"&&u.stateNode===null)throw Error(n(166));if(o=ue.current,Ir(u)){if(o=u.stateNode,m=u.memoizedProps,_=null,T=na,T!==null)switch(T.tag){case 27:case 5:_=T.memoizedProps}o[ot]=u,o=!!(o.nodeValue===m||_!==null&&_.suppressHydrationWarning===!0||GE(o.nodeValue,m)),o||Ql(u)}else o=dy(o).createTextNode(_),o[ot]=u,u.stateNode=o}return fi(u),null;case 13:if(_=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(T=Ir(u),_!==null&&_.dehydrated!==null){if(o===null){if(!T)throw Error(n(318));if(T=u.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[ot]=u}else zu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;fi(u),T=!1}else T=Yn(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=T),T=!0;if(!T)return u.flags&256?(_o(u),u):(_o(u),null)}if(_o(u),(u.flags&128)!==0)return u.lanes=m,u;if(m=_!==null,o=o!==null&&o.memoizedState!==null,m){_=u.child,T=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(T=_.alternate.memoizedState.cachePool.pool);var D=null;_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(D=_.memoizedState.cachePool.pool),D!==T&&(_.flags|=2048)}return m!==o&&m&&(u.child.flags|=8192),_l(u,u.updateQueue),fi(u),null;case 4:return Ve(),o===null&&uA(u.stateNode.containerInfo),fi(u),null;case 10:return hl(u.type),fi(u),null;case 19:if(K(Yi),T=u.memoizedState,T===null)return fi(u),null;if(_=(u.flags&128)!==0,D=T.rendering,D===null)if(_)Zc(T,!1);else{if(yi!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(D=yl(o),D!==null){for(u.flags|=128,Zc(T,!1),o=D.updateQueue,u.updateQueue=o,_l(u,o),u.subtreeFlags=0,o=m,m=u.child;m!==null;)C0(m,o),m=m.sibling;return se(Yi,Yi.current&1|2),u.child}o=o.sibling}T.tail!==null&&Re()>Ws&&(u.flags|=128,_=!0,Zc(T,!1),u.lanes=4194304)}else{if(!_)if(o=yl(D),o!==null){if(u.flags|=128,_=!0,o=o.updateQueue,u.updateQueue=o,_l(u,o),Zc(T,!0),T.tail===null&&T.tailMode==="hidden"&&!D.alternate&&!Vn)return fi(u),null}else 2*Re()-T.renderingStartTime>Ws&&m!==536870912&&(u.flags|=128,_=!0,Zc(T,!1),u.lanes=4194304);T.isBackwards?(D.sibling=u.child,u.child=D):(o=T.last,o!==null?o.sibling=D:u.child=D,T.last=D)}return T.tail!==null?(u=T.tail,T.rendering=u,T.tail=u.sibling,T.renderingStartTime=Re(),u.sibling=null,o=Yi.current,se(Yi,_?o&1|2:o&1),u):(fi(u),null);case 22:case 23:return _o(u),Eh(),_=u.memoizedState!==null,o!==null?o.memoizedState!==null!==_&&(u.flags|=8192):_&&(u.flags|=8192),_?(m&536870912)!==0&&(u.flags&128)===0&&(fi(u),u.subtreeFlags&6&&(u.flags|=8192)):fi(u),m=u.updateQueue,m!==null&&_l(u,m.retryQueue),m=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==m&&(u.flags|=2048),o!==null&&K(pr),null;case 24:return m=null,o!==null&&(m=o.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),hl(ts),fi(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function ef(o,u){switch(R0(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return hl(ts),Ve(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return Qe(u),null;case 13:if(_o(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(n(340));zu()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return K(Yi),null;case 4:return Ve(),null;case 10:return hl(u.type),null;case 22:case 23:return _o(u),Eh(),o!==null&&K(pr),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return hl(ts),null;case 25:return null;default:return null}}function tf(o,u){switch(R0(u),u.tag){case 3:hl(ts),Ve();break;case 26:case 27:case 5:Qe(u);break;case 4:Ve();break;case 13:_o(u);break;case 19:K(Yi);break;case 10:hl(u.type);break;case 22:case 23:_o(u),Eh(),o!==null&&K(pr);break;case 24:hl(ts)}}function Qc(o,u){try{var m=u.updateQueue,_=m!==null?m.lastEffect:null;if(_!==null){var T=_.next;m=T;do{if((m.tag&o)===o){_=void 0;var D=m.create,j=m.inst;_=D(),j.destroy=_}m=m.next}while(m!==T)}}catch(ie){Ce(u,u.return,ie)}}function Ya(o,u,m){try{var _=u.updateQueue,T=_!==null?_.lastEffect:null;if(T!==null){var D=T.next;_=D;do{if((_.tag&o)===o){var j=_.inst,ie=j.destroy;if(ie!==void 0){j.destroy=void 0,T=u;var _e=m,Xe=ie;try{Xe()}catch(ct){Ce(T,_e,ct)}}}_=_.next}while(_!==D)}}catch(ct){Ce(u,u.return,ct)}}function $c(o){var u=o.updateQueue;if(u!==null){var m=o.stateNode;try{A1(u,m)}catch(_){Ce(o,o.return,_)}}}function xl(o,u,m){m.props=xo(o.type,o.memoizedProps),m.state=o.memoizedState;try{m.componentWillUnmount()}catch(_){Ce(o,u,_)}}function eu(o,u){try{var m=o.ref;if(m!==null){switch(o.tag){case 26:case 27:case 5:var _=o.stateNode;break;case 30:_=o.stateNode;break;default:_=o.stateNode}typeof m=="function"?o.refCleanup=m(_):m.current=_}}catch(T){Ce(o,u,T)}}function Ao(o,u){var m=o.ref,_=o.refCleanup;if(m!==null)if(typeof _=="function")try{_()}catch(T){Ce(o,u,T)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(T){Ce(o,u,T)}else m.current=null}function nf(o){var u=o.type,m=o.memoizedProps,_=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":m.autoFocus&&_.focus();break e;case"img":m.src?_.src=m.src:m.srcSet&&(_.srcset=m.srcSet)}}catch(T){Ce(o,o.return,T)}}function Nh(o,u,m){try{var _=o.stateNode;uN(_,o.type,m,u),_[tn]=u}catch(T){Ce(o,o.return,T)}}function Ph(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&uf(o.type)||o.tag===4}function cc(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Ph(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&uf(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function uc(o,u,m){var _=o.tag;if(_===5||_===6)o=o.stateNode,u?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(o,u):(u=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,u.appendChild(o),m=m._reactRootContainer,m!=null||u.onclick!==null||(u.onclick=hy));else if(_!==4&&(_===27&&uf(o.type)&&(m=o.stateNode,u=null),o=o.child,o!==null))for(uc(o,u,m),o=o.sibling;o!==null;)uc(o,u,m),o=o.sibling}function fc(o,u,m){var _=o.tag;if(_===5||_===6)o=o.stateNode,u?m.insertBefore(o,u):m.appendChild(o);else if(_!==4&&(_===27&&uf(o.type)&&(m=o.stateNode),o=o.child,o!==null))for(fc(o,u,m),o=o.sibling;o!==null;)fc(o,u,m),o=o.sibling}function hc(o){var u=o.stateNode,m=o.memoizedProps;try{for(var _=o.type,T=u.attributes;T.length;)u.removeAttributeNode(T[0]);la(u,_,m),u[ot]=o,u[tn]=m}catch(D){Ce(o,o.return,D)}}var Mo=!1,hi=!1,sf=!1,Wa=typeof WeakSet=="function"?WeakSet:Set,ai=null;function hs(o,u){if(o=o.containerInfo,dA=_y,o=x0(o),uh(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var _=m.getSelection&&m.getSelection();if(_&&_.rangeCount!==0){m=_.anchorNode;var T=_.anchorOffset,D=_.focusNode;_=_.focusOffset;try{m.nodeType,D.nodeType}catch{m=null;break e}var j=0,ie=-1,_e=-1,Xe=0,ct=0,dt=o,qe=null;t:for(;;){for(var Je;dt!==m||T!==0&&dt.nodeType!==3||(ie=j+T),dt!==D||_!==0&&dt.nodeType!==3||(_e=j+_),dt.nodeType===3&&(j+=dt.nodeValue.length),(Je=dt.firstChild)!==null;)qe=dt,dt=Je;for(;;){if(dt===o)break t;if(qe===m&&++Xe===T&&(ie=j),qe===D&&++ct===_&&(_e=j),(Je=dt.nextSibling)!==null)break;dt=qe,qe=dt.parentNode}dt=Je}m=ie===-1||_e===-1?null:{start:ie,end:_e}}else m=null}m=m||{start:0,end:0}}else m=null;for(pA={focusedElem:o,selectionRange:m},_y=!1,ai=u;ai!==null;)if(u=ai,o=u.child,(u.subtreeFlags&1024)!==0&&o!==null)o.return=u,ai=o;else for(;ai!==null;){switch(u=ai,D=u.alternate,o=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&D!==null){o=void 0,m=u,T=D.memoizedProps,D=D.memoizedState,_=m.stateNode;try{var Zt=xo(m.type,T,m.elementType===m.type);o=_.getSnapshotBeforeUpdate(Zt,D),_.__reactInternalSnapshotBeforeUpdate=o}catch(kt){Ce(m,m.return,kt)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,m=o.nodeType,m===9)vA(o);else if(m===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":vA(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(n(163))}if(o=u.sibling,o!==null){o.return=u.return,ai=o;break}ai=u.return}}function Sl(o,u,m){var _=m.flags;switch(m.tag){case 0:case 11:case 15:ra(o,m),_&4&&Qc(5,m);break;case 1:if(ra(o,m),_&4)if(o=m.stateNode,u===null)try{o.componentDidMount()}catch(j){Ce(m,m.return,j)}else{var T=xo(m.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(T,u,o.__reactInternalSnapshotBeforeUpdate)}catch(j){Ce(m,m.return,j)}}_&64&&$c(m),_&512&&eu(m,m.return);break;case 3:if(ra(o,m),_&64&&(o=m.updateQueue,o!==null)){if(u=null,m.child!==null)switch(m.child.tag){case 27:case 5:u=m.child.stateNode;break;case 1:u=m.child.stateNode}try{A1(o,u)}catch(j){Ce(m,m.return,j)}}break;case 27:u===null&&_&4&&hc(m);case 26:case 5:ra(o,m),u===null&&_&4&&nf(m),_&512&&eu(m,m.return);break;case 12:ra(o,m);break;case 13:ra(o,m),_&4&&dc(o,m),_&64&&(o=m.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(m=_i.bind(null,m),vN(o,m))));break;case 22:if(_=m.memoizedState!==null||Mo,!_){u=u!==null&&u.memoizedState!==null||hi,T=Mo;var D=hi;Mo=_,(hi=u)&&!D?bo(o,m,(m.subtreeFlags&8772)!==0):ra(o,m),Mo=T,hi=D}break;case 30:break;default:ra(o,m)}}function dn(o){var u=o.alternate;u!==null&&(o.alternate=null,dn(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&Kt(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var zt=null,Ln=!1;function xr(o,u,m){for(m=m.child;m!==null;)tu(o,u,m),m=m.sibling}function tu(o,u,m){if(be&&typeof be.onCommitFiberUnmount=="function")try{be.onCommitFiberUnmount(Be,m)}catch{}switch(m.tag){case 26:hi||Ao(m,u),xr(o,u,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:hi||Ao(m,u);var _=zt,T=Ln;uf(m.type)&&(zt=m.stateNode,Ln=!1),xr(o,u,m),lg(m.stateNode),zt=_,Ln=T;break;case 5:hi||Ao(m,u);case 6:if(_=zt,T=Ln,zt=null,xr(o,u,m),zt=_,Ln=T,zt!==null)if(Ln)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(m.stateNode)}catch(D){Ce(m,u,D)}else try{zt.removeChild(m.stateNode)}catch(D){Ce(m,u,D)}break;case 18:zt!==null&&(Ln?(o=zt,jE(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,m.stateNode),gg(o)):jE(zt,m.stateNode));break;case 4:_=zt,T=Ln,zt=m.stateNode.containerInfo,Ln=!0,xr(o,u,m),zt=_,Ln=T;break;case 0:case 11:case 14:case 15:hi||Ya(2,m,u),hi||Ya(4,m,u),xr(o,u,m);break;case 1:hi||(Ao(m,u),_=m.stateNode,typeof _.componentWillUnmount=="function"&&xl(m,u,_)),xr(o,u,m);break;case 21:xr(o,u,m);break;case 22:hi=(_=hi)||m.memoizedState!==null,xr(o,u,m),hi=_;break;default:xr(o,u,m)}}function dc(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{gg(o)}catch(m){Ce(u,u.return,m)}}function Dp(o){switch(o.tag){case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new Wa),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new Wa),u;default:throw Error(n(435,o.tag))}}function nu(o,u){var m=Dp(o);u.forEach(function(_){var T=qt.bind(null,o,_);m.has(_)||(m.add(_),_.then(T,T))})}function bs(o,u){var m=u.deletions;if(m!==null)for(var _=0;_<m.length;_++){var T=m[_],D=o,j=u,ie=j;e:for(;ie!==null;){switch(ie.tag){case 27:if(uf(ie.type)){zt=ie.stateNode,Ln=!1;break e}break;case 5:zt=ie.stateNode,Ln=!1;break e;case 3:case 4:zt=ie.stateNode.containerInfo,Ln=!0;break e}ie=ie.return}if(zt===null)throw Error(n(160));tu(D,j,T),zt=null,Ln=!1,D=T.alternate,D!==null&&(D.return=null),T.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)Bp(u,o),u=u.sibling}var Xr=null;function Bp(o,u){var m=o.alternate,_=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:bs(u,o),Oi(o),_&4&&(Ya(3,o,o.return),Qc(3,o),Ya(5,o,o.return));break;case 1:bs(u,o),Oi(o),_&512&&(hi||m===null||Ao(m,m.return)),_&64&&Mo&&(o=o.updateQueue,o!==null&&(_=o.callbacks,_!==null&&(m=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=m===null?_:m.concat(_))));break;case 26:var T=Xr;if(bs(u,o),Oi(o),_&512&&(hi||m===null||Ao(m,m.return)),_&4){var D=m!==null?m.memoizedState:null;if(_=o.memoizedState,m===null)if(_===null)if(o.stateNode===null){e:{_=o.type,m=o.memoizedProps,T=T.ownerDocument||T;t:switch(_){case"title":D=T.getElementsByTagName("title")[0],(!D||D[Bn]||D[ot]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=T.createElement(_),T.head.insertBefore(D,T.querySelector("head > title"))),la(D,_,m),D[ot]=o,Gn(D),_=D;break e;case"link":var j=$E("link","href",T).get(_+(m.href||""));if(j){for(var ie=0;ie<j.length;ie++)if(D=j[ie],D.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&D.getAttribute("rel")===(m.rel==null?null:m.rel)&&D.getAttribute("title")===(m.title==null?null:m.title)&&D.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){j.splice(ie,1);break t}}D=T.createElement(_),la(D,_,m),T.head.appendChild(D);break;case"meta":if(j=$E("meta","content",T).get(_+(m.content||""))){for(ie=0;ie<j.length;ie++)if(D=j[ie],D.getAttribute("content")===(m.content==null?null:""+m.content)&&D.getAttribute("name")===(m.name==null?null:m.name)&&D.getAttribute("property")===(m.property==null?null:m.property)&&D.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&D.getAttribute("charset")===(m.charSet==null?null:m.charSet)){j.splice(ie,1);break t}}D=T.createElement(_),la(D,_,m),T.head.appendChild(D);break;default:throw Error(n(468,_))}D[ot]=o,Gn(D),_=D}o.stateNode=_}else eC(T,o.type,o.stateNode);else o.stateNode=QE(T,_,o.memoizedProps);else D!==_?(D===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):D.count--,_===null?eC(T,o.type,o.stateNode):QE(T,_,o.memoizedProps)):_===null&&o.stateNode!==null&&Nh(o,o.memoizedProps,m.memoizedProps)}break;case 27:bs(u,o),Oi(o),_&512&&(hi||m===null||Ao(m,m.return)),m!==null&&_&4&&Nh(o,o.memoizedProps,m.memoizedProps);break;case 5:if(bs(u,o),Oi(o),_&512&&(hi||m===null||Ao(m,m.return)),o.flags&32){T=o.stateNode;try{Bi(T,"")}catch(Je){Ce(o,o.return,Je)}}_&4&&o.stateNode!=null&&(T=o.memoizedProps,Nh(o,T,m!==null?m.memoizedProps:T)),_&1024&&(sf=!0);break;case 6:if(bs(u,o),Oi(o),_&4){if(o.stateNode===null)throw Error(n(162));_=o.memoizedProps,m=o.stateNode;try{m.nodeValue=_}catch(Je){Ce(o,o.return,Je)}}break;case 3:if(gy=null,T=Xr,Xr=py(u.containerInfo),bs(u,o),Xr=T,Oi(o),_&4&&m!==null&&m.memoizedState.isDehydrated)try{gg(u.containerInfo)}catch(Je){Ce(o,o.return,Je)}sf&&(sf=!1,pc(o));break;case 4:_=Xr,Xr=py(o.stateNode.containerInfo),bs(u,o),Oi(o),Xr=_;break;case 12:bs(u,o),Oi(o);break;case 13:bs(u,o),Oi(o),o.child.flags&8192&&o.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(ei=Re()),_&4&&(_=o.updateQueue,_!==null&&(o.updateQueue=null,nu(o,_)));break;case 22:T=o.memoizedState!==null;var _e=m!==null&&m.memoizedState!==null,Xe=Mo,ct=hi;if(Mo=Xe||T,hi=ct||_e,bs(u,o),hi=ct,Mo=Xe,Oi(o),_&8192)e:for(u=o.stateNode,u._visibility=T?u._visibility&-2:u._visibility|1,T&&(m===null||_e||Mo||hi||qa(o)),m=null,u=o;;){if(u.tag===5||u.tag===26){if(m===null){_e=m=u;try{if(D=_e.stateNode,T)j=D.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{ie=_e.stateNode;var dt=_e.memoizedProps.style,qe=dt!=null&&dt.hasOwnProperty("display")?dt.display:null;ie.style.display=qe==null||typeof qe=="boolean"?"":(""+qe).trim()}}catch(Je){Ce(_e,_e.return,Je)}}}else if(u.tag===6){if(m===null){_e=u;try{_e.stateNode.nodeValue=T?"":_e.memoizedProps}catch(Je){Ce(_e,_e.return,Je)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}_&4&&(_=o.updateQueue,_!==null&&(m=_.retryQueue,m!==null&&(_.retryQueue=null,nu(o,m))));break;case 19:bs(u,o),Oi(o),_&4&&(_=o.updateQueue,_!==null&&(o.updateQueue=null,nu(o,_)));break;case 30:break;case 21:break;default:bs(u,o),Oi(o)}}function Oi(o){var u=o.flags;if(u&2){try{for(var m,_=o.return;_!==null;){if(Ph(_)){m=_;break}_=_.return}if(m==null)throw Error(n(160));switch(m.tag){case 27:var T=m.stateNode,D=cc(o);fc(o,D,T);break;case 5:var j=m.stateNode;m.flags&32&&(Bi(j,""),m.flags&=-33);var ie=cc(o);fc(o,ie,j);break;case 3:case 4:var _e=m.stateNode.containerInfo,Xe=cc(o);uc(o,Xe,_e);break;default:throw Error(n(161))}}catch(ct){Ce(o,o.return,ct)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function pc(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;pc(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function ra(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)Sl(o,u.alternate,u),u=u.sibling}function qa(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Ya(4,u,u.return),qa(u);break;case 1:Ao(u,u.return);var m=u.stateNode;typeof m.componentWillUnmount=="function"&&xl(u,u.return,m),qa(u);break;case 27:lg(u.stateNode);case 26:case 5:Ao(u,u.return),qa(u);break;case 22:u.memoizedState===null&&qa(u);break;case 30:qa(u);break;default:qa(u)}o=o.sibling}}function bo(o,u,m){for(m=m&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var _=u.alternate,T=o,D=u,j=D.flags;switch(D.tag){case 0:case 11:case 15:bo(T,D,m),Qc(4,D);break;case 1:if(bo(T,D,m),_=D,T=_.stateNode,typeof T.componentDidMount=="function")try{T.componentDidMount()}catch(Xe){Ce(_,_.return,Xe)}if(_=D,T=_.updateQueue,T!==null){var ie=_.stateNode;try{var _e=T.shared.hiddenCallbacks;if(_e!==null)for(T.shared.hiddenCallbacks=null,T=0;T<_e.length;T++)Yu(_e[T],ie)}catch(Xe){Ce(_,_.return,Xe)}}m&&j&64&&$c(D),eu(D,D.return);break;case 27:hc(D);case 26:case 5:bo(T,D,m),m&&_===null&&j&4&&nf(D),eu(D,D.return);break;case 12:bo(T,D,m);break;case 13:bo(T,D,m),m&&j&4&&dc(T,D);break;case 22:D.memoizedState===null&&bo(T,D,m),eu(D,D.return);break;case 30:break;default:bo(T,D,m)}u=u.sibling}}function Up(o,u){var m=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==m&&(o!=null&&o.refCount++,m!=null&&Gu(m))}function Lp(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Gu(o))}function ri(o,u,m,_){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Op(o,u,m,_),u=u.sibling}function Op(o,u,m,_){var T=u.flags;switch(u.tag){case 0:case 11:case 15:ri(o,u,m,_),T&2048&&Qc(9,u);break;case 1:ri(o,u,m,_);break;case 3:ri(o,u,m,_),T&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Gu(o)));break;case 12:if(T&2048){ri(o,u,m,_),o=u.stateNode;try{var D=u.memoizedProps,j=D.id,ie=D.onPostCommit;typeof ie=="function"&&ie(j,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(_e){Ce(u,u.return,_e)}}else ri(o,u,m,_);break;case 13:ri(o,u,m,_);break;case 23:break;case 22:D=u.stateNode,j=u.alternate,u.memoizedState!==null?D._visibility&2?ri(o,u,m,_):jr(o,u):D._visibility&2?ri(o,u,m,_):(D._visibility|=2,Al(o,u,m,_,(u.subtreeFlags&10256)!==0)),T&2048&&Up(j,u);break;case 24:ri(o,u,m,_),T&2048&&Lp(u.alternate,u);break;default:ri(o,u,m,_)}}function Al(o,u,m,_,T){for(T=T&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var D=o,j=u,ie=m,_e=_,Xe=j.flags;switch(j.tag){case 0:case 11:case 15:Al(D,j,ie,_e,T),Qc(8,j);break;case 23:break;case 22:var ct=j.stateNode;j.memoizedState!==null?ct._visibility&2?Al(D,j,ie,_e,T):jr(D,j):(ct._visibility|=2,Al(D,j,ie,_e,T)),T&&Xe&2048&&Up(j.alternate,j);break;case 24:Al(D,j,ie,_e,T),T&&Xe&2048&&Lp(j.alternate,j);break;default:Al(D,j,ie,_e,T)}u=u.sibling}}function jr(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var m=o,_=u,T=_.flags;switch(_.tag){case 22:jr(m,_),T&2048&&Up(_.alternate,_);break;case 24:jr(m,_),T&2048&&Lp(_.alternate,_);break;default:jr(m,_)}u=u.sibling}}var Ka=8192;function af(o){if(o.subtreeFlags&Ka)for(o=o.child;o!==null;)ly(o),o=o.sibling}function ly(o){switch(o.tag){case 26:af(o),o.flags&Ka&&o.memoizedState!==null&&DN(Xr,o.memoizedState,o.memoizedProps);break;case 5:af(o);break;case 3:case 4:var u=Xr;Xr=py(o.stateNode.containerInfo),af(o),Xr=u;break;case 22:o.memoizedState===null&&(u=o.alternate,u!==null&&u.memoizedState!==null?(u=Ka,Ka=16777216,af(o),Ka=u):af(o));break;default:af(o)}}function cy(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function di(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var m=0;m<u.length;m++){var _=u[m];ai=_,Eo(_,o)}cy(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ig(o),o=o.sibling}function ig(o){switch(o.tag){case 0:case 11:case 15:di(o),o.flags&2048&&Ya(9,o,o.return);break;case 3:di(o);break;case 12:di(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,To(o)):di(o);break;default:di(o)}}function To(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var m=0;m<u.length;m++){var _=u[m];ai=_,Eo(_,o)}cy(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Ya(8,u,u.return),To(u);break;case 22:m=u.stateNode,m._visibility&2&&(m._visibility&=-3,To(u));break;default:To(u)}o=o.sibling}}function Eo(o,u){for(;ai!==null;){var m=ai;switch(m.tag){case 0:case 11:case 15:Ya(8,m,u);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var _=m.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:Gu(m.memoizedState.cache)}if(_=m.child,_!==null)_.return=m,ai=_;else e:for(m=o;ai!==null;){_=ai;var T=_.sibling,D=_.return;if(dn(_),_===m){ai=null;break e}if(T!==null){T.return=D,ai=T;break e}ai=D}}}var Ni={getCacheForType:function(o){var u=Li(ts),m=u.data.get(o);return m===void 0&&(m=o(),u.data.set(o,m)),m}},sg=typeof WeakMap=="function"?WeakMap:Map,Wn=0,sn=null,yn=null,It=0,hn=0,Ri=null,Ja=!1,rf=!1,of=!1,Sr=0,yi=0,Yr=0,Co=0,iu=0,Ar=0,On=0,qn=null,Gt=null,Sn=!1,ei=0,Ws=1/0,Mr=null,Za=null,ds=0,qs=null,oi=null,Qa=0,Ml=0,Ih=null,$a=null,wo=0,su=null;function Pi(){if((Wn&2)!==0&&It!==0)return It&-It;if(z.T!==null){var o=on;return o!==0?o:rA()}return At()}function Np(){Ar===0&&(Ar=(It&536870912)===0||Vn?he():536870912);var o=si.current;return o!==null&&(o.flags|=32),Ar}function oa(o,u,m){(o===sn&&(hn===2||hn===9)||o.cancelPendingCommit!==null)&&(gc(o,0),Wr(o,It,Ar,!1)),gt(o,m),((Wn&2)===0||o!==sn)&&(o===sn&&((Wn&2)===0&&(Co|=m),yi===4&&Wr(o,It,Ar,!1)),_c(o))}function lf(o,u,m){if((Wn&6)!==0)throw Error(n(327));var _=!m&&(u&124)===0&&(u&o.expiredLanes)===0||Ae(o,u),T=_?E(o,u):p(o,u,!0),D=_;do{if(T===0){rf&&!_&&Wr(o,u,0,!1);break}else{if(m=o.current.alternate,D&&!mc(m)){T=p(o,u,!1),D=!1;continue}if(T===2){if(D=u,o.errorRecoveryDisabledLanes&D)var j=0;else j=o.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){u=j;e:{var ie=o;T=qn;var _e=ie.current.memoizedState.isDehydrated;if(_e&&(gc(ie,j).flags|=256),j=p(ie,j,!1),j!==2){if(of&&!_e){ie.errorRecoveryDisabledLanes|=D,Co|=D,T=4;break e}D=Gt,Gt=T,D!==null&&(Gt===null?Gt=D:Gt.push.apply(Gt,D))}T=j}if(D=!1,T!==2)continue}}if(T===1){gc(o,0),Wr(o,u,0,!0);break}e:{switch(_=o,D=T,D){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:Wr(_,u,Ar,!Ja);break e;case 2:Gt=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(T=ei+300-Re(),10<T)){if(Wr(_,u,Ar,!Ja),fe(_,0,!0)!==0)break e;_.timeoutHandle=kE(Fh.bind(null,_,m,Gt,Mr,Sn,u,Ar,Co,On,Ja,D,2,-0,0),T);break e}Fh(_,m,Gt,Mr,Sn,u,Ar,Co,On,Ja,D,0,-0,0)}}break}while(!0);_c(o)}function Fh(o,u,m,_,T,D,j,ie,_e,Xe,ct,dt,qe,Je){if(o.timeoutHandle=-1,dt=u.subtreeFlags,(dt&8192||(dt&16785408)===16785408)&&(fg={stylesheets:null,count:0,unsuspend:RN},ly(u),dt=BN(),dt!==null)){o.cancelPendingCommit=dt(xt.bind(null,o,u,D,m,_,T,j,ie,_e,ct,1,qe,Je)),Wr(o,D,j,!Xe);return}xt(o,u,D,m,_,T,j,ie,_e)}function mc(o){for(var u=o;;){var m=u.tag;if((m===0||m===11||m===15)&&u.flags&16384&&(m=u.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var _=0;_<m.length;_++){var T=m[_],D=T.getSnapshot;T=T.value;try{if(!xa(D(),T))return!1}catch{return!1}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Wr(o,u,m,_){u&=~iu,u&=~Co,o.suspendedLanes|=u,o.pingedLanes&=~u,_&&(o.warmLanes|=u),_=o.expirationTimes;for(var T=u;0<T;){var D=31-$e(T),j=1<<D;_[D]=-1,T&=~j}m!==0&&Ge(o,m,u)}function Ro(){return(Wn&6)===0?(ag(0),!1):!0}function au(){if(yn!==null){if(hn===0)var o=yn.return;else o=yn,fl=$l=null,G0(o),kc=null,Dh=0,o=yn;for(;o!==null;)tf(o.alternate,o),o=o.return;yn=null}}function gc(o,u){var m=o.timeoutHandle;m!==-1&&(o.timeoutHandle=-1,hN(m)),m=o.cancelPendingCommit,m!==null&&(o.cancelPendingCommit=null,m()),au(),sn=o,yn=m=Xi(o.current,null),It=u,hn=0,Ri=null,Ja=!1,rf=Ae(o,u),of=!1,On=Ar=iu=Co=Yr=yi=0,Gt=qn=null,Sn=!1,(u&8)!==0&&(u|=u&32);var _=o.entangledLanes;if(_!==0)for(o=o.entanglements,_&=u;0<_;){var T=31-$e(_),D=1<<T;u|=o[T],_&=~D}return Sr=u,dh(),m}function Pp(o,u){ln=null,z.H=Rh,u===Mh||u===Fr?(u=N0(),hn=3):u===O0?(u=N0(),hn=4):hn=u===oy?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Ri=u,yn===null&&(yi=1,Cp(o,Os(u,o.current)))}function cf(){var o=z.H;return z.H=Rh,o===null?Rh:o}function Ip(){var o=z.A;return z.A=Ni,o}function h(){yi=4,Ja||(It&4194048)!==It&&si.current!==null||(rf=!0),(Yr&134217727)===0&&(Co&134217727)===0||sn===null||Wr(sn,It,Ar,!1)}function p(o,u,m){var _=Wn;Wn|=2;var T=cf(),D=Ip();(sn!==o||It!==u)&&(Mr=null,gc(o,u)),u=!1;var j=yi;e:do try{if(hn!==0&&yn!==null){var ie=yn,_e=Ri;switch(hn){case 8:au(),j=6;break e;case 3:case 2:case 9:case 6:si.current===null&&(u=!0);var Xe=hn;if(hn=0,Ri=null,xe(o,ie,_e,Xe),m&&rf){j=0;break e}break;default:Xe=hn,hn=0,Ri=null,xe(o,ie,_e,Xe)}}x(),j=yi;break}catch(ct){Pp(o,ct)}while(!0);return u&&o.shellSuspendCounter++,fl=$l=null,Wn=_,z.H=T,z.A=D,yn===null&&(sn=null,It=0,dh()),j}function x(){for(;yn!==null;)F(yn)}function E(o,u){var m=Wn;Wn|=2;var _=cf(),T=Ip();sn!==o||It!==u?(Mr=null,Ws=Re()+500,gc(o,u)):rf=Ae(o,u);e:do try{if(hn!==0&&yn!==null){u=yn;var D=Ri;t:switch(hn){case 1:hn=0,Ri=null,xe(o,u,D,1);break;case 2:case 9:if(hp(D)){hn=0,Ri=null,ae(u);break}u=function(){hn!==2&&hn!==9||sn!==o||(hn=7),_c(o)},D.then(u,u);break e;case 3:hn=7;break e;case 4:hn=5;break e;case 7:hp(D)?(hn=0,Ri=null,ae(u)):(hn=0,Ri=null,xe(o,u,D,7));break;case 5:var j=null;switch(yn.tag){case 26:j=yn.memoizedState;case 5:case 27:var ie=yn;if(!j||tC(j)){hn=0,Ri=null;var _e=ie.sibling;if(_e!==null)yn=_e;else{var Xe=ie.return;Xe!==null?(yn=Xe,Fe(Xe)):yn=null}break t}}hn=0,Ri=null,xe(o,u,D,5);break;case 6:hn=0,Ri=null,xe(o,u,D,6);break;case 8:au(),yi=6;break e;default:throw Error(n(462))}}B();break}catch(ct){Pp(o,ct)}while(!0);return fl=$l=null,z.H=_,z.A=T,Wn=m,yn!==null?0:(sn=null,It=0,dh(),yi)}function B(){for(;yn!==null&&!Le();)F(yn)}function F(o){var u=Jc(o.alternate,o,Sr);o.memoizedProps=o.pendingProps,u===null?Fe(o):yn=u}function ae(o){var u=o,m=u.alternate;switch(u.tag){case 15:case 0:u=Xa(m,u,u.pendingProps,u.type,void 0,It);break;case 11:u=Xa(m,u,u.pendingProps,u.type.render,u.ref,It);break;case 5:G0(u);default:tf(m,u),u=yn=C0(u,Sr),u=Jc(m,u,Sr)}o.memoizedProps=o.pendingProps,u===null?Fe(o):yn=u}function xe(o,u,m,_){fl=$l=null,G0(u),kc=null,Dh=0;var T=u.return;try{if(sA(o,T,u,m,It)){yi=1,Cp(o,Os(m,o.current)),yn=null;return}}catch(D){if(T!==null)throw yn=T,D;yi=1,Cp(o,Os(m,o.current)),yn=null;return}u.flags&32768?(Vn||_===1?o=!0:rf||(It&536870912)!==0?o=!1:(Ja=o=!0,(_===2||_===9||_===3||_===6)&&(_=si.current,_!==null&&_.tag===13&&(_.flags|=16384))),lt(u,o)):Fe(u)}function Fe(o){var u=o;do{if((u.flags&32768)!==0){lt(u,Ja);return}o=u.return;var m=ng(u.alternate,u,Sr);if(m!==null){yn=m;return}if(u=u.sibling,u!==null){yn=u;return}yn=u=o}while(u!==null);yi===0&&(yi=5)}function lt(o,u){do{var m=ef(o.alternate,o);if(m!==null){m.flags&=32767,yn=m;return}if(m=o.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!u&&(o=o.sibling,o!==null)){yn=o;return}yn=o=m}while(o!==null);yi=6,yn=null}function xt(o,u,m,_,T,D,j,ie,_e){o.cancelPendingCommit=null;do vc();while(ds!==0);if((Wn&6)!==0)throw Error(n(327));if(u!==null){if(u===o.current)throw Error(n(177));if(D=u.lanes|u.childLanes,D|=ip,et(o,m,D,j,ie,_e),o===sn&&(yn=sn=null,It=0),oi=u,qs=o,Qa=m,Ml=D,Ih=T,$a=_,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,kn(ye,function(){return yc(),null})):(o.callbackNode=null,o.callbackPriority=0),_=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||_){_=z.T,z.T=null,T=q.p,q.p=2,j=Wn,Wn|=4;try{hs(o,u,m)}finally{Wn=j,q.p=T,z.T=_}}ds=1,Tt(),Ct(),an()}}function Tt(){if(ds===1){ds=0;var o=qs,u=oi,m=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||m){m=z.T,z.T=null;var _=q.p;q.p=2;var T=Wn;Wn|=4;try{Bp(u,o);var D=pA,j=x0(o.containerInfo),ie=D.focusedElem,_e=D.selectionRange;if(j!==ie&&ie&&ie.ownerDocument&&_0(ie.ownerDocument.documentElement,ie)){if(_e!==null&&uh(ie)){var Xe=_e.start,ct=_e.end;if(ct===void 0&&(ct=Xe),"selectionStart"in ie)ie.selectionStart=Xe,ie.selectionEnd=Math.min(ct,ie.value.length);else{var dt=ie.ownerDocument||document,qe=dt&&dt.defaultView||window;if(qe.getSelection){var Je=qe.getSelection(),Zt=ie.textContent.length,kt=Math.min(_e.start,Zt),mi=_e.end===void 0?kt:Math.min(_e.end,Zt);!Je.extend&&kt>mi&&(j=mi,mi=kt,kt=j);var Ne=y0(ie,kt),we=y0(ie,mi);if(Ne&&we&&(Je.rangeCount!==1||Je.anchorNode!==Ne.node||Je.anchorOffset!==Ne.offset||Je.focusNode!==we.node||Je.focusOffset!==we.offset)){var ke=dt.createRange();ke.setStart(Ne.node,Ne.offset),Je.removeAllRanges(),kt>mi?(Je.addRange(ke),Je.extend(we.node,we.offset)):(ke.setEnd(we.node,we.offset),Je.addRange(ke))}}}}for(dt=[],Je=ie;Je=Je.parentNode;)Je.nodeType===1&&dt.push({element:Je,left:Je.scrollLeft,top:Je.scrollTop});for(typeof ie.focus=="function"&&ie.focus(),ie=0;ie<dt.length;ie++){var ft=dt[ie];ft.element.scrollLeft=ft.left,ft.element.scrollTop=ft.top}}_y=!!dA,pA=dA=null}finally{Wn=T,q.p=_,z.T=m}}o.current=u,ds=2}}function Ct(){if(ds===2){ds=0;var o=qs,u=oi,m=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||m){m=z.T,z.T=null;var _=q.p;q.p=2;var T=Wn;Wn|=4;try{Sl(o,u.alternate,u)}finally{Wn=T,q.p=_,z.T=m}}ds=3}}function an(){if(ds===4||ds===3){ds=0,Ue();var o=qs,u=oi,m=Qa,_=$a;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?ds=5:(ds=0,oi=qs=null,er(o,o.pendingLanes));var T=o.pendingLanes;if(T===0&&(Za=null),mt(m),u=u.stateNode,be&&typeof be.onCommitFiberRoot=="function")try{be.onCommitFiberRoot(Be,u,void 0,(u.current.flags&128)===128)}catch{}if(_!==null){u=z.T,T=q.p,q.p=2,z.T=null;try{for(var D=o.onRecoverableError,j=0;j<_.length;j++){var ie=_[j];D(ie.value,{componentStack:ie.stack})}}finally{z.T=u,q.p=T}}(Qa&3)!==0&&vc(),_c(o),T=o.pendingLanes,(m&4194090)!==0&&(T&42)!==0?o===su?wo++:(wo=0,su=o):wo=0,ag(0)}}function er(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Gu(u)))}function vc(o){return Tt(),Ct(),an(),yc()}function yc(){if(ds!==5)return!1;var o=qs,u=Ml;Ml=0;var m=mt(Qa),_=z.T,T=q.p;try{q.p=32>m?32:m,z.T=null,m=Ih,Ih=null;var D=qs,j=Qa;if(ds=0,oi=qs=null,Qa=0,(Wn&6)!==0)throw Error(n(331));var ie=Wn;if(Wn|=4,ig(D.current),Op(D,D.current,j,m),Wn=ie,ag(0,!1),be&&typeof be.onPostCommitFiberRoot=="function")try{be.onPostCommitFiberRoot(Be,D)}catch{}return!0}finally{q.p=T,z.T=_,er(o,u)}}function We(o,u,m){u=Os(m,u),u=wp(o.stateNode,u,2),o=pl(o,u,2),o!==null&&(gt(o,2),_c(o))}function Ce(o,u,m){if(o.tag===3)We(o,o,m);else for(;u!==null;){if(u.tag===3){We(u,o,m);break}else if(u.tag===1){var _=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(Za===null||!Za.has(_))){o=Os(m,o),m=ry(2),_=pl(u,m,2),_!==null&&(Rp(m,_,u,o),gt(_,2),_c(_));break}}u=u.return}}function Ze(o,u,m){var _=o.pingCache;if(_===null){_=o.pingCache=new sg;var T=new Set;_.set(u,T)}else T=_.get(u),T===void 0&&(T=new Set,_.set(u,T));T.has(m)||(of=!0,T.add(m),o=_t.bind(null,o,u,m),u.then(o,o))}function _t(o,u,m){var _=o.pingCache;_!==null&&_.delete(u),o.pingedLanes|=o.suspendedLanes&m,o.warmLanes&=~m,sn===o&&(It&m)===m&&(yi===4||yi===3&&(It&62914560)===It&&300>Re()-ei?(Wn&2)===0&&gc(o,0):iu|=m,On===It&&(On=0)),_c(o)}function Ot(o,u){u===0&&(u=je()),o=cl(o,u),o!==null&&(gt(o,u),_c(o))}function _i(o){var u=o.memoizedState,m=0;u!==null&&(m=u.retryLane),Ot(o,m)}function qt(o,u){var m=0;switch(o.tag){case 13:var _=o.stateNode,T=o.memoizedState;T!==null&&(m=T.retryLane);break;case 19:_=o.stateNode;break;case 22:_=o.stateNode._retryCache;break;default:throw Error(n(314))}_!==null&&_.delete(u),Ot(o,m)}function kn(o,u){return rt(o,u)}var qi=null,xn=null,Do=!1,Fp=!1,aA=!1,zh=0;function _c(o){o!==xn&&o.next===null&&(xn===null?qi=xn=o:xn=xn.next=o),Fp=!0,Do||(Do=!0,iN())}function ag(o,u){if(!aA&&Fp){aA=!0;do for(var m=!1,_=qi;_!==null;){if(o!==0){var T=_.pendingLanes;if(T===0)var D=0;else{var j=_.suspendedLanes,ie=_.pingedLanes;D=(1<<31-$e(42|o)+1)-1,D&=T&~(j&~ie),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(m=!0,LE(_,D))}else D=It,D=fe(_,_===sn?D:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(D&3)===0||Ae(_,D)||(m=!0,LE(_,D));_=_.next}while(m);aA=!1}}function nN(){DE()}function DE(){Fp=Do=!1;var o=0;zh!==0&&(fN()&&(o=zh),zh=0);for(var u=Re(),m=null,_=qi;_!==null;){var T=_.next,D=BE(_,u);D===0?(_.next=null,m===null?qi=T:m.next=T,T===null&&(xn=m)):(m=_,(o!==0||(D&3)!==0)&&(Fp=!0)),_=T}ag(o)}function BE(o,u){for(var m=o.suspendedLanes,_=o.pingedLanes,T=o.expirationTimes,D=o.pendingLanes&-62914561;0<D;){var j=31-$e(D),ie=1<<j,_e=T[j];_e===-1?((ie&m)===0||(ie&_)!==0)&&(T[j]=st(ie,u)):_e<=u&&(o.expiredLanes|=ie),D&=~ie}if(u=sn,m=It,m=fe(o,o===u?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),_=o.callbackNode,m===0||o===u&&(hn===2||hn===9)||o.cancelPendingCommit!==null)return _!==null&&_!==null&&Z(_),o.callbackNode=null,o.callbackPriority=0;if((m&3)===0||Ae(o,m)){if(u=m&-m,u===o.callbackPriority)return u;switch(_!==null&&Z(_),mt(m)){case 2:case 8:m=Se;break;case 32:m=ye;break;case 268435456:m=ee;break;default:m=ye}return _=UE.bind(null,o),m=rt(m,_),o.callbackPriority=u,o.callbackNode=m,u}return _!==null&&_!==null&&Z(_),o.callbackPriority=2,o.callbackNode=null,2}function UE(o,u){if(ds!==0&&ds!==5)return o.callbackNode=null,o.callbackPriority=0,null;var m=o.callbackNode;if(vc()&&o.callbackNode!==m)return null;var _=It;return _=fe(o,o===sn?_:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),_===0?null:(lf(o,_,u),BE(o,Re()),o.callbackNode!=null&&o.callbackNode===m?UE.bind(null,o):null)}function LE(o,u){if(vc())return null;lf(o,u,!0)}function iN(){dN(function(){(Wn&6)!==0?rt(Pe,nN):DE()})}function rA(){return zh===0&&(zh=he()),zh}function OE(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:ho(""+o)}function NE(o,u){var m=u.ownerDocument.createElement("input");return m.name=u.name,m.value=u.value,o.id&&m.setAttribute("form",o.id),u.parentNode.insertBefore(m,u),o=new FormData(o),m.parentNode.removeChild(m),o}function sN(o,u,m,_,T){if(u==="submit"&&m&&m.stateNode===T){var D=OE((T[tn]||null).action),j=_.submitter;j&&(u=(u=j[tn]||null)?OE(u.formAction):j.getAttribute("formAction"),u!==null&&(D=u,j=null));var ie=new ea("action","action",null,_,T);o.push({event:ie,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(zh!==0){var _e=j?NE(T,j):new FormData(T);Q0(m,{pending:!0,data:_e,method:T.method,action:D},null,_e)}}else typeof D=="function"&&(ie.preventDefault(),_e=j?NE(T,j):new FormData(T),Q0(m,{pending:!0,data:_e,method:T.method,action:D},D,_e))},currentTarget:T}]})}}for(var oA=0;oA<hh.length;oA++){var lA=hh[oA],aN=lA.toLowerCase(),rN=lA[0].toUpperCase()+lA.slice(1);xs(aN,"on"+rN)}xs(ta,"onAnimationEnd"),xs(M0,"onAnimationIteration"),xs(Aa,"onAnimationStart"),xs("dblclick","onDoubleClick"),xs("focusin","onFocus"),xs("focusout","onBlur"),xs(y1,"onTransitionRun"),xs(ol,"onTransitionStart"),xs(Nu,"onTransitionCancel"),xs(ll,"onTransitionEnd"),te("onMouseEnter",["mouseout","mouseover"]),te("onMouseLeave",["mouseout","mouseover"]),te("onPointerEnter",["pointerout","pointerover"]),te("onPointerLeave",["pointerout","pointerover"]),_n("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_n("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_n("onBeforeInput",["compositionend","keypress","textInput","paste"]),_n("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_n("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_n("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rg));function PE(o,u){u=(u&4)!==0;for(var m=0;m<o.length;m++){var _=o[m],T=_.event;_=_.listeners;e:{var D=void 0;if(u)for(var j=_.length-1;0<=j;j--){var ie=_[j],_e=ie.instance,Xe=ie.currentTarget;if(ie=ie.listener,_e!==D&&T.isPropagationStopped())break e;D=ie,T.currentTarget=Xe;try{D(T)}catch(ct){jc(ct)}T.currentTarget=null,D=_e}else for(j=0;j<_.length;j++){if(ie=_[j],_e=ie.instance,Xe=ie.currentTarget,ie=ie.listener,_e!==D&&T.isPropagationStopped())break e;D=ie,T.currentTarget=Xe;try{D(T)}catch(ct){jc(ct)}T.currentTarget=null,D=_e}}}}function En(o,u){var m=u[zn];m===void 0&&(m=u[zn]=new Set);var _=o+"__bubble";m.has(_)||(IE(u,o,2,!1),m.add(_))}function cA(o,u,m){var _=0;u&&(_|=4),IE(m,o,_,u)}var uy="_reactListening"+Math.random().toString(36).slice(2);function uA(o){if(!o[uy]){o[uy]=!0,ni.forEach(function(m){m!=="selectionchange"&&(oN.has(m)||cA(m,!1,o),cA(m,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[uy]||(u[uy]=!0,cA("selectionchange",!1,u))}}function IE(o,u,m,_){switch(oC(u)){case 2:var T=ON;break;case 8:T=NN;break;default:T=bA}m=T.bind(null,u,m,o),T=void 0,!Zo||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(T=!0),_?T!==void 0?o.addEventListener(u,m,{capture:!0,passive:T}):o.addEventListener(u,m,!0):T!==void 0?o.addEventListener(u,m,{passive:T}):o.addEventListener(u,m,!1)}function fA(o,u,m,_,T){var D=_;if((u&1)===0&&(u&2)===0&&_!==null)e:for(;;){if(_===null)return;var j=_.tag;if(j===3||j===4){var ie=_.stateNode.containerInfo;if(ie===T)break;if(j===4)for(j=_.return;j!==null;){var _e=j.tag;if((_e===3||_e===4)&&j.stateNode.containerInfo===T)return;j=j.return}for(;ie!==null;){if(j=ui(ie),j===null)return;if(_e=j.tag,_e===5||_e===6||_e===26||_e===27){_=D=j;continue e}ie=ie.parentNode}}_=_.return}Nc(function(){var Xe=D,ct=Nr(m),dt=[];e:{var qe=np.get(o);if(qe!==void 0){var Je=ea,Zt=o;switch(o){case"keypress":if(lr(m)===0)break e;case"keydown":case"keyup":Je=f0;break;case"focusin":Zt="focus",Je=nl;break;case"focusout":Zt="blur",Je=nl;break;case"beforeblur":case"afterblur":Je=nl;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Je=Fc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Je=c0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Je=d0;break;case ta:case M0:case Aa:Je=Wd;break;case ll:Je=il;break;case"scroll":case"scrollend":Je=Bu;break;case"wheel":Je=qS;break;case"copy":case"cut":case"paste":Je=ya;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Je=qd;break;case"toggle":case"beforetoggle":Je=kl}var kt=(u&4)!==0,mi=!kt&&(o==="scroll"||o==="scrollend"),Ne=kt?qe!==null?qe+"Capture":null:qe;kt=[];for(var we=Xe,ke;we!==null;){var ft=we;if(ke=ft.stateNode,ft=ft.tag,ft!==5&&ft!==26&&ft!==27||ke===null||Ne===null||(ft=Jo(we,Ne),ft!=null&&kt.push(og(we,ft,ke))),mi)break;we=we.return}0<kt.length&&(qe=new Je(qe,Zt,null,m,ct),dt.push({event:qe,listeners:kt}))}}if((u&7)===0){e:{if(qe=o==="mouseover"||o==="pointerover",Je=o==="mouseout"||o==="pointerout",qe&&m!==Or&&(Zt=m.relatedTarget||m.fromElement)&&(ui(Zt)||Zt[gn]))break e;if((Je||qe)&&(qe=ct.window===ct?ct:(qe=ct.ownerDocument)?qe.defaultView||qe.parentWindow:window,Je?(Zt=m.relatedTarget||m.toElement,Je=Xe,Zt=Zt?ui(Zt):null,Zt!==null&&(mi=a(Zt),kt=Zt.tag,Zt!==mi||kt!==5&&kt!==27&&kt!==6)&&(Zt=null)):(Je=null,Zt=Xe),Je!==Zt)){if(kt=Fc,ft="onMouseLeave",Ne="onMouseEnter",we="mouse",(o==="pointerout"||o==="pointerover")&&(kt=qd,ft="onPointerLeave",Ne="onPointerEnter",we="pointer"),mi=Je==null?qe:Ti(Je),ke=Zt==null?qe:Ti(Zt),qe=new kt(ft,we+"leave",Je,m,ct),qe.target=mi,qe.relatedTarget=ke,ft=null,ui(ct)===Xe&&(kt=new kt(Ne,we+"enter",Zt,m,ct),kt.target=ke,kt.relatedTarget=mi,ft=kt),mi=ft,Je&&Zt)t:{for(kt=Je,Ne=Zt,we=0,ke=kt;ke;ke=zp(ke))we++;for(ke=0,ft=Ne;ft;ft=zp(ft))ke++;for(;0<we-ke;)kt=zp(kt),we--;for(;0<ke-we;)Ne=zp(Ne),ke--;for(;we--;){if(kt===Ne||Ne!==null&&kt===Ne.alternate)break t;kt=zp(kt),Ne=zp(Ne)}kt=null}else kt=null;Je!==null&&FE(dt,qe,Je,kt,!1),Zt!==null&&mi!==null&&FE(dt,mi,Zt,kt,!0)}}e:{if(qe=Xe?Ti(Xe):window,Je=qe.nodeName&&qe.nodeName.toLowerCase(),Je==="select"||Je==="input"&&qe.type==="file")var Lt=Jd;else if(v0(qe))if(Zd)Lt=Yl;else{Lt=m1;var An=KS}else Je=qe.nodeName,!Je||Je.toLowerCase()!=="input"||qe.type!=="checkbox"&&qe.type!=="radio"?Xe&&Hl(Xe.elementType)&&(Lt=Jd):Lt=ch;if(Lt&&(Lt=Lt(o,Xe))){_a(dt,Lt,m,ct);break e}An&&An(o,qe,Xe),o==="focusout"&&Xe&&qe.type==="number"&&Xe.memoizedProps.value!=null&&Mi(qe,"number",qe.value)}switch(An=Xe?Ti(Xe):window,o){case"focusin":(v0(An)||An.contentEditable==="true")&&(al=An,$d=Xe,fh=null);break;case"focusout":fh=$d=al=null;break;case"mousedown":ep=!0;break;case"contextmenu":case"mouseup":case"dragend":ep=!1,A0(dt,m,ct);break;case"selectionchange":if(S0)break;case"keydown":case"keyup":A0(dt,m,ct)}var Nt;if(ih)e:{switch(o){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else jl?rh(o,m)&&(jt="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(jt="onCompositionStart");jt&&(ah&&m.locale!=="ko"&&(jl||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&jl&&(Nt=Du()):(Vi=ct,Pc="value"in Vi?Vi.value:Vi.textContent,jl=!0)),An=fy(Xe,jt),0<An.length&&(jt=new za(jt,o,null,m,ct),dt.push({event:jt,listeners:An}),Nt?jt.data=Nt:(Nt=m0(m),Nt!==null&&(jt.data=Nt)))),(Nt=sh?oh(o,m):g0(o,m))&&(jt=fy(Xe,"onBeforeInput"),0<jt.length&&(An=new za("onBeforeInput","beforeinput",null,m,ct),dt.push({event:An,listeners:jt}),An.data=Nt)),sN(dt,o,Xe,m,ct)}PE(dt,u)})}function og(o,u,m){return{instance:o,listener:u,currentTarget:m}}function fy(o,u){for(var m=u+"Capture",_=[];o!==null;){var T=o,D=T.stateNode;if(T=T.tag,T!==5&&T!==26&&T!==27||D===null||(T=Jo(o,m),T!=null&&_.unshift(og(o,T,D)),T=Jo(o,u),T!=null&&_.push(og(o,T,D))),o.tag===3)return _;o=o.return}return[]}function zp(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function FE(o,u,m,_,T){for(var D=u._reactName,j=[];m!==null&&m!==_;){var ie=m,_e=ie.alternate,Xe=ie.stateNode;if(ie=ie.tag,_e!==null&&_e===_)break;ie!==5&&ie!==26&&ie!==27||Xe===null||(_e=Xe,T?(Xe=Jo(m,D),Xe!=null&&j.unshift(og(m,Xe,_e))):T||(Xe=Jo(m,D),Xe!=null&&j.push(og(m,Xe,_e)))),m=m.return}j.length!==0&&o.push({event:u,listeners:j})}var lN=/\r\n?/g,cN=/\u0000|\uFFFD/g;function zE(o){return(typeof o=="string"?o:""+o).replace(lN,`
`).replace(cN,"")}function GE(o,u){return u=zE(u),zE(o)===u}function hy(){}function pi(o,u,m,_,T,D){switch(m){case"children":typeof _=="string"?u==="body"||u==="textarea"&&_===""||Bi(o,_):(typeof _=="number"||typeof _=="bigint")&&u!=="body"&&Bi(o,""+_);break;case"className":yt(o,"class",_);break;case"tabIndex":yt(o,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":yt(o,m,_);break;case"style":Gl(o,_,D);break;case"data":if(u!=="object"){yt(o,"data",_);break}case"src":case"href":if(_===""&&(u!=="a"||m!=="href")){o.removeAttribute(m);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){o.removeAttribute(m);break}_=ho(""+_),o.setAttribute(m,_);break;case"action":case"formAction":if(typeof _=="function"){o.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(m==="formAction"?(u!=="input"&&pi(o,u,"name",T.name,T,null),pi(o,u,"formEncType",T.formEncType,T,null),pi(o,u,"formMethod",T.formMethod,T,null),pi(o,u,"formTarget",T.formTarget,T,null)):(pi(o,u,"encType",T.encType,T,null),pi(o,u,"method",T.method,T,null),pi(o,u,"target",T.target,T,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){o.removeAttribute(m);break}_=ho(""+_),o.setAttribute(m,_);break;case"onClick":_!=null&&(o.onclick=hy);break;case"onScroll":_!=null&&En("scroll",o);break;case"onScrollEnd":_!=null&&En("scrollend",o);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(m=_.__html,m!=null){if(T.children!=null)throw Error(n(60));o.innerHTML=m}}break;case"multiple":o.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":o.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){o.removeAttribute("xlink:href");break}m=ho(""+_),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?o.setAttribute(m,""+_):o.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?o.setAttribute(m,""):o.removeAttribute(m);break;case"capture":case"download":_===!0?o.setAttribute(m,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?o.setAttribute(m,_):o.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?o.setAttribute(m,_):o.removeAttribute(m);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?o.removeAttribute(m):o.setAttribute(m,_);break;case"popover":En("beforetoggle",o),En("toggle",o),ht(o,"popover",_);break;case"xlinkActuate":Mt(o,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":Mt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":Mt(o,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":Mt(o,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":Mt(o,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":Mt(o,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":Mt(o,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":Mt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":Mt(o,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":ht(o,"is",_);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Wo.get(m)||m,ht(o,m,_))}}function hA(o,u,m,_,T,D){switch(m){case"style":Gl(o,_,D);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(m=_.__html,m!=null){if(T.children!=null)throw Error(n(60));o.innerHTML=m}}break;case"children":typeof _=="string"?Bi(o,_):(typeof _=="number"||typeof _=="bigint")&&Bi(o,""+_);break;case"onScroll":_!=null&&En("scroll",o);break;case"onScrollEnd":_!=null&&En("scrollend",o);break;case"onClick":_!=null&&(o.onclick=hy);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gi.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(T=m.endsWith("Capture"),u=m.slice(2,T?m.length-7:void 0),D=o[tn]||null,D=D!=null?D[m]:null,typeof D=="function"&&o.removeEventListener(u,D,T),typeof _=="function")){typeof D!="function"&&D!==null&&(m in o?o[m]=null:o.hasAttribute(m)&&o.removeAttribute(m)),o.addEventListener(u,_,T);break e}m in o?o[m]=_:_===!0?o.setAttribute(m,""):ht(o,m,_)}}}function la(o,u,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":En("error",o),En("load",o);var _=!1,T=!1,D;for(D in m)if(m.hasOwnProperty(D)){var j=m[D];if(j!=null)switch(D){case"src":_=!0;break;case"srcSet":T=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:pi(o,u,D,j,m,null)}}T&&pi(o,u,"srcSet",m.srcSet,m,null),_&&pi(o,u,"src",m.src,m,null);return;case"input":En("invalid",o);var ie=D=j=T=null,_e=null,Xe=null;for(_ in m)if(m.hasOwnProperty(_)){var ct=m[_];if(ct!=null)switch(_){case"name":T=ct;break;case"type":j=ct;break;case"checked":_e=ct;break;case"defaultChecked":Xe=ct;break;case"value":D=ct;break;case"defaultValue":ie=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(n(137,u));break;default:pi(o,u,_,ct,m,null)}}Hn(o,D,ie,_e,Xe,j,T,!1),Un(o);return;case"select":En("invalid",o),_=j=D=null;for(T in m)if(m.hasOwnProperty(T)&&(ie=m[T],ie!=null))switch(T){case"value":D=ie;break;case"defaultValue":j=ie;break;case"multiple":_=ie;default:pi(o,u,T,ie,m,null)}u=D,m=j,o.multiple=!!_,u!=null?$n(o,!!_,u,!1):m!=null&&$n(o,!!_,m,!0);return;case"textarea":En("invalid",o),D=T=_=null;for(j in m)if(m.hasOwnProperty(j)&&(ie=m[j],ie!=null))switch(j){case"value":_=ie;break;case"defaultValue":T=ie;break;case"children":D=ie;break;case"dangerouslySetInnerHTML":if(ie!=null)throw Error(n(91));break;default:pi(o,u,j,ie,m,null)}vi(o,_,T,D),Un(o);return;case"option":for(_e in m)if(m.hasOwnProperty(_e)&&(_=m[_e],_!=null))switch(_e){case"selected":o.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:pi(o,u,_e,_,m,null)}return;case"dialog":En("beforetoggle",o),En("toggle",o),En("cancel",o),En("close",o);break;case"iframe":case"object":En("load",o);break;case"video":case"audio":for(_=0;_<rg.length;_++)En(rg[_],o);break;case"image":En("error",o),En("load",o);break;case"details":En("toggle",o);break;case"embed":case"source":case"link":En("error",o),En("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Xe in m)if(m.hasOwnProperty(Xe)&&(_=m[Xe],_!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:pi(o,u,Xe,_,m,null)}return;default:if(Hl(u)){for(ct in m)m.hasOwnProperty(ct)&&(_=m[ct],_!==void 0&&hA(o,u,ct,_,m,void 0));return}}for(ie in m)m.hasOwnProperty(ie)&&(_=m[ie],_!=null&&pi(o,u,ie,_,m,null))}function uN(o,u,m,_){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var T=null,D=null,j=null,ie=null,_e=null,Xe=null,ct=null;for(Je in m){var dt=m[Je];if(m.hasOwnProperty(Je)&&dt!=null)switch(Je){case"checked":break;case"value":break;case"defaultValue":_e=dt;default:_.hasOwnProperty(Je)||pi(o,u,Je,null,_,dt)}}for(var qe in _){var Je=_[qe];if(dt=m[qe],_.hasOwnProperty(qe)&&(Je!=null||dt!=null))switch(qe){case"type":D=Je;break;case"name":T=Je;break;case"checked":Xe=Je;break;case"defaultChecked":ct=Je;break;case"value":j=Je;break;case"defaultValue":ie=Je;break;case"children":case"dangerouslySetInnerHTML":if(Je!=null)throw Error(n(137,u));break;default:Je!==dt&&pi(o,u,qe,Je,_,dt)}}Ei(o,j,ie,_e,Xe,ct,D,T);return;case"select":Je=j=ie=qe=null;for(D in m)if(_e=m[D],m.hasOwnProperty(D)&&_e!=null)switch(D){case"value":break;case"multiple":Je=_e;default:_.hasOwnProperty(D)||pi(o,u,D,null,_,_e)}for(T in _)if(D=_[T],_e=m[T],_.hasOwnProperty(T)&&(D!=null||_e!=null))switch(T){case"value":qe=D;break;case"defaultValue":ie=D;break;case"multiple":j=D;default:D!==_e&&pi(o,u,T,D,_,_e)}u=ie,m=j,_=Je,qe!=null?$n(o,!!m,qe,!1):!!_!=!!m&&(u!=null?$n(o,!!m,u,!0):$n(o,!!m,m?[]:"",!1));return;case"textarea":Je=qe=null;for(ie in m)if(T=m[ie],m.hasOwnProperty(ie)&&T!=null&&!_.hasOwnProperty(ie))switch(ie){case"value":break;case"children":break;default:pi(o,u,ie,null,_,T)}for(j in _)if(T=_[j],D=m[j],_.hasOwnProperty(j)&&(T!=null||D!=null))switch(j){case"value":qe=T;break;case"defaultValue":Je=T;break;case"children":break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(n(91));break;default:T!==D&&pi(o,u,j,T,_,D)}Ci(o,qe,Je);return;case"option":for(var Zt in m)if(qe=m[Zt],m.hasOwnProperty(Zt)&&qe!=null&&!_.hasOwnProperty(Zt))switch(Zt){case"selected":o.selected=!1;break;default:pi(o,u,Zt,null,_,qe)}for(_e in _)if(qe=_[_e],Je=m[_e],_.hasOwnProperty(_e)&&qe!==Je&&(qe!=null||Je!=null))switch(_e){case"selected":o.selected=qe&&typeof qe!="function"&&typeof qe!="symbol";break;default:pi(o,u,_e,qe,_,Je)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var kt in m)qe=m[kt],m.hasOwnProperty(kt)&&qe!=null&&!_.hasOwnProperty(kt)&&pi(o,u,kt,null,_,qe);for(Xe in _)if(qe=_[Xe],Je=m[Xe],_.hasOwnProperty(Xe)&&qe!==Je&&(qe!=null||Je!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(n(137,u));break;default:pi(o,u,Xe,qe,_,Je)}return;default:if(Hl(u)){for(var mi in m)qe=m[mi],m.hasOwnProperty(mi)&&qe!==void 0&&!_.hasOwnProperty(mi)&&hA(o,u,mi,void 0,_,qe);for(ct in _)qe=_[ct],Je=m[ct],!_.hasOwnProperty(ct)||qe===Je||qe===void 0&&Je===void 0||hA(o,u,ct,qe,_,Je);return}}for(var Ne in m)qe=m[Ne],m.hasOwnProperty(Ne)&&qe!=null&&!_.hasOwnProperty(Ne)&&pi(o,u,Ne,null,_,qe);for(dt in _)qe=_[dt],Je=m[dt],!_.hasOwnProperty(dt)||qe===Je||qe==null&&Je==null||pi(o,u,dt,qe,_,Je)}var dA=null,pA=null;function dy(o){return o.nodeType===9?o:o.ownerDocument}function HE(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function VE(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function mA(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var gA=null;function fN(){var o=window.event;return o&&o.type==="popstate"?o===gA?!1:(gA=o,!0):(gA=null,!1)}var kE=typeof setTimeout=="function"?setTimeout:void 0,hN=typeof clearTimeout=="function"?clearTimeout:void 0,XE=typeof Promise=="function"?Promise:void 0,dN=typeof queueMicrotask=="function"?queueMicrotask:typeof XE<"u"?function(o){return XE.resolve(null).then(o).catch(pN)}:kE;function pN(o){setTimeout(function(){throw o})}function uf(o){return o==="head"}function jE(o,u){var m=u,_=0,T=0;do{var D=m.nextSibling;if(o.removeChild(m),D&&D.nodeType===8)if(m=D.data,m==="/$"){if(0<_&&8>_){m=_;var j=o.ownerDocument;if(m&1&&lg(j.documentElement),m&2&&lg(j.body),m&4)for(m=j.head,lg(m),j=m.firstChild;j;){var ie=j.nextSibling,_e=j.nodeName;j[Bn]||_e==="SCRIPT"||_e==="STYLE"||_e==="LINK"&&j.rel.toLowerCase()==="stylesheet"||m.removeChild(j),j=ie}}if(T===0){o.removeChild(D),gg(u);return}T--}else m==="$"||m==="$?"||m==="$!"?T++:_=m.charCodeAt(0)-48;else _=0;m=D}while(m);gg(u)}function vA(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var m=u;switch(u=u.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":vA(m),Kt(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}o.removeChild(m)}}function mN(o,u,m,_){for(;o.nodeType===1;){var T=m;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!_&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(_){if(!o[Bn])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(D=o.getAttribute("rel"),D==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(D!==T.rel||o.getAttribute("href")!==(T.href==null||T.href===""?null:T.href)||o.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin)||o.getAttribute("title")!==(T.title==null?null:T.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(D=o.getAttribute("src"),(D!==(T.src==null?null:T.src)||o.getAttribute("type")!==(T.type==null?null:T.type)||o.getAttribute("crossorigin")!==(T.crossOrigin==null?null:T.crossOrigin))&&D&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var D=T.name==null?null:""+T.name;if(T.type==="hidden"&&o.getAttribute("name")===D)return o}else return o;if(o=bl(o.nextSibling),o===null)break}return null}function gN(o,u,m){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!m||(o=bl(o.nextSibling),o===null))return null;return o}function yA(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function vN(o,u){var m=o.ownerDocument;if(o.data!=="$?"||m.readyState==="complete")u();else{var _=function(){u(),m.removeEventListener("DOMContentLoaded",_)};m.addEventListener("DOMContentLoaded",_),o._reactRetry=_}}function bl(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return o}var _A=null;function YE(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(u===0)return o;u--}else m==="/$"&&u++}o=o.previousSibling}return null}function WE(o,u,m){switch(u=dy(m),o){case"html":if(o=u.documentElement,!o)throw Error(n(452));return o;case"head":if(o=u.head,!o)throw Error(n(453));return o;case"body":if(o=u.body,!o)throw Error(n(454));return o;default:throw Error(n(451))}}function lg(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);Kt(o)}var Bo=new Map,qE=new Set;function py(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ru=q.d;q.d={f:yN,r:_N,D:xN,C:SN,L:AN,m:MN,X:TN,S:bN,M:EN};function yN(){var o=ru.f(),u=Ro();return o||u}function _N(o){var u=bn(o);u!==null&&u.tag===5&&u.type==="form"?W1(u):ru.r(o)}var Gp=typeof document>"u"?null:document;function KE(o,u,m){var _=Gp;if(_&&typeof u=="string"&&u){var T=Tn(u);T='link[rel="'+o+'"][href="'+T+'"]',typeof m=="string"&&(T+='[crossorigin="'+m+'"]'),qE.has(T)||(qE.add(T),o={rel:o,crossOrigin:m,href:u},_.querySelector(T)===null&&(u=_.createElement("link"),la(u,"link",o),Gn(u),_.head.appendChild(u)))}}function xN(o){ru.D(o),KE("dns-prefetch",o,null)}function SN(o,u){ru.C(o,u),KE("preconnect",o,u)}function AN(o,u,m){ru.L(o,u,m);var _=Gp;if(_&&o&&u){var T='link[rel="preload"][as="'+Tn(u)+'"]';u==="image"&&m&&m.imageSrcSet?(T+='[imagesrcset="'+Tn(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(T+='[imagesizes="'+Tn(m.imageSizes)+'"]')):T+='[href="'+Tn(o)+'"]';var D=T;switch(u){case"style":D=Hp(o);break;case"script":D=Vp(o)}Bo.has(D)||(o=d({rel:"preload",href:u==="image"&&m&&m.imageSrcSet?void 0:o,as:u},m),Bo.set(D,o),_.querySelector(T)!==null||u==="style"&&_.querySelector(cg(D))||u==="script"&&_.querySelector(ug(D))||(u=_.createElement("link"),la(u,"link",o),Gn(u),_.head.appendChild(u)))}}function MN(o,u){ru.m(o,u);var m=Gp;if(m&&o){var _=u&&typeof u.as=="string"?u.as:"script",T='link[rel="modulepreload"][as="'+Tn(_)+'"][href="'+Tn(o)+'"]',D=T;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=Vp(o)}if(!Bo.has(D)&&(o=d({rel:"modulepreload",href:o},u),Bo.set(D,o),m.querySelector(T)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(ug(D)))return}_=m.createElement("link"),la(_,"link",o),Gn(_),m.head.appendChild(_)}}}function bN(o,u,m){ru.S(o,u,m);var _=Gp;if(_&&o){var T=cs(_).hoistableStyles,D=Hp(o);u=u||"default";var j=T.get(D);if(!j){var ie={loading:0,preload:null};if(j=_.querySelector(cg(D)))ie.loading=5;else{o=d({rel:"stylesheet",href:o,"data-precedence":u},m),(m=Bo.get(D))&&xA(o,m);var _e=j=_.createElement("link");Gn(_e),la(_e,"link",o),_e._p=new Promise(function(Xe,ct){_e.onload=Xe,_e.onerror=ct}),_e.addEventListener("load",function(){ie.loading|=1}),_e.addEventListener("error",function(){ie.loading|=2}),ie.loading|=4,my(j,u,_)}j={type:"stylesheet",instance:j,count:1,state:ie},T.set(D,j)}}}function TN(o,u){ru.X(o,u);var m=Gp;if(m&&o){var _=cs(m).hoistableScripts,T=Vp(o),D=_.get(T);D||(D=m.querySelector(ug(T)),D||(o=d({src:o,async:!0},u),(u=Bo.get(T))&&SA(o,u),D=m.createElement("script"),Gn(D),la(D,"link",o),m.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},_.set(T,D))}}function EN(o,u){ru.M(o,u);var m=Gp;if(m&&o){var _=cs(m).hoistableScripts,T=Vp(o),D=_.get(T);D||(D=m.querySelector(ug(T)),D||(o=d({src:o,async:!0,type:"module"},u),(u=Bo.get(T))&&SA(o,u),D=m.createElement("script"),Gn(D),la(D,"link",o),m.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},_.set(T,D))}}function JE(o,u,m,_){var T=(T=ue.current)?py(T):null;if(!T)throw Error(n(446));switch(o){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(u=Hp(m.href),m=cs(T).hoistableStyles,_=m.get(u),_||(_={type:"style",instance:null,count:0,state:null},m.set(u,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){o=Hp(m.href);var D=cs(T).hoistableStyles,j=D.get(o);if(j||(T=T.ownerDocument||T,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(o,j),(D=T.querySelector(cg(o)))&&!D._p&&(j.instance=D,j.state.loading=5),Bo.has(o)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Bo.set(o,m),D||CN(T,o,m,j.state))),u&&_===null)throw Error(n(528,""));return j}if(u&&_!==null)throw Error(n(529,""));return null;case"script":return u=m.async,m=m.src,typeof m=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Vp(m),m=cs(T).hoistableScripts,_=m.get(u),_||(_={type:"script",instance:null,count:0,state:null},m.set(u,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,o))}}function Hp(o){return'href="'+Tn(o)+'"'}function cg(o){return'link[rel="stylesheet"]['+o+"]"}function ZE(o){return d({},o,{"data-precedence":o.precedence,precedence:null})}function CN(o,u,m,_){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?_.loading=1:(u=o.createElement("link"),_.preload=u,u.addEventListener("load",function(){return _.loading|=1}),u.addEventListener("error",function(){return _.loading|=2}),la(u,"link",m),Gn(u),o.head.appendChild(u))}function Vp(o){return'[src="'+Tn(o)+'"]'}function ug(o){return"script[async]"+o}function QE(o,u,m){if(u.count++,u.instance===null)switch(u.type){case"style":var _=o.querySelector('style[data-href~="'+Tn(m.href)+'"]');if(_)return u.instance=_,Gn(_),_;var T=d({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return _=(o.ownerDocument||o).createElement("style"),Gn(_),la(_,"style",T),my(_,m.precedence,o),u.instance=_;case"stylesheet":T=Hp(m.href);var D=o.querySelector(cg(T));if(D)return u.state.loading|=4,u.instance=D,Gn(D),D;_=ZE(m),(T=Bo.get(T))&&xA(_,T),D=(o.ownerDocument||o).createElement("link"),Gn(D);var j=D;return j._p=new Promise(function(ie,_e){j.onload=ie,j.onerror=_e}),la(D,"link",_),u.state.loading|=4,my(D,m.precedence,o),u.instance=D;case"script":return D=Vp(m.src),(T=o.querySelector(ug(D)))?(u.instance=T,Gn(T),T):(_=m,(T=Bo.get(D))&&(_=d({},m),SA(_,T)),o=o.ownerDocument||o,T=o.createElement("script"),Gn(T),la(T,"link",_),o.head.appendChild(T),u.instance=T);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(_=u.instance,u.state.loading|=4,my(_,m.precedence,o));return u.instance}function my(o,u,m){for(var _=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),T=_.length?_[_.length-1]:null,D=T,j=0;j<_.length;j++){var ie=_[j];if(ie.dataset.precedence===u)D=ie;else if(D!==T)break}D?D.parentNode.insertBefore(o,D.nextSibling):(u=m.nodeType===9?m.head:m,u.insertBefore(o,u.firstChild))}function xA(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function SA(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var gy=null;function $E(o,u,m){if(gy===null){var _=new Map,T=gy=new Map;T.set(m,_)}else T=gy,_=T.get(m),_||(_=new Map,T.set(m,_));if(_.has(o))return _;for(_.set(o,null),m=m.getElementsByTagName(o),T=0;T<m.length;T++){var D=m[T];if(!(D[Bn]||D[ot]||o==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var j=D.getAttribute(u)||"";j=o+j;var ie=_.get(j);ie?ie.push(D):_.set(j,[D])}}return _}function eC(o,u,m){o=o.ownerDocument||o,o.head.insertBefore(m,u==="title"?o.querySelector("head > title"):null)}function wN(o,u,m){if(m===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function tC(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var fg=null;function RN(){}function DN(o,u,m){if(fg===null)throw Error(n(475));var _=fg;if(u.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var T=Hp(m.href),D=o.querySelector(cg(T));if(D){o=D._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(_.count++,_=vy.bind(_),o.then(_,_)),u.state.loading|=4,u.instance=D,Gn(D);return}D=o.ownerDocument||o,m=ZE(m),(T=Bo.get(T))&&xA(m,T),D=D.createElement("link"),Gn(D);var j=D;j._p=new Promise(function(ie,_e){j.onload=ie,j.onerror=_e}),la(D,"link",m),u.instance=D}_.stylesheets===null&&(_.stylesheets=new Map),_.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(_.count++,u=vy.bind(_),o.addEventListener("load",u),o.addEventListener("error",u))}}function BN(){if(fg===null)throw Error(n(475));var o=fg;return o.stylesheets&&o.count===0&&AA(o,o.stylesheets),0<o.count?function(u){var m=setTimeout(function(){if(o.stylesheets&&AA(o,o.stylesheets),o.unsuspend){var _=o.unsuspend;o.unsuspend=null,_()}},6e4);return o.unsuspend=u,function(){o.unsuspend=null,clearTimeout(m)}}:null}function vy(){if(this.count--,this.count===0){if(this.stylesheets)AA(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var yy=null;function AA(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,yy=new Map,u.forEach(UN,o),yy=null,vy.call(o))}function UN(o,u){if(!(u.state.loading&4)){var m=yy.get(o);if(m)var _=m.get(null);else{m=new Map,yy.set(o,m);for(var T=o.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<T.length;D++){var j=T[D];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(m.set(j.dataset.precedence,j),_=j)}_&&m.set(null,_)}T=u.instance,j=T.getAttribute("data-precedence"),D=m.get(j)||_,D===_&&m.set(null,T),m.set(j,T),this.count++,_=vy.bind(this),T.addEventListener("load",_),T.addEventListener("error",_),D?D.parentNode.insertBefore(T,D.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(T,o.firstChild)),u.state.loading|=4}}var hg={$$typeof:w,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function LN(o,u,m,_,T,D,j,ie){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=He(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=He(0),this.hiddenUpdates=He(null),this.identifierPrefix=_,this.onUncaughtError=T,this.onCaughtError=D,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function nC(o,u,m,_,T,D,j,ie,_e,Xe,ct,dt){return o=new LN(o,u,m,j,ie,_e,Xe,dt),u=1,D===!0&&(u|=24),D=Ma(3,null,null,u),o.current=D,D.stateNode=o,u=cp(),u.refCount++,o.pooledCache=u,u.refCount++,D.memoizedState={element:_,isDehydrated:m,cache:u},P0(D),o}function iC(o){return o?(o=Kl,o):Kl}function sC(o,u,m,_,T,D){T=iC(T),_.context===null?_.context=T:_.pendingContext=T,_=yo(u),_.payload={element:m},D=D===void 0?null:D,D!==null&&(_.callback=D),m=pl(o,_,u),m!==null&&(oa(m,o,u),Vc(m,o,u))}function aC(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<u?m:u}}function MA(o,u){aC(o,u),(o=o.alternate)&&aC(o,u)}function rC(o){if(o.tag===13){var u=cl(o,67108864);u!==null&&oa(u,o,67108864),MA(o,67108864)}}var _y=!0;function ON(o,u,m,_){var T=z.T;z.T=null;var D=q.p;try{q.p=2,bA(o,u,m,_)}finally{q.p=D,z.T=T}}function NN(o,u,m,_){var T=z.T;z.T=null;var D=q.p;try{q.p=8,bA(o,u,m,_)}finally{q.p=D,z.T=T}}function bA(o,u,m,_){if(_y){var T=TA(_);if(T===null)fA(o,u,_,xy,m),lC(o,_);else if(IN(T,o,u,m,_))_.stopPropagation();else if(lC(o,_),u&4&&-1<PN.indexOf(o)){for(;T!==null;){var D=bn(T);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var j=it(D.pendingLanes);if(j!==0){var ie=D;for(ie.pendingLanes|=2,ie.entangledLanes|=2;j;){var _e=1<<31-$e(j);ie.entanglements[1]|=_e,j&=~_e}_c(D),(Wn&6)===0&&(Ws=Re()+500,ag(0))}}break;case 13:ie=cl(D,2),ie!==null&&oa(ie,D,2),Ro(),MA(D,2)}if(D=TA(_),D===null&&fA(o,u,_,xy,m),D===T)break;T=D}T!==null&&_.stopPropagation()}else fA(o,u,_,null,m)}}function TA(o){return o=Nr(o),EA(o)}var xy=null;function EA(o){if(xy=null,o=ui(o),o!==null){var u=a(o);if(u===null)o=null;else{var m=u.tag;if(m===13){if(o=r(u),o!==null)return o;o=null}else if(m===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return xy=o,null}function oC(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(me()){case Pe:return 2;case Se:return 8;case ye:case nt:return 32;case ee:return 268435456;default:return 32}default:return 32}}var CA=!1,ff=null,hf=null,df=null,dg=new Map,pg=new Map,pf=[],PN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lC(o,u){switch(o){case"focusin":case"focusout":ff=null;break;case"dragenter":case"dragleave":hf=null;break;case"mouseover":case"mouseout":df=null;break;case"pointerover":case"pointerout":dg.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":pg.delete(u.pointerId)}}function mg(o,u,m,_,T,D){return o===null||o.nativeEvent!==D?(o={blockedOn:u,domEventName:m,eventSystemFlags:_,nativeEvent:D,targetContainers:[T]},u!==null&&(u=bn(u),u!==null&&rC(u)),o):(o.eventSystemFlags|=_,u=o.targetContainers,T!==null&&u.indexOf(T)===-1&&u.push(T),o)}function IN(o,u,m,_,T){switch(u){case"focusin":return ff=mg(ff,o,u,m,_,T),!0;case"dragenter":return hf=mg(hf,o,u,m,_,T),!0;case"mouseover":return df=mg(df,o,u,m,_,T),!0;case"pointerover":var D=T.pointerId;return dg.set(D,mg(dg.get(D)||null,o,u,m,_,T)),!0;case"gotpointercapture":return D=T.pointerId,pg.set(D,mg(pg.get(D)||null,o,u,m,_,T)),!0}return!1}function cC(o){var u=ui(o.target);if(u!==null){var m=a(u);if(m!==null){if(u=m.tag,u===13){if(u=r(m),u!==null){o.blockedOn=u,Vt(o.priority,function(){if(m.tag===13){var _=Pi();_=vt(_);var T=cl(m,_);T!==null&&oa(T,m,_),MA(m,_)}});return}}else if(u===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Sy(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var m=TA(o.nativeEvent);if(m===null){m=o.nativeEvent;var _=new m.constructor(m.type,m);Or=_,m.target.dispatchEvent(_),Or=null}else return u=bn(m),u!==null&&rC(u),o.blockedOn=m,!1;u.shift()}return!0}function uC(o,u,m){Sy(o)&&m.delete(u)}function FN(){CA=!1,ff!==null&&Sy(ff)&&(ff=null),hf!==null&&Sy(hf)&&(hf=null),df!==null&&Sy(df)&&(df=null),dg.forEach(uC),pg.forEach(uC)}function Ay(o,u){o.blockedOn===u&&(o.blockedOn=null,CA||(CA=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,FN)))}var My=null;function fC(o){My!==o&&(My=o,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){My===o&&(My=null);for(var u=0;u<o.length;u+=3){var m=o[u],_=o[u+1],T=o[u+2];if(typeof _!="function"){if(EA(_||m)===null)continue;break}var D=bn(m);D!==null&&(o.splice(u,3),u-=3,Q0(D,{pending:!0,data:T,method:m.method,action:_},_,T))}}))}function gg(o){function u(_e){return Ay(_e,o)}ff!==null&&Ay(ff,o),hf!==null&&Ay(hf,o),df!==null&&Ay(df,o),dg.forEach(u),pg.forEach(u);for(var m=0;m<pf.length;m++){var _=pf[m];_.blockedOn===o&&(_.blockedOn=null)}for(;0<pf.length&&(m=pf[0],m.blockedOn===null);)cC(m),m.blockedOn===null&&pf.shift();if(m=(o.ownerDocument||o).$$reactFormReplay,m!=null)for(_=0;_<m.length;_+=3){var T=m[_],D=m[_+1],j=T[tn]||null;if(typeof D=="function")j||fC(m);else if(j){var ie=null;if(D&&D.hasAttribute("formAction")){if(T=D,j=D[tn]||null)ie=j.formAction;else if(EA(T)!==null)continue}else ie=j.action;typeof ie=="function"?m[_+1]=ie:(m.splice(_,3),_-=3),fC(m)}}}function wA(o){this._internalRoot=o}by.prototype.render=wA.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(n(409));var m=u.current,_=Pi();sC(m,_,o,u,null,null)},by.prototype.unmount=wA.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;sC(o.current,2,null,o,null,null),Ro(),u[gn]=null}};function by(o){this._internalRoot=o}by.prototype.unstable_scheduleHydration=function(o){if(o){var u=At();o={blockedOn:null,target:o,priority:u};for(var m=0;m<pf.length&&u!==0&&u<pf[m].priority;m++);pf.splice(m,0,o),m===0&&cC(o)}};var hC=e.version;if(hC!=="19.1.0")throw Error(n(527,hC,"19.1.0"));q.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(n(188)):(o=Object.keys(o).join(","),Error(n(268,o)));return o=c(u),o=o!==null?f(o):null,o=o===null?null:o.stateNode,o};var zN={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ty=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ty.isDisabled&&Ty.supportsFiber)try{Be=Ty.inject(zN),be=Ty}catch{}}return yg.createRoot=function(o,u){if(!s(o))throw Error(n(299));var m=!1,_="",T=Uh,D=Ep,j=ay,ie=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(T=u.onUncaughtError),u.onCaughtError!==void 0&&(D=u.onCaughtError),u.onRecoverableError!==void 0&&(j=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(ie=u.unstable_transitionCallbacks)),u=nC(o,1,!1,null,null,m,_,T,D,j,ie,null),o[gn]=u.current,uA(o),new wA(u)},yg.hydrateRoot=function(o,u,m){if(!s(o))throw Error(n(299));var _=!1,T="",D=Uh,j=Ep,ie=ay,_e=null,Xe=null;return m!=null&&(m.unstable_strictMode===!0&&(_=!0),m.identifierPrefix!==void 0&&(T=m.identifierPrefix),m.onUncaughtError!==void 0&&(D=m.onUncaughtError),m.onCaughtError!==void 0&&(j=m.onCaughtError),m.onRecoverableError!==void 0&&(ie=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(_e=m.unstable_transitionCallbacks),m.formState!==void 0&&(Xe=m.formState)),u=nC(o,1,!0,u,m??null,_,T,D,j,ie,_e,Xe),u.context=iC(null),m=u.current,_=Pi(),_=vt(_),T=yo(_),T.callback=null,pl(m,T,_),m=_,u.current.lanes=m,gt(u,m),_c(u),o[gn]=u.current,uA(o),new by(u)},yg.version="19.1.0",yg}var AC;function KN(){if(AC)return BA.exports;AC=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),BA.exports=qN(),BA.exports}var JN=KN();/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const jf="177",ad={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},rd={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},HD=0,AM=1,VD=2,ZN=3,kD=0,Qx=1,jg=2,Rl=3,ao=0,vs=1,ha=2,da=0,Md=1,Y_=2,MM=3,bM=4,XD=5,Cf=100,jD=101,YD=102,WD=103,qD=104,KD=200,JD=201,ZD=202,QD=203,W_=204,q_=205,$D=206,eB=207,tB=208,nB=209,iB=210,sB=211,aB=212,rB=213,oB=214,K_=0,J_=1,Z_=2,Ld=3,Q_=4,$_=5,ex=6,tx=7,Gv=0,lB=1,cB=2,Nl=0,uB=1,fB=2,hB=3,$x=4,dB=5,pB=6,mB=7,TM="attached",gB="detached",eS=300,bu=301,If=302,Rm=303,hv=304,Qm=306,Ff=1e3,eo=1001,Dm=1002,Hi=1003,tS=1004,QN=1004,hd=1005,$N=1005,ti=1006,Sm=1007,e5=1007,to=1008,vB=1008,Gs=1009,Ob=1010,Nb=1011,Bm=1012,nS=1013,Bc=1014,Zs=1015,Ll=1016,iS=1017,sS=1018,Od=1020,Pb=35902,Ib=1021,Fb=1022,Ua=1023,Um=1026,Nd=1027,aS=1028,Hv=1029,zb=1030,rS=1031,t5=1032,oS=1033,Yg=33776,Wg=33777,qg=33778,Kg=33779,nx=35840,ix=35841,sx=35842,ax=35843,rx=36196,ox=37492,lx=37496,cx=37808,ux=37809,fx=37810,hx=37811,dx=37812,px=37813,mx=37814,gx=37815,vx=37816,yx=37817,_x=37818,xx=37819,Sx=37820,Ax=37821,Jg=36492,Mx=36494,bx=36495,Gb=36283,Tx=36284,Ex=36285,Cx=36286,yB=2200,_B=2201,xB=2202,Lm=2300,Om=2301,B_=2302,dd=2400,pd=2401,dv=2402,lS=2500,Hb=2501,SB=0,Vb=1,wx=2,Yf=3200,kb=3201,n5=3202,i5=3203,Wf=0,AB=1,Ul="",Zn="srgb",Pl="srgb-linear",pv="linear",li="srgb",s5=0,od=7680,a5=7681,r5=7682,o5=7683,l5=34055,c5=34056,u5=5386,f5=512,h5=513,d5=514,p5=515,m5=516,g5=517,v5=518,EM=519,MB=512,bB=513,TB=514,Xb=515,EB=516,CB=517,wB=518,RB=519,mv=35044,y5=35048,_5=35040,x5=35045,S5=35049,A5=35041,M5=35046,b5=35050,T5=35042,E5="100",CM="300 es",zo=2e3,gv=2001,C5={COMPUTE:"compute",RENDER:"render"},w5={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},R5={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FLAT_FIRST:"flat first",FLAT_EITHER:"flat either"};let uo=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const s=n[e];if(s!==void 0){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let a=0,r=s.length;a<r;a++)s[a].call(this,e);e.target=null}}};const wa=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let MC=1234567;const bd=Math.PI/180,Nm=180/Math.PI;function io(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(wa[i&255]+wa[i>>8&255]+wa[i>>16&255]+wa[i>>24&255]+"-"+wa[e&255]+wa[e>>8&255]+"-"+wa[e>>16&15|64]+wa[e>>24&255]+"-"+wa[t&63|128]+wa[t>>8&255]+"-"+wa[t>>16&255]+wa[t>>24&255]+wa[n&255]+wa[n>>8&255]+wa[n>>16&255]+wa[n>>24&255]).toLowerCase()}function un(i,e,t){return Math.max(e,Math.min(t,i))}function jb(i,e){return(i%e+e)%e}function D5(i,e,t,n,s){return n+(i-e)*(s-n)/(t-e)}function B5(i,e,t){return i!==e?(t-i)/(e-i):0}function Zg(i,e,t){return(1-t)*i+t*e}function U5(i,e,t,n){return Zg(i,e,1-Math.exp(-t*n))}function L5(i,e=1){return e-Math.abs(jb(i,e*2)-e)}function O5(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function N5(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function P5(i,e){return i+Math.floor(Math.random()*(e-i+1))}function I5(i,e){return i+Math.random()*(e-i)}function F5(i){return i*(.5-Math.random())}function z5(i){i!==void 0&&(MC=i);let e=MC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function G5(i){return i*bd}function H5(i){return i*Nm}function V5(i){return(i&i-1)===0&&i!==0}function k5(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function X5(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function j5(i,e,t,n,s){const a=Math.cos,r=Math.sin,l=a(t/2),c=r(t/2),f=a((e+n)/2),d=r((e+n)/2),g=a((e-n)/2),v=r((e-n)/2),y=a((n-e)/2),S=r((n-e)/2);switch(s){case"XYX":i.set(l*d,c*g,c*v,l*f);break;case"YZY":i.set(c*v,l*d,c*g,l*f);break;case"ZXZ":i.set(c*g,c*v,l*d,l*f);break;case"XZX":i.set(l*d,c*S,c*y,l*f);break;case"YXY":i.set(c*y,l*d,c*S,l*f);break;case"ZYZ":i.set(c*S,c*y,l*d,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function sr(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function mn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const ko={DEG2RAD:bd,RAD2DEG:Nm,generateUUID:io,clamp:un,euclideanModulo:jb,mapLinear:D5,inverseLerp:B5,lerp:Zg,damp:U5,pingpong:L5,smoothstep:O5,smootherstep:N5,randInt:P5,randFloat:I5,randFloatSpread:F5,seededRandom:z5,degToRad:G5,radToDeg:H5,isPowerOfTwo:V5,ceilPowerOfTwo:k5,floorPowerOfTwo:X5,setQuaternionFromProperEuler:j5,normalize:mn,denormalize:sr};class tt{constructor(e=0,t=0){tt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6],this.y=s[1]*t+s[4]*n+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=un(this.x,e.x,t.x),this.y=un(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=un(this.x,e,t),this.y=un(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(un(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(un(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),s=Math.sin(t),a=this.x-e.x,r=this.y-e.y;return this.x=a*n-r*s+e.x,this.y=a*s+r*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Rs{constructor(e=0,t=0,n=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=s}static slerpFlat(e,t,n,s,a,r,l){let c=n[s+0],f=n[s+1],d=n[s+2],g=n[s+3];const v=a[r+0],y=a[r+1],S=a[r+2],A=a[r+3];if(l===0){e[t+0]=c,e[t+1]=f,e[t+2]=d,e[t+3]=g;return}if(l===1){e[t+0]=v,e[t+1]=y,e[t+2]=S,e[t+3]=A;return}if(g!==A||c!==v||f!==y||d!==S){let M=1-l;const b=c*v+f*y+d*S+g*A,C=b>=0?1:-1,w=1-b*b;if(w>Number.EPSILON){const U=Math.sqrt(w),O=Math.atan2(U,b*C);M=Math.sin(M*O)/U,l=Math.sin(l*O)/U}const R=l*C;if(c=c*M+v*R,f=f*M+y*R,d=d*M+S*R,g=g*M+A*R,M===1-l){const U=1/Math.sqrt(c*c+f*f+d*d+g*g);c*=U,f*=U,d*=U,g*=U}}e[t]=c,e[t+1]=f,e[t+2]=d,e[t+3]=g}static multiplyQuaternionsFlat(e,t,n,s,a,r){const l=n[s],c=n[s+1],f=n[s+2],d=n[s+3],g=a[r],v=a[r+1],y=a[r+2],S=a[r+3];return e[t]=l*S+d*g+c*y-f*v,e[t+1]=c*S+d*v+f*g-l*y,e[t+2]=f*S+d*y+l*v-c*g,e[t+3]=d*S-l*g-c*v-f*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,s){return this._x=e,this._y=t,this._z=n,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,s=e._y,a=e._z,r=e._order,l=Math.cos,c=Math.sin,f=l(n/2),d=l(s/2),g=l(a/2),v=c(n/2),y=c(s/2),S=c(a/2);switch(r){case"XYZ":this._x=v*d*g+f*y*S,this._y=f*y*g-v*d*S,this._z=f*d*S+v*y*g,this._w=f*d*g-v*y*S;break;case"YXZ":this._x=v*d*g+f*y*S,this._y=f*y*g-v*d*S,this._z=f*d*S-v*y*g,this._w=f*d*g+v*y*S;break;case"ZXY":this._x=v*d*g-f*y*S,this._y=f*y*g+v*d*S,this._z=f*d*S+v*y*g,this._w=f*d*g-v*y*S;break;case"ZYX":this._x=v*d*g-f*y*S,this._y=f*y*g+v*d*S,this._z=f*d*S-v*y*g,this._w=f*d*g+v*y*S;break;case"YZX":this._x=v*d*g+f*y*S,this._y=f*y*g+v*d*S,this._z=f*d*S-v*y*g,this._w=f*d*g-v*y*S;break;case"XZY":this._x=v*d*g-f*y*S,this._y=f*y*g-v*d*S,this._z=f*d*S+v*y*g,this._w=f*d*g+v*y*S;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+r)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,s=Math.sin(n);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],s=t[4],a=t[8],r=t[1],l=t[5],c=t[9],f=t[2],d=t[6],g=t[10],v=n+l+g;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(d-c)*y,this._y=(a-f)*y,this._z=(r-s)*y}else if(n>l&&n>g){const y=2*Math.sqrt(1+n-l-g);this._w=(d-c)/y,this._x=.25*y,this._y=(s+r)/y,this._z=(a+f)/y}else if(l>g){const y=2*Math.sqrt(1+l-n-g);this._w=(a-f)/y,this._x=(s+r)/y,this._y=.25*y,this._z=(c+d)/y}else{const y=2*Math.sqrt(1+g-n-l);this._w=(r-s)/y,this._x=(a+f)/y,this._y=(c+d)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(un(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const s=Math.min(1,t/n);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,s=e._y,a=e._z,r=e._w,l=t._x,c=t._y,f=t._z,d=t._w;return this._x=n*d+r*l+s*f-a*c,this._y=s*d+r*c+a*l-n*f,this._z=a*d+r*f+n*c-s*l,this._w=r*d-n*l-s*c-a*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,s=this._y,a=this._z,r=this._w;let l=r*e._w+n*e._x+s*e._y+a*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=r,this._x=n,this._y=s,this._z=a,this;const c=1-l*l;if(c<=Number.EPSILON){const y=1-t;return this._w=y*r+t*this._w,this._x=y*n+t*this._x,this._y=y*s+t*this._y,this._z=y*a+t*this._z,this.normalize(),this}const f=Math.sqrt(c),d=Math.atan2(f,l),g=Math.sin((1-t)*d)/f,v=Math.sin(t*d)/f;return this._w=r*g+this._w*v,this._x=n*g+this._x*v,this._y=s*g+this._y*v,this._z=a*g+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),s=Math.sqrt(1-n),a=Math.sqrt(n);return this.set(s*Math.sin(e),s*Math.cos(e),a*Math.sin(t),a*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class le{constructor(e=0,t=0,n=0){le.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(bC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(bC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,s=this.z,a=e.elements;return this.x=a[0]*t+a[3]*n+a[6]*s,this.y=a[1]*t+a[4]*n+a[7]*s,this.z=a[2]*t+a[5]*n+a[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,a=e.elements,r=1/(a[3]*t+a[7]*n+a[11]*s+a[15]);return this.x=(a[0]*t+a[4]*n+a[8]*s+a[12])*r,this.y=(a[1]*t+a[5]*n+a[9]*s+a[13])*r,this.z=(a[2]*t+a[6]*n+a[10]*s+a[14])*r,this}applyQuaternion(e){const t=this.x,n=this.y,s=this.z,a=e.x,r=e.y,l=e.z,c=e.w,f=2*(r*s-l*n),d=2*(l*t-a*s),g=2*(a*n-r*t);return this.x=t+c*f+r*g-l*d,this.y=n+c*d+l*f-a*g,this.z=s+c*g+a*d-r*f,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,s=this.z,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*s,this.y=a[1]*t+a[5]*n+a[9]*s,this.z=a[2]*t+a[6]*n+a[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=un(this.x,e.x,t.x),this.y=un(this.y,e.y,t.y),this.z=un(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=un(this.x,e,t),this.y=un(this.y,e,t),this.z=un(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(un(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,s=e.y,a=e.z,r=t.x,l=t.y,c=t.z;return this.x=s*c-a*l,this.y=a*r-n*c,this.z=n*l-s*r,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return NA.copy(this).projectOnVector(e),this.sub(NA)}reflect(e){return this.sub(NA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(un(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,s=this.z-e.z;return t*t+n*n+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const s=Math.sin(t)*e;return this.x=s*Math.sin(n),this.y=Math.cos(t)*e,this.z=s*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const NA=new le,bC=new Rs;class cn{constructor(e,t,n,s,a,r,l,c,f){cn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,s,a,r,l,c,f)}set(e,t,n,s,a,r,l,c,f){const d=this.elements;return d[0]=e,d[1]=s,d[2]=l,d[3]=t,d[4]=a,d[5]=c,d[6]=n,d[7]=r,d[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,a=this.elements,r=n[0],l=n[3],c=n[6],f=n[1],d=n[4],g=n[7],v=n[2],y=n[5],S=n[8],A=s[0],M=s[3],b=s[6],C=s[1],w=s[4],R=s[7],U=s[2],O=s[5],I=s[8];return a[0]=r*A+l*C+c*U,a[3]=r*M+l*w+c*O,a[6]=r*b+l*R+c*I,a[1]=f*A+d*C+g*U,a[4]=f*M+d*w+g*O,a[7]=f*b+d*R+g*I,a[2]=v*A+y*C+S*U,a[5]=v*M+y*w+S*O,a[8]=v*b+y*R+S*I,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],s=e[2],a=e[3],r=e[4],l=e[5],c=e[6],f=e[7],d=e[8];return t*r*d-t*l*f-n*a*d+n*l*c+s*a*f-s*r*c}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],a=e[3],r=e[4],l=e[5],c=e[6],f=e[7],d=e[8],g=d*r-l*f,v=l*c-d*a,y=f*a-r*c,S=t*g+n*v+s*y;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const A=1/S;return e[0]=g*A,e[1]=(s*f-d*n)*A,e[2]=(l*n-s*r)*A,e[3]=v*A,e[4]=(d*t-s*c)*A,e[5]=(s*a-l*t)*A,e[6]=y*A,e[7]=(n*c-f*t)*A,e[8]=(r*t-n*a)*A,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,s,a,r,l){const c=Math.cos(a),f=Math.sin(a);return this.set(n*c,n*f,-n*(c*r+f*l)+r+e,-s*f,s*c,-s*(-f*r+c*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(PA.makeScale(e,t)),this}rotate(e){return this.premultiply(PA.makeRotation(-e)),this}translate(e,t){return this.premultiply(PA.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<9;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const PA=new cn;function DB(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const Y5={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function hm(i,e){return new Y5[i](e)}function vv(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function BB(){const i=vv("canvas");return i.style.display="block",i}const TC={};function Am(i){i in TC||(TC[i]=!0,console.warn(i))}function W5(i,e,t){return new Promise(function(n,s){function a(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:s();break;case i.TIMEOUT_EXPIRED:setTimeout(a,t);break;default:n()}}setTimeout(a,t)})}function q5(i){const e=i.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function K5(i){const e=i.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const EC=new cn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),CC=new cn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function J5(){const i={enabled:!0,workingColorSpace:Pl,spaces:{},convert:function(s,a,r){return this.enabled===!1||a===r||!a||!r||(this.spaces[a].transfer===li&&(s.r=Su(s.r),s.g=Su(s.g),s.b=Su(s.b)),this.spaces[a].primaries!==this.spaces[r].primaries&&(s.applyMatrix3(this.spaces[a].toXYZ),s.applyMatrix3(this.spaces[r].fromXYZ)),this.spaces[r].transfer===li&&(s.r=Mm(s.r),s.g=Mm(s.g),s.b=Mm(s.b))),s},workingToColorSpace:function(s,a){return this.convert(s,this.workingColorSpace,a)},colorSpaceToWorking:function(s,a){return this.convert(s,a,this.workingColorSpace)},getPrimaries:function(s){return this.spaces[s].primaries},getTransfer:function(s){return s===Ul?pv:this.spaces[s].transfer},getLuminanceCoefficients:function(s,a=this.workingColorSpace){return s.fromArray(this.spaces[a].luminanceCoefficients)},define:function(s){Object.assign(this.spaces,s)},_getMatrix:function(s,a,r){return s.copy(this.spaces[a].toXYZ).multiply(this.spaces[r].fromXYZ)},_getDrawingBufferColorSpace:function(s){return this.spaces[s].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(s=this.workingColorSpace){return this.spaces[s].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(s,a){return Am("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(s,a)},toWorkingColorSpace:function(s,a){return Am("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(s,a)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Pl]:{primaries:e,whitePoint:n,transfer:pv,toXYZ:EC,fromXYZ:CC,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Zn},outputColorSpaceConfig:{drawingBufferColorSpace:Zn}},[Zn]:{primaries:e,whitePoint:n,transfer:li,toXYZ:EC,fromXYZ:CC,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Zn}}}),i}const Nn=J5();function Su(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function Mm(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let kp;class UB{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{kp===void 0&&(kp=vv("canvas")),kp.width=e.width,kp.height=e.height;const s=kp.getContext("2d");e instanceof ImageData?s.putImageData(e,0,0):s.drawImage(e,0,0,e.width,e.height),n=kp}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=vv("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const s=n.getImageData(0,0,e.width,e.height),a=s.data;for(let r=0;r<a.length;r++)a[r]=Su(a[r]/255)*255;return n.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Su(t[n]/255)*255):t[n]=Su(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Z5=0;class Rf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Z5++}),this.uuid=io(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},s=this.data;if(s!==null){let a;if(Array.isArray(s)){a=[];for(let r=0,l=s.length;r<l;r++)s[r].isDataTexture?a.push(IA(s[r].image)):a.push(IA(s[r]))}else a=IA(s);n.url=a}return t||(e.images[this.uuid]=n),n}}function IA(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?UB.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Q5=0;const FA=new le;class Ai extends uo{constructor(e=Ai.DEFAULT_IMAGE,t=Ai.DEFAULT_MAPPING,n=eo,s=eo,a=ti,r=to,l=Ua,c=Gs,f=Ai.DEFAULT_ANISOTROPY,d=Ul){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Q5++}),this.uuid=io(),this.name="",this.source=new Rf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=s,this.magFilter=a,this.minFilter=r,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=c,this.offset=new tt(0,0),this.repeat=new tt(1,1),this.center=new tt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new cn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=d,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(FA).x}get height(){return this.source.getSize(FA).y}get depth(){return this.source.getSize(FA).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}s&&n&&s.isVector2&&n.isVector2||s&&n&&s.isVector3&&n.isVector3||s&&n&&s.isMatrix3&&n.isMatrix3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==eS)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ff:e.x=e.x-Math.floor(e.x);break;case eo:e.x=e.x<0?0:1;break;case Dm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ff:e.y=e.y-Math.floor(e.y);break;case eo:e.y=e.y<0?0:1;break;case Dm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Ai.DEFAULT_IMAGE=null;Ai.DEFAULT_MAPPING=eS;Ai.DEFAULT_ANISOTROPY=1;class wn{constructor(e=0,t=0,n=0,s=1){wn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,s){return this.x=e,this.y=t,this.z=n,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,s=this.z,a=this.w,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*s+r[12]*a,this.y=r[1]*t+r[5]*n+r[9]*s+r[13]*a,this.z=r[2]*t+r[6]*n+r[10]*s+r[14]*a,this.w=r[3]*t+r[7]*n+r[11]*s+r[15]*a,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,s,a;const c=e.elements,f=c[0],d=c[4],g=c[8],v=c[1],y=c[5],S=c[9],A=c[2],M=c[6],b=c[10];if(Math.abs(d-v)<.01&&Math.abs(g-A)<.01&&Math.abs(S-M)<.01){if(Math.abs(d+v)<.1&&Math.abs(g+A)<.1&&Math.abs(S+M)<.1&&Math.abs(f+y+b-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(f+1)/2,R=(y+1)/2,U=(b+1)/2,O=(d+v)/4,I=(g+A)/4,P=(S+M)/4;return w>R&&w>U?w<.01?(n=0,s=.707106781,a=.707106781):(n=Math.sqrt(w),s=O/n,a=I/n):R>U?R<.01?(n=.707106781,s=0,a=.707106781):(s=Math.sqrt(R),n=O/s,a=P/s):U<.01?(n=.707106781,s=.707106781,a=0):(a=Math.sqrt(U),n=I/a,s=P/a),this.set(n,s,a,t),this}let C=Math.sqrt((M-S)*(M-S)+(g-A)*(g-A)+(v-d)*(v-d));return Math.abs(C)<.001&&(C=1),this.x=(M-S)/C,this.y=(g-A)/C,this.z=(v-d)/C,this.w=Math.acos((f+y+b-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=un(this.x,e.x,t.x),this.y=un(this.y,e.y,t.y),this.z=un(this.z,e.z,t.z),this.w=un(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=un(this.x,e,t),this.y=un(this.y,e,t),this.z=un(this.z,e,t),this.w=un(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(un(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Yb extends uo{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ti,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new wn(0,0,e,t),this.scissorTest=!1,this.viewport=new wn(0,0,e,t);const s={width:e,height:t,depth:n.depth},a=new Ai(s);this.textures=[];const r=n.count;for(let l=0;l<r;l++)this.textures[l]=a.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:ti,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let s=0,a=this.textures.length;s<a;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=n,this.textures[s].isArrayTexture=this.textures[s].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const s=Object.assign({},e.textures[t].image);this.textures[t].source=new Rf(s)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class os extends Yb{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class cS extends Ai{constructor(e=null,t=1,n=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=Hi,this.minFilter=Hi,this.wrapR=eo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class $5 extends os{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new cS(null,e,t,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class uS extends Ai{constructor(e=null,t=1,n=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:s},this.magFilter=Hi,this.minFilter=Hi,this.wrapR=eo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class eP extends os{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new uS(null,e,t,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class Ds{constructor(e=new le(1/0,1/0,1/0),t=new le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Tl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Tl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Tl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const a=n.getAttribute("position");if(t===!0&&a!==void 0&&e.isInstancedMesh!==!0)for(let r=0,l=a.count;r<l;r++)e.isMesh===!0?e.getVertexPosition(r,Tl):Tl.fromBufferAttribute(a,r),Tl.applyMatrix4(e.matrixWorld),this.expandByPoint(Tl);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Ey.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),Ey.copy(n.boundingBox)),Ey.applyMatrix4(e.matrixWorld),this.union(Ey)}const s=e.children;for(let a=0,r=s.length;a<r;a++)this.expandByObject(s[a],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Tl),Tl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(_g),Cy.subVectors(this.max,_g),Xp.subVectors(e.a,_g),jp.subVectors(e.b,_g),Yp.subVectors(e.c,_g),gf.subVectors(jp,Xp),vf.subVectors(Yp,jp),Gh.subVectors(Xp,Yp);let t=[0,-gf.z,gf.y,0,-vf.z,vf.y,0,-Gh.z,Gh.y,gf.z,0,-gf.x,vf.z,0,-vf.x,Gh.z,0,-Gh.x,-gf.y,gf.x,0,-vf.y,vf.x,0,-Gh.y,Gh.x,0];return!zA(t,Xp,jp,Yp,Cy)||(t=[1,0,0,0,1,0,0,0,1],!zA(t,Xp,jp,Yp,Cy))?!1:(wy.crossVectors(gf,vf),t=[wy.x,wy.y,wy.z],zA(t,Xp,jp,Yp,Cy))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Tl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Tl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ou[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ou[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ou[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ou[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ou[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ou[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ou[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ou[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ou),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const ou=[new le,new le,new le,new le,new le,new le,new le,new le],Tl=new le,Ey=new Ds,Xp=new le,jp=new le,Yp=new le,gf=new le,vf=new le,Gh=new le,_g=new le,Cy=new le,wy=new le,Hh=new le;function zA(i,e,t,n,s){for(let a=0,r=i.length-3;a<=r;a+=3){Hh.fromArray(i,a);const l=s.x*Math.abs(Hh.x)+s.y*Math.abs(Hh.y)+s.z*Math.abs(Hh.z),c=e.dot(Hh),f=t.dot(Hh),d=n.dot(Hh);if(Math.max(-Math.max(c,f,d),Math.min(c,f,d))>l)return!1}return!0}const tP=new Ds,xg=new le,GA=new le;class zs{constructor(e=new le,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):tP.setFromPoints(e).getCenter(n);let s=0;for(let a=0,r=e.length;a<r;a++)s=Math.max(s,n.distanceToSquared(e[a]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;xg.subVectors(e,this.center);const t=xg.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),s=(n-this.radius)*.5;this.center.addScaledVector(xg,s/n),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(GA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(xg.copy(e.center).add(GA)),this.expandByPoint(xg.copy(e.center).sub(GA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const lu=new le,HA=new le,Ry=new le,yf=new le,VA=new le,Dy=new le,kA=new le;class Vd{constructor(e=new le,t=new le(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,lu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=lu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(lu.copy(this.origin).addScaledVector(this.direction,t),lu.distanceToSquared(e))}distanceSqToSegment(e,t,n,s){HA.copy(e).add(t).multiplyScalar(.5),Ry.copy(t).sub(e).normalize(),yf.copy(this.origin).sub(HA);const a=e.distanceTo(t)*.5,r=-this.direction.dot(Ry),l=yf.dot(this.direction),c=-yf.dot(Ry),f=yf.lengthSq(),d=Math.abs(1-r*r);let g,v,y,S;if(d>0)if(g=r*c-l,v=r*l-c,S=a*d,g>=0)if(v>=-S)if(v<=S){const A=1/d;g*=A,v*=A,y=g*(g+r*v+2*l)+v*(r*g+v+2*c)+f}else v=a,g=Math.max(0,-(r*v+l)),y=-g*g+v*(v+2*c)+f;else v=-a,g=Math.max(0,-(r*v+l)),y=-g*g+v*(v+2*c)+f;else v<=-S?(g=Math.max(0,-(-r*a+l)),v=g>0?-a:Math.min(Math.max(-a,-c),a),y=-g*g+v*(v+2*c)+f):v<=S?(g=0,v=Math.min(Math.max(-a,-c),a),y=v*(v+2*c)+f):(g=Math.max(0,-(r*a+l)),v=g>0?a:Math.min(Math.max(-a,-c),a),y=-g*g+v*(v+2*c)+f);else v=r>0?-a:a,g=Math.max(0,-(r*v+l)),y=-g*g+v*(v+2*c)+f;return n&&n.copy(this.origin).addScaledVector(this.direction,g),s&&s.copy(HA).addScaledVector(Ry,v),y}intersectSphere(e,t){lu.subVectors(e.center,this.origin);const n=lu.dot(this.direction),s=lu.dot(lu)-n*n,a=e.radius*e.radius;if(s>a)return null;const r=Math.sqrt(a-s),l=n-r,c=n+r;return c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,s,a,r,l,c;const f=1/this.direction.x,d=1/this.direction.y,g=1/this.direction.z,v=this.origin;return f>=0?(n=(e.min.x-v.x)*f,s=(e.max.x-v.x)*f):(n=(e.max.x-v.x)*f,s=(e.min.x-v.x)*f),d>=0?(a=(e.min.y-v.y)*d,r=(e.max.y-v.y)*d):(a=(e.max.y-v.y)*d,r=(e.min.y-v.y)*d),n>r||a>s||((a>n||isNaN(n))&&(n=a),(r<s||isNaN(s))&&(s=r),g>=0?(l=(e.min.z-v.z)*g,c=(e.max.z-v.z)*g):(l=(e.max.z-v.z)*g,c=(e.min.z-v.z)*g),n>c||l>s)||((l>n||n!==n)&&(n=l),(c<s||s!==s)&&(s=c),s<0)?null:this.at(n>=0?n:s,t)}intersectsBox(e){return this.intersectBox(e,lu)!==null}intersectTriangle(e,t,n,s,a){VA.subVectors(t,e),Dy.subVectors(n,e),kA.crossVectors(VA,Dy);let r=this.direction.dot(kA),l;if(r>0){if(s)return null;l=1}else if(r<0)l=-1,r=-r;else return null;yf.subVectors(this.origin,e);const c=l*this.direction.dot(Dy.crossVectors(yf,Dy));if(c<0)return null;const f=l*this.direction.dot(VA.cross(yf));if(f<0||c+f>r)return null;const d=-l*yf.dot(kA);return d<0?null:this.at(d/r,a)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Ft{constructor(e,t,n,s,a,r,l,c,f,d,g,v,y,S,A,M){Ft.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,s,a,r,l,c,f,d,g,v,y,S,A,M)}set(e,t,n,s,a,r,l,c,f,d,g,v,y,S,A,M){const b=this.elements;return b[0]=e,b[4]=t,b[8]=n,b[12]=s,b[1]=a,b[5]=r,b[9]=l,b[13]=c,b[2]=f,b[6]=d,b[10]=g,b[14]=v,b[3]=y,b[7]=S,b[11]=A,b[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ft().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,s=1/Wp.setFromMatrixColumn(e,0).length(),a=1/Wp.setFromMatrixColumn(e,1).length(),r=1/Wp.setFromMatrixColumn(e,2).length();return t[0]=n[0]*s,t[1]=n[1]*s,t[2]=n[2]*s,t[3]=0,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=0,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,s=e.y,a=e.z,r=Math.cos(n),l=Math.sin(n),c=Math.cos(s),f=Math.sin(s),d=Math.cos(a),g=Math.sin(a);if(e.order==="XYZ"){const v=r*d,y=r*g,S=l*d,A=l*g;t[0]=c*d,t[4]=-c*g,t[8]=f,t[1]=y+S*f,t[5]=v-A*f,t[9]=-l*c,t[2]=A-v*f,t[6]=S+y*f,t[10]=r*c}else if(e.order==="YXZ"){const v=c*d,y=c*g,S=f*d,A=f*g;t[0]=v+A*l,t[4]=S*l-y,t[8]=r*f,t[1]=r*g,t[5]=r*d,t[9]=-l,t[2]=y*l-S,t[6]=A+v*l,t[10]=r*c}else if(e.order==="ZXY"){const v=c*d,y=c*g,S=f*d,A=f*g;t[0]=v-A*l,t[4]=-r*g,t[8]=S+y*l,t[1]=y+S*l,t[5]=r*d,t[9]=A-v*l,t[2]=-r*f,t[6]=l,t[10]=r*c}else if(e.order==="ZYX"){const v=r*d,y=r*g,S=l*d,A=l*g;t[0]=c*d,t[4]=S*f-y,t[8]=v*f+A,t[1]=c*g,t[5]=A*f+v,t[9]=y*f-S,t[2]=-f,t[6]=l*c,t[10]=r*c}else if(e.order==="YZX"){const v=r*c,y=r*f,S=l*c,A=l*f;t[0]=c*d,t[4]=A-v*g,t[8]=S*g+y,t[1]=g,t[5]=r*d,t[9]=-l*d,t[2]=-f*d,t[6]=y*g+S,t[10]=v-A*g}else if(e.order==="XZY"){const v=r*c,y=r*f,S=l*c,A=l*f;t[0]=c*d,t[4]=-g,t[8]=f*d,t[1]=v*g+A,t[5]=r*d,t[9]=y*g-S,t[2]=S*g-y,t[6]=l*d,t[10]=A*g+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(nP,e,iP)}lookAt(e,t,n){const s=this.elements;return qr.subVectors(e,t),qr.lengthSq()===0&&(qr.z=1),qr.normalize(),_f.crossVectors(n,qr),_f.lengthSq()===0&&(Math.abs(n.z)===1?qr.x+=1e-4:qr.z+=1e-4,qr.normalize(),_f.crossVectors(n,qr)),_f.normalize(),By.crossVectors(qr,_f),s[0]=_f.x,s[4]=By.x,s[8]=qr.x,s[1]=_f.y,s[5]=By.y,s[9]=qr.y,s[2]=_f.z,s[6]=By.z,s[10]=qr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,s=t.elements,a=this.elements,r=n[0],l=n[4],c=n[8],f=n[12],d=n[1],g=n[5],v=n[9],y=n[13],S=n[2],A=n[6],M=n[10],b=n[14],C=n[3],w=n[7],R=n[11],U=n[15],O=s[0],I=s[4],P=s[8],N=s[12],L=s[1],k=s[5],X=s[9],W=s[13],$=s[2],ce=s[6],z=s[10],q=s[14],Q=s[3],re=s[7],H=s[11],G=s[15];return a[0]=r*O+l*L+c*$+f*Q,a[4]=r*I+l*k+c*ce+f*re,a[8]=r*P+l*X+c*z+f*H,a[12]=r*N+l*W+c*q+f*G,a[1]=d*O+g*L+v*$+y*Q,a[5]=d*I+g*k+v*ce+y*re,a[9]=d*P+g*X+v*z+y*H,a[13]=d*N+g*W+v*q+y*G,a[2]=S*O+A*L+M*$+b*Q,a[6]=S*I+A*k+M*ce+b*re,a[10]=S*P+A*X+M*z+b*H,a[14]=S*N+A*W+M*q+b*G,a[3]=C*O+w*L+R*$+U*Q,a[7]=C*I+w*k+R*ce+U*re,a[11]=C*P+w*X+R*z+U*H,a[15]=C*N+w*W+R*q+U*G,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],s=e[8],a=e[12],r=e[1],l=e[5],c=e[9],f=e[13],d=e[2],g=e[6],v=e[10],y=e[14],S=e[3],A=e[7],M=e[11],b=e[15];return S*(+a*c*g-s*f*g-a*l*v+n*f*v+s*l*y-n*c*y)+A*(+t*c*y-t*f*v+a*r*v-s*r*y+s*f*d-a*c*d)+M*(+t*f*g-t*l*y-a*r*g+n*r*y+a*l*d-n*f*d)+b*(-s*l*d-t*c*g+t*l*v+s*r*g-n*r*v+n*c*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],s=e[2],a=e[3],r=e[4],l=e[5],c=e[6],f=e[7],d=e[8],g=e[9],v=e[10],y=e[11],S=e[12],A=e[13],M=e[14],b=e[15],C=g*M*f-A*v*f+A*c*y-l*M*y-g*c*b+l*v*b,w=S*v*f-d*M*f-S*c*y+r*M*y+d*c*b-r*v*b,R=d*A*f-S*g*f+S*l*y-r*A*y-d*l*b+r*g*b,U=S*g*c-d*A*c-S*l*v+r*A*v+d*l*M-r*g*M,O=t*C+n*w+s*R+a*U;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const I=1/O;return e[0]=C*I,e[1]=(A*v*a-g*M*a-A*s*y+n*M*y+g*s*b-n*v*b)*I,e[2]=(l*M*a-A*c*a+A*s*f-n*M*f-l*s*b+n*c*b)*I,e[3]=(g*c*a-l*v*a-g*s*f+n*v*f+l*s*y-n*c*y)*I,e[4]=w*I,e[5]=(d*M*a-S*v*a+S*s*y-t*M*y-d*s*b+t*v*b)*I,e[6]=(S*c*a-r*M*a-S*s*f+t*M*f+r*s*b-t*c*b)*I,e[7]=(r*v*a-d*c*a+d*s*f-t*v*f-r*s*y+t*c*y)*I,e[8]=R*I,e[9]=(S*g*a-d*A*a-S*n*y+t*A*y+d*n*b-t*g*b)*I,e[10]=(r*A*a-S*l*a+S*n*f-t*A*f-r*n*b+t*l*b)*I,e[11]=(d*l*a-r*g*a-d*n*f+t*g*f+r*n*y-t*l*y)*I,e[12]=U*I,e[13]=(d*A*s-S*g*s+S*n*v-t*A*v-d*n*M+t*g*M)*I,e[14]=(S*l*s-r*A*s-S*n*c+t*A*c+r*n*M-t*l*M)*I,e[15]=(r*g*s-d*l*s+d*n*c-t*g*c-r*n*v+t*l*v)*I,this}scale(e){const t=this.elements,n=e.x,s=e.y,a=e.z;return t[0]*=n,t[4]*=s,t[8]*=a,t[1]*=n,t[5]*=s,t[9]*=a,t[2]*=n,t[6]*=s,t[10]*=a,t[3]*=n,t[7]*=s,t[11]*=a,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,s))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),s=Math.sin(t),a=1-n,r=e.x,l=e.y,c=e.z,f=a*r,d=a*l;return this.set(f*r+n,f*l-s*c,f*c+s*l,0,f*l+s*c,d*l+n,d*c-s*r,0,f*c-s*l,d*c+s*r,a*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,s,a,r){return this.set(1,n,a,0,e,1,r,0,t,s,1,0,0,0,0,1),this}compose(e,t,n){const s=this.elements,a=t._x,r=t._y,l=t._z,c=t._w,f=a+a,d=r+r,g=l+l,v=a*f,y=a*d,S=a*g,A=r*d,M=r*g,b=l*g,C=c*f,w=c*d,R=c*g,U=n.x,O=n.y,I=n.z;return s[0]=(1-(A+b))*U,s[1]=(y+R)*U,s[2]=(S-w)*U,s[3]=0,s[4]=(y-R)*O,s[5]=(1-(v+b))*O,s[6]=(M+C)*O,s[7]=0,s[8]=(S+w)*I,s[9]=(M-C)*I,s[10]=(1-(v+A))*I,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,n){const s=this.elements;let a=Wp.set(s[0],s[1],s[2]).length();const r=Wp.set(s[4],s[5],s[6]).length(),l=Wp.set(s[8],s[9],s[10]).length();this.determinant()<0&&(a=-a),e.x=s[12],e.y=s[13],e.z=s[14],El.copy(this);const f=1/a,d=1/r,g=1/l;return El.elements[0]*=f,El.elements[1]*=f,El.elements[2]*=f,El.elements[4]*=d,El.elements[5]*=d,El.elements[6]*=d,El.elements[8]*=g,El.elements[9]*=g,El.elements[10]*=g,t.setFromRotationMatrix(El),n.x=a,n.y=r,n.z=l,this}makePerspective(e,t,n,s,a,r,l=zo){const c=this.elements,f=2*a/(t-e),d=2*a/(n-s),g=(t+e)/(t-e),v=(n+s)/(n-s);let y,S;if(l===zo)y=-(r+a)/(r-a),S=-2*r*a/(r-a);else if(l===gv)y=-r/(r-a),S=-r*a/(r-a);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=f,c[4]=0,c[8]=g,c[12]=0,c[1]=0,c[5]=d,c[9]=v,c[13]=0,c[2]=0,c[6]=0,c[10]=y,c[14]=S,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,n,s,a,r,l=zo){const c=this.elements,f=1/(t-e),d=1/(n-s),g=1/(r-a),v=(t+e)*f,y=(n+s)*d;let S,A;if(l===zo)S=(r+a)*g,A=-2*g;else if(l===gv)S=a*g,A=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*f,c[4]=0,c[8]=0,c[12]=-v,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-y,c[2]=0,c[6]=0,c[10]=A,c[14]=-S,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let s=0;s<16;s++)if(t[s]!==n[s])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Wp=new le,El=new Ft,nP=new le(0,0,0),iP=new le(1,1,1),_f=new le,By=new le,qr=new le,wC=new Ft,RC=new Rs;class ro{constructor(e=0,t=0,n=0,s=ro.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,s=this._order){return this._x=e,this._y=t,this._z=n,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const s=e.elements,a=s[0],r=s[4],l=s[8],c=s[1],f=s[5],d=s[9],g=s[2],v=s[6],y=s[10];switch(t){case"XYZ":this._y=Math.asin(un(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,y),this._z=Math.atan2(-r,a)):(this._x=Math.atan2(v,f),this._z=0);break;case"YXZ":this._x=Math.asin(-un(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,y),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-g,a),this._z=0);break;case"ZXY":this._x=Math.asin(un(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,y),this._z=Math.atan2(-r,f)):(this._y=0,this._z=Math.atan2(c,a));break;case"ZYX":this._y=Math.asin(-un(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-r,f));break;case"YZX":this._z=Math.asin(un(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,f),this._y=Math.atan2(-g,a)):(this._x=0,this._y=Math.atan2(l,y));break;case"XZY":this._z=Math.asin(-un(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(v,f),this._y=Math.atan2(l,a)):(this._x=Math.atan2(-d,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return wC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(wC,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return RC.setFromEuler(this),this.setFromQuaternion(RC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ro.DEFAULT_ORDER="XYZ";class Pm{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let sP=0;const DC=new le,qp=new Rs,cu=new Ft,Uy=new le,Sg=new le,aP=new le,rP=new Rs,BC=new le(1,0,0),UC=new le(0,1,0),LC=new le(0,0,1),OC={type:"added"},oP={type:"removed"},Kp={type:"childadded",child:null},XA={type:"childremoved",child:null};class In extends uo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:sP++}),this.uuid=io(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=In.DEFAULT_UP.clone();const e=new le,t=new ro,n=new Rs,s=new le(1,1,1);function a(){n.setFromEuler(t,!1)}function r(){t.setFromQuaternion(n,void 0,!1)}t._onChange(a),n._onChange(r),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ft},normalMatrix:{value:new cn}}),this.matrix=new Ft,this.matrixWorld=new Ft,this.matrixAutoUpdate=In.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=In.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Pm,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return qp.setFromAxisAngle(e,t),this.quaternion.multiply(qp),this}rotateOnWorldAxis(e,t){return qp.setFromAxisAngle(e,t),this.quaternion.premultiply(qp),this}rotateX(e){return this.rotateOnAxis(BC,e)}rotateY(e){return this.rotateOnAxis(UC,e)}rotateZ(e){return this.rotateOnAxis(LC,e)}translateOnAxis(e,t){return DC.copy(e).applyQuaternion(this.quaternion),this.position.add(DC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(BC,e)}translateY(e){return this.translateOnAxis(UC,e)}translateZ(e){return this.translateOnAxis(LC,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(cu.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Uy.copy(e):Uy.set(e,t,n);const s=this.parent;this.updateWorldMatrix(!0,!1),Sg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?cu.lookAt(Sg,Uy,this.up):cu.lookAt(Uy,Sg,this.up),this.quaternion.setFromRotationMatrix(cu),s&&(cu.extractRotation(s.matrixWorld),qp.setFromRotationMatrix(cu),this.quaternion.premultiply(qp.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(OC),Kp.child=e,this.dispatchEvent(Kp),Kp.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(oP),XA.child=e,this.dispatchEvent(XA),XA.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),cu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),cu.multiply(e.parent.matrixWorld)),e.applyMatrix4(cu),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(OC),Kp.child=e,this.dispatchEvent(Kp),Kp.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,s=this.children.length;n<s;n++){const r=this.children[n].getObjectByProperty(e,t);if(r!==void 0)return r}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const s=this.children;for(let a=0,r=s.length;a<r;a++)s[a].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sg,e,aP),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sg,rP,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,s=t.length;n<s;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let a=0,r=s.length;a<r;a++)s[a].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.geometryInfo=this._geometryInfo.map(l=>({...l,boundingBox:l.boundingBox?l.boundingBox.toJSON():void 0,boundingSphere:l.boundingSphere?l.boundingSphere.toJSON():void 0})),s.instanceInfo=this._instanceInfo.map(l=>({...l})),s.availableInstanceIds=this._availableInstanceIds.slice(),s.availableGeometryIds=this._availableGeometryIds.slice(),s.nextIndexStart=this._nextIndexStart,s.nextVertexStart=this._nextVertexStart,s.geometryCount=this._geometryCount,s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.matricesTexture=this._matricesTexture.toJSON(e),s.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(s.boundingBox=this.boundingBox.toJSON()));function a(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=a(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let f=0,d=c.length;f<d;f++){const g=c[f];a(e.shapes,g)}else a(e.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(a(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,f=this.material.length;c<f;c++)l.push(a(e.materials,this.material[c]));s.material=l}else s.material=a(e.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];s.animations.push(a(e.animations,c))}}if(t){const l=r(e.geometries),c=r(e.materials),f=r(e.textures),d=r(e.images),g=r(e.shapes),v=r(e.skeletons),y=r(e.animations),S=r(e.nodes);l.length>0&&(n.geometries=l),c.length>0&&(n.materials=c),f.length>0&&(n.textures=f),d.length>0&&(n.images=d),g.length>0&&(n.shapes=g),v.length>0&&(n.skeletons=v),y.length>0&&(n.animations=y),S.length>0&&(n.nodes=S)}return n.object=s,n;function r(l){const c=[];for(const f in l){const d=l[f];delete d.metadata,c.push(d)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const s=e.children[n];this.add(s.clone())}return this}}In.DEFAULT_UP=new le(0,1,0);In.DEFAULT_MATRIX_AUTO_UPDATE=!0;In.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Cl=new le,uu=new le,jA=new le,fu=new le,Jp=new le,Zp=new le,NC=new le,YA=new le,WA=new le,qA=new le,KA=new wn,JA=new wn,ZA=new wn;class Cr{constructor(e=new le,t=new le,n=new le){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,s){s.subVectors(n,t),Cl.subVectors(e,t),s.cross(Cl);const a=s.lengthSq();return a>0?s.multiplyScalar(1/Math.sqrt(a)):s.set(0,0,0)}static getBarycoord(e,t,n,s,a){Cl.subVectors(s,t),uu.subVectors(n,t),jA.subVectors(e,t);const r=Cl.dot(Cl),l=Cl.dot(uu),c=Cl.dot(jA),f=uu.dot(uu),d=uu.dot(jA),g=r*f-l*l;if(g===0)return a.set(0,0,0),null;const v=1/g,y=(f*c-l*d)*v,S=(r*d-l*c)*v;return a.set(1-y-S,S,y)}static containsPoint(e,t,n,s){return this.getBarycoord(e,t,n,s,fu)===null?!1:fu.x>=0&&fu.y>=0&&fu.x+fu.y<=1}static getInterpolation(e,t,n,s,a,r,l,c){return this.getBarycoord(e,t,n,s,fu)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(a,fu.x),c.addScaledVector(r,fu.y),c.addScaledVector(l,fu.z),c)}static getInterpolatedAttribute(e,t,n,s,a,r){return KA.setScalar(0),JA.setScalar(0),ZA.setScalar(0),KA.fromBufferAttribute(e,t),JA.fromBufferAttribute(e,n),ZA.fromBufferAttribute(e,s),r.setScalar(0),r.addScaledVector(KA,a.x),r.addScaledVector(JA,a.y),r.addScaledVector(ZA,a.z),r}static isFrontFacing(e,t,n,s){return Cl.subVectors(n,t),uu.subVectors(e,t),Cl.cross(uu).dot(s)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,s){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,n,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Cl.subVectors(this.c,this.b),uu.subVectors(this.a,this.b),Cl.cross(uu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Cr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Cr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,s,a){return Cr.getInterpolation(e,this.a,this.b,this.c,t,n,s,a)}containsPoint(e){return Cr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Cr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,s=this.b,a=this.c;let r,l;Jp.subVectors(s,n),Zp.subVectors(a,n),YA.subVectors(e,n);const c=Jp.dot(YA),f=Zp.dot(YA);if(c<=0&&f<=0)return t.copy(n);WA.subVectors(e,s);const d=Jp.dot(WA),g=Zp.dot(WA);if(d>=0&&g<=d)return t.copy(s);const v=c*g-d*f;if(v<=0&&c>=0&&d<=0)return r=c/(c-d),t.copy(n).addScaledVector(Jp,r);qA.subVectors(e,a);const y=Jp.dot(qA),S=Zp.dot(qA);if(S>=0&&y<=S)return t.copy(a);const A=y*f-c*S;if(A<=0&&f>=0&&S<=0)return l=f/(f-S),t.copy(n).addScaledVector(Zp,l);const M=d*S-y*g;if(M<=0&&g-d>=0&&y-S>=0)return NC.subVectors(a,s),l=(g-d)/(g-d+(y-S)),t.copy(s).addScaledVector(NC,l);const b=1/(M+A+v);return r=A*b,l=v*b,t.copy(n).addScaledVector(Jp,r).addScaledVector(Zp,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const LB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},xf={h:0,s:0,l:0},Ly={h:0,s:0,l:0};function QA(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}class St{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Zn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Nn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,s=Nn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Nn.colorSpaceToWorking(this,s),this}setHSL(e,t,n,s=Nn.workingColorSpace){if(e=jb(e,1),t=un(t,0,1),n=un(n,0,1),t===0)this.r=this.g=this.b=n;else{const a=n<=.5?n*(1+t):n+t-n*t,r=2*n-a;this.r=QA(r,a,e+1/3),this.g=QA(r,a,e),this.b=QA(r,a,e-1/3)}return Nn.colorSpaceToWorking(this,s),this}setStyle(e,t=Zn){function n(a){a!==void 0&&parseFloat(a)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let a;const r=s[1],l=s[2];switch(r){case"rgb":case"rgba":if(a=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(a[4]),this.setRGB(Math.min(255,parseInt(a[1],10))/255,Math.min(255,parseInt(a[2],10))/255,Math.min(255,parseInt(a[3],10))/255,t);if(a=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(a[4]),this.setRGB(Math.min(100,parseInt(a[1],10))/100,Math.min(100,parseInt(a[2],10))/100,Math.min(100,parseInt(a[3],10))/100,t);break;case"hsl":case"hsla":if(a=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(a[4]),this.setHSL(parseFloat(a[1])/360,parseFloat(a[2])/100,parseFloat(a[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const a=s[1],r=a.length;if(r===3)return this.setRGB(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,t);if(r===6)return this.setHex(parseInt(a,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Zn){const n=LB[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Su(e.r),this.g=Su(e.g),this.b=Su(e.b),this}copyLinearToSRGB(e){return this.r=Mm(e.r),this.g=Mm(e.g),this.b=Mm(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Zn){return Nn.workingToColorSpace(Ra.copy(this),e),Math.round(un(Ra.r*255,0,255))*65536+Math.round(un(Ra.g*255,0,255))*256+Math.round(un(Ra.b*255,0,255))}getHexString(e=Zn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Nn.workingColorSpace){Nn.workingToColorSpace(Ra.copy(this),t);const n=Ra.r,s=Ra.g,a=Ra.b,r=Math.max(n,s,a),l=Math.min(n,s,a);let c,f;const d=(l+r)/2;if(l===r)c=0,f=0;else{const g=r-l;switch(f=d<=.5?g/(r+l):g/(2-r-l),r){case n:c=(s-a)/g+(s<a?6:0);break;case s:c=(a-n)/g+2;break;case a:c=(n-s)/g+4;break}c/=6}return e.h=c,e.s=f,e.l=d,e}getRGB(e,t=Nn.workingColorSpace){return Nn.workingToColorSpace(Ra.copy(this),t),e.r=Ra.r,e.g=Ra.g,e.b=Ra.b,e}getStyle(e=Zn){Nn.workingToColorSpace(Ra.copy(this),e);const t=Ra.r,n=Ra.g,s=Ra.b;return e!==Zn?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(s*255)})`}offsetHSL(e,t,n){return this.getHSL(xf),this.setHSL(xf.h+e,xf.s+t,xf.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(xf),e.getHSL(Ly);const n=Zg(xf.h,Ly.h,t),s=Zg(xf.s,Ly.s,t),a=Zg(xf.l,Ly.l,t);return this.setHSL(n,s,a),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,s=this.b,a=e.elements;return this.r=a[0]*t+a[3]*n+a[6]*s,this.g=a[1]*t+a[4]*n+a[7]*s,this.b=a[2]*t+a[5]*n+a[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ra=new St;St.NAMES=LB;let lP=0;class ys extends uo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:lP++}),this.uuid=io(),this.name="",this.type="Material",this.blending=Md,this.side=ao,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=W_,this.blendDst=q_,this.blendEquation=Cf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new St(0,0,0),this.blendAlpha=0,this.depthFunc=Ld,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=EM,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=od,this.stencilZFail=od,this.stencilZPass=od,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(n):s&&s.isVector3&&n&&n.isVector3?s.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Md&&(n.blending=this.blending),this.side!==ao&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==W_&&(n.blendSrc=this.blendSrc),this.blendDst!==q_&&(n.blendDst=this.blendDst),this.blendEquation!==Cf&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Ld&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==EM&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==od&&(n.stencilFail=this.stencilFail),this.stencilZFail!==od&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==od&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function s(a){const r=[];for(const l in a){const c=a[l];delete c.metadata,r.push(c)}return r}if(t){const a=s(e.textures),r=s(e.images);a.length>0&&(n.textures=a),r.length>0&&(n.images=r)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const s=t.length;n=new Array(s);for(let a=0;a!==s;++a)n[a]=t[a].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class La extends ys{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new St(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ro,this.combine=Gv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const yu=cP();function cP(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),s=new Uint32Array(512);for(let c=0;c<256;++c){const f=c-127;f<-27?(n[c]=0,n[c|256]=32768,s[c]=24,s[c|256]=24):f<-14?(n[c]=1024>>-f-14,n[c|256]=1024>>-f-14|32768,s[c]=-f-1,s[c|256]=-f-1):f<=15?(n[c]=f+15<<10,n[c|256]=f+15<<10|32768,s[c]=13,s[c|256]=13):f<128?(n[c]=31744,n[c|256]=64512,s[c]=24,s[c|256]=24):(n[c]=31744,n[c|256]=64512,s[c]=13,s[c|256]=13)}const a=new Uint32Array(2048),r=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let f=c<<13,d=0;for(;(f&8388608)===0;)f<<=1,d-=8388608;f&=-8388609,d+=947912704,a[c]=f|d}for(let c=1024;c<2048;++c)a[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)r[c]=c<<23;r[31]=1199570944,r[32]=2147483648;for(let c=33;c<63;++c)r[c]=2147483648+(c-32<<23);r[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:s,mantissaTable:a,exponentTable:r,offsetTable:l}}function Tr(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=un(i,-65504,65504),yu.floatView[0]=i;const e=yu.uint32View[0],t=e>>23&511;return yu.baseTable[t]+((e&8388607)>>yu.shiftTable[t])}function Pg(i){const e=i>>10;return yu.uint32View[0]=yu.mantissaTable[yu.offsetTable[e]+(i&1023)]+yu.exponentTable[e],yu.floatView[0]}class Ig{static toHalfFloat(e){return Tr(e)}static fromHalfFloat(e){return Pg(e)}}const Ts=new le,Oy=new tt;let uP=0;class Fn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:uP++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=mv,this.updateRanges=[],this.gpuType=Zs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let s=0,a=this.itemSize;s<a;s++)this.array[e+s]=t.array[n+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Oy.fromBufferAttribute(this,t),Oy.applyMatrix3(e),this.setXY(t,Oy.x,Oy.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Ts.fromBufferAttribute(this,t),Ts.applyMatrix3(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Ts.fromBufferAttribute(this,t),Ts.applyMatrix4(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ts.fromBufferAttribute(this,t),Ts.applyNormalMatrix(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ts.fromBufferAttribute(this,t),Ts.transformDirection(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=sr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=mn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=sr(t,this.array)),t}setX(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=sr(t,this.array)),t}setY(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=sr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=sr(t,this.array)),t}setW(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array),s=mn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this}setXYZW(e,t,n,s,a){return e*=this.itemSize,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array),s=mn(s,this.array),a=mn(a,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=s,this.array[e+3]=a,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==mv&&(e.usage=this.usage),e}}class fP extends Fn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class hP extends Fn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class dP extends Fn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class pP extends Fn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Wb extends Fn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class mP extends Fn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class qb extends Fn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class gP extends Fn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Pg(this.array[e*this.itemSize]);return this.normalized&&(t=sr(t,this.array)),t}setX(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize]=Tr(t),this}getY(e){let t=Pg(this.array[e*this.itemSize+1]);return this.normalized&&(t=sr(t,this.array)),t}setY(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize+1]=Tr(t),this}getZ(e){let t=Pg(this.array[e*this.itemSize+2]);return this.normalized&&(t=sr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize+2]=Tr(t),this}getW(e){let t=Pg(this.array[e*this.itemSize+3]);return this.normalized&&(t=sr(t,this.array)),t}setW(e,t){return this.normalized&&(t=mn(t,this.array)),this.array[e*this.itemSize+3]=Tr(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array)),this.array[e+0]=Tr(t),this.array[e+1]=Tr(n),this}setXYZ(e,t,n,s){return e*=this.itemSize,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array),s=mn(s,this.array)),this.array[e+0]=Tr(t),this.array[e+1]=Tr(n),this.array[e+2]=Tr(s),this}setXYZW(e,t,n,s,a){return e*=this.itemSize,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array),s=mn(s,this.array),a=mn(a,this.array)),this.array[e+0]=Tr(t),this.array[e+1]=Tr(n),this.array[e+2]=Tr(s),this.array[e+3]=Tr(a),this}}class Dt extends Fn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let vP=0;const Uo=new Ft,$A=new In,Qp=new le,Kr=new Ds,Ag=new Ds,Js=new le;class $t extends uo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:vP++}),this.uuid=io(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(DB(e)?qb:Wb)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const a=new cn().getNormalMatrix(e);n.applyNormalMatrix(a),n.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Uo.makeRotationFromQuaternion(e),this.applyMatrix4(Uo),this}rotateX(e){return Uo.makeRotationX(e),this.applyMatrix4(Uo),this}rotateY(e){return Uo.makeRotationY(e),this.applyMatrix4(Uo),this}rotateZ(e){return Uo.makeRotationZ(e),this.applyMatrix4(Uo),this}translate(e,t,n){return Uo.makeTranslation(e,t,n),this.applyMatrix4(Uo),this}scale(e,t,n){return Uo.makeScale(e,t,n),this.applyMatrix4(Uo),this}lookAt(e){return $A.lookAt(e),$A.updateMatrix(),this.applyMatrix4($A.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Qp).negate(),this.translate(Qp.x,Qp.y,Qp.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let s=0,a=e.length;s<a;s++){const r=e[s];n.push(r.x,r.y,r.z||0)}this.setAttribute("position",new Dt(n,3))}else{const n=Math.min(e.length,t.count);for(let s=0;s<n;s++){const a=e[s];t.setXYZ(s,a.x,a.y,a.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ds);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new le(-1/0,-1/0,-1/0),new le(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){const a=t[n];Kr.setFromBufferAttribute(a),this.morphTargetsRelative?(Js.addVectors(this.boundingBox.min,Kr.min),this.boundingBox.expandByPoint(Js),Js.addVectors(this.boundingBox.max,Kr.max),this.boundingBox.expandByPoint(Js)):(this.boundingBox.expandByPoint(Kr.min),this.boundingBox.expandByPoint(Kr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new zs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new le,1/0);return}if(e){const n=this.boundingSphere.center;if(Kr.setFromBufferAttribute(e),t)for(let a=0,r=t.length;a<r;a++){const l=t[a];Ag.setFromBufferAttribute(l),this.morphTargetsRelative?(Js.addVectors(Kr.min,Ag.min),Kr.expandByPoint(Js),Js.addVectors(Kr.max,Ag.max),Kr.expandByPoint(Js)):(Kr.expandByPoint(Ag.min),Kr.expandByPoint(Ag.max))}Kr.getCenter(n);let s=0;for(let a=0,r=e.count;a<r;a++)Js.fromBufferAttribute(e,a),s=Math.max(s,n.distanceToSquared(Js));if(t)for(let a=0,r=t.length;a<r;a++){const l=t[a],c=this.morphTargetsRelative;for(let f=0,d=l.count;f<d;f++)Js.fromBufferAttribute(l,f),c&&(Qp.fromBufferAttribute(e,f),Js.add(Qp)),s=Math.max(s,n.distanceToSquared(Js))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,s=t.normal,a=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Fn(new Float32Array(4*n.count),4));const r=this.getAttribute("tangent"),l=[],c=[];for(let P=0;P<n.count;P++)l[P]=new le,c[P]=new le;const f=new le,d=new le,g=new le,v=new tt,y=new tt,S=new tt,A=new le,M=new le;function b(P,N,L){f.fromBufferAttribute(n,P),d.fromBufferAttribute(n,N),g.fromBufferAttribute(n,L),v.fromBufferAttribute(a,P),y.fromBufferAttribute(a,N),S.fromBufferAttribute(a,L),d.sub(f),g.sub(f),y.sub(v),S.sub(v);const k=1/(y.x*S.y-S.x*y.y);isFinite(k)&&(A.copy(d).multiplyScalar(S.y).addScaledVector(g,-y.y).multiplyScalar(k),M.copy(g).multiplyScalar(y.x).addScaledVector(d,-S.x).multiplyScalar(k),l[P].add(A),l[N].add(A),l[L].add(A),c[P].add(M),c[N].add(M),c[L].add(M))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let P=0,N=C.length;P<N;++P){const L=C[P],k=L.start,X=L.count;for(let W=k,$=k+X;W<$;W+=3)b(e.getX(W+0),e.getX(W+1),e.getX(W+2))}const w=new le,R=new le,U=new le,O=new le;function I(P){U.fromBufferAttribute(s,P),O.copy(U);const N=l[P];w.copy(N),w.sub(U.multiplyScalar(U.dot(N))).normalize(),R.crossVectors(O,N);const k=R.dot(c[P])<0?-1:1;r.setXYZW(P,w.x,w.y,w.z,k)}for(let P=0,N=C.length;P<N;++P){const L=C[P],k=L.start,X=L.count;for(let W=k,$=k+X;W<$;W+=3)I(e.getX(W+0)),I(e.getX(W+1)),I(e.getX(W+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Fn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let v=0,y=n.count;v<y;v++)n.setXYZ(v,0,0,0);const s=new le,a=new le,r=new le,l=new le,c=new le,f=new le,d=new le,g=new le;if(e)for(let v=0,y=e.count;v<y;v+=3){const S=e.getX(v+0),A=e.getX(v+1),M=e.getX(v+2);s.fromBufferAttribute(t,S),a.fromBufferAttribute(t,A),r.fromBufferAttribute(t,M),d.subVectors(r,a),g.subVectors(s,a),d.cross(g),l.fromBufferAttribute(n,S),c.fromBufferAttribute(n,A),f.fromBufferAttribute(n,M),l.add(d),c.add(d),f.add(d),n.setXYZ(S,l.x,l.y,l.z),n.setXYZ(A,c.x,c.y,c.z),n.setXYZ(M,f.x,f.y,f.z)}else for(let v=0,y=t.count;v<y;v+=3)s.fromBufferAttribute(t,v+0),a.fromBufferAttribute(t,v+1),r.fromBufferAttribute(t,v+2),d.subVectors(r,a),g.subVectors(s,a),d.cross(g),n.setXYZ(v+0,d.x,d.y,d.z),n.setXYZ(v+1,d.x,d.y,d.z),n.setXYZ(v+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Js.fromBufferAttribute(e,t),Js.normalize(),e.setXYZ(t,Js.x,Js.y,Js.z)}toNonIndexed(){function e(l,c){const f=l.array,d=l.itemSize,g=l.normalized,v=new f.constructor(c.length*d);let y=0,S=0;for(let A=0,M=c.length;A<M;A++){l.isInterleavedBufferAttribute?y=c[A]*l.data.stride+l.offset:y=c[A]*d;for(let b=0;b<d;b++)v[S++]=f[y++]}return new Fn(v,d,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new $t,n=this.index.array,s=this.attributes;for(const l in s){const c=s[l],f=e(c,n);t.setAttribute(l,f)}const a=this.morphAttributes;for(const l in a){const c=[],f=a[l];for(let d=0,g=f.length;d<g;d++){const v=f[d],y=e(v,n);c.push(y)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const r=this.groups;for(let l=0,c=r.length;l<c;l++){const f=r[l];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const f in c)c[f]!==void 0&&(e[f]=c[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const c in n){const f=n[c];e.data.attributes[c]=f.toJSON(e.data)}const s={};let a=!1;for(const c in this.morphAttributes){const f=this.morphAttributes[c],d=[];for(let g=0,v=f.length;g<v;g++){const y=f[g];d.push(y.toJSON(e.data))}d.length>0&&(s[c]=d,a=!0)}a&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const r=this.groups;r.length>0&&(e.data.groups=JSON.parse(JSON.stringify(r)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere=l.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const s=e.attributes;for(const f in s){const d=s[f];this.setAttribute(f,d.clone(t))}const a=e.morphAttributes;for(const f in a){const d=[],g=a[f];for(let v=0,y=g.length;v<y;v++)d.push(g[v].clone(t));this.morphAttributes[f]=d}this.morphTargetsRelative=e.morphTargetsRelative;const r=e.groups;for(let f=0,d=r.length;f<d;f++){const g=r[f];this.addGroup(g.start,g.count,g.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const PC=new Ft,Vh=new Vd,Ny=new zs,IC=new le,Py=new le,Iy=new le,Fy=new le,e2=new le,zy=new le,FC=new le,Gy=new le;class Di extends In{constructor(e=new $t,t=new La){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,r=s.length;a<r;a++){const l=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}getVertexPosition(e,t){const n=this.geometry,s=n.attributes.position,a=n.morphAttributes.position,r=n.morphTargetsRelative;t.fromBufferAttribute(s,e);const l=this.morphTargetInfluences;if(a&&l){zy.set(0,0,0);for(let c=0,f=a.length;c<f;c++){const d=l[c],g=a[c];d!==0&&(e2.fromBufferAttribute(g,e),r?zy.addScaledVector(e2,d):zy.addScaledVector(e2.sub(t),d))}t.add(zy)}return t}raycast(e,t){const n=this.geometry,s=this.material,a=this.matrixWorld;s!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Ny.copy(n.boundingSphere),Ny.applyMatrix4(a),Vh.copy(e.ray).recast(e.near),!(Ny.containsPoint(Vh.origin)===!1&&(Vh.intersectSphere(Ny,IC)===null||Vh.origin.distanceToSquared(IC)>(e.far-e.near)**2))&&(PC.copy(a).invert(),Vh.copy(e.ray).applyMatrix4(PC),!(n.boundingBox!==null&&Vh.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,Vh)))}_computeIntersections(e,t,n){let s;const a=this.geometry,r=this.material,l=a.index,c=a.attributes.position,f=a.attributes.uv,d=a.attributes.uv1,g=a.attributes.normal,v=a.groups,y=a.drawRange;if(l!==null)if(Array.isArray(r))for(let S=0,A=v.length;S<A;S++){const M=v[S],b=r[M.materialIndex],C=Math.max(M.start,y.start),w=Math.min(l.count,Math.min(M.start+M.count,y.start+y.count));for(let R=C,U=w;R<U;R+=3){const O=l.getX(R),I=l.getX(R+1),P=l.getX(R+2);s=Hy(this,b,e,n,f,d,g,O,I,P),s&&(s.faceIndex=Math.floor(R/3),s.face.materialIndex=M.materialIndex,t.push(s))}}else{const S=Math.max(0,y.start),A=Math.min(l.count,y.start+y.count);for(let M=S,b=A;M<b;M+=3){const C=l.getX(M),w=l.getX(M+1),R=l.getX(M+2);s=Hy(this,r,e,n,f,d,g,C,w,R),s&&(s.faceIndex=Math.floor(M/3),t.push(s))}}else if(c!==void 0)if(Array.isArray(r))for(let S=0,A=v.length;S<A;S++){const M=v[S],b=r[M.materialIndex],C=Math.max(M.start,y.start),w=Math.min(c.count,Math.min(M.start+M.count,y.start+y.count));for(let R=C,U=w;R<U;R+=3){const O=R,I=R+1,P=R+2;s=Hy(this,b,e,n,f,d,g,O,I,P),s&&(s.faceIndex=Math.floor(R/3),s.face.materialIndex=M.materialIndex,t.push(s))}}else{const S=Math.max(0,y.start),A=Math.min(c.count,y.start+y.count);for(let M=S,b=A;M<b;M+=3){const C=M,w=M+1,R=M+2;s=Hy(this,r,e,n,f,d,g,C,w,R),s&&(s.faceIndex=Math.floor(M/3),t.push(s))}}}}function yP(i,e,t,n,s,a,r,l){let c;if(e.side===vs?c=n.intersectTriangle(r,a,s,!0,l):c=n.intersectTriangle(s,a,r,e.side===ao,l),c===null)return null;Gy.copy(l),Gy.applyMatrix4(i.matrixWorld);const f=t.ray.origin.distanceTo(Gy);return f<t.near||f>t.far?null:{distance:f,point:Gy.clone(),object:i}}function Hy(i,e,t,n,s,a,r,l,c,f){i.getVertexPosition(l,Py),i.getVertexPosition(c,Iy),i.getVertexPosition(f,Fy);const d=yP(i,e,t,n,Py,Iy,Fy,FC);if(d){const g=new le;Cr.getBarycoord(FC,Py,Iy,Fy,g),s&&(d.uv=Cr.getInterpolatedAttribute(s,l,c,f,g,new tt)),a&&(d.uv1=Cr.getInterpolatedAttribute(a,l,c,f,g,new tt)),r&&(d.normal=Cr.getInterpolatedAttribute(r,l,c,f,g,new le),d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1));const v={a:l,b:c,c:f,normal:new le,materialIndex:0};Cr.getNormal(Py,Iy,Fy,v.normal),d.face=v,d.barycoord=g}return d}class kd extends $t{constructor(e=1,t=1,n=1,s=1,a=1,r=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:s,heightSegments:a,depthSegments:r};const l=this;s=Math.floor(s),a=Math.floor(a),r=Math.floor(r);const c=[],f=[],d=[],g=[];let v=0,y=0;S("z","y","x",-1,-1,n,t,e,r,a,0),S("z","y","x",1,-1,n,t,-e,r,a,1),S("x","z","y",1,1,e,n,t,s,r,2),S("x","z","y",1,-1,e,n,-t,s,r,3),S("x","y","z",1,-1,e,t,n,s,a,4),S("x","y","z",-1,-1,e,t,-n,s,a,5),this.setIndex(c),this.setAttribute("position",new Dt(f,3)),this.setAttribute("normal",new Dt(d,3)),this.setAttribute("uv",new Dt(g,2));function S(A,M,b,C,w,R,U,O,I,P,N){const L=R/I,k=U/P,X=R/2,W=U/2,$=O/2,ce=I+1,z=P+1;let q=0,Q=0;const re=new le;for(let H=0;H<z;H++){const G=H*k-W;for(let K=0;K<ce;K++){const se=K*L-X;re[A]=se*C,re[M]=G*w,re[b]=$,f.push(re.x,re.y,re.z),re[A]=0,re[M]=0,re[b]=O>0?1:-1,d.push(re.x,re.y,re.z),g.push(K/I),g.push(1-H/P),q+=1}}for(let H=0;H<P;H++)for(let G=0;G<I;G++){const K=v+G+ce*H,se=v+G+ce*(H+1),J=v+(G+1)+ce*(H+1),ne=v+(G+1)+ce*H;c.push(K,se,ne),c.push(se,J,ne),Q+=6}l.addGroup(y,Q,N),y+=Q,v+=q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Im(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const s=i[t][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=s.clone():Array.isArray(s)?e[t][n]=s.slice():e[t][n]=s}}return e}function nr(i){const e={};for(let t=0;t<i.length;t++){const n=Im(i[t]);for(const s in n)e[s]=n[s]}return e}function _P(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function OB(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Nn.workingColorSpace}const Kb={clone:Im,merge:nr};var xP=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,SP=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ls extends ys{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=xP,this.fragmentShader=SP,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Im(e.uniforms),this.uniformsGroups=_P(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const r=this.uniforms[s].value;r&&r.isTexture?t.uniforms[s]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[s]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[s]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[s]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[s]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[s]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[s]={type:"m4",value:r.toArray()}:t.uniforms[s]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const s in this.extensions)this.extensions[s]===!0&&(n[s]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Vv extends In{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ft,this.projectionMatrix=new Ft,this.projectionMatrixInverse=new Ft,this.coordinateSystem=zo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Sf=new le,zC=new tt,GC=new tt;class Ji extends Vv{constructor(e=50,t=1,n=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Nm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(bd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Nm*2*Math.atan(Math.tan(bd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Sf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Sf.x,Sf.y).multiplyScalar(-e/Sf.z),Sf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Sf.x,Sf.y).multiplyScalar(-e/Sf.z)}getViewSize(e,t){return this.getViewBounds(e,zC,GC),t.subVectors(GC,zC)}setViewOffset(e,t,n,s,a,r){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=a,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(bd*.5*this.fov)/this.zoom,n=2*t,s=this.aspect*n,a=-.5*s;const r=this.view;if(this.view!==null&&this.view.enabled){const c=r.fullWidth,f=r.fullHeight;a+=r.offsetX*s/c,t-=r.offsetY*n/f,s*=r.width/c,n*=r.height/f}const l=this.filmOffset;l!==0&&(a+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+s,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const $p=-90,em=1;class NB extends In{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Ji($p,em,e,t);s.layers=this.layers,this.add(s);const a=new Ji($p,em,e,t);a.layers=this.layers,this.add(a);const r=new Ji($p,em,e,t);r.layers=this.layers,this.add(r);const l=new Ji($p,em,e,t);l.layers=this.layers,this.add(l);const c=new Ji($p,em,e,t);c.layers=this.layers,this.add(c);const f=new Ji($p,em,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,s,a,r,l,c]=t;for(const f of t)this.remove(f);if(e===zo)n.up.set(0,1,0),n.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),a.up.set(0,0,-1),a.lookAt(0,1,0),r.up.set(0,0,1),r.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===gv)n.up.set(0,-1,0),n.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),a.up.set(0,0,1),a.lookAt(0,1,0),r.up.set(0,0,-1),r.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,r,l,c,f,d]=this.children,g=e.getRenderTarget(),v=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),S=e.xr.enabled;e.xr.enabled=!1;const A=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,s),e.render(t,a),e.setRenderTarget(n,1,s),e.render(t,r),e.setRenderTarget(n,2,s),e.render(t,l),e.setRenderTarget(n,3,s),e.render(t,c),e.setRenderTarget(n,4,s),e.render(t,f),n.texture.generateMipmaps=A,e.setRenderTarget(n,5,s),e.render(t,d),e.setRenderTarget(g,v,y),e.xr.enabled=S,n.texture.needsPMREMUpdate=!0}}class kv extends Ai{constructor(e=[],t=bu,n,s,a,r,l,c,f,d){super(e,t,n,s,a,r,l,c,f,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class PB extends os{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},s=[n,n,n,n,n,n];this.texture=new kv(s),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new kd(5,5,5),a=new ls({name:"CubemapFromEquirect",uniforms:Im(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:vs,blending:da});a.uniforms.tEquirect.value=t;const r=new Di(s,a),l=t.minFilter;return t.minFilter===to&&(t.minFilter=ti),new NB(1,10,this).update(e,r),t.minFilter=l,r.geometry.dispose(),r.material.dispose(),this}clear(e,t=!0,n=!0,s=!0){const a=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,n,s);e.setRenderTarget(a)}}class Tc extends In{constructor(){super(),this.isGroup=!0,this.type="Group"}}const AP={type:"move"};class U_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Tc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Tc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new le),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Tc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new le),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let s=null,a=null,r=null;const l=this._targetRay,c=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){r=!0;for(const A of e.hand.values()){const M=t.getJointPose(A,n),b=this._getHandJoint(f,A);M!==null&&(b.matrix.fromArray(M.transform.matrix),b.matrix.decompose(b.position,b.rotation,b.scale),b.matrixWorldNeedsUpdate=!0,b.jointRadius=M.radius),b.visible=M!==null}const d=f.joints["index-finger-tip"],g=f.joints["thumb-tip"],v=d.position.distanceTo(g.position),y=.02,S=.005;f.inputState.pinching&&v>y+S?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&v<=y-S&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(a=t.getPose(e.gripSpace,n),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(s=t.getPose(e.targetRaySpace,n),s===null&&a!==null&&(s=a),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(AP)))}return l!==null&&(l.visible=s!==null),c!==null&&(c.visible=a!==null),f!==null&&(f.visible=r!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Tc;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class fS{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new St(e),this.density=t}clone(){return new fS(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class hS{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new St(e),this.near=t,this.far=n}clone(){return new hS(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let yv=class extends In{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ro,this.environmentIntensity=1,this.environmentRotation=new ro,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class Xv{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=mv,this.updateRanges=[],this.version=0,this.uuid=io()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let s=0,a=this.stride;s<a;s++)this.array[e+s]=t.array[n+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=io()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=io()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const tr=new le;class zf{constructor(e,t,n,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)tr.fromBufferAttribute(this,t),tr.applyMatrix4(e),this.setXYZ(t,tr.x,tr.y,tr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)tr.fromBufferAttribute(this,t),tr.applyNormalMatrix(e),this.setXYZ(t,tr.x,tr.y,tr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)tr.fromBufferAttribute(this,t),tr.transformDirection(e),this.setXYZ(t,tr.x,tr.y,tr.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=sr(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=mn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=mn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=mn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=sr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=sr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=sr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=sr(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array),s=mn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this}setXYZW(e,t,n,s,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=mn(t,this.array),n=mn(n,this.array),s=mn(s,this.array),a=mn(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=s,this.data.array[e+3]=a,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[s+a])}return new Fn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new zf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const s=n*this.data.stride+this.offset;for(let a=0;a<this.itemSize;a++)t.push(this.data.array[s+a])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class dS extends ys{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new St(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let tm;const Mg=new le,nm=new le,im=new le,sm=new tt,bg=new tt,IB=new Ft,Vy=new le,Tg=new le,ky=new le,HC=new tt,t2=new tt,VC=new tt;class Jb extends In{constructor(e=new dS){if(super(),this.isSprite=!0,this.type="Sprite",tm===void 0){tm=new $t;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Xv(t,5);tm.setIndex([0,1,2,0,2,3]),tm.setAttribute("position",new zf(n,3,0,!1)),tm.setAttribute("uv",new zf(n,2,3,!1))}this.geometry=tm,this.material=e,this.center=new tt(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),nm.setFromMatrixScale(this.matrixWorld),IB.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),im.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&nm.multiplyScalar(-im.z);const n=this.material.rotation;let s,a;n!==0&&(a=Math.cos(n),s=Math.sin(n));const r=this.center;Xy(Vy.set(-.5,-.5,0),im,r,nm,s,a),Xy(Tg.set(.5,-.5,0),im,r,nm,s,a),Xy(ky.set(.5,.5,0),im,r,nm,s,a),HC.set(0,0),t2.set(1,0),VC.set(1,1);let l=e.ray.intersectTriangle(Vy,Tg,ky,!1,Mg);if(l===null&&(Xy(Tg.set(-.5,.5,0),im,r,nm,s,a),t2.set(0,1),l=e.ray.intersectTriangle(Vy,ky,Tg,!1,Mg),l===null))return;const c=e.ray.origin.distanceTo(Mg);c<e.near||c>e.far||t.push({distance:c,point:Mg.clone(),uv:Cr.getInterpolation(Mg,Vy,Tg,ky,HC,t2,VC,new tt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Xy(i,e,t,n,s,a){sm.subVectors(i,t).addScalar(.5).multiply(n),s!==void 0?(bg.x=a*sm.x-s*sm.y,bg.y=s*sm.x+a*sm.y):bg.copy(sm),i.copy(e),i.x+=bg.x,i.y+=bg.y,i.applyMatrix4(IB)}const jy=new le,kC=new le;class FB extends In{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,s=t.length;n<s;n++){const a=t[n];this.addLevel(a.object.clone(),a.distance,a.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const s=this.levels;let a;for(a=0;a<s.length&&!(t<s[a].distance);a++);return s.splice(a,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const s=t.splice(n,1);return this.remove(s[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,s;for(n=1,s=t.length;n<s;n++){let a=t[n].distance;if(t[n].object.visible&&(a-=a*t[n].hysteresis),e<a)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){jy.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(jy);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){jy.setFromMatrixPosition(e.matrixWorld),kC.setFromMatrixPosition(this.matrixWorld);const n=jy.distanceTo(kC)/e.zoom;t[0].object.visible=!0;let s,a;for(s=1,a=t.length;s<a;s++){let r=t[s].distance;if(t[s].object.visible&&(r-=r*t[s].hysteresis),n>=r)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<a;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let s=0,a=n.length;s<a;s++){const r=n[s];t.object.levels.push({object:r.object.uuid,distance:r.distance,hysteresis:r.hysteresis})}return t}}const XC=new le,jC=new wn,YC=new wn,MP=new le,WC=new Ft,Yy=new le,n2=new zs,qC=new Ft,i2=new Vd;class Zb extends Di{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=TM,this.bindMatrix=new Ft,this.bindMatrixInverse=new Ft,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ds),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Yy),this.boundingBox.expandByPoint(Yy)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new zs),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,Yy),this.boundingSphere.expandByPoint(Yy)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,s=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),n2.copy(this.boundingSphere),n2.applyMatrix4(s),e.ray.intersectsSphere(n2)!==!1&&(qC.copy(s).invert(),i2.copy(e.ray).applyMatrix4(qC),!(this.boundingBox!==null&&i2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,i2)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new wn,t=this.geometry.attributes.skinWeight;for(let n=0,s=t.count;n<s;n++){e.fromBufferAttribute(t,n);const a=1/e.manhattanLength();a!==1/0?e.multiplyScalar(a):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===TM?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===gB?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,s=this.geometry;jC.fromBufferAttribute(s.attributes.skinIndex,e),YC.fromBufferAttribute(s.attributes.skinWeight,e),XC.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let a=0;a<4;a++){const r=YC.getComponent(a);if(r!==0){const l=jC.getComponent(a);WC.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),t.addScaledVector(MP.copy(XC).applyMatrix4(WC),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}class pS extends In{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Cc extends Ai{constructor(e=null,t=1,n=1,s,a,r,l,c,f=Hi,d=Hi,g,v){super(null,r,l,c,f,d,s,a,g,v),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const KC=new Ft,bP=new Ft;class jv{constructor(e=[],t=[]){this.uuid=io(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,s=this.bones.length;n<s;n++)this.boneInverses.push(new Ft)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Ft;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,s=this.boneTexture;for(let a=0,r=e.length;a<r;a++){const l=e[a]?e[a].matrixWorld:bP;KC.multiplyMatrices(l,t[a]),KC.toArray(n,a*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new jv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Cc(t,e,e,Ua,Zs);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,s=e.bones.length;n<s;n++){const a=e.bones[n];let r=t[a];r===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",a),r=new pS),this.bones.push(r),this.boneInverses.push(new Ft().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let s=0,a=t.length;s<a;s++){const r=t[s];e.bones.push(r.uuid);const l=n[s];e.boneInverses.push(l.toArray())}return e}}class Gf extends Fn{constructor(e,t,n,s=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const am=new Ft,JC=new Ft,Wy=[],ZC=new Ds,TP=new Ft,Eg=new Di,Cg=new zs;class Qb extends Di{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Gf(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<n;s++)this.setMatrixAt(s,TP)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ds),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,am),ZC.copy(e.boundingBox).applyMatrix4(am),this.boundingBox.union(ZC)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new zs),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,am),Cg.copy(e.boundingSphere).applyMatrix4(am),this.boundingSphere.union(Cg)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,s=this.morphTexture.source.data.data,a=n.length+1,r=e*a+1;for(let l=0;l<n.length;l++)n[l]=s[r+l]}raycast(e,t){const n=this.matrixWorld,s=this.count;if(Eg.geometry=this.geometry,Eg.material=this.material,Eg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Cg.copy(this.boundingSphere),Cg.applyMatrix4(n),e.ray.intersectsSphere(Cg)!==!1))for(let a=0;a<s;a++){this.getMatrixAt(a,am),JC.multiplyMatrices(n,am),Eg.matrixWorld=JC,Eg.raycast(e,Wy);for(let r=0,l=Wy.length;r<l;r++){const c=Wy[r];c.instanceId=a,c.object=this,t.push(c)}Wy.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Gf(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,s=n.length+1;this.morphTexture===null&&(this.morphTexture=new Cc(new Float32Array(s*this.count),s,this.count,aS,Zs));const a=this.morphTexture.source.data.data;let r=0;for(let f=0;f<n.length;f++)r+=n[f];const l=this.geometry.morphTargetsRelative?1:1-r,c=s*e;a[c]=l,a.set(n,c+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const s2=new le,EP=new le,CP=new cn;class gu{constructor(e=new le(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,s){return this.normal.set(e,t,n),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const s=s2.subVectors(n,t).cross(EP.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(s2),s=this.normal.dot(n);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const a=-(e.start.dot(this.normal)+this.constant)/s;return a<0||a>1?null:t.copy(e.start).addScaledVector(n,a)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||CP.getNormalMatrix(e),s=this.coplanarPoint(s2).applyMatrix4(e),a=this.normal.applyMatrix3(n).normalize();return this.constant=-s.dot(a),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const kh=new zs,qy=new le;class $m{constructor(e=new gu,t=new gu,n=new gu,s=new gu,a=new gu,r=new gu){this.planes=[e,t,n,s,a,r]}set(e,t,n,s,a,r){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(s),l[4].copy(a),l[5].copy(r),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=zo){const n=this.planes,s=e.elements,a=s[0],r=s[1],l=s[2],c=s[3],f=s[4],d=s[5],g=s[6],v=s[7],y=s[8],S=s[9],A=s[10],M=s[11],b=s[12],C=s[13],w=s[14],R=s[15];if(n[0].setComponents(c-a,v-f,M-y,R-b).normalize(),n[1].setComponents(c+a,v+f,M+y,R+b).normalize(),n[2].setComponents(c+r,v+d,M+S,R+C).normalize(),n[3].setComponents(c-r,v-d,M-S,R-C).normalize(),n[4].setComponents(c-l,v-g,M-A,R-w).normalize(),t===zo)n[5].setComponents(c+l,v+g,M+A,R+w).normalize();else if(t===gv)n[5].setComponents(l,g,A,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),kh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),kh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(kh)}intersectsSprite(e){return kh.center.set(0,0,0),kh.radius=.7071067811865476,kh.applyMatrix4(e.matrixWorld),this.intersectsSphere(kh)}intersectsSphere(e){const t=this.planes,n=e.center,s=-e.radius;for(let a=0;a<6;a++)if(t[a].distanceToPoint(n)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const s=t[n];if(qy.x=s.normal.x>0?e.max.x:e.min.x,qy.y=s.normal.y>0?e.max.y:e.min.y,qy.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(qy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const xc=new Ft,Sc=new $m;class mS{constructor(){this.coordinateSystem=zo}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(xc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Sc.setFromProjectionMatrix(xc,this.coordinateSystem),Sc.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(xc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Sc.setFromProjectionMatrix(xc,this.coordinateSystem),Sc.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(xc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Sc.setFromProjectionMatrix(xc,this.coordinateSystem),Sc.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(xc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Sc.setFromProjectionMatrix(xc,this.coordinateSystem),Sc.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const s=t.cameras[n];if(xc.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),Sc.setFromProjectionMatrix(xc,this.coordinateSystem),Sc.containsPoint(e))return!0}return!1}clone(){return new mS}}function a2(i,e){return i-e}function wP(i,e){return i.z-e.z}function RP(i,e){return e.z-i.z}class DP{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,s){const a=this.pool,r=this.list;this.index>=a.length&&a.push({start:-1,count:-1,z:-1,index:-1});const l=a[this.index];r.push(l),this.index++,l.start=e,l.count=t,l.z=n,l.index=s}reset(){this.list.length=0,this.index=0}}const br=new Ft,BP=new St(1,1,1),QC=new $m,UP=new mS,Ky=new Ds,Xh=new zs,wg=new le,$C=new le,LP=new le,r2=new DP,Da=new Di,Jy=[];function OP(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const s=i.count;for(let a=0;a<s;a++)for(let r=0;r<n;r++)e.setComponent(a+t,r,i.getComponent(a,r))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function jh(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class zB extends Di{constructor(e,t,n=t*2,s){super(new $t,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Cc(t,e,e,Ua,Zs);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Cc(t,e,e,Hv,Bc);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Cc(t,e,e,Ua,Zs);n.colorSpace=Nn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const r=e.getAttribute(a),{array:l,itemSize:c,normalized:f}=r,d=new l.constructor(n*c),g=new Fn(d,c,f);t.setAttribute(a,g)}if(e.getIndex()!==null){const a=n>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Fn(a,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const s=e.getAttribute(n),a=t.getAttribute(n);if(s.itemSize!==a.itemSize||s.normalized!==a.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ds);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const a=t[n].geometryIndex;this.getMatrixAt(n,br),this.getBoundingBoxAt(a,Ky).applyMatrix4(br),e.union(Ky)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new zs);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,s=t.length;n<s;n++){if(t[n].active===!1)continue;const a=t[n].geometryIndex;this.getMatrixAt(n,br),this.getBoundingSphereAt(a,Xh).applyMatrix4(br),e.union(Xh)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let s=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(a2),s=this._availableInstanceIds.shift(),this._instanceInfo[s]=n):(s=this._instanceInfo.length,this._instanceInfo.push(n));const a=this._matricesTexture;br.identity().toArray(a.image.data,s*16),a.needsUpdate=!0;const r=this._colorsTexture;return r&&(BP.toArray(r.image.data,s*4),r.needsUpdate=!0),this._visibilityChanged=!0,s}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const s={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;s.vertexStart=this._nextVertexStart,s.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const r=e.getIndex();if(r!==null&&(s.indexStart=this._nextIndexStart,s.reservedIndexCount=n===-1?r.count:n),s.indexStart!==-1&&s.indexStart+s.reservedIndexCount>this._maxIndexCount||s.vertexStart+s.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let c;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(a2),c=this._availableGeometryIds.shift(),a[c]=s):(c=this._geometryCount,this._geometryCount++,a.push(s)),this.setGeometryAt(c,e),this._nextIndexStart=s.indexStart+s.reservedIndexCount,this._nextVertexStart=s.vertexStart+s.reservedVertexCount,c}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,s=n.getIndex()!==null,a=n.getIndex(),r=t.getIndex(),l=this._geometryInfo[e];if(s&&r.count>l.reservedIndexCount||t.attributes.position.count>l.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const c=l.vertexStart,f=l.reservedVertexCount;l.vertexCount=t.getAttribute("position").count;for(const d in n.attributes){const g=t.getAttribute(d),v=n.getAttribute(d);OP(g,v,c);const y=g.itemSize;for(let S=g.count,A=f;S<A;S++){const M=c+S;for(let b=0;b<y;b++)v.setComponent(M,b,0)}v.needsUpdate=!0,v.addUpdateRange(c*y,f*y)}if(s){const d=l.indexStart,g=l.reservedIndexCount;l.indexCount=t.getIndex().count;for(let v=0;v<r.count;v++)a.setX(d+v,c+r.getX(v));for(let v=r.count,y=g;v<y;v++)a.setX(d+v,c);a.needsUpdate=!0,a.addUpdateRange(d,l.reservedIndexCount)}return l.start=s?l.indexStart:l.vertexStart,l.count=s?l.indexCount:l.vertexCount,l.boundingBox=null,t.boundingBox!==null&&(l.boundingBox=t.boundingBox.clone()),l.boundingSphere=null,t.boundingSphere!==null&&(l.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let s=0,a=n.length;s<a;s++)n[s].active&&n[s].geometryIndex===e&&this.deleteInstance(s);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,s=n.map((r,l)=>l).sort((r,l)=>n[r].vertexStart-n[l].vertexStart),a=this.geometry;for(let r=0,l=n.length;r<l;r++){const c=s[r],f=n[c];if(f.active!==!1){if(a.index!==null){if(f.indexStart!==t){const{indexStart:d,vertexStart:g,reservedIndexCount:v}=f,y=a.index,S=y.array,A=e-g;for(let M=d;M<d+v;M++)S[M]=S[M]+A;y.array.copyWithin(t,d,d+v),y.addUpdateRange(t,v),f.indexStart=t}t+=f.reservedIndexCount}if(f.vertexStart!==e){const{vertexStart:d,reservedVertexCount:g}=f,v=a.attributes;for(const y in v){const S=v[y],{array:A,itemSize:M}=S;A.copyWithin(e*M,d*M,(d+g)*M),S.addUpdateRange(e*M,g*M)}f.vertexStart=e}e+=f.reservedVertexCount,f.start=a.index?f.indexStart:f.vertexStart,this._nextIndexStart=a.index?f.indexStart+f.reservedIndexCount:0,this._nextVertexStart=f.vertexStart+f.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingBox===null){const a=new Ds,r=n.index,l=n.attributes.position;for(let c=s.start,f=s.start+s.count;c<f;c++){let d=c;r&&(d=r.getX(d)),a.expandByPoint(wg.fromBufferAttribute(l,d))}s.boundingBox=a}return t.copy(s.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,s=this._geometryInfo[e];if(s.boundingSphere===null){const a=new zs;this.getBoundingBoxAt(e,Ky),Ky.getCenter(a.center);const r=n.index,l=n.attributes.position;let c=0;for(let f=s.start,d=s.start+s.count;f<d;f++){let g=f;r&&(g=r.getX(g)),wg.fromBufferAttribute(l,g),c=Math.max(c,a.center.distanceToSquared(wg))}a.radius=Math.sqrt(c),s.boundingSphere=a}return t.copy(s.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,s=this._matricesTexture.image.data;return t.toArray(s,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(a2);t[t.length-1]===n.length;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const s=new Int32Array(e),a=new Int32Array(e);jh(this._multiDrawCounts,s),jh(this._multiDrawStarts,a),this._multiDrawCounts=s,this._multiDrawStarts=a,this._maxInstanceCount=e;const r=this._indirectTexture,l=this._matricesTexture,c=this._colorsTexture;r.dispose(),this._initIndirectTexture(),jh(r.image.data,this._indirectTexture.image.data),l.dispose(),this._initMatricesTexture(),jh(l.image.data,this._matricesTexture.image.data),c&&(c.dispose(),this._initColorsTexture(),jh(c.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(l=>l.active);if(Math.max(...n.map(l=>l.vertexStart+l.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(c=>c.indexStart+c.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const a=this.geometry;a.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new $t,this._initializeGeometry(a));const r=this.geometry;a.index&&jh(a.index.array,r.index.array);for(const l in a.attributes)jh(a.attributes[l].array,r.attributes[l].array)}raycast(e,t){const n=this._instanceInfo,s=this._geometryInfo,a=this.matrixWorld,r=this.geometry;Da.material=this.material,Da.geometry.index=r.index,Da.geometry.attributes=r.attributes,Da.geometry.boundingBox===null&&(Da.geometry.boundingBox=new Ds),Da.geometry.boundingSphere===null&&(Da.geometry.boundingSphere=new zs);for(let l=0,c=n.length;l<c;l++){if(!n[l].visible||!n[l].active)continue;const f=n[l].geometryIndex,d=s[f];Da.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(l,Da.matrixWorld).premultiply(a),this.getBoundingBoxAt(f,Da.geometry.boundingBox),this.getBoundingSphereAt(f,Da.geometry.boundingSphere),Da.raycast(e,Jy);for(let g=0,v=Jy.length;g<v;g++){const y=Jy[g];y.object=this,y.batchId=l,t.push(y)}Jy.length=0}Da.material=null,Da.geometry.index=null,Da.geometry.attributes={},Da.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,s,a){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const r=s.getIndex(),l=r===null?1:r.array.BYTES_PER_ELEMENT,c=this._instanceInfo,f=this._multiDrawStarts,d=this._multiDrawCounts,g=this._geometryInfo,v=this.perObjectFrustumCulled,y=this._indirectTexture,S=y.image.data,A=n.isArrayCamera?UP:QC;v&&!n.isArrayCamera&&(br.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),QC.setFromProjectionMatrix(br,e.coordinateSystem));let M=0;if(this.sortObjects){br.copy(this.matrixWorld).invert(),wg.setFromMatrixPosition(n.matrixWorld).applyMatrix4(br),$C.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(br);for(let w=0,R=c.length;w<R;w++)if(c[w].visible&&c[w].active){const U=c[w].geometryIndex;this.getMatrixAt(w,br),this.getBoundingSphereAt(U,Xh).applyMatrix4(br);let O=!1;if(v&&(O=!A.intersectsSphere(Xh,n)),!O){const I=g[U],P=LP.subVectors(Xh.center,wg).dot($C);r2.push(I.start,I.count,P,w)}}const b=r2.list,C=this.customSort;C===null?b.sort(a.transparent?RP:wP):C.call(this,b,n);for(let w=0,R=b.length;w<R;w++){const U=b[w];f[M]=U.start*l,d[M]=U.count,S[M]=U.index,M++}r2.reset()}else for(let b=0,C=c.length;b<C;b++)if(c[b].visible&&c[b].active){const w=c[b].geometryIndex;let R=!1;if(v&&(this.getMatrixAt(b,br),this.getBoundingSphereAt(w,Xh).applyMatrix4(br),R=!A.intersectsSphere(Xh,n)),!R){const U=g[w];f[M]=U.start*l,d[M]=U.count,S[M]=b,M++}}y.needsUpdate=!0,this._multiDrawCount=M,this._visibilityChanged=!1}onBeforeShadow(e,t,n,s,a,r){this.onBeforeRender(e,null,s,a,r)}}class ma extends ys{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new St(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Rx=new le,Dx=new le,e3=new Ft,Rg=new Vd,Zy=new zs,o2=new le,t3=new le;class Uc extends In{constructor(e=new $t,t=new ma){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let s=1,a=t.count;s<a;s++)Rx.fromBufferAttribute(t,s-1),Dx.fromBufferAttribute(t,s),n[s]=n[s-1],n[s]+=Rx.distanceTo(Dx);e.setAttribute("lineDistance",new Dt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,a=e.params.Line.threshold,r=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Zy.copy(n.boundingSphere),Zy.applyMatrix4(s),Zy.radius+=a,e.ray.intersectsSphere(Zy)===!1)return;e3.copy(s).invert(),Rg.copy(e.ray).applyMatrix4(e3);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=this.isLineSegments?2:1,d=n.index,v=n.attributes.position;if(d!==null){const y=Math.max(0,r.start),S=Math.min(d.count,r.start+r.count);for(let A=y,M=S-1;A<M;A+=f){const b=d.getX(A),C=d.getX(A+1),w=Qy(this,e,Rg,c,b,C,A);w&&t.push(w)}if(this.isLineLoop){const A=d.getX(S-1),M=d.getX(y),b=Qy(this,e,Rg,c,A,M,S-1);b&&t.push(b)}}else{const y=Math.max(0,r.start),S=Math.min(v.count,r.start+r.count);for(let A=y,M=S-1;A<M;A+=f){const b=Qy(this,e,Rg,c,A,A+1,A);b&&t.push(b)}if(this.isLineLoop){const A=Qy(this,e,Rg,c,S-1,y,S-1);A&&t.push(A)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,r=s.length;a<r;a++){const l=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}}function Qy(i,e,t,n,s,a,r){const l=i.geometry.attributes.position;if(Rx.fromBufferAttribute(l,s),Dx.fromBufferAttribute(l,a),t.distanceSqToSegment(Rx,Dx,o2,t3)>n)return;o2.applyMatrix4(i.matrixWorld);const f=e.ray.origin.distanceTo(o2);if(!(f<e.near||f>e.far))return{distance:f,point:t3.clone().applyMatrix4(i.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:i}}const n3=new le,i3=new le;class Fl extends Uc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let s=0,a=t.count;s<a;s+=2)n3.fromBufferAttribute(t,s),i3.fromBufferAttribute(t,s+1),n[s]=s===0?0:n[s-1],n[s+1]=n[s]+n3.distanceTo(i3);e.setAttribute("lineDistance",new Dt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class $b extends Uc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class gS extends ys{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new St(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const s3=new Ft,wM=new Vd,$y=new zs,e_=new le;class eT extends In{constructor(e=new $t,t=new gS){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,s=this.matrixWorld,a=e.params.Points.threshold,r=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),$y.copy(n.boundingSphere),$y.applyMatrix4(s),$y.radius+=a,e.ray.intersectsSphere($y)===!1)return;s3.copy(s).invert(),wM.copy(e.ray).applyMatrix4(s3);const l=a/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=n.index,g=n.attributes.position;if(f!==null){const v=Math.max(0,r.start),y=Math.min(f.count,r.start+r.count);for(let S=v,A=y;S<A;S++){const M=f.getX(S);e_.fromBufferAttribute(g,M),a3(e_,M,c,s,e,t,this)}}else{const v=Math.max(0,r.start),y=Math.min(g.count,r.start+r.count);for(let S=v,A=y;S<A;S++)e_.fromBufferAttribute(g,S),a3(e_,S,c,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const s=t[n[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let a=0,r=s.length;a<r;a++){const l=s[a].name||String(a);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=a}}}}}function a3(i,e,t,n,s,a,r){const l=wM.distanceSqToPoint(i);if(l<t){const c=new le;wM.closestPointToPoint(i,c),c.applyMatrix4(n);const f=s.ray.origin.distanceTo(c);if(f<s.near||f>s.far)return;a.push({distance:f,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,faceIndex:null,barycoord:null,object:r})}}class GB extends Ai{constructor(e,t,n,s,a=ti,r=ti,l,c,f){super(e,t,n,s,a,r,l,c,f),this.isVideoTexture=!0,this.generateMipmaps=!1;const d=this;function g(){d.needsUpdate=!0,e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class NP extends GB{constructor(e,t,n,s,a,r,l,c){super({},e,t,n,s,a,r,l,c),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class PP extends Ai{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Hi,this.minFilter=Hi,this.generateMipmaps=!1,this.needsUpdate=!0}}class vS extends Ai{constructor(e,t,n,s,a,r,l,c,f,d,g,v){super(null,r,l,c,f,d,s,a,g,v),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class IP extends vS{constructor(e,t,n,s,a,r){super(e,t,n,a,r),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=eo,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class FP extends vS{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,bu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class zP extends Ai{constructor(e,t,n,s,a,r,l,c,f){super(e,t,n,s,a,r,l,c,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class yS extends Ai{constructor(e,t,n=Bc,s,a,r,l=Hi,c=Hi,f,d=Um,g=1){if(d!==Um&&d!==Nd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const v={width:e,height:t,depth:g};super(v,s,a,r,l,c,d,n,f),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Rf(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class _S extends $t{constructor(e=1,t=1,n=4,s=8,a=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:s,heightSegments:a},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),s=Math.max(3,Math.floor(s)),a=Math.max(1,Math.floor(a));const r=[],l=[],c=[],f=[],d=t/2,g=Math.PI/2*e,v=t,y=2*g+v,S=n*2+a,A=s+1,M=new le,b=new le;for(let C=0;C<=S;C++){let w=0,R=0,U=0,O=0;if(C<=n){const N=C/n,L=N*Math.PI/2;R=-d-e*Math.cos(L),U=e*Math.sin(L),O=-e*Math.cos(L),w=N*g}else if(C<=n+a){const N=(C-n)/a;R=-d+N*t,U=e,O=0,w=g+N*v}else{const N=(C-n-a)/n,L=N*Math.PI/2;R=d+e*Math.sin(L),U=e*Math.cos(L),O=e*Math.sin(L),w=g+v+N*g}const I=Math.max(0,Math.min(1,w/y));let P=0;C===0?P=.5/s:C===S&&(P=-.5/s);for(let N=0;N<=s;N++){const L=N/s,k=L*Math.PI*2,X=Math.sin(k),W=Math.cos(k);b.x=-U*W,b.y=R,b.z=U*X,l.push(b.x,b.y,b.z),M.set(-U*W,O,U*X),M.normalize(),c.push(M.x,M.y,M.z),f.push(L+P,I)}if(C>0){const N=(C-1)*A;for(let L=0;L<s;L++){const k=N+L,X=N+L+1,W=C*A+L,$=C*A+L+1;r.push(k,X,W),r.push(X,$,W)}}}this.setIndex(r),this.setAttribute("position",new Dt(l,3)),this.setAttribute("normal",new Dt(c,3)),this.setAttribute("uv",new Dt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _S(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class xS extends $t{constructor(e=1,t=32,n=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:s},t=Math.max(3,t);const a=[],r=[],l=[],c=[],f=new le,d=new tt;r.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let g=0,v=3;g<=t;g++,v+=3){const y=n+g/t*s;f.x=e*Math.cos(y),f.y=e*Math.sin(y),r.push(f.x,f.y,f.z),l.push(0,0,1),d.x=(r[v]/e+1)/2,d.y=(r[v+1]/e+1)/2,c.push(d.x,d.y)}for(let g=1;g<=t;g++)a.push(g,g+1,0);this.setIndex(a),this.setAttribute("position",new Dt(r,3)),this.setAttribute("normal",new Dt(l,3)),this.setAttribute("uv",new Dt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xS(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Yv extends $t{constructor(e=1,t=1,n=1,s=32,a=1,r=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:s,heightSegments:a,openEnded:r,thetaStart:l,thetaLength:c};const f=this;s=Math.floor(s),a=Math.floor(a);const d=[],g=[],v=[],y=[];let S=0;const A=[],M=n/2;let b=0;C(),r===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(d),this.setAttribute("position",new Dt(g,3)),this.setAttribute("normal",new Dt(v,3)),this.setAttribute("uv",new Dt(y,2));function C(){const R=new le,U=new le;let O=0;const I=(t-e)/n;for(let P=0;P<=a;P++){const N=[],L=P/a,k=L*(t-e)+e;for(let X=0;X<=s;X++){const W=X/s,$=W*c+l,ce=Math.sin($),z=Math.cos($);U.x=k*ce,U.y=-L*n+M,U.z=k*z,g.push(U.x,U.y,U.z),R.set(ce,I,z).normalize(),v.push(R.x,R.y,R.z),y.push(W,1-L),N.push(S++)}A.push(N)}for(let P=0;P<s;P++)for(let N=0;N<a;N++){const L=A[N][P],k=A[N+1][P],X=A[N+1][P+1],W=A[N][P+1];(e>0||N!==0)&&(d.push(L,k,W),O+=3),(t>0||N!==a-1)&&(d.push(k,X,W),O+=3)}f.addGroup(b,O,0),b+=O}function w(R){const U=S,O=new tt,I=new le;let P=0;const N=R===!0?e:t,L=R===!0?1:-1;for(let X=1;X<=s;X++)g.push(0,M*L,0),v.push(0,L,0),y.push(.5,.5),S++;const k=S;for(let X=0;X<=s;X++){const $=X/s*c+l,ce=Math.cos($),z=Math.sin($);I.x=N*z,I.y=M*L,I.z=N*ce,g.push(I.x,I.y,I.z),v.push(0,L,0),O.x=ce*.5+.5,O.y=z*.5*L+.5,y.push(O.x,O.y),S++}for(let X=0;X<s;X++){const W=U+X,$=k+X;R===!0?d.push($,$+1,W):d.push($+1,$,W),P+=3}f.addGroup(b,P,R===!0?1:2),b+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yv(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Wv extends Yv{constructor(e=1,t=1,n=32,s=1,a=!1,r=0,l=Math.PI*2){super(0,e,t,n,s,a,r,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:s,openEnded:a,thetaStart:r,thetaLength:l}}static fromJSON(e){return new Wv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class qf extends $t{constructor(e=[],t=[],n=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:s};const a=[],r=[];l(s),f(n),d(),this.setAttribute("position",new Dt(a,3)),this.setAttribute("normal",new Dt(a.slice(),3)),this.setAttribute("uv",new Dt(r,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function l(C){const w=new le,R=new le,U=new le;for(let O=0;O<t.length;O+=3)y(t[O+0],w),y(t[O+1],R),y(t[O+2],U),c(w,R,U,C)}function c(C,w,R,U){const O=U+1,I=[];for(let P=0;P<=O;P++){I[P]=[];const N=C.clone().lerp(R,P/O),L=w.clone().lerp(R,P/O),k=O-P;for(let X=0;X<=k;X++)X===0&&P===O?I[P][X]=N:I[P][X]=N.clone().lerp(L,X/k)}for(let P=0;P<O;P++)for(let N=0;N<2*(O-P)-1;N++){const L=Math.floor(N/2);N%2===0?(v(I[P][L+1]),v(I[P+1][L]),v(I[P][L])):(v(I[P][L+1]),v(I[P+1][L+1]),v(I[P+1][L]))}}function f(C){const w=new le;for(let R=0;R<a.length;R+=3)w.x=a[R+0],w.y=a[R+1],w.z=a[R+2],w.normalize().multiplyScalar(C),a[R+0]=w.x,a[R+1]=w.y,a[R+2]=w.z}function d(){const C=new le;for(let w=0;w<a.length;w+=3){C.x=a[w+0],C.y=a[w+1],C.z=a[w+2];const R=M(C)/2/Math.PI+.5,U=b(C)/Math.PI+.5;r.push(R,1-U)}S(),g()}function g(){for(let C=0;C<r.length;C+=6){const w=r[C+0],R=r[C+2],U=r[C+4],O=Math.max(w,R,U),I=Math.min(w,R,U);O>.9&&I<.1&&(w<.2&&(r[C+0]+=1),R<.2&&(r[C+2]+=1),U<.2&&(r[C+4]+=1))}}function v(C){a.push(C.x,C.y,C.z)}function y(C,w){const R=C*3;w.x=e[R+0],w.y=e[R+1],w.z=e[R+2]}function S(){const C=new le,w=new le,R=new le,U=new le,O=new tt,I=new tt,P=new tt;for(let N=0,L=0;N<a.length;N+=9,L+=6){C.set(a[N+0],a[N+1],a[N+2]),w.set(a[N+3],a[N+4],a[N+5]),R.set(a[N+6],a[N+7],a[N+8]),O.set(r[L+0],r[L+1]),I.set(r[L+2],r[L+3]),P.set(r[L+4],r[L+5]),U.copy(C).add(w).add(R).divideScalar(3);const k=M(U);A(O,L+0,C,k),A(I,L+2,w,k),A(P,L+4,R,k)}}function A(C,w,R,U){U<0&&C.x===1&&(r[w]=C.x-1),R.x===0&&R.z===0&&(r[w]=U/2/Math.PI+.5)}function M(C){return Math.atan2(C.z,-C.x)}function b(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qf(e.vertices,e.indices,e.radius,e.details)}}class SS extends qf{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=1/n,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],r=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(a,r,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new SS(e.radius,e.detail)}}const t_=new le,n_=new le,l2=new le,i_=new Cr;class HB extends $t{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),a=Math.cos(bd*t),r=e.getIndex(),l=e.getAttribute("position"),c=r?r.count:l.count,f=[0,0,0],d=["a","b","c"],g=new Array(3),v={},y=[];for(let S=0;S<c;S+=3){r?(f[0]=r.getX(S),f[1]=r.getX(S+1),f[2]=r.getX(S+2)):(f[0]=S,f[1]=S+1,f[2]=S+2);const{a:A,b:M,c:b}=i_;if(A.fromBufferAttribute(l,f[0]),M.fromBufferAttribute(l,f[1]),b.fromBufferAttribute(l,f[2]),i_.getNormal(l2),g[0]=`${Math.round(A.x*s)},${Math.round(A.y*s)},${Math.round(A.z*s)}`,g[1]=`${Math.round(M.x*s)},${Math.round(M.y*s)},${Math.round(M.z*s)}`,g[2]=`${Math.round(b.x*s)},${Math.round(b.y*s)},${Math.round(b.z*s)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let C=0;C<3;C++){const w=(C+1)%3,R=g[C],U=g[w],O=i_[d[C]],I=i_[d[w]],P=`${R}_${U}`,N=`${U}_${R}`;N in v&&v[N]?(l2.dot(v[N].normal)<=a&&(y.push(O.x,O.y,O.z),y.push(I.x,I.y,I.z)),v[N]=null):P in v||(v[P]={index0:f[C],index1:f[w],normal:l2.clone()})}}for(const S in v)if(v[S]){const{index0:A,index1:M}=v[S];t_.fromBufferAttribute(l,A),n_.fromBufferAttribute(l,M),y.push(t_.x,t_.y,t_.z),y.push(n_.x,n_.y,n_.z)}this.setAttribute("position",new Dt(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class zl{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,s=this.getPoint(0),a=0;t.push(0);for(let r=1;r<=e;r++)n=this.getPoint(r/e),a+=n.distanceTo(s),t.push(a),s=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let s=0;const a=n.length;let r;t?r=t:r=e*n[a-1];let l=0,c=a-1,f;for(;l<=c;)if(s=Math.floor(l+(c-l)/2),f=n[s]-r,f<0)l=s+1;else if(f>0)c=s-1;else{c=s;break}if(s=c,n[s]===r)return s/(a-1);const d=n[s],v=n[s+1]-d,y=(r-d)/v;return(s+y)/(a-1)}getTangent(e,t){let s=e-1e-4,a=e+1e-4;s<0&&(s=0),a>1&&(a=1);const r=this.getPoint(s),l=this.getPoint(a),c=t||(r.isVector2?new tt:new le);return c.copy(l).sub(r).normalize(),c}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new le,s=[],a=[],r=[],l=new le,c=new Ft;for(let y=0;y<=e;y++){const S=y/e;s[y]=this.getTangentAt(S,new le)}a[0]=new le,r[0]=new le;let f=Number.MAX_VALUE;const d=Math.abs(s[0].x),g=Math.abs(s[0].y),v=Math.abs(s[0].z);d<=f&&(f=d,n.set(1,0,0)),g<=f&&(f=g,n.set(0,1,0)),v<=f&&n.set(0,0,1),l.crossVectors(s[0],n).normalize(),a[0].crossVectors(s[0],l),r[0].crossVectors(s[0],a[0]);for(let y=1;y<=e;y++){if(a[y]=a[y-1].clone(),r[y]=r[y-1].clone(),l.crossVectors(s[y-1],s[y]),l.length()>Number.EPSILON){l.normalize();const S=Math.acos(un(s[y-1].dot(s[y]),-1,1));a[y].applyMatrix4(c.makeRotationAxis(l,S))}r[y].crossVectors(s[y],a[y])}if(t===!0){let y=Math.acos(un(a[0].dot(a[e]),-1,1));y/=e,s[0].dot(l.crossVectors(a[0],a[e]))>0&&(y=-y);for(let S=1;S<=e;S++)a[S].applyMatrix4(c.makeRotationAxis(s[S],y*S)),r[S].crossVectors(s[S],a[S])}return{tangents:s,normals:a,binormals:r}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class AS extends zl{constructor(e=0,t=0,n=1,s=1,a=0,r=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=s,this.aStartAngle=a,this.aEndAngle=r,this.aClockwise=l,this.aRotation=c}getPoint(e,t=new tt){const n=t,s=Math.PI*2;let a=this.aEndAngle-this.aStartAngle;const r=Math.abs(a)<Number.EPSILON;for(;a<0;)a+=s;for(;a>s;)a-=s;a<Number.EPSILON&&(r?a=0:a=s),this.aClockwise===!0&&!r&&(a===s?a=-s:a=a-s);const l=this.aStartAngle+e*a;let c=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const d=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=c-this.aX,y=f-this.aY;c=v*d-y*g+this.aX,f=v*g+y*d+this.aY}return n.set(c,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class VB extends AS{constructor(e,t,n,s,a,r){super(e,t,n,n,s,a,r),this.isArcCurve=!0,this.type="ArcCurve"}}function tT(){let i=0,e=0,t=0,n=0;function s(a,r,l,c){i=a,e=l,t=-3*a+3*r-2*l-c,n=2*a-2*r+l+c}return{initCatmullRom:function(a,r,l,c,f){s(r,l,f*(l-a),f*(c-r))},initNonuniformCatmullRom:function(a,r,l,c,f,d,g){let v=(r-a)/f-(l-a)/(f+d)+(l-r)/d,y=(l-r)/d-(c-r)/(d+g)+(c-l)/g;v*=d,y*=d,s(r,l,v,y)},calc:function(a){const r=a*a,l=r*a;return i+e*a+t*r+n*l}}}const s_=new le,c2=new tT,u2=new tT,f2=new tT;class kB extends zl{constructor(e=[],t=!1,n="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=s}getPoint(e,t=new le){const n=t,s=this.points,a=s.length,r=(a-(this.closed?0:1))*e;let l=Math.floor(r),c=r-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/a)+1)*a:c===0&&l===a-1&&(l=a-2,c=1);let f,d;this.closed||l>0?f=s[(l-1)%a]:(s_.subVectors(s[0],s[1]).add(s[0]),f=s_);const g=s[l%a],v=s[(l+1)%a];if(this.closed||l+2<a?d=s[(l+2)%a]:(s_.subVectors(s[a-1],s[a-2]).add(s[a-1]),d=s_),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let S=Math.pow(f.distanceToSquared(g),y),A=Math.pow(g.distanceToSquared(v),y),M=Math.pow(v.distanceToSquared(d),y);A<1e-4&&(A=1),S<1e-4&&(S=A),M<1e-4&&(M=A),c2.initNonuniformCatmullRom(f.x,g.x,v.x,d.x,S,A,M),u2.initNonuniformCatmullRom(f.y,g.y,v.y,d.y,S,A,M),f2.initNonuniformCatmullRom(f.z,g.z,v.z,d.z,S,A,M)}else this.curveType==="catmullrom"&&(c2.initCatmullRom(f.x,g.x,v.x,d.x,this.tension),u2.initCatmullRom(f.y,g.y,v.y,d.y,this.tension),f2.initCatmullRom(f.z,g.z,v.z,d.z,this.tension));return n.set(c2.calc(c),u2.calc(c),f2.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new le().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function r3(i,e,t,n,s){const a=(n-e)*.5,r=(s-t)*.5,l=i*i,c=i*l;return(2*t-2*n+a+r)*c+(-3*t+3*n-2*a-r)*l+a*i+t}function GP(i,e){const t=1-i;return t*t*e}function HP(i,e){return 2*(1-i)*i*e}function VP(i,e){return i*i*e}function Qg(i,e,t,n){return GP(i,e)+HP(i,t)+VP(i,n)}function kP(i,e){const t=1-i;return t*t*t*e}function XP(i,e){const t=1-i;return 3*t*t*i*e}function jP(i,e){return 3*(1-i)*i*i*e}function YP(i,e){return i*i*i*e}function $g(i,e,t,n,s){return kP(i,e)+XP(i,t)+jP(i,n)+YP(i,s)}class nT extends zl{constructor(e=new tt,t=new tt,n=new tt,s=new tt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new tt){const n=t,s=this.v0,a=this.v1,r=this.v2,l=this.v3;return n.set($g(e,s.x,a.x,r.x,l.x),$g(e,s.y,a.y,r.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class XB extends zl{constructor(e=new le,t=new le,n=new le,s=new le){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=s}getPoint(e,t=new le){const n=t,s=this.v0,a=this.v1,r=this.v2,l=this.v3;return n.set($g(e,s.x,a.x,r.x,l.x),$g(e,s.y,a.y,r.y,l.y),$g(e,s.z,a.z,r.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class iT extends zl{constructor(e=new tt,t=new tt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new tt){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new tt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jB extends zl{constructor(e=new le,t=new le){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new le){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new le){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sT extends zl{constructor(e=new tt,t=new tt,n=new tt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new tt){const n=t,s=this.v0,a=this.v1,r=this.v2;return n.set(Qg(e,s.x,a.x,r.x),Qg(e,s.y,a.y,r.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aT extends zl{constructor(e=new le,t=new le,n=new le){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new le){const n=t,s=this.v0,a=this.v1,r=this.v2;return n.set(Qg(e,s.x,a.x,r.x),Qg(e,s.y,a.y,r.y),Qg(e,s.z,a.z,r.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rT extends zl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new tt){const n=t,s=this.points,a=(s.length-1)*e,r=Math.floor(a),l=a-r,c=s[r===0?r:r-1],f=s[r],d=s[r>s.length-2?s.length-1:r+1],g=s[r>s.length-3?s.length-1:r+2];return n.set(r3(l,c.x,f.x,d.x,g.x),r3(l,c.y,f.y,d.y,g.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const s=e.points[t];this.points.push(new tt().fromArray(s))}return this}}var Bx=Object.freeze({__proto__:null,ArcCurve:VB,CatmullRomCurve3:kB,CubicBezierCurve:nT,CubicBezierCurve3:XB,EllipseCurve:AS,LineCurve:iT,LineCurve3:jB,QuadraticBezierCurve:sT,QuadraticBezierCurve3:aT,SplineCurve:rT});class YB extends zl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Bx[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),s=this.getCurveLengths();let a=0;for(;a<s.length;){if(s[a]>=n){const r=s[a]-n,l=this.curves[a],c=l.getLength(),f=c===0?0:1-r/c;return l.getPointAt(f,t)}a++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,s=this.curves.length;n<s;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let s=0,a=this.curves;s<a.length;s++){const r=a[s],l=r.isEllipseCurve?e*2:r.isLineCurve||r.isLineCurve3?1:r.isSplineCurve?e*r.points.length:e,c=r.getPoints(l);for(let f=0;f<c.length;f++){const d=c[f];n&&n.equals(d)||(t.push(d),n=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const s=e.curves[t];this.curves.push(new Bx[s.type]().fromJSON(s))}return this}}class Ux extends YB{constructor(e){super(),this.type="Path",this.currentPoint=new tt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new iT(this.currentPoint.clone(),new tt(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,s){const a=new sT(this.currentPoint.clone(),new tt(e,t),new tt(n,s));return this.curves.push(a),this.currentPoint.set(n,s),this}bezierCurveTo(e,t,n,s,a,r){const l=new nT(this.currentPoint.clone(),new tt(e,t),new tt(n,s),new tt(a,r));return this.curves.push(l),this.currentPoint.set(a,r),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new rT(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,s,a,r){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,n,s,a,r),this}absarc(e,t,n,s,a,r){return this.absellipse(e,t,n,n,s,a,r),this}ellipse(e,t,n,s,a,r,l,c){const f=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+f,t+d,n,s,a,r,l,c),this}absellipse(e,t,n,s,a,r,l,c){const f=new AS(e,t,n,s,a,r,l,c);if(this.curves.length>0){const g=f.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(f);const d=f.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Lf extends Ux{constructor(e){super(e),this.uuid=io(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,s=this.holes.length;n<s;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const s=e.holes[t];this.holes.push(new Ux().fromJSON(s))}return this}}function WP(i,e,t=2){const n=e&&e.length,s=n?e[0]*t:i.length;let a=WB(i,0,s,t,!0);const r=[];if(!a||a.next===a.prev)return r;let l,c,f;if(n&&(a=QP(i,e,a,t)),i.length>80*t){l=1/0,c=1/0;let d=-1/0,g=-1/0;for(let v=t;v<s;v+=t){const y=i[v],S=i[v+1];y<l&&(l=y),S<c&&(c=S),y>d&&(d=y),S>g&&(g=S)}f=Math.max(d-l,g-c),f=f!==0?32767/f:0}return _v(a,r,t,l,c,f,0),r}function WB(i,e,t,n,s){let a;if(s===cI(i,e,t,n)>0)for(let r=e;r<t;r+=n)a=o3(r/n|0,i[r],i[r+1],a);else for(let r=t-n;r>=e;r-=n)a=o3(r/n|0,i[r],i[r+1],a);return a&&Fm(a,a.next)&&(Sv(a),a=a.next),a}function Pd(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(Fm(t,t.next)||Zi(t.prev,t,t.next)===0)){if(Sv(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function _v(i,e,t,n,s,a,r){if(!i)return;!r&&a&&iI(i,n,s,a);let l=i;for(;i.prev!==i.next;){const c=i.prev,f=i.next;if(a?KP(i,n,s,a):qP(i)){e.push(c.i,i.i,f.i),Sv(i),i=f.next,l=f.next;continue}if(i=f,i===l){r?r===1?(i=JP(Pd(i),e),_v(i,e,t,n,s,a,2)):r===2&&ZP(i,e,t,n,s,a):_v(Pd(i),e,t,n,s,a,1);break}}}function qP(i){const e=i.prev,t=i,n=i.next;if(Zi(e,t,n)>=0)return!1;const s=e.x,a=t.x,r=n.x,l=e.y,c=t.y,f=n.y,d=Math.min(s,a,r),g=Math.min(l,c,f),v=Math.max(s,a,r),y=Math.max(l,c,f);let S=n.next;for(;S!==e;){if(S.x>=d&&S.x<=v&&S.y>=g&&S.y<=y&&Fg(s,l,a,c,r,f,S.x,S.y)&&Zi(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function KP(i,e,t,n){const s=i.prev,a=i,r=i.next;if(Zi(s,a,r)>=0)return!1;const l=s.x,c=a.x,f=r.x,d=s.y,g=a.y,v=r.y,y=Math.min(l,c,f),S=Math.min(d,g,v),A=Math.max(l,c,f),M=Math.max(d,g,v),b=RM(y,S,e,t,n),C=RM(A,M,e,t,n);let w=i.prevZ,R=i.nextZ;for(;w&&w.z>=b&&R&&R.z<=C;){if(w.x>=y&&w.x<=A&&w.y>=S&&w.y<=M&&w!==s&&w!==r&&Fg(l,d,c,g,f,v,w.x,w.y)&&Zi(w.prev,w,w.next)>=0||(w=w.prevZ,R.x>=y&&R.x<=A&&R.y>=S&&R.y<=M&&R!==s&&R!==r&&Fg(l,d,c,g,f,v,R.x,R.y)&&Zi(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;w&&w.z>=b;){if(w.x>=y&&w.x<=A&&w.y>=S&&w.y<=M&&w!==s&&w!==r&&Fg(l,d,c,g,f,v,w.x,w.y)&&Zi(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;R&&R.z<=C;){if(R.x>=y&&R.x<=A&&R.y>=S&&R.y<=M&&R!==s&&R!==r&&Fg(l,d,c,g,f,v,R.x,R.y)&&Zi(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function JP(i,e){let t=i;do{const n=t.prev,s=t.next.next;!Fm(n,s)&&KB(n,t,t.next,s)&&xv(n,s)&&xv(s,n)&&(e.push(n.i,t.i,s.i),Sv(t),Sv(t.next),t=i=s),t=t.next}while(t!==i);return Pd(t)}function ZP(i,e,t,n,s,a){let r=i;do{let l=r.next.next;for(;l!==r.prev;){if(r.i!==l.i&&rI(r,l)){let c=JB(r,l);r=Pd(r,r.next),c=Pd(c,c.next),_v(r,e,t,n,s,a,0),_v(c,e,t,n,s,a,0);return}l=l.next}r=r.next}while(r!==i)}function QP(i,e,t,n){const s=[];for(let a=0,r=e.length;a<r;a++){const l=e[a]*n,c=a<r-1?e[a+1]*n:i.length,f=WB(i,l,c,n,!1);f===f.next&&(f.steiner=!0),s.push(aI(f))}s.sort($P);for(let a=0;a<s.length;a++)t=eI(s[a],t);return t}function $P(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),s=(e.next.y-e.y)/(e.next.x-e.x);t=n-s}return t}function eI(i,e){const t=tI(i,e);if(!t)return e;const n=JB(t,i);return Pd(n,n.next),Pd(t,t.next)}function tI(i,e){let t=e;const n=i.x,s=i.y;let a=-1/0,r;if(Fm(i,t))return t;do{if(Fm(i,t.next))return t.next;if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const g=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(g<=n&&g>a&&(a=g,r=t.x<t.next.x?t:t.next,g===n))return r}t=t.next}while(t!==e);if(!r)return null;const l=r,c=r.x,f=r.y;let d=1/0;t=r;do{if(n>=t.x&&t.x>=c&&n!==t.x&&qB(s<f?n:a,s,c,f,s<f?a:n,s,t.x,t.y)){const g=Math.abs(s-t.y)/(n-t.x);xv(t,i)&&(g<d||g===d&&(t.x>r.x||t.x===r.x&&nI(r,t)))&&(r=t,d=g)}t=t.next}while(t!==l);return r}function nI(i,e){return Zi(i.prev,i,e.prev)<0&&Zi(e.next,i,i.next)<0}function iI(i,e,t,n){let s=i;do s.z===0&&(s.z=RM(s.x,s.y,e,t,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==i);s.prevZ.nextZ=null,s.prevZ=null,sI(s)}function sI(i){let e,t=1;do{let n=i,s;i=null;let a=null;for(e=0;n;){e++;let r=n,l=0;for(let f=0;f<t&&(l++,r=r.nextZ,!!r);f++);let c=t;for(;l>0||c>0&&r;)l!==0&&(c===0||!r||n.z<=r.z)?(s=n,n=n.nextZ,l--):(s=r,r=r.nextZ,c--),a?a.nextZ=s:i=s,s.prevZ=a,a=s;n=r}a.nextZ=null,t*=2}while(e>1);return i}function RM(i,e,t,n,s){return i=(i-t)*s|0,e=(e-n)*s|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function aI(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function qB(i,e,t,n,s,a,r,l){return(s-r)*(e-l)>=(i-r)*(a-l)&&(i-r)*(n-l)>=(t-r)*(e-l)&&(t-r)*(a-l)>=(s-r)*(n-l)}function Fg(i,e,t,n,s,a,r,l){return!(i===r&&e===l)&&qB(i,e,t,n,s,a,r,l)}function rI(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!oI(i,e)&&(xv(i,e)&&xv(e,i)&&lI(i,e)&&(Zi(i.prev,i,e.prev)||Zi(i,e.prev,e))||Fm(i,e)&&Zi(i.prev,i,i.next)>0&&Zi(e.prev,e,e.next)>0)}function Zi(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Fm(i,e){return i.x===e.x&&i.y===e.y}function KB(i,e,t,n){const s=r_(Zi(i,e,t)),a=r_(Zi(i,e,n)),r=r_(Zi(t,n,i)),l=r_(Zi(t,n,e));return!!(s!==a&&r!==l||s===0&&a_(i,t,e)||a===0&&a_(i,n,e)||r===0&&a_(t,i,n)||l===0&&a_(t,e,n))}function a_(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function r_(i){return i>0?1:i<0?-1:0}function oI(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&KB(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function xv(i,e){return Zi(i.prev,i,i.next)<0?Zi(i,e,i.next)>=0&&Zi(i,i.prev,e)>=0:Zi(i,e,i.prev)<0||Zi(i,i.next,e)<0}function lI(i,e){let t=i,n=!1;const s=(i.x+e.x)/2,a=(i.y+e.y)/2;do t.y>a!=t.next.y>a&&t.next.y!==t.y&&s<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function JB(i,e){const t=DM(i.i,i.x,i.y),n=DM(e.i,e.x,e.y),s=i.next,a=e.prev;return i.next=e,e.prev=i,t.next=s,s.prev=t,n.next=t,t.prev=n,a.next=n,n.prev=a,n}function o3(i,e,t,n){const s=DM(i,e,t);return n?(s.next=n.next,s.prev=n,n.next.prev=s,n.next=s):(s.prev=s,s.next=s),s}function Sv(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function DM(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function cI(i,e,t,n){let s=0;for(let a=e,r=t-n;a<t;a+=n)s+=(i[r]-i[a])*(i[a+1]+i[r+1]),r=a;return s}class uI{static triangulate(e,t,n=2){return WP(e,t,n)}}class Ol{static area(e){const t=e.length;let n=0;for(let s=t-1,a=0;a<t;s=a++)n+=e[s].x*e[a].y-e[a].x*e[s].y;return n*.5}static isClockWise(e){return Ol.area(e)<0}static triangulateShape(e,t){const n=[],s=[],a=[];l3(e),c3(n,e);let r=e.length;t.forEach(l3);for(let c=0;c<t.length;c++)s.push(r),r+=t[c].length,c3(n,t[c]);const l=uI.triangulate(n,s);for(let c=0;c<l.length;c+=3)a.push(l.slice(c,c+3));return a}}function l3(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function c3(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class MS extends $t{constructor(e=new Lf([new tt(.5,.5),new tt(-.5,.5),new tt(-.5,-.5),new tt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,s=[],a=[];for(let l=0,c=e.length;l<c;l++){const f=e[l];r(f)}this.setAttribute("position",new Dt(s,3)),this.setAttribute("uv",new Dt(a,2)),this.computeVertexNormals();function r(l){const c=[],f=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:y-.1,A=t.bevelOffset!==void 0?t.bevelOffset:0,M=t.bevelSegments!==void 0?t.bevelSegments:3;const b=t.extrudePath,C=t.UVGenerator!==void 0?t.UVGenerator:fI;let w,R=!1,U,O,I,P;b&&(w=b.getSpacedPoints(d),R=!0,v=!1,U=b.computeFrenetFrames(d,!1),O=new le,I=new le,P=new le),v||(M=0,y=0,S=0,A=0);const N=l.extractPoints(f);let L=N.shape;const k=N.holes;if(!Ol.isClockWise(L)){L=L.reverse();for(let Z=0,Le=k.length;Z<Le;Z++){const Ue=k[Z];Ol.isClockWise(Ue)&&(k[Z]=Ue.reverse())}}function W(Z){const Ue=10000000000000001e-36;let Re=Z[0];for(let me=1;me<=Z.length;me++){const Pe=me%Z.length,Se=Z[Pe],ye=Se.x-Re.x,nt=Se.y-Re.y,ee=ye*ye+nt*nt,V=Math.max(Math.abs(Se.x),Math.abs(Se.y),Math.abs(Re.x),Math.abs(Re.y)),de=Ue*V*V;if(ee<=de){Z.splice(Pe,1),me--;continue}Re=Se}}W(L),k.forEach(W);const $=k.length,ce=L;for(let Z=0;Z<$;Z++){const Le=k[Z];L=L.concat(Le)}function z(Z,Le,Ue){return Le||console.error("THREE.ExtrudeGeometry: vec does not exist"),Z.clone().addScaledVector(Le,Ue)}const q=L.length;function Q(Z,Le,Ue){let Re,me,Pe;const Se=Z.x-Le.x,ye=Z.y-Le.y,nt=Ue.x-Z.x,ee=Ue.y-Z.y,V=Se*Se+ye*ye,de=Se*ee-ye*nt;if(Math.abs(de)>Number.EPSILON){const Be=Math.sqrt(V),be=Math.sqrt(nt*nt+ee*ee),Me=Le.x-ye/Be,$e=Le.y+Se/Be,at=Ue.x-ee/be,ut=Ue.y+nt/be,Y=((at-Me)*ee-(ut-$e)*nt)/(Se*ee-ye*nt);Re=Me+Se*Y-Z.x,me=$e+ye*Y-Z.y;const Oe=Re*Re+me*me;if(Oe<=2)return new tt(Re,me);Pe=Math.sqrt(Oe/2)}else{let Be=!1;Se>Number.EPSILON?nt>Number.EPSILON&&(Be=!0):Se<-Number.EPSILON?nt<-Number.EPSILON&&(Be=!0):Math.sign(ye)===Math.sign(ee)&&(Be=!0),Be?(Re=-ye,me=Se,Pe=Math.sqrt(V)):(Re=Se,me=ye,Pe=Math.sqrt(V/2))}return new tt(Re/Pe,me/Pe)}const re=[];for(let Z=0,Le=ce.length,Ue=Le-1,Re=Z+1;Z<Le;Z++,Ue++,Re++)Ue===Le&&(Ue=0),Re===Le&&(Re=0),re[Z]=Q(ce[Z],ce[Ue],ce[Re]);const H=[];let G,K=re.concat();for(let Z=0,Le=$;Z<Le;Z++){const Ue=k[Z];G=[];for(let Re=0,me=Ue.length,Pe=me-1,Se=Re+1;Re<me;Re++,Pe++,Se++)Pe===me&&(Pe=0),Se===me&&(Se=0),G[Re]=Q(Ue[Re],Ue[Pe],Ue[Se]);H.push(G),K=K.concat(G)}let se;if(M===0)se=Ol.triangulateShape(ce,k);else{const Z=[],Le=[];for(let Ue=0;Ue<M;Ue++){const Re=Ue/M,me=y*Math.cos(Re*Math.PI/2),Pe=S*Math.sin(Re*Math.PI/2)+A;for(let Se=0,ye=ce.length;Se<ye;Se++){const nt=z(ce[Se],re[Se],Pe);Ve(nt.x,nt.y,-me),Re===0&&Z.push(nt)}for(let Se=0,ye=$;Se<ye;Se++){const nt=k[Se];G=H[Se];const ee=[];for(let V=0,de=nt.length;V<de;V++){const Be=z(nt[V],G[V],Pe);Ve(Be.x,Be.y,-me),Re===0&&ee.push(Be)}Re===0&&Le.push(ee)}}se=Ol.triangulateShape(Z,Le)}const J=se.length,ne=S+A;for(let Z=0;Z<q;Z++){const Le=v?z(L[Z],K[Z],ne):L[Z];R?(I.copy(U.normals[0]).multiplyScalar(Le.x),O.copy(U.binormals[0]).multiplyScalar(Le.y),P.copy(w[0]).add(I).add(O),Ve(P.x,P.y,P.z)):Ve(Le.x,Le.y,0)}for(let Z=1;Z<=d;Z++)for(let Le=0;Le<q;Le++){const Ue=v?z(L[Le],K[Le],ne):L[Le];R?(I.copy(U.normals[Z]).multiplyScalar(Ue.x),O.copy(U.binormals[Z]).multiplyScalar(Ue.y),P.copy(w[Z]).add(I).add(O),Ve(P.x,P.y,P.z)):Ve(Ue.x,Ue.y,g/d*Z)}for(let Z=M-1;Z>=0;Z--){const Le=Z/M,Ue=y*Math.cos(Le*Math.PI/2),Re=S*Math.sin(Le*Math.PI/2)+A;for(let me=0,Pe=ce.length;me<Pe;me++){const Se=z(ce[me],re[me],Re);Ve(Se.x,Se.y,g+Ue)}for(let me=0,Pe=k.length;me<Pe;me++){const Se=k[me];G=H[me];for(let ye=0,nt=Se.length;ye<nt;ye++){const ee=z(Se[ye],G[ye],Re);R?Ve(ee.x,ee.y+w[d-1].y,w[d-1].x+Ue):Ve(ee.x,ee.y,g+Ue)}}}ue(),pe();function ue(){const Z=s.length/3;if(v){let Le=0,Ue=q*Le;for(let Re=0;Re<J;Re++){const me=se[Re];ze(me[2]+Ue,me[1]+Ue,me[0]+Ue)}Le=d+M*2,Ue=q*Le;for(let Re=0;Re<J;Re++){const me=se[Re];ze(me[0]+Ue,me[1]+Ue,me[2]+Ue)}}else{for(let Le=0;Le<J;Le++){const Ue=se[Le];ze(Ue[2],Ue[1],Ue[0])}for(let Le=0;Le<J;Le++){const Ue=se[Le];ze(Ue[0]+q*d,Ue[1]+q*d,Ue[2]+q*d)}}n.addGroup(Z,s.length/3-Z,0)}function pe(){const Z=s.length/3;let Le=0;ve(ce,Le),Le+=ce.length;for(let Ue=0,Re=k.length;Ue<Re;Ue++){const me=k[Ue];ve(me,Le),Le+=me.length}n.addGroup(Z,s.length/3-Z,1)}function ve(Z,Le){let Ue=Z.length;for(;--Ue>=0;){const Re=Ue;let me=Ue-1;me<0&&(me=Z.length-1);for(let Pe=0,Se=d+M*2;Pe<Se;Pe++){const ye=q*Pe,nt=q*(Pe+1),ee=Le+Re+ye,V=Le+me+ye,de=Le+me+nt,Be=Le+Re+nt;Qe(ee,V,de,Be)}}}function Ve(Z,Le,Ue){c.push(Z),c.push(Le),c.push(Ue)}function ze(Z,Le,Ue){Ie(Z),Ie(Le),Ie(Ue);const Re=s.length/3,me=C.generateTopUV(n,s,Re-3,Re-2,Re-1);rt(me[0]),rt(me[1]),rt(me[2])}function Qe(Z,Le,Ue,Re){Ie(Z),Ie(Le),Ie(Re),Ie(Le),Ie(Ue),Ie(Re);const me=s.length/3,Pe=C.generateSideWallUV(n,s,me-6,me-3,me-2,me-1);rt(Pe[0]),rt(Pe[1]),rt(Pe[3]),rt(Pe[1]),rt(Pe[2]),rt(Pe[3])}function Ie(Z){s.push(c[Z*3+0]),s.push(c[Z*3+1]),s.push(c[Z*3+2])}function rt(Z){a.push(Z.x),a.push(Z.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return hI(t,n,e)}static fromJSON(e,t){const n=[];for(let a=0,r=e.shapes.length;a<r;a++){const l=t[e.shapes[a]];n.push(l)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new Bx[s.type]().fromJSON(s)),new MS(n,e.options)}}const fI={generateTopUV:function(i,e,t,n,s){const a=e[t*3],r=e[t*3+1],l=e[n*3],c=e[n*3+1],f=e[s*3],d=e[s*3+1];return[new tt(a,r),new tt(l,c),new tt(f,d)]},generateSideWallUV:function(i,e,t,n,s,a){const r=e[t*3],l=e[t*3+1],c=e[t*3+2],f=e[n*3],d=e[n*3+1],g=e[n*3+2],v=e[s*3],y=e[s*3+1],S=e[s*3+2],A=e[a*3],M=e[a*3+1],b=e[a*3+2];return Math.abs(l-d)<Math.abs(r-f)?[new tt(r,1-c),new tt(f,1-g),new tt(v,1-S),new tt(A,1-b)]:[new tt(l,1-c),new tt(d,1-g),new tt(y,1-S),new tt(M,1-b)]}};function hI(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,s=i.length;n<s;n++){const a=i[n];t.shapes.push(a.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class bS extends qf{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,s=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],a=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,a,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new bS(e.radius,e.detail)}}class TS extends $t{constructor(e=[new tt(0,-.5),new tt(.5,0),new tt(0,.5)],t=12,n=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:s},t=Math.floor(t),s=un(s,0,Math.PI*2);const a=[],r=[],l=[],c=[],f=[],d=1/t,g=new le,v=new tt,y=new le,S=new le,A=new le;let M=0,b=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:M=e[C+1].x-e[C].x,b=e[C+1].y-e[C].y,y.x=b*1,y.y=-M,y.z=b*0,A.copy(y),y.normalize(),c.push(y.x,y.y,y.z);break;case e.length-1:c.push(A.x,A.y,A.z);break;default:M=e[C+1].x-e[C].x,b=e[C+1].y-e[C].y,y.x=b*1,y.y=-M,y.z=b*0,S.copy(y),y.x+=A.x,y.y+=A.y,y.z+=A.z,y.normalize(),c.push(y.x,y.y,y.z),A.copy(S)}for(let C=0;C<=t;C++){const w=n+C*d*s,R=Math.sin(w),U=Math.cos(w);for(let O=0;O<=e.length-1;O++){g.x=e[O].x*R,g.y=e[O].y,g.z=e[O].x*U,r.push(g.x,g.y,g.z),v.x=C/t,v.y=O/(e.length-1),l.push(v.x,v.y);const I=c[3*O+0]*R,P=c[3*O+1],N=c[3*O+0]*U;f.push(I,P,N)}}for(let C=0;C<t;C++)for(let w=0;w<e.length-1;w++){const R=w+C*e.length,U=R,O=R+e.length,I=R+e.length+1,P=R+1;a.push(U,O,P),a.push(I,P,O)}this.setIndex(a),this.setAttribute("position",new Dt(r,3)),this.setAttribute("uv",new Dt(l,2)),this.setAttribute("normal",new Dt(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new TS(e.points,e.segments,e.phiStart,e.phiLength)}}class qv extends qf{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new qv(e.radius,e.detail)}}class Ru extends $t{constructor(e=1,t=1,n=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:s};const a=e/2,r=t/2,l=Math.floor(n),c=Math.floor(s),f=l+1,d=c+1,g=e/l,v=t/c,y=[],S=[],A=[],M=[];for(let b=0;b<d;b++){const C=b*v-r;for(let w=0;w<f;w++){const R=w*g-a;S.push(R,-C,0),A.push(0,0,1),M.push(w/l),M.push(1-b/c)}}for(let b=0;b<c;b++)for(let C=0;C<l;C++){const w=C+f*b,R=C+f*(b+1),U=C+1+f*(b+1),O=C+1+f*b;y.push(w,R,O),y.push(R,U,O)}this.setIndex(y),this.setAttribute("position",new Dt(S,3)),this.setAttribute("normal",new Dt(A,3)),this.setAttribute("uv",new Dt(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ru(e.width,e.height,e.widthSegments,e.heightSegments)}}class ES extends $t{constructor(e=.5,t=1,n=32,s=1,a=0,r=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:s,thetaStart:a,thetaLength:r},n=Math.max(3,n),s=Math.max(1,s);const l=[],c=[],f=[],d=[];let g=e;const v=(t-e)/s,y=new le,S=new tt;for(let A=0;A<=s;A++){for(let M=0;M<=n;M++){const b=a+M/n*r;y.x=g*Math.cos(b),y.y=g*Math.sin(b),c.push(y.x,y.y,y.z),f.push(0,0,1),S.x=(y.x/t+1)/2,S.y=(y.y/t+1)/2,d.push(S.x,S.y)}g+=v}for(let A=0;A<s;A++){const M=A*(n+1);for(let b=0;b<n;b++){const C=b+M,w=C,R=C+n+1,U=C+n+2,O=C+1;l.push(w,R,O),l.push(R,U,O)}}this.setIndex(l),this.setAttribute("position",new Dt(c,3)),this.setAttribute("normal",new Dt(f,3)),this.setAttribute("uv",new Dt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ES(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Kv extends $t{constructor(e=new Lf([new tt(0,.5),new tt(-.5,-.5),new tt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],s=[],a=[],r=[];let l=0,c=0;if(Array.isArray(e)===!1)f(e);else for(let d=0;d<e.length;d++)f(e[d]),this.addGroup(l,c,d),l+=c,c=0;this.setIndex(n),this.setAttribute("position",new Dt(s,3)),this.setAttribute("normal",new Dt(a,3)),this.setAttribute("uv",new Dt(r,2));function f(d){const g=s.length/3,v=d.extractPoints(t);let y=v.shape;const S=v.holes;Ol.isClockWise(y)===!1&&(y=y.reverse());for(let M=0,b=S.length;M<b;M++){const C=S[M];Ol.isClockWise(C)===!0&&(S[M]=C.reverse())}const A=Ol.triangulateShape(y,S);for(let M=0,b=S.length;M<b;M++){const C=S[M];y=y.concat(C)}for(let M=0,b=y.length;M<b;M++){const C=y[M];s.push(C.x,C.y,0),a.push(0,0,1),r.push(C.x,C.y)}for(let M=0,b=A.length;M<b;M++){const C=A[M],w=C[0]+g,R=C[1]+g,U=C[2]+g;n.push(w,R,U),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return dI(t,e)}static fromJSON(e,t){const n=[];for(let s=0,a=e.shapes.length;s<a;s++){const r=t[e.shapes[s]];n.push(r)}return new Kv(n,e.curveSegments)}}function dI(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const s=i[t];e.shapes.push(s.uuid)}else e.shapes.push(i.uuid);return e}class Jv extends $t{constructor(e=1,t=32,n=16,s=0,a=Math.PI*2,r=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:s,phiLength:a,thetaStart:r,thetaLength:l},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const c=Math.min(r+l,Math.PI);let f=0;const d=[],g=new le,v=new le,y=[],S=[],A=[],M=[];for(let b=0;b<=n;b++){const C=[],w=b/n;let R=0;b===0&&r===0?R=.5/t:b===n&&c===Math.PI&&(R=-.5/t);for(let U=0;U<=t;U++){const O=U/t;g.x=-e*Math.cos(s+O*a)*Math.sin(r+w*l),g.y=e*Math.cos(r+w*l),g.z=e*Math.sin(s+O*a)*Math.sin(r+w*l),S.push(g.x,g.y,g.z),v.copy(g).normalize(),A.push(v.x,v.y,v.z),M.push(O+R,1-w),C.push(f++)}d.push(C)}for(let b=0;b<n;b++)for(let C=0;C<t;C++){const w=d[b][C+1],R=d[b][C],U=d[b+1][C],O=d[b+1][C+1];(b!==0||r>0)&&y.push(w,R,O),(b!==n-1||c<Math.PI)&&y.push(R,U,O)}this.setIndex(y),this.setAttribute("position",new Dt(S,3)),this.setAttribute("normal",new Dt(A,3)),this.setAttribute("uv",new Dt(M,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class CS extends qf{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new CS(e.radius,e.detail)}}class wS extends $t{constructor(e=1,t=.4,n=12,s=48,a=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:s,arc:a},n=Math.floor(n),s=Math.floor(s);const r=[],l=[],c=[],f=[],d=new le,g=new le,v=new le;for(let y=0;y<=n;y++)for(let S=0;S<=s;S++){const A=S/s*a,M=y/n*Math.PI*2;g.x=(e+t*Math.cos(M))*Math.cos(A),g.y=(e+t*Math.cos(M))*Math.sin(A),g.z=t*Math.sin(M),l.push(g.x,g.y,g.z),d.x=e*Math.cos(A),d.y=e*Math.sin(A),v.subVectors(g,d).normalize(),c.push(v.x,v.y,v.z),f.push(S/s),f.push(y/n)}for(let y=1;y<=n;y++)for(let S=1;S<=s;S++){const A=(s+1)*y+S-1,M=(s+1)*(y-1)+S-1,b=(s+1)*(y-1)+S,C=(s+1)*y+S;r.push(A,M,C),r.push(M,b,C)}this.setIndex(r),this.setAttribute("position",new Dt(l,3)),this.setAttribute("normal",new Dt(c,3)),this.setAttribute("uv",new Dt(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class RS extends $t{constructor(e=1,t=.4,n=64,s=8,a=2,r=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:s,p:a,q:r},n=Math.floor(n),s=Math.floor(s);const l=[],c=[],f=[],d=[],g=new le,v=new le,y=new le,S=new le,A=new le,M=new le,b=new le;for(let w=0;w<=n;++w){const R=w/n*a*Math.PI*2;C(R,a,r,e,y),C(R+.01,a,r,e,S),M.subVectors(S,y),b.addVectors(S,y),A.crossVectors(M,b),b.crossVectors(A,M),A.normalize(),b.normalize();for(let U=0;U<=s;++U){const O=U/s*Math.PI*2,I=-t*Math.cos(O),P=t*Math.sin(O);g.x=y.x+(I*b.x+P*A.x),g.y=y.y+(I*b.y+P*A.y),g.z=y.z+(I*b.z+P*A.z),c.push(g.x,g.y,g.z),v.subVectors(g,y).normalize(),f.push(v.x,v.y,v.z),d.push(w/n),d.push(U/s)}}for(let w=1;w<=n;w++)for(let R=1;R<=s;R++){const U=(s+1)*(w-1)+(R-1),O=(s+1)*w+(R-1),I=(s+1)*w+R,P=(s+1)*(w-1)+R;l.push(U,O,P),l.push(O,I,P)}this.setIndex(l),this.setAttribute("position",new Dt(c,3)),this.setAttribute("normal",new Dt(f,3)),this.setAttribute("uv",new Dt(d,2));function C(w,R,U,O,I){const P=Math.cos(w),N=Math.sin(w),L=U/R*w,k=Math.cos(L);I.x=O*(2+k)*.5*P,I.y=O*(2+k)*N*.5,I.z=O*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new RS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class DS extends $t{constructor(e=new aT(new le(-1,-1,0),new le(-1,1,0),new le(1,1,0)),t=64,n=1,s=8,a=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:s,closed:a};const r=e.computeFrenetFrames(t,a);this.tangents=r.tangents,this.normals=r.normals,this.binormals=r.binormals;const l=new le,c=new le,f=new tt;let d=new le;const g=[],v=[],y=[],S=[];A(),this.setIndex(S),this.setAttribute("position",new Dt(g,3)),this.setAttribute("normal",new Dt(v,3)),this.setAttribute("uv",new Dt(y,2));function A(){for(let w=0;w<t;w++)M(w);M(a===!1?t:0),C(),b()}function M(w){d=e.getPointAt(w/t,d);const R=r.normals[w],U=r.binormals[w];for(let O=0;O<=s;O++){const I=O/s*Math.PI*2,P=Math.sin(I),N=-Math.cos(I);c.x=N*R.x+P*U.x,c.y=N*R.y+P*U.y,c.z=N*R.z+P*U.z,c.normalize(),v.push(c.x,c.y,c.z),l.x=d.x+n*c.x,l.y=d.y+n*c.y,l.z=d.z+n*c.z,g.push(l.x,l.y,l.z)}}function b(){for(let w=1;w<=t;w++)for(let R=1;R<=s;R++){const U=(s+1)*(w-1)+(R-1),O=(s+1)*w+(R-1),I=(s+1)*w+R,P=(s+1)*(w-1)+R;S.push(U,O,P),S.push(O,I,P)}}function C(){for(let w=0;w<=t;w++)for(let R=0;R<=s;R++)f.x=w/t,f.y=R/s,y.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new DS(new Bx[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class ZB extends $t{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,s=new le,a=new le;if(e.index!==null){const r=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,d=c.length;f<d;++f){const g=c[f],v=g.start,y=g.count;for(let S=v,A=v+y;S<A;S+=3)for(let M=0;M<3;M++){const b=l.getX(S+M),C=l.getX(S+(M+1)%3);s.fromBufferAttribute(r,b),a.fromBufferAttribute(r,C),u3(s,a,n)===!0&&(t.push(s.x,s.y,s.z),t.push(a.x,a.y,a.z))}}}else{const r=e.attributes.position;for(let l=0,c=r.count/3;l<c;l++)for(let f=0;f<3;f++){const d=3*l+f,g=3*l+(f+1)%3;s.fromBufferAttribute(r,d),a.fromBufferAttribute(r,g),u3(s,a,n)===!0&&(t.push(s.x,s.y,s.z),t.push(a.x,a.y,a.z))}}this.setAttribute("position",new Dt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function u3(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(s)===!0?!1:(t.add(n),t.add(s),!0)}var f3=Object.freeze({__proto__:null,BoxGeometry:kd,CapsuleGeometry:_S,CircleGeometry:xS,ConeGeometry:Wv,CylinderGeometry:Yv,DodecahedronGeometry:SS,EdgesGeometry:HB,ExtrudeGeometry:MS,IcosahedronGeometry:bS,LatheGeometry:TS,OctahedronGeometry:qv,PlaneGeometry:Ru,PolyhedronGeometry:qf,RingGeometry:ES,ShapeGeometry:Kv,SphereGeometry:Jv,TetrahedronGeometry:CS,TorusGeometry:wS,TorusKnotGeometry:RS,TubeGeometry:DS,WireframeGeometry:ZB});class QB extends ys{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new St(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class $B extends ls{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Zv extends ys{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new St(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wf,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ro,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jo extends Zv{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new tt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return un(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new St(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new St(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new St(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class e4 extends ys{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new St(16777215),this.specular=new St(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wf,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ro,this.combine=Gv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class t4 extends ys{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new St(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wf,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class oT extends ys{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wf,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class n4 extends ys{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new St(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new St(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wf,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ro,this.combine=Gv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class BS extends ys{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Yf,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class US extends ys{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class i4 extends ys{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new St(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wf,this.normalScale=new tt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class s4 extends ma{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function md(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function a4(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function r4(i){function e(s,a){return i[s]-i[a]}const t=i.length,n=new Array(t);for(let s=0;s!==t;++s)n[s]=s;return n.sort(e),n}function BM(i,e,t){const n=i.length,s=new i.constructor(n);for(let a=0,r=0;r!==n;++a){const l=t[a]*e;for(let c=0;c!==e;++c)s[r++]=i[l+c]}return s}function lT(i,e,t,n){let s=1,a=i[0];for(;a!==void 0&&a[n]===void 0;)a=i[s++];if(a===void 0)return;let r=a[n];if(r!==void 0)if(Array.isArray(r))do r=a[n],r!==void 0&&(e.push(a.time),t.push(...r)),a=i[s++];while(a!==void 0);else if(r.toArray!==void 0)do r=a[n],r!==void 0&&(e.push(a.time),r.toArray(t,t.length)),a=i[s++];while(a!==void 0);else do r=a[n],r!==void 0&&(e.push(a.time),t.push(r)),a=i[s++];while(a!==void 0)}function pI(i,e,t,n,s=30){const a=i.clone();a.name=e;const r=[];for(let c=0;c<a.tracks.length;++c){const f=a.tracks[c],d=f.getValueSize(),g=[],v=[];for(let y=0;y<f.times.length;++y){const S=f.times[y]*s;if(!(S<t||S>=n)){g.push(f.times[y]);for(let A=0;A<d;++A)v.push(f.values[y*d+A])}}g.length!==0&&(f.times=md(g,f.times.constructor),f.values=md(v,f.values.constructor),r.push(f))}a.tracks=r;let l=1/0;for(let c=0;c<a.tracks.length;++c)l>a.tracks[c].times[0]&&(l=a.tracks[c].times[0]);for(let c=0;c<a.tracks.length;++c)a.tracks[c].shift(-1*l);return a.resetDuration(),a}function mI(i,e=0,t=i,n=30){n<=0&&(n=30);const s=t.tracks.length,a=e/n;for(let r=0;r<s;++r){const l=t.tracks[r],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const f=i.tracks.find(function(b){return b.name===l.name&&b.ValueTypeName===c});if(f===void 0)continue;let d=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=g/3);let v=0;const y=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);const S=l.times.length-1;let A;if(a<=l.times[0]){const b=d,C=g-d;A=l.values.slice(b,C)}else if(a>=l.times[S]){const b=S*g+d,C=b+g-d;A=l.values.slice(b,C)}else{const b=l.createInterpolant(),C=d,w=g-d;b.evaluate(a),A=b.resultBuffer.slice(C,w)}c==="quaternion"&&new Rs().fromArray(A).normalize().conjugate().toArray(A);const M=f.times.length;for(let b=0;b<M;++b){const C=b*y+v;if(c==="quaternion")Rs.multiplyQuaternionsFlat(f.values,C,A,0,f.values,C);else{const w=y-v*2;for(let R=0;R<w;++R)f.values[C+R]-=A[R]}}}return i.blendMode=Hb,i}class gI{static convertArray(e,t){return md(e,t)}static isTypedArray(e){return a4(e)}static getKeyframeOrder(e){return r4(e)}static sortedArray(e,t,n){return BM(e,t,n)}static flattenJSON(e,t,n,s){lT(e,t,n,s)}static subclip(e,t,n,s,a=30){return pI(e,t,n,s,a)}static makeClipAdditive(e,t=0,n=e,s=30){return mI(e,t,n,s)}}class e0{constructor(e,t,n,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,s=t[n],a=t[n-1];e:{t:{let r;n:{i:if(!(e<s)){for(let l=n+2;;){if(s===void 0){if(e<a)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(a=s,s=t[++n],e<s)break t}r=t.length;break n}if(!(e>=a)){const l=t[1];e<l&&(n=2,a=l);for(let c=n-2;;){if(a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(s=a,a=t[--n-1],e>=a)break t}r=n,n=0;break n}break e}for(;n<r;){const l=n+r>>>1;e<t[l]?r=l:n=l+1}if(s=t[n],a=t[n-1],a===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,a,s)}return this.interpolate_(n,a,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,a=e*s;for(let r=0;r!==s;++r)t[r]=n[a+r];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class o4 extends e0{constructor(e,t,n,s){super(e,t,n,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:dd,endingEnd:dd}}intervalChanged_(e,t,n){const s=this.parameterPositions;let a=e-2,r=e+1,l=s[a],c=s[r];if(l===void 0)switch(this.getSettings_().endingStart){case pd:a=e,l=2*t-n;break;case dv:a=s.length-2,l=t+s[a]-s[a+1];break;default:a=e,l=n}if(c===void 0)switch(this.getSettings_().endingEnd){case pd:r=e,c=2*n-t;break;case dv:r=1,c=n+s[1]-s[0];break;default:r=e-1,c=t}const f=(n-t)*.5,d=this.valueSize;this._weightPrev=f/(t-l),this._weightNext=f/(c-n),this._offsetPrev=a*d,this._offsetNext=r*d}interpolate_(e,t,n,s){const a=this.resultBuffer,r=this.sampleValues,l=this.valueSize,c=e*l,f=c-l,d=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,y=this._weightNext,S=(n-t)/(s-t),A=S*S,M=A*S,b=-v*M+2*v*A-v*S,C=(1+v)*M+(-1.5-2*v)*A+(-.5+v)*S+1,w=(-1-y)*M+(1.5+y)*A+.5*S,R=y*M-y*A;for(let U=0;U!==l;++U)a[U]=b*r[d+U]+C*r[f+U]+w*r[c+U]+R*r[g+U];return a}}class cT extends e0{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const a=this.resultBuffer,r=this.sampleValues,l=this.valueSize,c=e*l,f=c-l,d=(n-t)/(s-t),g=1-d;for(let v=0;v!==l;++v)a[v]=r[f+v]*g+r[c+v]*d;return a}}class l4 extends e0{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class Yo{constructor(e,t,n,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=md(t,this.TimeBufferType),this.values=md(n,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:md(e.times,Array),values:md(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(n.interpolation=s)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new l4(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new cT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new o4(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Lm:t=this.InterpolantFactoryMethodDiscrete;break;case Om:t=this.InterpolantFactoryMethodLinear;break;case B_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Lm;case this.InterpolantFactoryMethodLinear:return Om;case this.InterpolantFactoryMethodSmooth:return B_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,s=t.length;n!==s;++n)t[n]*=e}return this}trim(e,t){const n=this.times,s=n.length;let a=0,r=s-1;for(;a!==s&&n[a]<e;)++a;for(;r!==-1&&n[r]>t;)--r;if(++r,a!==0||r!==s){a>=r&&(r=Math.max(r,1),a=r-1);const l=this.getValueSize();this.times=n.slice(a,r),this.values=this.values.slice(a*l,r*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,s=this.values,a=n.length;a===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let r=null;for(let l=0;l!==a;l++){const c=n[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(r!==null&&r>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,r),e=!1;break}r=c}if(s!==void 0&&a4(s))for(let l=0,c=s.length;l!==c;++l){const f=s[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),s=this.getInterpolation()===B_,a=e.length-1;let r=1;for(let l=1;l<a;++l){let c=!1;const f=e[l],d=e[l+1];if(f!==d&&(l!==1||f!==e[0]))if(s)c=!0;else{const g=l*n,v=g-n,y=g+n;for(let S=0;S!==n;++S){const A=t[g+S];if(A!==t[v+S]||A!==t[y+S]){c=!0;break}}}if(c){if(l!==r){e[r]=e[l];const g=l*n,v=r*n;for(let y=0;y!==n;++y)t[v+y]=t[g+y]}++r}}if(a>0){e[r]=e[a];for(let l=a*n,c=r*n,f=0;f!==n;++f)t[c+f]=t[l+f];++r}return r!==e.length?(this.times=e.slice(0,r),this.values=t.slice(0,r*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,s=new n(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}Yo.prototype.ValueTypeName="";Yo.prototype.TimeBufferType=Float32Array;Yo.prototype.ValueBufferType=Float32Array;Yo.prototype.DefaultInterpolation=Om;class Xd extends Yo{constructor(e,t,n){super(e,t,n)}}Xd.prototype.ValueTypeName="bool";Xd.prototype.ValueBufferType=Array;Xd.prototype.DefaultInterpolation=Lm;Xd.prototype.InterpolantFactoryMethodLinear=void 0;Xd.prototype.InterpolantFactoryMethodSmooth=void 0;class uT extends Yo{constructor(e,t,n,s){super(e,t,n,s)}}uT.prototype.ValueTypeName="color";class Id extends Yo{constructor(e,t,n,s){super(e,t,n,s)}}Id.prototype.ValueTypeName="number";class c4 extends e0{constructor(e,t,n,s){super(e,t,n,s)}interpolate_(e,t,n,s){const a=this.resultBuffer,r=this.sampleValues,l=this.valueSize,c=(n-t)/(s-t);let f=e*l;for(let d=f+l;f!==d;f+=4)Rs.slerpFlat(a,0,r,f-l,r,f,c);return a}}class Fd extends Yo{constructor(e,t,n,s){super(e,t,n,s)}InterpolantFactoryMethodLinear(e){return new c4(this.times,this.values,this.getValueSize(),e)}}Fd.prototype.ValueTypeName="quaternion";Fd.prototype.InterpolantFactoryMethodSmooth=void 0;class jd extends Yo{constructor(e,t,n){super(e,t,n)}}jd.prototype.ValueTypeName="string";jd.prototype.ValueBufferType=Array;jd.prototype.DefaultInterpolation=Lm;jd.prototype.InterpolantFactoryMethodLinear=void 0;jd.prototype.InterpolantFactoryMethodSmooth=void 0;class zd extends Yo{constructor(e,t,n,s){super(e,t,n,s)}}zd.prototype.ValueTypeName="vector";class zm{constructor(e="",t=-1,n=[],s=lS){this.name=e,this.tracks=n,this.duration=t,this.blendMode=s,this.uuid=io(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,s=1/(e.fps||1);for(let r=0,l=n.length;r!==l;++r)t.push(yI(n[r]).scale(s));const a=new this(e.name,e.duration,t,e.blendMode);return a.uuid=e.uuid,a}static toJSON(e){const t=[],n=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let a=0,r=n.length;a!==r;++a)t.push(Yo.toJSON(n[a]));return s}static CreateFromMorphTargetSequence(e,t,n,s){const a=t.length,r=[];for(let l=0;l<a;l++){let c=[],f=[];c.push((l+a-1)%a,l,(l+1)%a),f.push(0,1,0);const d=r4(c);c=BM(c,1,d),f=BM(f,1,d),!s&&c[0]===0&&(c.push(a),f.push(f[0])),r.push(new Id(".morphTargetInfluences["+t[l].name+"]",c,f).scale(1/n))}return new this(e,-1,r)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const s=e;n=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<n.length;s++)if(n[s].name===t)return n[s];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const s={},a=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const f=e[l],d=f.name.match(a);if(d&&d.length>1){const g=d[1];let v=s[g];v||(s[g]=v=[]),v.push(f)}}const r=[];for(const l in s)r.push(this.CreateFromMorphTargetSequence(l,s[l],t,n));return r}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(g,v,y,S,A){if(y.length!==0){const M=[],b=[];lT(y,M,b,S),M.length!==0&&A.push(new g(v,M,b))}},s=[],a=e.name||"default",r=e.fps||30,l=e.blendMode;let c=e.length||-1;const f=e.hierarchy||[];for(let g=0;g<f.length;g++){const v=f[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const y={};let S;for(S=0;S<v.length;S++)if(v[S].morphTargets)for(let A=0;A<v[S].morphTargets.length;A++)y[v[S].morphTargets[A]]=-1;for(const A in y){const M=[],b=[];for(let C=0;C!==v[S].morphTargets.length;++C){const w=v[S];M.push(w.time),b.push(w.morphTarget===A?1:0)}s.push(new Id(".morphTargetInfluence["+A+"]",M,b))}c=y.length*r}else{const y=".bones["+t[g].name+"]";n(zd,y+".position",v,"pos",s),n(Fd,y+".quaternion",v,"rot",s),n(zd,y+".scale",v,"scl",s)}}return s.length===0?null:new this(a,c,s,l)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,s=e.length;n!==s;++n){const a=this.tracks[n];t=Math.max(t,a.times[a.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function vI(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Id;case"vector":case"vector2":case"vector3":case"vector4":return zd;case"color":return uT;case"quaternion":return Fd;case"bool":case"boolean":return Xd;case"string":return jd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function yI(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=vI(i.type);if(i.times===void 0){const t=[],n=[];lT(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const _u={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class fT{constructor(e,t,n){const s=this;let a=!1,r=0,l=0,c;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(d){l++,a===!1&&s.onStart!==void 0&&s.onStart(d,r,l),a=!0},this.itemEnd=function(d){r++,s.onProgress!==void 0&&s.onProgress(d,r,l),r===l&&(a=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(d){s.onError!==void 0&&s.onError(d)},this.resolveURL=function(d){return c?c(d):d},this.setURLModifier=function(d){return c=d,this},this.addHandler=function(d,g){return f.push(d,g),this},this.removeHandler=function(d){const g=f.indexOf(d);return g!==-1&&f.splice(g,2),this},this.getHandler=function(d){for(let g=0,v=f.length;g<v;g+=2){const y=f[g],S=f[g+1];if(y.global&&(y.lastIndex=0),y.test(d))return S}return null}}}const u4=new fT;class Ia{constructor(e){this.manager=e!==void 0?e:u4,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(s,a){n.load(e,s,t,a)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ia.DEFAULT_MATERIAL_NAME="__DEFAULT";const hu={};class _I extends Error{constructor(e,t){super(e),this.response=t}}class oo extends Ia{constructor(e){super(e),this.mimeType="",this.responseType=""}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=_u.get(e);if(a!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(a),this.manager.itemEnd(e)},0),a;if(hu[e]!==void 0){hu[e].push({onLoad:t,onProgress:n,onError:s});return}hu[e]=[],hu[e].push({onLoad:t,onProgress:n,onError:s});const r=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(r).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const d=hu[e],g=f.body.getReader(),v=f.headers.get("X-File-Size")||f.headers.get("Content-Length"),y=v?parseInt(v):0,S=y!==0;let A=0;const M=new ReadableStream({start(b){C();function C(){g.read().then(({done:w,value:R})=>{if(w)b.close();else{A+=R.byteLength;const U=new ProgressEvent("progress",{lengthComputable:S,loaded:A,total:y});for(let O=0,I=d.length;O<I;O++){const P=d[O];P.onProgress&&P.onProgress(U)}b.enqueue(R),C()}},w=>{b.error(w)})}}});return new Response(M)}else throw new _I(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(c){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(d=>new DOMParser().parseFromString(d,l));case"json":return f.json();default:if(l==="")return f.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),v=g&&g[1]?g[1].toLowerCase():void 0,y=new TextDecoder(v);return f.arrayBuffer().then(S=>y.decode(S))}}}).then(f=>{_u.add(e,f);const d=hu[e];delete hu[e];for(let g=0,v=d.length;g<v;g++){const y=d[g];y.onLoad&&y.onLoad(f)}}).catch(f=>{const d=hu[e];if(d===void 0)throw this.manager.itemError(e),f;delete hu[e];for(let g=0,v=d.length;g<v;g++){const y=d[g];y.onError&&y.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class xI extends Ia{constructor(e){super(e)}load(e,t,n,s){const a=this,r=new oo(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,function(l){try{t(a.parse(JSON.parse(l)))}catch(c){s?s(c):console.error(c),a.manager.itemError(e)}},n,s)}parse(e){const t=[];for(let n=0;n<e.length;n++){const s=zm.parse(e[n]);t.push(s)}return t}}class SI extends Ia{constructor(e){super(e)}load(e,t,n,s){const a=this,r=[],l=new vS,c=new oo(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(a.withCredentials);let f=0;function d(g){c.load(e[g],function(v){const y=a.parse(v,!0);r[g]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},f+=1,f===6&&(y.mipmapCount===1&&(l.minFilter=ti),l.image=r,l.format=y.format,l.needsUpdate=!0,t&&t(l))},n,s)}if(Array.isArray(e))for(let g=0,v=e.length;g<v;++g)d(g);else c.load(e,function(g){const v=a.parse(g,!0);if(v.isCubemap){const y=v.mipmaps.length/v.mipmapCount;for(let S=0;S<y;S++){r[S]={mipmaps:[]};for(let A=0;A<v.mipmapCount;A++)r[S].mipmaps.push(v.mipmaps[S*v.mipmapCount+A]),r[S].format=v.format,r[S].width=v.width,r[S].height=v.height}l.image=r}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=ti),l.format=v.format,l.needsUpdate=!0,t&&t(l)},n,s);return l}}class Av extends Ia{constructor(e){super(e)}load(e,t,n,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,r=_u.get(e);if(r!==void 0)return a.manager.itemStart(e),setTimeout(function(){t&&t(r),a.manager.itemEnd(e)},0),r;const l=vv("img");function c(){d(),_u.add(e,this),t&&t(this),a.manager.itemEnd(e)}function f(g){d(),s&&s(g),a.manager.itemError(e),a.manager.itemEnd(e)}function d(){l.removeEventListener("load",c,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),a.manager.itemStart(e),l.src=e,l}}class AI extends Ia{constructor(e){super(e)}load(e,t,n,s){const a=new kv;a.colorSpace=Zn;const r=new Av(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);let l=0;function c(f){r.load(e[f],function(d){a.images[f]=d,l++,l===6&&(a.needsUpdate=!0,t&&t(a))},void 0,s)}for(let f=0;f<e.length;++f)c(f);return a}}class f4 extends Ia{constructor(e){super(e)}load(e,t,n,s){const a=this,r=new Cc,l=new oo(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(a.withCredentials),l.load(e,function(c){let f;try{f=a.parse(c)}catch(d){if(s!==void 0)s(d);else{console.error(d);return}}f.image!==void 0?r.image=f.image:f.data!==void 0&&(r.image.width=f.width,r.image.height=f.height,r.image.data=f.data),r.wrapS=f.wrapS!==void 0?f.wrapS:eo,r.wrapT=f.wrapT!==void 0?f.wrapT:eo,r.magFilter=f.magFilter!==void 0?f.magFilter:ti,r.minFilter=f.minFilter!==void 0?f.minFilter:ti,r.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0&&(r.colorSpace=f.colorSpace),f.flipY!==void 0&&(r.flipY=f.flipY),f.format!==void 0&&(r.format=f.format),f.type!==void 0&&(r.type=f.type),f.mipmaps!==void 0&&(r.mipmaps=f.mipmaps,r.minFilter=to),f.mipmapCount===1&&(r.minFilter=ti),f.generateMipmaps!==void 0&&(r.generateMipmaps=f.generateMipmaps),r.needsUpdate=!0,t&&t(r,f)},n,s),r}}class Qv extends Ia{constructor(e){super(e)}load(e,t,n,s){const a=new Ai,r=new Av(this.manager);return r.setCrossOrigin(this.crossOrigin),r.setPath(this.path),r.load(e,function(l){a.image=l,a.needsUpdate=!0,t!==void 0&&t(a)},n,s),a}}class Kf extends In{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new St(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class h4 extends Kf{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(In.DEFAULT_UP),this.updateMatrix(),this.groundColor=new St(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const h2=new Ft,h3=new le,d3=new le;class hT{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new tt(512,512),this.mapType=Gs,this.map=null,this.mapPass=null,this.matrix=new Ft,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new $m,this._frameExtents=new tt(1,1),this._viewportCount=1,this._viewports=[new wn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;h3.setFromMatrixPosition(e.matrixWorld),t.position.copy(h3),d3.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(d3),t.updateMatrixWorld(),h2.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(h2),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(h2)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class MI extends hT{constructor(){super(new Ji(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=Nm*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height*this.aspect,a=e.distance||t.far;(n!==t.fov||s!==t.aspect||a!==t.far)&&(t.fov=n,t.aspect=s,t.far=a,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class dT extends Kf{constructor(e,t,n=0,s=Math.PI/3,a=0,r=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(In.DEFAULT_UP),this.updateMatrix(),this.target=new In,this.distance=n,this.angle=s,this.penumbra=a,this.decay=r,this.map=null,this.shadow=new MI}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const p3=new Ft,Dg=new le,d2=new le;class bI extends hT{constructor(){super(new Ji(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new tt(4,2),this._viewportCount=6,this._viewports=[new wn(2,1,1,1),new wn(0,1,1,1),new wn(3,1,1,1),new wn(1,1,1,1),new wn(3,0,1,1),new wn(1,0,1,1)],this._cubeDirections=[new le(1,0,0),new le(-1,0,0),new le(0,0,1),new le(0,0,-1),new le(0,1,0),new le(0,-1,0)],this._cubeUps=[new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,0,1),new le(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,s=this.matrix,a=e.distance||n.far;a!==n.far&&(n.far=a,n.updateProjectionMatrix()),Dg.setFromMatrixPosition(e.matrixWorld),n.position.copy(Dg),d2.copy(n.position),d2.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(d2),n.updateMatrixWorld(),s.makeTranslation(-Dg.x,-Dg.y,-Dg.z),p3.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(p3)}}class pT extends Kf{constructor(e,t,n=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=s,this.shadow=new bI}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Au extends Vv{constructor(e=-1,t=1,n=1,s=-1,a=.1,r=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=s,this.near=a,this.far=r,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,s,a,r){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=s,this.view.width=a,this.view.height=r,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let a=n-e,r=n+e,l=s+t,c=s-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a+=f*this.view.offsetX,r=a+f*this.view.width,l-=d*this.view.offsetY,c=l-d*this.view.height}this.projectionMatrix.makeOrthographic(a,r,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class TI extends hT{constructor(){super(new Au(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class mT extends Kf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(In.DEFAULT_UP),this.updateMatrix(),this.target=new In,this.shadow=new TI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class d4 extends Kf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class p4 extends Kf{constructor(e,t,n=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class m4{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new le)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,s=e.y,a=e.z,r=this.coefficients;return t.copy(r[0]).multiplyScalar(.282095),t.addScaledVector(r[1],.488603*s),t.addScaledVector(r[2],.488603*a),t.addScaledVector(r[3],.488603*n),t.addScaledVector(r[4],1.092548*(n*s)),t.addScaledVector(r[5],1.092548*(s*a)),t.addScaledVector(r[6],.315392*(3*a*a-1)),t.addScaledVector(r[7],1.092548*(n*a)),t.addScaledVector(r[8],.546274*(n*n-s*s)),t}getIrradianceAt(e,t){const n=e.x,s=e.y,a=e.z,r=this.coefficients;return t.copy(r[0]).multiplyScalar(.886227),t.addScaledVector(r[1],2*.511664*s),t.addScaledVector(r[2],2*.511664*a),t.addScaledVector(r[3],2*.511664*n),t.addScaledVector(r[4],2*.429043*n*s),t.addScaledVector(r[5],2*.429043*s*a),t.addScaledVector(r[6],.743125*a*a-.247708),t.addScaledVector(r[7],2*.429043*n*a),t.addScaledVector(r[8],.429043*(n*n-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let s=0;s<9;s++)n[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const n=e.x,s=e.y,a=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*a,t[3]=.488603*n,t[4]=1.092548*n*s,t[5]=1.092548*s*a,t[6]=.315392*(3*a*a-1),t[7]=1.092548*n*a,t[8]=.546274*(n*n-s*s)}}class g4 extends Kf{constructor(e=new m4,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class LS extends Ia{constructor(e){super(e),this.textures={}}load(e,t,n,s){const a=this,r=new oo(a.manager);r.setPath(a.path),r.setRequestHeader(a.requestHeader),r.setWithCredentials(a.withCredentials),r.load(e,function(l){try{t(a.parse(JSON.parse(l)))}catch(c){s?s(c):console.error(c),a.manager.itemError(e)}},n,s)}parse(e){const t=this.textures;function n(a){return t[a]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",a),t[a]}const s=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new St().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const a in e.uniforms){const r=e.uniforms[a];switch(s.uniforms[a]={},r.type){case"t":s.uniforms[a].value=n(r.value);break;case"c":s.uniforms[a].value=new St().setHex(r.value);break;case"v2":s.uniforms[a].value=new tt().fromArray(r.value);break;case"v3":s.uniforms[a].value=new le().fromArray(r.value);break;case"v4":s.uniforms[a].value=new wn().fromArray(r.value);break;case"m3":s.uniforms[a].value=new cn().fromArray(r.value);break;case"m4":s.uniforms[a].value=new Ft().fromArray(r.value);break;default:s.uniforms[a].value=r.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const a in e.extensions)s.extensions[a]=e.extensions[a];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=n(e.map)),e.matcap!==void 0&&(s.matcap=n(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),s.normalScale=new tt().fromArray(a)}return e.displacementMap!==void 0&&(s.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=n(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new tt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=n(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return LS.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:QB,SpriteMaterial:dS,RawShaderMaterial:$B,ShaderMaterial:ls,PointsMaterial:gS,MeshPhysicalMaterial:jo,MeshStandardMaterial:Zv,MeshPhongMaterial:e4,MeshToonMaterial:t4,MeshNormalMaterial:oT,MeshLambertMaterial:n4,MeshDepthMaterial:BS,MeshDistanceMaterial:US,MeshBasicMaterial:La,MeshMatcapMaterial:i4,LineDashedMaterial:s4,LineBasicMaterial:ma,Material:ys};return new t[e]}}class Of{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class gT extends $t{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class v4 extends Ia{constructor(e){super(e)}load(e,t,n,s){const a=this,r=new oo(a.manager);r.setPath(a.path),r.setRequestHeader(a.requestHeader),r.setWithCredentials(a.withCredentials),r.load(e,function(l){try{t(a.parse(JSON.parse(l)))}catch(c){s?s(c):console.error(c),a.manager.itemError(e)}},n,s)}parse(e){const t={},n={};function s(y,S){if(t[S]!==void 0)return t[S];const M=y.interleavedBuffers[S],b=a(y,M.buffer),C=hm(M.type,b),w=new Xv(C,M.stride);return w.uuid=M.uuid,t[S]=w,w}function a(y,S){if(n[S]!==void 0)return n[S];const M=y.arrayBuffers[S],b=new Uint32Array(M).buffer;return n[S]=b,b}const r=e.isInstancedBufferGeometry?new gT:new $t,l=e.data.index;if(l!==void 0){const y=hm(l.type,l.array);r.setIndex(new Fn(y,1))}const c=e.data.attributes;for(const y in c){const S=c[y];let A;if(S.isInterleavedBufferAttribute){const M=s(e.data,S.data);A=new zf(M,S.itemSize,S.offset,S.normalized)}else{const M=hm(S.type,S.array),b=S.isInstancedBufferAttribute?Gf:Fn;A=new b(M,S.itemSize,S.normalized)}S.name!==void 0&&(A.name=S.name),S.usage!==void 0&&A.setUsage(S.usage),r.setAttribute(y,A)}const f=e.data.morphAttributes;if(f)for(const y in f){const S=f[y],A=[];for(let M=0,b=S.length;M<b;M++){const C=S[M];let w;if(C.isInterleavedBufferAttribute){const R=s(e.data,C.data);w=new zf(R,C.itemSize,C.offset,C.normalized)}else{const R=hm(C.type,C.array);w=new Fn(R,C.itemSize,C.normalized)}C.name!==void 0&&(w.name=C.name),A.push(w)}r.morphAttributes[y]=A}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let y=0,S=g.length;y!==S;++y){const A=g[y];r.addGroup(A.start,A.count,A.materialIndex)}const v=e.data.boundingSphere;return v!==void 0&&(r.boundingSphere=new zs().fromJSON(v)),e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}}class EI extends Ia{constructor(e){super(e)}load(e,t,n,s){const a=this,r=this.path===""?Of.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const l=new oo(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let f=null;try{f=JSON.parse(c)}catch(g){s!==void 0&&s(g),console.error("THREE:ObjectLoader: Can't parse "+e+".",g.message);return}const d=f.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}a.parse(f,t)},n,s)}async loadAsync(e,t){const n=this,s=this.path===""?Of.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new oo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials);const r=await a.loadAsync(e,t),l=JSON.parse(r),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(l)}parse(e,t){const n=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,s),r=this.parseImages(e.images,function(){t!==void 0&&t(f)}),l=this.parseTextures(e.textures,r),c=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,a,c,l,n),d=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,d),this.bindLightTargets(f),t!==void 0){let g=!1;for(const v in r)if(r[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,n),a=await this.parseImagesAsync(e.images),r=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,r),c=this.parseObject(e.object,s,l,r,t),f=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,f),this.bindLightTargets(c),c}parseShapes(e){const t={};if(e!==void 0)for(let n=0,s=e.length;n<s;n++){const a=new Lf().fromJSON(e[n]);t[a.uuid]=a}return t}parseSkeletons(e,t){const n={},s={};if(t.traverse(function(a){a.isBone&&(s[a.uuid]=a)}),e!==void 0)for(let a=0,r=e.length;a<r;a++){const l=new jv().fromJSON(e[a],s);n[l.uuid]=l}return n}parseGeometries(e,t){const n={};if(e!==void 0){const s=new v4;for(let a=0,r=e.length;a<r;a++){let l;const c=e[a];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=s.parse(c);break;default:c.type in f3?l=f3[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),n[c.uuid]=l}}return n}parseMaterials(e,t){const n={},s={};if(e!==void 0){const a=new LS;a.setTextures(t);for(let r=0,l=e.length;r<l;r++){const c=e[r];n[c.uuid]===void 0&&(n[c.uuid]=a.parse(c)),s[c.uuid]=n[c.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const s=e[n],a=zm.parse(s);t[a.uuid]=a}return t}parseImages(e,t){const n=this,s={};let a;function r(c){return n.manager.itemStart(c),a.load(c,function(){n.manager.itemEnd(c)},void 0,function(){n.manager.itemError(c),n.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const f=c,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.resourcePath+f;return r(d)}else return c.data?{data:hm(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new fT(t);a=new Av(c),a.setCrossOrigin(this.crossOrigin);for(let f=0,d=e.length;f<d;f++){const g=e[f],v=g.url;if(Array.isArray(v)){const y=[];for(let S=0,A=v.length;S<A;S++){const M=v[S],b=l(M);b!==null&&(b instanceof HTMLImageElement?y.push(b):y.push(new Cc(b.data,b.width,b.height)))}s[g.uuid]=new Rf(y)}else{const y=l(g.url);s[g.uuid]=new Rf(y)}}}return s}async parseImagesAsync(e){const t=this,n={};let s;async function a(r){if(typeof r=="string"){const l=r,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await s.loadAsync(c)}else return r.data?{data:hm(r.type,r.data),width:r.width,height:r.height}:null}if(e!==void 0&&e.length>0){s=new Av(this.manager),s.setCrossOrigin(this.crossOrigin);for(let r=0,l=e.length;r<l;r++){const c=e[r],f=c.url;if(Array.isArray(f)){const d=[];for(let g=0,v=f.length;g<v;g++){const y=f[g],S=await a(y);S!==null&&(S instanceof HTMLImageElement?d.push(S):d.push(new Cc(S.data,S.width,S.height)))}n[c.uuid]=new Rf(d)}else{const d=await a(c.url);n[c.uuid]=new Rf(d)}}}return n}parseTextures(e,t){function n(a,r){return typeof a=="number"?a:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",a),r[a])}const s={};if(e!==void 0)for(let a=0,r=e.length;a<r;a++){const l=e[a];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=t[l.image],f=c.data;let d;Array.isArray(f)?(d=new kv,f.length===6&&(d.needsUpdate=!0)):(f&&f.data?d=new Cc:d=new Ai,f&&(d.needsUpdate=!0)),d.source=c,d.uuid=l.uuid,l.name!==void 0&&(d.name=l.name),l.mapping!==void 0&&(d.mapping=n(l.mapping,CI)),l.channel!==void 0&&(d.channel=l.channel),l.offset!==void 0&&d.offset.fromArray(l.offset),l.repeat!==void 0&&d.repeat.fromArray(l.repeat),l.center!==void 0&&d.center.fromArray(l.center),l.rotation!==void 0&&(d.rotation=l.rotation),l.wrap!==void 0&&(d.wrapS=n(l.wrap[0],m3),d.wrapT=n(l.wrap[1],m3)),l.format!==void 0&&(d.format=l.format),l.internalFormat!==void 0&&(d.internalFormat=l.internalFormat),l.type!==void 0&&(d.type=l.type),l.colorSpace!==void 0&&(d.colorSpace=l.colorSpace),l.minFilter!==void 0&&(d.minFilter=n(l.minFilter,g3)),l.magFilter!==void 0&&(d.magFilter=n(l.magFilter,g3)),l.anisotropy!==void 0&&(d.anisotropy=l.anisotropy),l.flipY!==void 0&&(d.flipY=l.flipY),l.generateMipmaps!==void 0&&(d.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(d.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(d.compareFunction=l.compareFunction),l.userData!==void 0&&(d.userData=l.userData),s[l.uuid]=d}return s}parseObject(e,t,n,s,a){let r;function l(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function c(v){if(v!==void 0){if(Array.isArray(v)){const y=[];for(let S=0,A=v.length;S<A;S++){const M=v[S];n[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),y.push(n[M])}return y}return n[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),n[v]}}function f(v){return s[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),s[v]}let d,g;switch(e.type){case"Scene":r=new yv,e.background!==void 0&&(Number.isInteger(e.background)?r.background=new St(e.background):r.background=f(e.background)),e.environment!==void 0&&(r.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?r.fog=new hS(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(r.fog=new fS(e.fog.color,e.fog.density)),e.fog.name!==""&&(r.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(r.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(r.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&r.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(r.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&r.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":r=new Ji(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(r.focus=e.focus),e.zoom!==void 0&&(r.zoom=e.zoom),e.filmGauge!==void 0&&(r.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(r.filmOffset=e.filmOffset),e.view!==void 0&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new Au(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(r.zoom=e.zoom),e.view!==void 0&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new d4(e.color,e.intensity);break;case"DirectionalLight":r=new mT(e.color,e.intensity),r.target=e.target||"";break;case"PointLight":r=new pT(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new p4(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new dT(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),r.target=e.target||"";break;case"HemisphereLight":r=new h4(e.color,e.groundColor,e.intensity);break;case"LightProbe":r=new g4().fromJSON(e);break;case"SkinnedMesh":d=l(e.geometry),g=c(e.material),r=new Zb(d,g),e.bindMode!==void 0&&(r.bindMode=e.bindMode),e.bindMatrix!==void 0&&r.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(r.skeleton=e.skeleton);break;case"Mesh":d=l(e.geometry),g=c(e.material),r=new Di(d,g);break;case"InstancedMesh":d=l(e.geometry),g=c(e.material);const v=e.count,y=e.instanceMatrix,S=e.instanceColor;r=new Qb(d,g,v),r.instanceMatrix=new Gf(new Float32Array(y.array),16),S!==void 0&&(r.instanceColor=new Gf(new Float32Array(S.array),S.itemSize));break;case"BatchedMesh":d=l(e.geometry),g=c(e.material),r=new zB(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,g),r.geometry=d,r.perObjectFrustumCulled=e.perObjectFrustumCulled,r.sortObjects=e.sortObjects,r._drawRanges=e.drawRanges,r._reservedRanges=e.reservedRanges,r._geometryInfo=e.geometryInfo.map(A=>{let M=null,b=null;return A.boundingBox!==void 0&&(M=new Ds().fromJSON(A.boundingBox)),A.boundingSphere!==void 0&&(b=new zs().fromJSON(A.boundingSphere)),{...A,boundingBox:M,boundingSphere:b}}),r._instanceInfo=e.instanceInfo,r._availableInstanceIds=e._availableInstanceIds,r._availableGeometryIds=e._availableGeometryIds,r._nextIndexStart=e.nextIndexStart,r._nextVertexStart=e.nextVertexStart,r._geometryCount=e.geometryCount,r._maxInstanceCount=e.maxInstanceCount,r._maxVertexCount=e.maxVertexCount,r._maxIndexCount=e.maxIndexCount,r._geometryInitialized=e.geometryInitialized,r._matricesTexture=f(e.matricesTexture.uuid),r._indirectTexture=f(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(r._colorsTexture=f(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(r.boundingSphere=new zs().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(r.boundingBox=new Ds().fromJSON(e.boundingBox));break;case"LOD":r=new FB;break;case"Line":r=new Uc(l(e.geometry),c(e.material));break;case"LineLoop":r=new $b(l(e.geometry),c(e.material));break;case"LineSegments":r=new Fl(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":r=new eT(l(e.geometry),c(e.material));break;case"Sprite":r=new Jb(c(e.material));break;case"Group":r=new Tc;break;case"Bone":r=new pS;break;default:r=new In}if(r.uuid=e.uuid,e.name!==void 0&&(r.name=e.name),e.matrix!==void 0?(r.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(e.position!==void 0&&r.position.fromArray(e.position),e.rotation!==void 0&&r.rotation.fromArray(e.rotation),e.quaternion!==void 0&&r.quaternion.fromArray(e.quaternion),e.scale!==void 0&&r.scale.fromArray(e.scale)),e.up!==void 0&&r.up.fromArray(e.up),e.castShadow!==void 0&&(r.castShadow=e.castShadow),e.receiveShadow!==void 0&&(r.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(r.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(r.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(r.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(r.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&r.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(r.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(r.visible=e.visible),e.frustumCulled!==void 0&&(r.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(r.renderOrder=e.renderOrder),e.userData!==void 0&&(r.userData=e.userData),e.layers!==void 0&&(r.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let y=0;y<v.length;y++)r.add(this.parseObject(v[y],t,n,s,a))}if(e.animations!==void 0){const v=e.animations;for(let y=0;y<v.length;y++){const S=v[y];r.animations.push(a[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(r.autoUpdate=e.autoUpdate);const v=e.levels;for(let y=0;y<v.length;y++){const S=v[y],A=r.getObjectByProperty("uuid",S.object);A!==void 0&&r.addLevel(A,S.distance,S.hysteresis)}}return r}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const s=t[n.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(s,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,s=e.getObjectByProperty("uuid",n);s!==void 0?t.target=s:t.target=new In}})}}const CI={UVMapping:eS,CubeReflectionMapping:bu,CubeRefractionMapping:If,EquirectangularReflectionMapping:Rm,EquirectangularRefractionMapping:hv,CubeUVReflectionMapping:Qm},m3={RepeatWrapping:Ff,ClampToEdgeWrapping:eo,MirroredRepeatWrapping:Dm},g3={NearestFilter:Hi,NearestMipmapNearestFilter:tS,NearestMipmapLinearFilter:hd,LinearFilter:ti,LinearMipmapNearestFilter:Sm,LinearMipmapLinearFilter:to},p2=new WeakMap;class y4 extends Ia{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const a=this,r=_u.get(e);if(r!==void 0){if(a.manager.itemStart(e),r.then){r.then(f=>{if(p2.has(r)===!0)s&&s(p2.get(r)),a.manager.itemError(e),a.manager.itemEnd(e);else return t&&t(f),a.manager.itemEnd(e),f});return}return setTimeout(function(){t&&t(r),a.manager.itemEnd(e)},0),r}const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader;const c=fetch(e,l).then(function(f){return f.blob()}).then(function(f){return createImageBitmap(f,Object.assign(a.options,{colorSpaceConversion:"none"}))}).then(function(f){return _u.add(e,f),t&&t(f),a.manager.itemEnd(e),f}).catch(function(f){s&&s(f),p2.set(c,f),_u.remove(e),a.manager.itemError(e),a.manager.itemEnd(e)});_u.add(e,c),a.manager.itemStart(e)}}let o_;class vT{static getContext(){return o_===void 0&&(o_=new(window.AudioContext||window.webkitAudioContext)),o_}static setContext(e){o_=e}}class wI extends Ia{constructor(e){super(e)}load(e,t,n,s){const a=this,r=new oo(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,function(c){try{const f=c.slice(0);vT.getContext().decodeAudioData(f,function(g){t(g)}).catch(l)}catch(f){l(f)}},n,s);function l(c){s?s(c):console.error(c),a.manager.itemError(e)}}}const v3=new Ft,y3=new Ft,Yh=new Ft;class RI{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ji,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ji,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Yh.copy(e.projectionMatrix);const s=t.eyeSep/2,a=s*t.near/t.focus,r=t.near*Math.tan(bd*t.fov*.5)/t.zoom;let l,c;y3.elements[12]=-s,v3.elements[12]=s,l=-r*t.aspect+a,c=r*t.aspect+a,Yh.elements[0]=2*t.near/(c-l),Yh.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(Yh),l=-r*t.aspect-a,c=r*t.aspect-a,Yh.elements[0]=2*t.near/(c-l),Yh.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(Yh)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(y3),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(v3)}}class _4 extends Ji{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class yT{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=_3(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=_3();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function _3(){return performance.now()}const Wh=new le,m2=new Rs,DI=new le,qh=new le,Kh=new le;class BI extends In{constructor(){super(),this.type="AudioListener",this.context=vT.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new yT}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Wh,m2,DI),qh.set(0,0,-1).applyQuaternion(m2),Kh.set(0,1,0).applyQuaternion(m2),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Wh.x,n),t.positionY.linearRampToValueAtTime(Wh.y,n),t.positionZ.linearRampToValueAtTime(Wh.z,n),t.forwardX.linearRampToValueAtTime(qh.x,n),t.forwardY.linearRampToValueAtTime(qh.y,n),t.forwardZ.linearRampToValueAtTime(qh.z,n),t.upX.linearRampToValueAtTime(Kh.x,n),t.upY.linearRampToValueAtTime(Kh.y,n),t.upZ.linearRampToValueAtTime(Kh.z,n)}else t.setPosition(Wh.x,Wh.y,Wh.z),t.setOrientation(qh.x,qh.y,qh.z,Kh.x,Kh.y,Kh.z)}}class x4 extends In{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Jh=new le,x3=new Rs,UI=new le,Zh=new le;class LI extends x4{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Jh,x3,UI),Zh.set(0,0,1).applyQuaternion(x3);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Jh.x,n),t.positionY.linearRampToValueAtTime(Jh.y,n),t.positionZ.linearRampToValueAtTime(Jh.z,n),t.orientationX.linearRampToValueAtTime(Zh.x,n),t.orientationY.linearRampToValueAtTime(Zh.y,n),t.orientationZ.linearRampToValueAtTime(Zh.z,n)}else t.setPosition(Jh.x,Jh.y,Jh.z),t.setOrientation(Zh.x,Zh.y,Zh.z)}}class OI{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class S4{constructor(e,t,n){this.binding=e,this.valueSize=n;let s,a,r;switch(t){case"quaternion":s=this._slerp,a=this._slerpAdditive,r=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":s=this._select,a=this._select,r=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:s=this._lerp,a=this._lerpAdditive,r=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=a,this._setIdentity=r,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,s=this.valueSize,a=e*s+s;let r=this.cumulativeWeight;if(r===0){for(let l=0;l!==s;++l)n[a+l]=n[l];r=t}else{r+=t;const l=t/r;this._mixBufferRegion(n,a,0,l,s)}this.cumulativeWeight=r}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,s=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,s=e*t+t,a=this.cumulativeWeight,r=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,a<1){const c=t*this._origIndex;this._mixBufferRegion(n,s,c,1-a,t)}r>0&&this._mixBufferRegionAdditive(n,s,this._addIndex*t,1,t);for(let c=t,f=t+t;c!==f;++c)if(n[c]!==n[c+t]){l.setValue(n,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,s=n*this._origIndex;e.getValue(t,s);for(let a=n,r=s;a!==r;++a)t[a]=t[s+a%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,s,a){if(s>=.5)for(let r=0;r!==a;++r)e[t+r]=e[n+r]}_slerp(e,t,n,s){Rs.slerpFlat(e,t,e,t,e,n,s)}_slerpAdditive(e,t,n,s,a){const r=this._workIndex*a;Rs.multiplyQuaternionsFlat(e,r,e,t,e,n),Rs.slerpFlat(e,t,e,t,e,r,s)}_lerp(e,t,n,s,a){const r=1-s;for(let l=0;l!==a;++l){const c=t+l;e[c]=e[c]*r+e[n+l]*s}}_lerpAdditive(e,t,n,s,a){for(let r=0;r!==a;++r){const l=t+r;e[l]=e[l]+e[n+r]*s}}}const _T="\\[\\]\\.:\\/",NI=new RegExp("["+_T+"]","g"),xT="[^"+_T+"]",PI="[^"+_T.replace("\\.","")+"]",II=/((?:WC+[\/:])*)/.source.replace("WC",xT),FI=/(WCOD+)?/.source.replace("WCOD",PI),zI=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",xT),GI=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",xT),HI=new RegExp("^"+II+FI+zI+GI+"$"),VI=["material","materials","bones","map"];class kI{constructor(e,t,n){const s=n||Xn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,s=this._bindings[n];s!==void 0&&s.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let s=this._targetGroup.nCachedObjects_,a=n.length;s!==a;++s)n[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Xn{constructor(e,t,n){this.path=t,this.parsedPath=n||Xn.parseTrackName(t),this.node=Xn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Xn.Composite(e,t,n):new Xn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(NI,"")}static parseTrackName(e){const t=HI.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=n.nodeName&&n.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const a=n.nodeName.substring(s+1);VI.indexOf(a)!==-1&&(n.nodeName=n.nodeName.substring(0,s),n.objectName=a)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(a){for(let r=0;r<a.length;r++){const l=a[r];if(l.name===t||l.uuid===t)return l;const c=n(l.children);if(c)return c}return null},s=n(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let s=0,a=n.length;s!==a;++s)e[t++]=n[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let s=0,a=n.length;s!==a;++s)n[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,a=n.length;s!==a;++s)n[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let s=0,a=n.length;s!==a;++s)n[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,s=t.propertyName;let a=t.propertyIndex;if(e||(e=Xn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let f=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===f){f=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const r=e[s];if(r===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+s+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?l=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(a!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[a]!==void 0&&(a=e.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=r,this.propertyIndex=a}else r.fromArray!==void 0&&r.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=r):Array.isArray(r)?(c=this.BindingType.EntireArray,this.resolvedProperty=r):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Xn.Composite=kI;Xn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Xn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Xn.prototype.GetterByBindingType=[Xn.prototype._getValue_direct,Xn.prototype._getValue_array,Xn.prototype._getValue_arrayElement,Xn.prototype._getValue_toArray];Xn.prototype.SetterByBindingTypeAndVersioning=[[Xn.prototype._setValue_direct,Xn.prototype._setValue_direct_setNeedsUpdate,Xn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Xn.prototype._setValue_array,Xn.prototype._setValue_array_setNeedsUpdate,Xn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Xn.prototype._setValue_arrayElement,Xn.prototype._setValue_arrayElement_setNeedsUpdate,Xn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Xn.prototype._setValue_fromArray,Xn.prototype._setValue_fromArray_setNeedsUpdate,Xn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class XI{constructor(){this.isAnimationObjectGroup=!0,this.uuid=io(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,s=arguments.length;n!==s;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,s=this._parsedPaths,a=this._bindings,r=a.length;let l,c=e.length,f=this.nCachedObjects_;for(let d=0,g=arguments.length;d!==g;++d){const v=arguments[d],y=v.uuid;let S=t[y];if(S===void 0){S=c++,t[y]=S,e.push(v);for(let A=0,M=r;A!==M;++A)a[A].push(new Xn(v,n[A],s[A]))}else if(S<f){l=e[S];const A=--f,M=e[A];t[M.uuid]=S,e[S]=M,t[y]=A,e[A]=v;for(let b=0,C=r;b!==C;++b){const w=a[b],R=w[A];let U=w[S];w[S]=R,U===void 0&&(U=new Xn(v,n[b],s[b])),w[A]=U}}else e[S]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let a=this.nCachedObjects_;for(let r=0,l=arguments.length;r!==l;++r){const c=arguments[r],f=c.uuid,d=t[f];if(d!==void 0&&d>=a){const g=a++,v=e[g];t[v.uuid]=d,e[d]=v,t[f]=g,e[g]=c;for(let y=0,S=s;y!==S;++y){const A=n[y],M=A[g],b=A[d];A[d]=M,A[g]=b}}}this.nCachedObjects_=a}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,s=n.length;let a=this.nCachedObjects_,r=e.length;for(let l=0,c=arguments.length;l!==c;++l){const f=arguments[l],d=f.uuid,g=t[d];if(g!==void 0)if(delete t[d],g<a){const v=--a,y=e[v],S=--r,A=e[S];t[y.uuid]=g,e[g]=y,t[A.uuid]=v,e[v]=A,e.pop();for(let M=0,b=s;M!==b;++M){const C=n[M],w=C[v],R=C[S];C[g]=w,C[v]=R,C.pop()}}else{const v=--r,y=e[v];v>0&&(t[y.uuid]=g),e[g]=y,e.pop();for(let S=0,A=s;S!==A;++S){const M=n[S];M[g]=M[v],M.pop()}}}this.nCachedObjects_=a}subscribe_(e,t){const n=this._bindingsIndicesByPath;let s=n[e];const a=this._bindings;if(s!==void 0)return a[s];const r=this._paths,l=this._parsedPaths,c=this._objects,f=c.length,d=this.nCachedObjects_,g=new Array(f);s=a.length,n[e]=s,r.push(e),l.push(t),a.push(g);for(let v=d,y=c.length;v!==y;++v){const S=c[v];g[v]=new Xn(S,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const s=this._paths,a=this._parsedPaths,r=this._bindings,l=r.length-1,c=r[l],f=e[l];t[f]=n,r[n]=c,r.pop(),a[n]=a[l],a.pop(),s[n]=s[l],s.pop()}}}class A4{constructor(e,t,n=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=s;const a=t.tracks,r=a.length,l=new Array(r),c={endingStart:dd,endingEnd:dd};for(let f=0;f!==r;++f){const d=a[f].createInterpolant(null);l[f]=d,d.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=_B,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const s=this._clip.duration,a=e._clip.duration,r=a/s,l=s/a;e.warp(1,r,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const s=this._mixer,a=s.time,r=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=s._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,f=l.sampleValues;return c[0]=a,c[1]=a+n,f[0]=e/r,f[1]=t/r,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,s){if(!this.enabled){this._updateWeight(e);return}const a=this._startTime;if(a!==null){const c=(e-a)*n;c<0||n===0?t=0:(this._startTime=null,t=n*c)}t*=this._updateTimeScale(e);const r=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case Hb:for(let d=0,g=c.length;d!==g;++d)c[d].evaluate(r),f[d].accumulateAdditive(l);break;case lS:default:for(let d=0,g=c.length;d!==g;++d)c[d].evaluate(r),f[d].accumulate(s,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const s=n.evaluate(e)[0];t*=s,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let s=this.time+e,a=this._loopCount;const r=n===xB;if(e===0)return a===-1?s:r&&(a&1)===1?t-s:s;if(n===yB){a===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(a===-1&&(e>=0?(a=0,this._setEndings(!0,this.repetitions===0,r)):this._setEndings(this.repetitions===0,!0,r)),s>=t||s<0){const l=Math.floor(s/t);s-=t*l,a+=Math.abs(l);const c=this.repetitions-a;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const f=e<0;this._setEndings(f,!f,r)}else this._setEndings(!1,!1,r);this._loopCount=a,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=s;if(r&&(a&1)===1)return t-s}return s}_setEndings(e,t,n){const s=this._interpolantSettings;n?(s.endingStart=pd,s.endingEnd=pd):(e?s.endingStart=this.zeroSlopeAtStart?pd:dd:s.endingStart=dv,t?s.endingEnd=this.zeroSlopeAtEnd?pd:dd:s.endingEnd=dv)}_scheduleFading(e,t,n){const s=this._mixer,a=s.time;let r=this._weightInterpolant;r===null&&(r=s._lendControlInterpolant(),this._weightInterpolant=r);const l=r.parameterPositions,c=r.sampleValues;return l[0]=a,c[0]=t,l[1]=a+e,c[1]=n,this}}const jI=new Float32Array(1);class YI extends uo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,s=e._clip.tracks,a=s.length,r=e._propertyBindings,l=e._interpolants,c=n.uuid,f=this._bindingsByRootAndName;let d=f[c];d===void 0&&(d={},f[c]=d);for(let g=0;g!==a;++g){const v=s[g],y=v.name;let S=d[y];if(S!==void 0)++S.referenceCount,r[g]=S;else{if(S=r[g],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,c,y));continue}const A=t&&t._propertyBindings[g].binding.parsedPath;S=new S4(Xn.create(n,y,A),v.ValueTypeName,v.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,c,y),r[g]=S}l[g].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,s=e._clip.uuid,a=this._actionsByClip[s];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,s,n)}const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const a=t[n];a.useCount++===0&&(this._lendBinding(a),a.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const a=t[n];--a.useCount===0&&(a.restoreOriginalState(),this._takeBackBinding(a))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const s=this._actions,a=this._actionsByClip;let r=a[t];if(r===void 0)r={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=r;else{const l=r.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=s.length,s.push(e),r.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],s=e._cacheIndex;n._cacheIndex=s,t[s]=n,t.pop(),e._cacheIndex=null;const a=e._clip.uuid,r=this._actionsByClip,l=r[a],c=l.knownActions,f=c[c.length-1],d=e._byClipCacheIndex;f._byClipCacheIndex=d,c[d]=f,c.pop(),e._byClipCacheIndex=null;const g=l.actionByRoot,v=(e._localRoot||this._root).uuid;delete g[v],c.length===0&&delete r[a],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,s=t.length;n!==s;++n){const a=t[n];--a.referenceCount===0&&this._removeInactiveBinding(a)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,s=this._nActiveActions++,a=t[s];e._cacheIndex=s,t[s]=e,a._cacheIndex=n,t[n]=a}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,s=--this._nActiveActions,a=t[s];e._cacheIndex=s,t[s]=e,a._cacheIndex=n,t[n]=a}_addInactiveBinding(e,t,n){const s=this._bindingsByRootAndName,a=this._bindings;let r=s[t];r===void 0&&(r={},s[t]=r),r[n]=e,e._cacheIndex=a.length,a.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,s=n.rootNode.uuid,a=n.path,r=this._bindingsByRootAndName,l=r[s],c=t[t.length-1],f=e._cacheIndex;c._cacheIndex=f,t[f]=c,t.pop(),delete l[a],Object.keys(l).length===0&&delete r[s]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,s=this._nActiveBindings++,a=t[s];e._cacheIndex=s,t[s]=e,a._cacheIndex=n,t[n]=a}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,s=--this._nActiveBindings,a=t[s];e._cacheIndex=s,t[s]=e,a._cacheIndex=n,t[n]=a}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new cT(new Float32Array(2),new Float32Array(2),1,jI),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,s=--this._nActiveControlInterpolants,a=t[s];e.__cacheIndex=s,t[s]=e,a.__cacheIndex=n,t[n]=a}clipAction(e,t,n){const s=t||this._root,a=s.uuid;let r=typeof e=="string"?zm.findByName(s,e):e;const l=r!==null?r.uuid:e,c=this._actionsByClip[l];let f=null;if(n===void 0&&(r!==null?n=r.blendMode:n=lS),c!==void 0){const g=c.actionByRoot[a];if(g!==void 0&&g.blendMode===n)return g;f=c.knownActions[0],r===null&&(r=f._clip)}if(r===null)return null;const d=new A4(this,r,t,n);return this._bindAction(d,f),this._addInactiveAction(d,l,a),d}existingAction(e,t){const n=t||this._root,s=n.uuid,a=typeof e=="string"?zm.findByName(n,e):e,r=a?a.uuid:e,l=this._actionsByClip[r];return l!==void 0&&l.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,s=this.time+=e,a=Math.sign(e),r=this._accuIndex^=1;for(let f=0;f!==n;++f)t[f]._update(s,e,a,r);const l=this._bindings,c=this._nActiveBindings;for(let f=0;f!==c;++f)l[f].apply(r);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,s=this._actionsByClip,a=s[n];if(a!==void 0){const r=a.knownActions;for(let l=0,c=r.length;l!==c;++l){const f=r[l];this._deactivateAction(f);const d=f._cacheIndex,g=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,g._cacheIndex=d,t[d]=g,t.pop(),this._removeInactiveBindingsForAction(f)}delete s[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const r in n){const l=n[r].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const s=this._bindingsByRootAndName,a=s[t];if(a!==void 0)for(const r in a){const l=a[r];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class WI extends Yb{constructor(e=1,t=1,n=1,s={}){super(e,t,s),this.isRenderTarget3D=!0,this.depth=n,this.texture=new uS(null,e,t,n),this._setTextureOptions(s),this.texture.isRenderTargetTexture=!0}}class rn{constructor(e){this.value=e}clone(){return new rn(this.value.clone===void 0?this.value:this.value.clone())}}let qI=0;class KI extends uo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:qI++}),this.name="",this.usage=mv,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,s=t.length;n<s;n++){const a=Array.isArray(t[n])?t[n]:[t[n]];for(let r=0;r<a.length;r++)this.uniforms.push(a[r].clone())}return this}clone(){return new this.constructor().copy(this)}}class JI extends Xv{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class ZI{constructor(e,t,n,s,a){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=s,this.count=a,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const S3=new Ft;class M4{constructor(e,t,n=0,s=1/0){this.ray=new Vd(e,t),this.near=n,this.far=s,this.camera=null,this.layers=new Pm,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return S3.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(S3),this}intersectObject(e,t=!0,n=[]){return UM(e,this,n,t),n.sort(A3),n}intersectObjects(e,t=!0,n=[]){for(let s=0,a=e.length;s<a;s++)UM(e[s],this,n,t);return n.sort(A3),n}}function A3(i,e){return i.distance-e.distance}function UM(i,e,t,n){let s=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(s=!1),s===!0&&n===!0){const a=i.children;for(let r=0,l=a.length;r<l;r++)UM(a[r],e,t,!0)}}class LM{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=un(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(un(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class QI{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class ST{constructor(e,t,n,s){ST.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,s)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,s){const a=this.elements;return a[0]=e,a[2]=t,a[1]=n,a[3]=s,this}}const M3=new tt;class $I{constructor(e=new tt(1/0,1/0),t=new tt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=M3.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,M3).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const b3=new le,l_=new le;class e8{constructor(e=new le,t=new le){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){b3.subVectors(e,this.start),l_.subVectors(this.end,this.start);const n=l_.dot(l_);let a=l_.dot(b3)/n;return t&&(a=un(a,0,1)),a}closestPointToPoint(e,t,n){const s=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const T3=new le;class t8 extends In{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new $t,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let r=0,l=1,c=32;r<c;r++,l++){const f=r/c*Math.PI*2,d=l/c*Math.PI*2;s.push(Math.cos(f),Math.sin(f),1,Math.cos(d),Math.sin(d),1)}n.setAttribute("position",new Dt(s,3));const a=new ma({fog:!1,toneMapped:!1});this.cone=new Fl(n,a),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),T3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(T3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Af=new le,c_=new Ft,g2=new Ft;class n8 extends Fl{constructor(e){const t=b4(e),n=new $t,s=[],a=[],r=new St(0,0,1),l=new St(0,1,0);for(let f=0;f<t.length;f++){const d=t[f];d.parent&&d.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),a.push(r.r,r.g,r.b),a.push(l.r,l.g,l.b))}n.setAttribute("position",new Dt(s,3)),n.setAttribute("color",new Dt(a,3));const c=new ma({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,s=n.getAttribute("position");g2.copy(this.root.matrixWorld).invert();for(let a=0,r=0;a<t.length;a++){const l=t[a];l.parent&&l.parent.isBone&&(c_.multiplyMatrices(g2,l.matrixWorld),Af.setFromMatrixPosition(c_),s.setXYZ(r,Af.x,Af.y,Af.z),c_.multiplyMatrices(g2,l.parent.matrixWorld),Af.setFromMatrixPosition(c_),s.setXYZ(r+1,Af.x,Af.y,Af.z),r+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function b4(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...b4(i.children[t]));return e}class i8 extends Di{constructor(e,t,n){const s=new Jv(t,4,2),a=new La({wireframe:!0,fog:!1,toneMapped:!1});super(s,a),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const s8=new le,E3=new St,C3=new St;class a8 extends In{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const s=new qv(t);s.rotateY(Math.PI*.5),this.material=new La({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const a=s.getAttribute("position"),r=new Float32Array(a.count*3);s.setAttribute("color",new Fn(r,3)),this.add(new Di(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");E3.copy(this.light.color),C3.copy(this.light.groundColor);for(let n=0,s=t.count;n<s;n++){const a=n<s/2?E3:C3;t.setXYZ(n,a.r,a.g,a.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(s8.setFromMatrixPosition(this.light.matrixWorld).negate())}}class r8 extends Fl{constructor(e=10,t=10,n=4473924,s=8947848){n=new St(n),s=new St(s);const a=t/2,r=e/t,l=e/2,c=[],f=[];for(let v=0,y=0,S=-l;v<=t;v++,S+=r){c.push(-l,0,S,l,0,S),c.push(S,0,-l,S,0,l);const A=v===a?n:s;A.toArray(f,y),y+=3,A.toArray(f,y),y+=3,A.toArray(f,y),y+=3,A.toArray(f,y),y+=3}const d=new $t;d.setAttribute("position",new Dt(c,3)),d.setAttribute("color",new Dt(f,3));const g=new ma({vertexColors:!0,toneMapped:!1});super(d,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class o8 extends Fl{constructor(e=10,t=16,n=8,s=64,a=4473924,r=8947848){a=new St(a),r=new St(r);const l=[],c=[];if(t>1)for(let g=0;g<t;g++){const v=g/t*(Math.PI*2),y=Math.sin(v)*e,S=Math.cos(v)*e;l.push(0,0,0),l.push(y,0,S);const A=g&1?a:r;c.push(A.r,A.g,A.b),c.push(A.r,A.g,A.b)}for(let g=0;g<n;g++){const v=g&1?a:r,y=e-e/n*g;for(let S=0;S<s;S++){let A=S/s*(Math.PI*2),M=Math.sin(A)*y,b=Math.cos(A)*y;l.push(M,0,b),c.push(v.r,v.g,v.b),A=(S+1)/s*(Math.PI*2),M=Math.sin(A)*y,b=Math.cos(A)*y,l.push(M,0,b),c.push(v.r,v.g,v.b)}}const f=new $t;f.setAttribute("position",new Dt(l,3)),f.setAttribute("color",new Dt(c,3));const d=new ma({vertexColors:!0,toneMapped:!1});super(f,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const w3=new le,u_=new le,R3=new le;class l8 extends In{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new $t;s.setAttribute("position",new Dt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const a=new ma({fog:!1,toneMapped:!1});this.lightPlane=new Uc(s,a),this.add(this.lightPlane),s=new $t,s.setAttribute("position",new Dt([0,0,0,0,0,1],3)),this.targetLine=new Uc(s,a),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),w3.setFromMatrixPosition(this.light.matrixWorld),u_.setFromMatrixPosition(this.light.target.matrixWorld),R3.subVectors(u_,w3),this.lightPlane.lookAt(u_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(u_),this.targetLine.scale.z=R3.length()}}const f_=new le,ss=new Vv;class c8 extends Fl{constructor(e){const t=new $t,n=new ma({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],a=[],r={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(S,A){c(S),c(A)}function c(S){s.push(0,0,0),a.push(0,0,0),r[S]===void 0&&(r[S]=[]),r[S].push(s.length/3-1)}t.setAttribute("position",new Dt(s,3)),t.setAttribute("color",new Dt(a,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=r,this.update();const f=new St(16755200),d=new St(16711680),g=new St(43775),v=new St(16777215),y=new St(3355443);this.setColors(f,d,g,v,y)}setColors(e,t,n,s,a){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,n.r,n.g,n.b),l.setXYZ(33,n.r,n.g,n.b),l.setXYZ(34,n.r,n.g,n.b),l.setXYZ(35,n.r,n.g,n.b),l.setXYZ(36,n.r,n.g,n.b),l.setXYZ(37,n.r,n.g,n.b),l.setXYZ(38,s.r,s.g,s.b),l.setXYZ(39,s.r,s.g,s.b),l.setXYZ(40,a.r,a.g,a.b),l.setXYZ(41,a.r,a.g,a.b),l.setXYZ(42,a.r,a.g,a.b),l.setXYZ(43,a.r,a.g,a.b),l.setXYZ(44,a.r,a.g,a.b),l.setXYZ(45,a.r,a.g,a.b),l.setXYZ(46,a.r,a.g,a.b),l.setXYZ(47,a.r,a.g,a.b),l.setXYZ(48,a.r,a.g,a.b),l.setXYZ(49,a.r,a.g,a.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,n=1,s=1;ss.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const a=this.camera.coordinateSystem===zo?-1:0;ps("c",t,e,ss,0,0,a),ps("t",t,e,ss,0,0,1),ps("n1",t,e,ss,-1,-1,a),ps("n2",t,e,ss,n,-1,a),ps("n3",t,e,ss,-1,s,a),ps("n4",t,e,ss,n,s,a),ps("f1",t,e,ss,-1,-1,1),ps("f2",t,e,ss,n,-1,1),ps("f3",t,e,ss,-1,s,1),ps("f4",t,e,ss,n,s,1),ps("u1",t,e,ss,n*.7,s*1.1,a),ps("u2",t,e,ss,-1*.7,s*1.1,a),ps("u3",t,e,ss,0,s*2,a),ps("cf1",t,e,ss,-1,0,1),ps("cf2",t,e,ss,n,0,1),ps("cf3",t,e,ss,0,-1,1),ps("cf4",t,e,ss,0,s,1),ps("cn1",t,e,ss,-1,0,a),ps("cn2",t,e,ss,n,0,a),ps("cn3",t,e,ss,0,-1,a),ps("cn4",t,e,ss,0,s,a),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ps(i,e,t,n,s,a,r){f_.set(s,a,r).unproject(n);const l=e[i];if(l!==void 0){const c=t.getAttribute("position");for(let f=0,d=l.length;f<d;f++)c.setXYZ(l[f],f_.x,f_.y,f_.z)}}const h_=new Ds;class u8 extends Fl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),a=new $t;a.setIndex(new Fn(n,1)),a.setAttribute("position",new Fn(s,3)),super(a,new ma({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&h_.setFromObject(this.object),h_.isEmpty())return;const e=h_.min,t=h_.max,n=this.geometry.attributes.position,s=n.array;s[0]=t.x,s[1]=t.y,s[2]=t.z,s[3]=e.x,s[4]=t.y,s[5]=t.z,s[6]=e.x,s[7]=e.y,s[8]=t.z,s[9]=t.x,s[10]=e.y,s[11]=t.z,s[12]=t.x,s[13]=t.y,s[14]=e.z,s[15]=e.x,s[16]=t.y,s[17]=e.z,s[18]=e.x,s[19]=e.y,s[20]=e.z,s[21]=t.x,s[22]=e.y,s[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class f8 extends Fl{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],a=new $t;a.setIndex(new Fn(n,1)),a.setAttribute("position",new Dt(s,3)),super(a,new ma({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class h8 extends Uc{constructor(e,t=1,n=16776960){const s=n,a=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],r=new $t;r.setAttribute("position",new Dt(a,3)),r.computeBoundingSphere(),super(r,new ma({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new $t;c.setAttribute("position",new Dt(l,3)),c.computeBoundingSphere(),this.add(new Di(c,new La({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const D3=new le;let d_,v2;class d8 extends In{constructor(e=new le(0,0,1),t=new le(0,0,0),n=1,s=16776960,a=n*.2,r=a*.2){super(),this.type="ArrowHelper",d_===void 0&&(d_=new $t,d_.setAttribute("position",new Dt([0,0,0,0,1,0],3)),v2=new Wv(.5,1,5,1),v2.translate(0,-.5,0)),this.position.copy(t),this.line=new Uc(d_,new ma({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Di(v2,new La({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,a,r)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{D3.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(D3,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class p8 extends Fl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new $t;s.setAttribute("position",new Dt(t,3)),s.setAttribute("color",new Dt(n,3));const a=new ma({vertexColors:!0,toneMapped:!1});super(s,a),this.type="AxesHelper"}setColors(e,t,n){const s=new St,a=this.geometry.attributes.color.array;return s.set(e),s.toArray(a,0),s.toArray(a,3),s.set(t),s.toArray(a,6),s.toArray(a,9),s.set(n),s.toArray(a,12),s.toArray(a,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class m8{constructor(){this.type="ShapePath",this.color=new St,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Ux,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,s){return this.currentPath.quadraticCurveTo(e,t,n,s),this}bezierCurveTo(e,t,n,s,a,r){return this.currentPath.bezierCurveTo(e,t,n,s,a,r),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(b){const C=[];for(let w=0,R=b.length;w<R;w++){const U=b[w],O=new Lf;O.curves=U.curves,C.push(O)}return C}function n(b,C){const w=C.length;let R=!1;for(let U=w-1,O=0;O<w;U=O++){let I=C[U],P=C[O],N=P.x-I.x,L=P.y-I.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(I=C[O],N=-N,P=C[U],L=-L),b.y<I.y||b.y>P.y)continue;if(b.y===I.y){if(b.x===I.x)return!0}else{const k=L*(b.x-I.x)-N*(b.y-I.y);if(k===0)return!0;if(k<0)continue;R=!R}}else{if(b.y!==I.y)continue;if(P.x<=b.x&&b.x<=I.x||I.x<=b.x&&b.x<=P.x)return!0}}return R}const s=Ol.isClockWise,a=this.subPaths;if(a.length===0)return[];let r,l,c;const f=[];if(a.length===1)return l=a[0],c=new Lf,c.curves=l.curves,f.push(c),f;let d=!s(a[0].getPoints());d=e?!d:d;const g=[],v=[];let y=[],S=0,A;v[S]=void 0,y[S]=[];for(let b=0,C=a.length;b<C;b++)l=a[b],A=l.getPoints(),r=s(A),r=e?!r:r,r?(!d&&v[S]&&S++,v[S]={s:new Lf,p:A},v[S].s.curves=l.curves,d&&S++,y[S]=[]):y[S].push({h:l,p:A[0]});if(!v[0])return t(a);if(v.length>1){let b=!1,C=0;for(let w=0,R=v.length;w<R;w++)g[w]=[];for(let w=0,R=v.length;w<R;w++){const U=y[w];for(let O=0;O<U.length;O++){const I=U[O];let P=!0;for(let N=0;N<v.length;N++)n(I.p,v[N].p)&&(w!==N&&C++,P?(P=!1,g[N].push(I)):b=!0);P&&g[w].push(I)}}C>0&&b===!1&&(y=g)}let M;for(let b=0,C=v.length;b<C;b++){c=v[b].s,f.push(c),M=y[b];for(let w=0,R=M.length;w<R;w++)c.holes.push(M[w].h)}return f}}class g8 extends uo{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function v8(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function y8(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function _8(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function OM(i,e,t,n){const s=x8(n);switch(t){case Ib:return i*e;case aS:return i*e/s.components*s.byteLength;case Hv:return i*e/s.components*s.byteLength;case zb:return i*e*2/s.components*s.byteLength;case rS:return i*e*2/s.components*s.byteLength;case Fb:return i*e*3/s.components*s.byteLength;case Ua:return i*e*4/s.components*s.byteLength;case oS:return i*e*4/s.components*s.byteLength;case Yg:case Wg:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case qg:case Kg:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case ix:case ax:return Math.max(i,16)*Math.max(e,8)/4;case nx:case sx:return Math.max(i,8)*Math.max(e,8)/2;case rx:case ox:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case lx:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case cx:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case ux:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case fx:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case hx:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case dx:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case px:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case mx:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case gx:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case vx:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case yx:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case _x:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case xx:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case Sx:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case Ax:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case Jg:case Mx:case bx:return Math.ceil(i/4)*Math.ceil(e/4)*16;case Gb:case Tx:return Math.ceil(i/4)*Math.ceil(e/4)*8;case Ex:case Cx:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function x8(i){switch(i){case Gs:case Ob:return{byteLength:1,components:1};case Bm:case Nb:case Ll:return{byteLength:2,components:1};case iS:case sS:return{byteLength:2,components:4};case Bc:case nS:case Zs:return{byteLength:4,components:1};case Pb:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class S8{static contain(e,t){return v8(e,t)}static cover(e,t){return y8(e,t)}static fill(e){return _8(e)}static getByteLength(e,t,n,s){return OM(e,t,n,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:jf}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=jf);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function T4(){let i=null,e=!1,t=null,n=null;function s(a,r){t(a,r),n=i.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(s),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(a){t=a},setContext:function(a){i=a}}}function A8(i){const e=new WeakMap;function t(l,c){const f=l.array,d=l.usage,g=f.byteLength,v=i.createBuffer();i.bindBuffer(c,v),i.bufferData(c,f,d),l.onUploadCallback();let y;if(f instanceof Float32Array)y=i.FLOAT;else if(f instanceof Uint16Array)l.isFloat16BufferAttribute?y=i.HALF_FLOAT:y=i.UNSIGNED_SHORT;else if(f instanceof Int16Array)y=i.SHORT;else if(f instanceof Uint32Array)y=i.UNSIGNED_INT;else if(f instanceof Int32Array)y=i.INT;else if(f instanceof Int8Array)y=i.BYTE;else if(f instanceof Uint8Array)y=i.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)y=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:v,type:y,bytesPerElement:f.BYTES_PER_ELEMENT,version:l.version,size:g}}function n(l,c,f){const d=c.array,g=c.updateRanges;if(i.bindBuffer(f,l),g.length===0)i.bufferSubData(f,0,d);else{g.sort((y,S)=>y.start-S.start);let v=0;for(let y=1;y<g.length;y++){const S=g[v],A=g[y];A.start<=S.start+S.count+1?S.count=Math.max(S.count,A.start+A.count-S.start):(++v,g[v]=A)}g.length=v+1;for(let y=0,S=g.length;y<S;y++){const A=g[y];i.bufferSubData(f,A.start*d.BYTES_PER_ELEMENT,d,A.start,A.count)}c.clearUpdateRanges()}c.onUploadCallback()}function s(l){return l.isInterleavedBufferAttribute&&(l=l.data),e.get(l)}function a(l){l.isInterleavedBufferAttribute&&(l=l.data);const c=e.get(l);c&&(i.deleteBuffer(c.buffer),e.delete(l))}function r(l,c){if(l.isInterleavedBufferAttribute&&(l=l.data),l.isGLBufferAttribute){const d=e.get(l);(!d||d.version<l.version)&&e.set(l,{buffer:l.buffer,type:l.type,bytesPerElement:l.elementSize,version:l.version});return}const f=e.get(l);if(f===void 0)e.set(l,t(l,c));else if(f.version<l.version){if(f.size!==l.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(f.buffer,l,c),f.version=l.version}}return{get:s,remove:a,update:r}}var M8=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,b8=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,T8=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,E8=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,C8=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,w8=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,R8=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,D8=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,B8=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,U8=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,L8=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,O8=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,N8=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,P8=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,I8=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,F8=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,z8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,G8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,H8=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,V8=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,k8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,X8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,j8=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Y8=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,W8=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,q8=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,K8=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,J8=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Z8=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Q8=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,$8="gl_FragColor = linearToOutputTexel( gl_FragColor );",e6=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,t6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,n6=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,i6=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,s6=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,a6=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,r6=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,o6=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,l6=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,c6=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,u6=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,f6=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,h6=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,d6=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,p6=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,m6=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,g6=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,v6=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,y6=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,_6=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,x6=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,S6=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,A6=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,M6=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,b6=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,T6=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,E6=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,C6=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,w6=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,R6=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,D6=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,B6=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,U6=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,L6=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,O6=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,N6=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,P6=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,I6=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,F6=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,z6=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,G6=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,H6=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,V6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,k6=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,X6=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,j6=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Y6=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,W6=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,q6=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,K6=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,J6=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Z6=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Q6=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,$6=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,eF=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,tF=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,nF=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,iF=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,sF=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,aF=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,rF=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,oF=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,lF=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,cF=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,uF=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,fF=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,hF=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,dF=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,pF=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,mF=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,gF=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,vF=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,yF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_F=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,xF=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,SF=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const AF=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,MF=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,TF=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,CF=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wF=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,RF=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,DF=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,BF=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,UF=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,LF=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,OF=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,NF=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,PF=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,IF=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,FF=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zF=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GF=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,HF=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VF=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,kF=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,XF=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jF=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YF=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,WF=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qF=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KF=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JF=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ZF=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,QF=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$F=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ez=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,pn={alphahash_fragment:M8,alphahash_pars_fragment:b8,alphamap_fragment:T8,alphamap_pars_fragment:E8,alphatest_fragment:C8,alphatest_pars_fragment:w8,aomap_fragment:R8,aomap_pars_fragment:D8,batching_pars_vertex:B8,batching_vertex:U8,begin_vertex:L8,beginnormal_vertex:O8,bsdfs:N8,iridescence_fragment:P8,bumpmap_pars_fragment:I8,clipping_planes_fragment:F8,clipping_planes_pars_fragment:z8,clipping_planes_pars_vertex:G8,clipping_planes_vertex:H8,color_fragment:V8,color_pars_fragment:k8,color_pars_vertex:X8,color_vertex:j8,common:Y8,cube_uv_reflection_fragment:W8,defaultnormal_vertex:q8,displacementmap_pars_vertex:K8,displacementmap_vertex:J8,emissivemap_fragment:Z8,emissivemap_pars_fragment:Q8,colorspace_fragment:$8,colorspace_pars_fragment:e6,envmap_fragment:t6,envmap_common_pars_fragment:n6,envmap_pars_fragment:i6,envmap_pars_vertex:s6,envmap_physical_pars_fragment:m6,envmap_vertex:a6,fog_vertex:r6,fog_pars_vertex:o6,fog_fragment:l6,fog_pars_fragment:c6,gradientmap_pars_fragment:u6,lightmap_pars_fragment:f6,lights_lambert_fragment:h6,lights_lambert_pars_fragment:d6,lights_pars_begin:p6,lights_toon_fragment:g6,lights_toon_pars_fragment:v6,lights_phong_fragment:y6,lights_phong_pars_fragment:_6,lights_physical_fragment:x6,lights_physical_pars_fragment:S6,lights_fragment_begin:A6,lights_fragment_maps:M6,lights_fragment_end:b6,logdepthbuf_fragment:T6,logdepthbuf_pars_fragment:E6,logdepthbuf_pars_vertex:C6,logdepthbuf_vertex:w6,map_fragment:R6,map_pars_fragment:D6,map_particle_fragment:B6,map_particle_pars_fragment:U6,metalnessmap_fragment:L6,metalnessmap_pars_fragment:O6,morphinstance_vertex:N6,morphcolor_vertex:P6,morphnormal_vertex:I6,morphtarget_pars_vertex:F6,morphtarget_vertex:z6,normal_fragment_begin:G6,normal_fragment_maps:H6,normal_pars_fragment:V6,normal_pars_vertex:k6,normal_vertex:X6,normalmap_pars_fragment:j6,clearcoat_normal_fragment_begin:Y6,clearcoat_normal_fragment_maps:W6,clearcoat_pars_fragment:q6,iridescence_pars_fragment:K6,opaque_fragment:J6,packing:Z6,premultiplied_alpha_fragment:Q6,project_vertex:$6,dithering_fragment:eF,dithering_pars_fragment:tF,roughnessmap_fragment:nF,roughnessmap_pars_fragment:iF,shadowmap_pars_fragment:sF,shadowmap_pars_vertex:aF,shadowmap_vertex:rF,shadowmask_pars_fragment:oF,skinbase_vertex:lF,skinning_pars_vertex:cF,skinning_vertex:uF,skinnormal_vertex:fF,specularmap_fragment:hF,specularmap_pars_fragment:dF,tonemapping_fragment:pF,tonemapping_pars_fragment:mF,transmission_fragment:gF,transmission_pars_fragment:vF,uv_pars_fragment:yF,uv_pars_vertex:_F,uv_vertex:xF,worldpos_vertex:SF,background_vert:AF,background_frag:MF,backgroundCube_vert:bF,backgroundCube_frag:TF,cube_vert:EF,cube_frag:CF,depth_vert:wF,depth_frag:RF,distanceRGBA_vert:DF,distanceRGBA_frag:BF,equirect_vert:UF,equirect_frag:LF,linedashed_vert:OF,linedashed_frag:NF,meshbasic_vert:PF,meshbasic_frag:IF,meshlambert_vert:FF,meshlambert_frag:zF,meshmatcap_vert:GF,meshmatcap_frag:HF,meshnormal_vert:VF,meshnormal_frag:kF,meshphong_vert:XF,meshphong_frag:jF,meshphysical_vert:YF,meshphysical_frag:WF,meshtoon_vert:qF,meshtoon_frag:KF,points_vert:JF,points_frag:ZF,shadow_vert:QF,shadow_frag:$F,sprite_vert:ez,sprite_frag:tz},Et={common:{diffuse:{value:new St(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new cn},alphaMap:{value:null},alphaMapTransform:{value:new cn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new cn}},envmap:{envMap:{value:null},envMapRotation:{value:new cn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new cn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new cn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new cn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new cn},normalScale:{value:new tt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new cn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new cn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new cn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new cn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new St(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new St(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new cn},alphaTest:{value:0},uvTransform:{value:new cn}},sprite:{diffuse:{value:new St(16777215)},opacity:{value:1},center:{value:new tt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new cn},alphaMap:{value:null},alphaMapTransform:{value:new cn},alphaTest:{value:0}}},Dl={basic:{uniforms:nr([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.fog]),vertexShader:pn.meshbasic_vert,fragmentShader:pn.meshbasic_frag},lambert:{uniforms:nr([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,Et.lights,{emissive:{value:new St(0)}}]),vertexShader:pn.meshlambert_vert,fragmentShader:pn.meshlambert_frag},phong:{uniforms:nr([Et.common,Et.specularmap,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,Et.lights,{emissive:{value:new St(0)},specular:{value:new St(1118481)},shininess:{value:30}}]),vertexShader:pn.meshphong_vert,fragmentShader:pn.meshphong_frag},standard:{uniforms:nr([Et.common,Et.envmap,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.roughnessmap,Et.metalnessmap,Et.fog,Et.lights,{emissive:{value:new St(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:pn.meshphysical_vert,fragmentShader:pn.meshphysical_frag},toon:{uniforms:nr([Et.common,Et.aomap,Et.lightmap,Et.emissivemap,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.gradientmap,Et.fog,Et.lights,{emissive:{value:new St(0)}}]),vertexShader:pn.meshtoon_vert,fragmentShader:pn.meshtoon_frag},matcap:{uniforms:nr([Et.common,Et.bumpmap,Et.normalmap,Et.displacementmap,Et.fog,{matcap:{value:null}}]),vertexShader:pn.meshmatcap_vert,fragmentShader:pn.meshmatcap_frag},points:{uniforms:nr([Et.points,Et.fog]),vertexShader:pn.points_vert,fragmentShader:pn.points_frag},dashed:{uniforms:nr([Et.common,Et.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:pn.linedashed_vert,fragmentShader:pn.linedashed_frag},depth:{uniforms:nr([Et.common,Et.displacementmap]),vertexShader:pn.depth_vert,fragmentShader:pn.depth_frag},normal:{uniforms:nr([Et.common,Et.bumpmap,Et.normalmap,Et.displacementmap,{opacity:{value:1}}]),vertexShader:pn.meshnormal_vert,fragmentShader:pn.meshnormal_frag},sprite:{uniforms:nr([Et.sprite,Et.fog]),vertexShader:pn.sprite_vert,fragmentShader:pn.sprite_frag},background:{uniforms:{uvTransform:{value:new cn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:pn.background_vert,fragmentShader:pn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new cn}},vertexShader:pn.backgroundCube_vert,fragmentShader:pn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:pn.cube_vert,fragmentShader:pn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:pn.equirect_vert,fragmentShader:pn.equirect_frag},distanceRGBA:{uniforms:nr([Et.common,Et.displacementmap,{referencePosition:{value:new le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:pn.distanceRGBA_vert,fragmentShader:pn.distanceRGBA_frag},shadow:{uniforms:nr([Et.lights,Et.fog,{color:{value:new St(0)},opacity:{value:1}}]),vertexShader:pn.shadow_vert,fragmentShader:pn.shadow_frag}};Dl.physical={uniforms:nr([Dl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new cn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new cn},clearcoatNormalScale:{value:new tt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new cn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new cn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new cn},sheen:{value:0},sheenColor:{value:new St(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new cn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new cn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new cn},transmissionSamplerSize:{value:new tt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new cn},attenuationDistance:{value:0},attenuationColor:{value:new St(0)},specularColor:{value:new St(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new cn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new cn},anisotropyVector:{value:new tt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new cn}}]),vertexShader:pn.meshphysical_vert,fragmentShader:pn.meshphysical_frag};const p_={r:0,b:0,g:0},Qh=new ro,nz=new Ft;function iz(i,e,t,n,s,a,r){const l=new St(0);let c=a===!0?0:1,f,d,g=null,v=0,y=null;function S(w){let R=w.isScene===!0?w.background:null;return R&&R.isTexture&&(R=(w.backgroundBlurriness>0?t:e).get(R)),R}function A(w){let R=!1;const U=S(w);U===null?b(l,c):U&&U.isColor&&(b(U,1),R=!0);const O=i.xr.getEnvironmentBlendMode();O==="additive"?n.buffers.color.setClear(0,0,0,1,r):O==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,r),(i.autoClear||R)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function M(w,R){const U=S(R);U&&(U.isCubeTexture||U.mapping===Qm)?(d===void 0&&(d=new Di(new kd(1,1,1),new ls({name:"BackgroundCubeMaterial",uniforms:Im(Dl.backgroundCube.uniforms),vertexShader:Dl.backgroundCube.vertexShader,fragmentShader:Dl.backgroundCube.fragmentShader,side:vs,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(O,I,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(d)),Qh.copy(R.backgroundRotation),Qh.x*=-1,Qh.y*=-1,Qh.z*=-1,U.isCubeTexture&&U.isRenderTargetTexture===!1&&(Qh.y*=-1,Qh.z*=-1),d.material.uniforms.envMap.value=U,d.material.uniforms.flipEnvMap.value=U.isCubeTexture&&U.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=R.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=R.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(nz.makeRotationFromEuler(Qh)),d.material.toneMapped=Nn.getTransfer(U.colorSpace)!==li,(g!==U||v!==U.version||y!==i.toneMapping)&&(d.material.needsUpdate=!0,g=U,v=U.version,y=i.toneMapping),d.layers.enableAll(),w.unshift(d,d.geometry,d.material,0,0,null)):U&&U.isTexture&&(f===void 0&&(f=new Di(new Ru(2,2),new ls({name:"BackgroundMaterial",uniforms:Im(Dl.background.uniforms),vertexShader:Dl.background.vertexShader,fragmentShader:Dl.background.fragmentShader,side:ao,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(f)),f.material.uniforms.t2D.value=U,f.material.uniforms.backgroundIntensity.value=R.backgroundIntensity,f.material.toneMapped=Nn.getTransfer(U.colorSpace)!==li,U.matrixAutoUpdate===!0&&U.updateMatrix(),f.material.uniforms.uvTransform.value.copy(U.matrix),(g!==U||v!==U.version||y!==i.toneMapping)&&(f.material.needsUpdate=!0,g=U,v=U.version,y=i.toneMapping),f.layers.enableAll(),w.unshift(f,f.geometry,f.material,0,0,null))}function b(w,R){w.getRGB(p_,OB(i)),n.buffers.color.setClear(p_.r,p_.g,p_.b,R,r)}function C(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),f!==void 0&&(f.geometry.dispose(),f.material.dispose(),f=void 0)}return{getClearColor:function(){return l},setClearColor:function(w,R=1){l.set(w),c=R,b(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(w){c=w,b(l,c)},render:A,addToRenderList:M,dispose:C}}function sz(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},s=v(null);let a=s,r=!1;function l(L,k,X,W,$){let ce=!1;const z=g(W,X,k);a!==z&&(a=z,f(a.object)),ce=y(L,W,X,$),ce&&S(L,W,X,$),$!==null&&e.update($,i.ELEMENT_ARRAY_BUFFER),(ce||r)&&(r=!1,R(L,k,X,W),$!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get($).buffer))}function c(){return i.createVertexArray()}function f(L){return i.bindVertexArray(L)}function d(L){return i.deleteVertexArray(L)}function g(L,k,X){const W=X.wireframe===!0;let $=n[L.id];$===void 0&&($={},n[L.id]=$);let ce=$[k.id];ce===void 0&&(ce={},$[k.id]=ce);let z=ce[W];return z===void 0&&(z=v(c()),ce[W]=z),z}function v(L){const k=[],X=[],W=[];for(let $=0;$<t;$++)k[$]=0,X[$]=0,W[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:X,attributeDivisors:W,object:L,attributes:{},index:null}}function y(L,k,X,W){const $=a.attributes,ce=k.attributes;let z=0;const q=X.getAttributes();for(const Q in q)if(q[Q].location>=0){const H=$[Q];let G=ce[Q];if(G===void 0&&(Q==="instanceMatrix"&&L.instanceMatrix&&(G=L.instanceMatrix),Q==="instanceColor"&&L.instanceColor&&(G=L.instanceColor)),H===void 0||H.attribute!==G||G&&H.data!==G.data)return!0;z++}return a.attributesNum!==z||a.index!==W}function S(L,k,X,W){const $={},ce=k.attributes;let z=0;const q=X.getAttributes();for(const Q in q)if(q[Q].location>=0){let H=ce[Q];H===void 0&&(Q==="instanceMatrix"&&L.instanceMatrix&&(H=L.instanceMatrix),Q==="instanceColor"&&L.instanceColor&&(H=L.instanceColor));const G={};G.attribute=H,H&&H.data&&(G.data=H.data),$[Q]=G,z++}a.attributes=$,a.attributesNum=z,a.index=W}function A(){const L=a.newAttributes;for(let k=0,X=L.length;k<X;k++)L[k]=0}function M(L){b(L,0)}function b(L,k){const X=a.newAttributes,W=a.enabledAttributes,$=a.attributeDivisors;X[L]=1,W[L]===0&&(i.enableVertexAttribArray(L),W[L]=1),$[L]!==k&&(i.vertexAttribDivisor(L,k),$[L]=k)}function C(){const L=a.newAttributes,k=a.enabledAttributes;for(let X=0,W=k.length;X<W;X++)k[X]!==L[X]&&(i.disableVertexAttribArray(X),k[X]=0)}function w(L,k,X,W,$,ce,z){z===!0?i.vertexAttribIPointer(L,k,X,$,ce):i.vertexAttribPointer(L,k,X,W,$,ce)}function R(L,k,X,W){A();const $=W.attributes,ce=X.getAttributes(),z=k.defaultAttributeValues;for(const q in ce){const Q=ce[q];if(Q.location>=0){let re=$[q];if(re===void 0&&(q==="instanceMatrix"&&L.instanceMatrix&&(re=L.instanceMatrix),q==="instanceColor"&&L.instanceColor&&(re=L.instanceColor)),re!==void 0){const H=re.normalized,G=re.itemSize,K=e.get(re);if(K===void 0)continue;const se=K.buffer,J=K.type,ne=K.bytesPerElement,ue=J===i.INT||J===i.UNSIGNED_INT||re.gpuType===nS;if(re.isInterleavedBufferAttribute){const pe=re.data,ve=pe.stride,Ve=re.offset;if(pe.isInstancedInterleavedBuffer){for(let ze=0;ze<Q.locationSize;ze++)b(Q.location+ze,pe.meshPerAttribute);L.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let ze=0;ze<Q.locationSize;ze++)M(Q.location+ze);i.bindBuffer(i.ARRAY_BUFFER,se);for(let ze=0;ze<Q.locationSize;ze++)w(Q.location+ze,G/Q.locationSize,J,H,ve*ne,(Ve+G/Q.locationSize*ze)*ne,ue)}else{if(re.isInstancedBufferAttribute){for(let pe=0;pe<Q.locationSize;pe++)b(Q.location+pe,re.meshPerAttribute);L.isInstancedMesh!==!0&&W._maxInstanceCount===void 0&&(W._maxInstanceCount=re.meshPerAttribute*re.count)}else for(let pe=0;pe<Q.locationSize;pe++)M(Q.location+pe);i.bindBuffer(i.ARRAY_BUFFER,se);for(let pe=0;pe<Q.locationSize;pe++)w(Q.location+pe,G/Q.locationSize,J,H,G*ne,G/Q.locationSize*pe*ne,ue)}}else if(z!==void 0){const H=z[q];if(H!==void 0)switch(H.length){case 2:i.vertexAttrib2fv(Q.location,H);break;case 3:i.vertexAttrib3fv(Q.location,H);break;case 4:i.vertexAttrib4fv(Q.location,H);break;default:i.vertexAttrib1fv(Q.location,H)}}}}C()}function U(){P();for(const L in n){const k=n[L];for(const X in k){const W=k[X];for(const $ in W)d(W[$].object),delete W[$];delete k[X]}delete n[L]}}function O(L){if(n[L.id]===void 0)return;const k=n[L.id];for(const X in k){const W=k[X];for(const $ in W)d(W[$].object),delete W[$];delete k[X]}delete n[L.id]}function I(L){for(const k in n){const X=n[k];if(X[L.id]===void 0)continue;const W=X[L.id];for(const $ in W)d(W[$].object),delete W[$];delete X[L.id]}}function P(){N(),r=!0,a!==s&&(a=s,f(a.object))}function N(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:l,reset:P,resetDefaultState:N,dispose:U,releaseStatesOfGeometry:O,releaseStatesOfProgram:I,initAttributes:A,enableAttribute:M,disableUnusedAttributes:C}}function az(i,e,t){let n;function s(f){n=f}function a(f,d){i.drawArrays(n,f,d),t.update(d,n,1)}function r(f,d,g){g!==0&&(i.drawArraysInstanced(n,f,d,g),t.update(d,n,g))}function l(f,d,g){if(g===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,f,0,d,0,g);let y=0;for(let S=0;S<g;S++)y+=d[S];t.update(y,n,1)}function c(f,d,g,v){if(g===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let S=0;S<f.length;S++)r(f[S],d[S],v[S]);else{y.multiDrawArraysInstancedWEBGL(n,f,0,d,0,v,0,g);let S=0;for(let A=0;A<g;A++)S+=d[A]*v[A];t.update(S,n,1)}}this.setMode=s,this.render=a,this.renderInstances=r,this.renderMultiDraw=l,this.renderMultiDrawInstances=c}function rz(i,e,t,n){let s;function a(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const I=e.get("EXT_texture_filter_anisotropic");s=i.getParameter(I.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function r(I){return!(I!==Ua&&n.convert(I)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function l(I){const P=I===Ll&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(I!==Gs&&n.convert(I)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&I!==Zs&&!P)}function c(I){if(I==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";I="mediump"}return I==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let f=t.precision!==void 0?t.precision:"highp";const d=c(f);d!==f&&(console.warn("THREE.WebGLRenderer:",f,"not supported, using",d,"instead."),f=d);const g=t.logarithmicDepthBuffer===!0,v=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),y=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),S=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),A=i.getParameter(i.MAX_TEXTURE_SIZE),M=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),b=i.getParameter(i.MAX_VERTEX_ATTRIBS),C=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),w=i.getParameter(i.MAX_VARYING_VECTORS),R=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),U=S>0,O=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:a,getMaxPrecision:c,textureFormatReadable:r,textureTypeReadable:l,precision:f,logarithmicDepthBuffer:g,reverseDepthBuffer:v,maxTextures:y,maxVertexTextures:S,maxTextureSize:A,maxCubemapSize:M,maxAttributes:b,maxVertexUniforms:C,maxVaryings:w,maxFragmentUniforms:R,vertexTextures:U,maxSamples:O}}function oz(i){const e=this;let t=null,n=0,s=!1,a=!1;const r=new gu,l=new cn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const y=g.length!==0||v||n!==0||s;return s=v,n=g.length,y},this.beginShadows=function(){a=!0,d(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(g,v){t=d(g,v,0)},this.setState=function(g,v,y){const S=g.clippingPlanes,A=g.clipIntersection,M=g.clipShadows,b=i.get(g);if(!s||S===null||S.length===0||a&&!M)a?d(null):f();else{const C=a?0:n,w=C*4;let R=b.clippingState||null;c.value=R,R=d(S,v,w,y);for(let U=0;U!==w;++U)R[U]=t[U];b.clippingState=R,this.numIntersection=A?this.numPlanes:0,this.numPlanes+=C}};function f(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function d(g,v,y,S){const A=g!==null?g.length:0;let M=null;if(A!==0){if(M=c.value,S!==!0||M===null){const b=y+A*4,C=v.matrixWorldInverse;l.getNormalMatrix(C),(M===null||M.length<b)&&(M=new Float32Array(b));for(let w=0,R=y;w!==A;++w,R+=4)r.copy(g[w]).applyMatrix4(C,l),r.normal.toArray(M,R),M[R+3]=r.constant}c.value=M,c.needsUpdate=!0}return e.numPlanes=A,e.numIntersection=0,M}}function lz(i){let e=new WeakMap;function t(r,l){return l===Rm?r.mapping=bu:l===hv&&(r.mapping=If),r}function n(r){if(r&&r.isTexture){const l=r.mapping;if(l===Rm||l===hv)if(e.has(r)){const c=e.get(r).texture;return t(c,r.mapping)}else{const c=r.image;if(c&&c.height>0){const f=new PB(c.height);return f.fromEquirectangularTexture(i,r),e.set(r,f),r.addEventListener("dispose",s),t(f.texture,r.mapping)}else return null}}return r}function s(r){const l=r.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function a(){e=new WeakMap}return{get:n,dispose:a}}const dm=4,B3=[.125,.215,.35,.446,.526,.582],fd=20,y2=new Au,U3=new St;let _2=null,x2=0,S2=0,A2=!1;const ld=(1+Math.sqrt(5))/2,rm=1/ld,L3=[new le(-ld,rm,0),new le(ld,rm,0),new le(-rm,0,ld),new le(rm,0,ld),new le(0,ld,-rm),new le(0,ld,rm),new le(-1,1,-1),new le(1,1,-1),new le(-1,1,1),new le(1,1,1)],cz=new le;class NM{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,s=100,a={}){const{size:r=256,position:l=cz}=a;_2=this._renderer.getRenderTarget(),x2=this._renderer.getActiveCubeFace(),S2=this._renderer.getActiveMipmapLevel(),A2=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(r);const c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(e,n,s,c,l),t>0&&this._blur(c,0,0,t),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=P3(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=N3(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_2,x2,S2),this._renderer.xr.enabled=A2,e.scissorTest=!1,m_(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===bu||e.mapping===If?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_2=this._renderer.getRenderTarget(),x2=this._renderer.getActiveCubeFace(),S2=this._renderer.getActiveMipmapLevel(),A2=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:ti,minFilter:ti,generateMipmaps:!1,type:Ll,format:Ua,colorSpace:Pl,depthBuffer:!1},s=O3(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=O3(e,t,n);const{_lodMax:a}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=uz(a)),this._blurMaterial=fz(a,e,t)}return s}_compileMaterial(e){const t=new Di(this._lodPlanes[0],e);this._renderer.compile(t,y2)}_sceneToCubeUV(e,t,n,s,a){const c=new Ji(90,1,t,n),f=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],g=this._renderer,v=g.autoClear,y=g.toneMapping;g.getClearColor(U3),g.toneMapping=Nl,g.autoClear=!1;const S=new La({name:"PMREM.Background",side:vs,depthWrite:!1,depthTest:!1}),A=new Di(new kd,S);let M=!1;const b=e.background;b?b.isColor&&(S.color.copy(b),e.background=null,M=!0):(S.color.copy(U3),M=!0);for(let C=0;C<6;C++){const w=C%3;w===0?(c.up.set(0,f[C],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x+d[C],a.y,a.z)):w===1?(c.up.set(0,0,f[C]),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y+d[C],a.z)):(c.up.set(0,f[C],0),c.position.set(a.x,a.y,a.z),c.lookAt(a.x,a.y,a.z+d[C]));const R=this._cubeSize;m_(s,w*R,C>2?R:0,R,R),g.setRenderTarget(s),M&&g.render(A,c),g.render(e,c)}A.geometry.dispose(),A.material.dispose(),g.toneMapping=y,g.autoClear=v,e.background=b}_textureToCubeUV(e,t){const n=this._renderer,s=e.mapping===bu||e.mapping===If;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=P3()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=N3());const a=s?this._cubemapMaterial:this._equirectMaterial,r=new Di(this._lodPlanes[0],a),l=a.uniforms;l.envMap.value=e;const c=this._cubeSize;m_(t,0,0,3*c,2*c),n.setRenderTarget(t),n.render(r,y2)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let a=1;a<s;a++){const r=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),l=L3[(s-a-1)%L3.length];this._blur(e,a-1,a,r,l)}t.autoClear=n}_blur(e,t,n,s,a){const r=this._pingPongRenderTarget;this._halfBlur(e,r,t,n,s,"latitudinal",a),this._halfBlur(r,e,n,n,s,"longitudinal",a)}_halfBlur(e,t,n,s,a,r,l){const c=this._renderer,f=this._blurMaterial;r!=="latitudinal"&&r!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,g=new Di(this._lodPlanes[s],f),v=f.uniforms,y=this._sizeLods[n]-1,S=isFinite(a)?Math.PI/(2*y):2*Math.PI/(2*fd-1),A=a/S,M=isFinite(a)?1+Math.floor(d*A):fd;M>fd&&console.warn(`sigmaRadians, ${a}, is too large and will clip, as it requested ${M} samples when the maximum is set to ${fd}`);const b=[];let C=0;for(let I=0;I<fd;++I){const P=I/A,N=Math.exp(-P*P/2);b.push(N),I===0?C+=N:I<M&&(C+=2*N)}for(let I=0;I<b.length;I++)b[I]=b[I]/C;v.envMap.value=e.texture,v.samples.value=M,v.weights.value=b,v.latitudinal.value=r==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:w}=this;v.dTheta.value=S,v.mipInt.value=w-n;const R=this._sizeLods[s],U=3*R*(s>w-dm?s-w+dm:0),O=4*(this._cubeSize-R);m_(t,U,O,3*R,2*R),c.setRenderTarget(t),c.render(g,y2)}}function uz(i){const e=[],t=[],n=[];let s=i;const a=i-dm+1+B3.length;for(let r=0;r<a;r++){const l=Math.pow(2,s);t.push(l);let c=1/l;r>i-dm?c=B3[r-i+dm-1]:r===0&&(c=0),n.push(c);const f=1/(l-2),d=-f,g=1+f,v=[d,d,g,d,g,g,d,d,g,g,d,g],y=6,S=6,A=3,M=2,b=1,C=new Float32Array(A*S*y),w=new Float32Array(M*S*y),R=new Float32Array(b*S*y);for(let O=0;O<y;O++){const I=O%3*2/3-1,P=O>2?0:-1,N=[I,P,0,I+2/3,P,0,I+2/3,P+1,0,I,P,0,I+2/3,P+1,0,I,P+1,0];C.set(N,A*S*O),w.set(v,M*S*O);const L=[O,O,O,O,O,O];R.set(L,b*S*O)}const U=new $t;U.setAttribute("position",new Fn(C,A)),U.setAttribute("uv",new Fn(w,M)),U.setAttribute("faceIndex",new Fn(R,b)),e.push(U),s>dm&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function O3(i,e,t){const n=new os(i,e,t);return n.texture.mapping=Qm,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function m_(i,e,t,n,s){i.viewport.set(e,t,n,s),i.scissor.set(e,t,n,s)}function fz(i,e,t){const n=new Float32Array(fd),s=new le(0,1,0);return new ls({name:"SphericalGaussianBlur",defines:{n:fd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:AT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:da,depthTest:!1,depthWrite:!1})}function N3(){return new ls({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:AT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:da,depthTest:!1,depthWrite:!1})}function P3(){return new ls({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:AT(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:da,depthTest:!1,depthWrite:!1})}function AT(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function hz(i){let e=new WeakMap,t=null;function n(l){if(l&&l.isTexture){const c=l.mapping,f=c===Rm||c===hv,d=c===bu||c===If;if(f||d){let g=e.get(l);const v=g!==void 0?g.texture.pmremVersion:0;if(l.isRenderTargetTexture&&l.pmremVersion!==v)return t===null&&(t=new NM(i)),g=f?t.fromEquirectangular(l,g):t.fromCubemap(l,g),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),g.texture;if(g!==void 0)return g.texture;{const y=l.image;return f&&y&&y.height>0||d&&y&&s(y)?(t===null&&(t=new NM(i)),g=f?t.fromEquirectangular(l):t.fromCubemap(l),g.texture.pmremVersion=l.pmremVersion,e.set(l,g),l.addEventListener("dispose",a),g.texture):null}}}return l}function s(l){let c=0;const f=6;for(let d=0;d<f;d++)l[d]!==void 0&&c++;return c===f}function a(l){const c=l.target;c.removeEventListener("dispose",a);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function r(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:r}}function dz(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let s;switch(n){case"WEBGL_depth_texture":s=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=i.getExtension(n)}return e[n]=s,s}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const s=t(n);return s===null&&Am("THREE.WebGLRenderer: "+n+" extension not supported."),s}}}function pz(i,e,t,n){const s={},a=new WeakMap;function r(g){const v=g.target;v.index!==null&&e.remove(v.index);for(const S in v.attributes)e.remove(v.attributes[S]);v.removeEventListener("dispose",r),delete s[v.id];const y=a.get(v);y&&(e.remove(y),a.delete(v)),n.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function l(g,v){return s[v.id]===!0||(v.addEventListener("dispose",r),s[v.id]=!0,t.memory.geometries++),v}function c(g){const v=g.attributes;for(const y in v)e.update(v[y],i.ARRAY_BUFFER)}function f(g){const v=[],y=g.index,S=g.attributes.position;let A=0;if(y!==null){const C=y.array;A=y.version;for(let w=0,R=C.length;w<R;w+=3){const U=C[w+0],O=C[w+1],I=C[w+2];v.push(U,O,O,I,I,U)}}else if(S!==void 0){const C=S.array;A=S.version;for(let w=0,R=C.length/3-1;w<R;w+=3){const U=w+0,O=w+1,I=w+2;v.push(U,O,O,I,I,U)}}else return;const M=new(DB(v)?qb:Wb)(v,1);M.version=A;const b=a.get(g);b&&e.remove(b),a.set(g,M)}function d(g){const v=a.get(g);if(v){const y=g.index;y!==null&&v.version<y.version&&f(g)}else f(g);return a.get(g)}return{get:l,update:c,getWireframeAttribute:d}}function mz(i,e,t){let n;function s(v){n=v}let a,r;function l(v){a=v.type,r=v.bytesPerElement}function c(v,y){i.drawElements(n,y,a,v*r),t.update(y,n,1)}function f(v,y,S){S!==0&&(i.drawElementsInstanced(n,y,a,v*r,S),t.update(y,n,S))}function d(v,y,S){if(S===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,y,0,a,v,0,S);let M=0;for(let b=0;b<S;b++)M+=y[b];t.update(M,n,1)}function g(v,y,S,A){if(S===0)return;const M=e.get("WEBGL_multi_draw");if(M===null)for(let b=0;b<v.length;b++)f(v[b]/r,y[b],A[b]);else{M.multiDrawElementsInstancedWEBGL(n,y,0,a,v,0,A,0,S);let b=0;for(let C=0;C<S;C++)b+=y[C]*A[C];t.update(b,n,1)}}this.setMode=s,this.setIndex=l,this.render=c,this.renderInstances=f,this.renderMultiDraw=d,this.renderMultiDrawInstances=g}function gz(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(a,r,l){switch(t.calls++,r){case i.TRIANGLES:t.triangles+=l*(a/3);break;case i.LINES:t.lines+=l*(a/2);break;case i.LINE_STRIP:t.lines+=l*(a-1);break;case i.LINE_LOOP:t.lines+=l*a;break;case i.POINTS:t.points+=l*a;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:n}}function vz(i,e,t){const n=new WeakMap,s=new wn;function a(r,l,c){const f=r.morphTargetInfluences,d=l.morphAttributes.position||l.morphAttributes.normal||l.morphAttributes.color,g=d!==void 0?d.length:0;let v=n.get(l);if(v===void 0||v.count!==g){let L=function(){P.dispose(),n.delete(l),l.removeEventListener("dispose",L)};var y=L;v!==void 0&&v.texture.dispose();const S=l.morphAttributes.position!==void 0,A=l.morphAttributes.normal!==void 0,M=l.morphAttributes.color!==void 0,b=l.morphAttributes.position||[],C=l.morphAttributes.normal||[],w=l.morphAttributes.color||[];let R=0;S===!0&&(R=1),A===!0&&(R=2),M===!0&&(R=3);let U=l.attributes.position.count*R,O=1;U>e.maxTextureSize&&(O=Math.ceil(U/e.maxTextureSize),U=e.maxTextureSize);const I=new Float32Array(U*O*4*g),P=new cS(I,U,O,g);P.type=Zs,P.needsUpdate=!0;const N=R*4;for(let k=0;k<g;k++){const X=b[k],W=C[k],$=w[k],ce=U*O*4*k;for(let z=0;z<X.count;z++){const q=z*N;S===!0&&(s.fromBufferAttribute(X,z),I[ce+q+0]=s.x,I[ce+q+1]=s.y,I[ce+q+2]=s.z,I[ce+q+3]=0),A===!0&&(s.fromBufferAttribute(W,z),I[ce+q+4]=s.x,I[ce+q+5]=s.y,I[ce+q+6]=s.z,I[ce+q+7]=0),M===!0&&(s.fromBufferAttribute($,z),I[ce+q+8]=s.x,I[ce+q+9]=s.y,I[ce+q+10]=s.z,I[ce+q+11]=$.itemSize===4?s.w:1)}}v={count:g,texture:P,size:new tt(U,O)},n.set(l,v),l.addEventListener("dispose",L)}if(r.isInstancedMesh===!0&&r.morphTexture!==null)c.getUniforms().setValue(i,"morphTexture",r.morphTexture,t);else{let S=0;for(let M=0;M<f.length;M++)S+=f[M];const A=l.morphTargetsRelative?1:1-S;c.getUniforms().setValue(i,"morphTargetBaseInfluence",A),c.getUniforms().setValue(i,"morphTargetInfluences",f)}c.getUniforms().setValue(i,"morphTargetsTexture",v.texture,t),c.getUniforms().setValue(i,"morphTargetsTextureSize",v.size)}return{update:a}}function yz(i,e,t,n){let s=new WeakMap;function a(c){const f=n.render.frame,d=c.geometry,g=e.get(c,d);if(s.get(g)!==f&&(e.update(g),s.set(g,f)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),s.get(c)!==f&&(t.update(c.instanceMatrix,i.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,i.ARRAY_BUFFER),s.set(c,f))),c.isSkinnedMesh){const v=c.skeleton;s.get(v)!==f&&(v.update(),s.set(v,f))}return g}function r(){s=new WeakMap}function l(c){const f=c.target;f.removeEventListener("dispose",l),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:a,dispose:r}}const E4=new Ai,I3=new yS(1,1),C4=new cS,w4=new uS,R4=new kv,F3=[],z3=[],G3=new Float32Array(16),H3=new Float32Array(9),V3=new Float32Array(4);function t0(i,e,t){const n=i[0];if(n<=0||n>0)return i;const s=e*t;let a=F3[s];if(a===void 0&&(a=new Float32Array(s),F3[s]=a),e!==0){n.toArray(a,0);for(let r=1,l=0;r!==e;++r)l+=t,i[r].toArray(a,l)}return a}function Hs(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Vs(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function OS(i,e){let t=z3[e];t===void 0&&(t=new Int32Array(e),z3[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function _z(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function xz(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Hs(t,e))return;i.uniform2fv(this.addr,e),Vs(t,e)}}function Sz(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Hs(t,e))return;i.uniform3fv(this.addr,e),Vs(t,e)}}function Az(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Hs(t,e))return;i.uniform4fv(this.addr,e),Vs(t,e)}}function Mz(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Hs(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Vs(t,e)}else{if(Hs(t,n))return;V3.set(n),i.uniformMatrix2fv(this.addr,!1,V3),Vs(t,n)}}function bz(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Hs(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Vs(t,e)}else{if(Hs(t,n))return;H3.set(n),i.uniformMatrix3fv(this.addr,!1,H3),Vs(t,n)}}function Tz(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(Hs(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Vs(t,e)}else{if(Hs(t,n))return;G3.set(n),i.uniformMatrix4fv(this.addr,!1,G3),Vs(t,n)}}function Ez(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function Cz(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Hs(t,e))return;i.uniform2iv(this.addr,e),Vs(t,e)}}function wz(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Hs(t,e))return;i.uniform3iv(this.addr,e),Vs(t,e)}}function Rz(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Hs(t,e))return;i.uniform4iv(this.addr,e),Vs(t,e)}}function Dz(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function Bz(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Hs(t,e))return;i.uniform2uiv(this.addr,e),Vs(t,e)}}function Uz(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Hs(t,e))return;i.uniform3uiv(this.addr,e),Vs(t,e)}}function Lz(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Hs(t,e))return;i.uniform4uiv(this.addr,e),Vs(t,e)}}function Oz(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s);let a;this.type===i.SAMPLER_2D_SHADOW?(I3.compareFunction=Xb,a=I3):a=E4,t.setTexture2D(e||a,s)}function Nz(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture3D(e||w4,s)}function Pz(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTextureCube(e||R4,s)}function Iz(i,e,t){const n=this.cache,s=t.allocateTextureUnit();n[0]!==s&&(i.uniform1i(this.addr,s),n[0]=s),t.setTexture2DArray(e||C4,s)}function Fz(i){switch(i){case 5126:return _z;case 35664:return xz;case 35665:return Sz;case 35666:return Az;case 35674:return Mz;case 35675:return bz;case 35676:return Tz;case 5124:case 35670:return Ez;case 35667:case 35671:return Cz;case 35668:case 35672:return wz;case 35669:case 35673:return Rz;case 5125:return Dz;case 36294:return Bz;case 36295:return Uz;case 36296:return Lz;case 35678:case 36198:case 36298:case 36306:case 35682:return Oz;case 35679:case 36299:case 36307:return Nz;case 35680:case 36300:case 36308:case 36293:return Pz;case 36289:case 36303:case 36311:case 36292:return Iz}}function zz(i,e){i.uniform1fv(this.addr,e)}function Gz(i,e){const t=t0(e,this.size,2);i.uniform2fv(this.addr,t)}function Hz(i,e){const t=t0(e,this.size,3);i.uniform3fv(this.addr,t)}function Vz(i,e){const t=t0(e,this.size,4);i.uniform4fv(this.addr,t)}function kz(i,e){const t=t0(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function Xz(i,e){const t=t0(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function jz(i,e){const t=t0(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function Yz(i,e){i.uniform1iv(this.addr,e)}function Wz(i,e){i.uniform2iv(this.addr,e)}function qz(i,e){i.uniform3iv(this.addr,e)}function Kz(i,e){i.uniform4iv(this.addr,e)}function Jz(i,e){i.uniform1uiv(this.addr,e)}function Zz(i,e){i.uniform2uiv(this.addr,e)}function Qz(i,e){i.uniform3uiv(this.addr,e)}function $z(i,e){i.uniform4uiv(this.addr,e)}function e9(i,e,t){const n=this.cache,s=e.length,a=OS(t,s);Hs(n,a)||(i.uniform1iv(this.addr,a),Vs(n,a));for(let r=0;r!==s;++r)t.setTexture2D(e[r]||E4,a[r])}function t9(i,e,t){const n=this.cache,s=e.length,a=OS(t,s);Hs(n,a)||(i.uniform1iv(this.addr,a),Vs(n,a));for(let r=0;r!==s;++r)t.setTexture3D(e[r]||w4,a[r])}function n9(i,e,t){const n=this.cache,s=e.length,a=OS(t,s);Hs(n,a)||(i.uniform1iv(this.addr,a),Vs(n,a));for(let r=0;r!==s;++r)t.setTextureCube(e[r]||R4,a[r])}function i9(i,e,t){const n=this.cache,s=e.length,a=OS(t,s);Hs(n,a)||(i.uniform1iv(this.addr,a),Vs(n,a));for(let r=0;r!==s;++r)t.setTexture2DArray(e[r]||C4,a[r])}function s9(i){switch(i){case 5126:return zz;case 35664:return Gz;case 35665:return Hz;case 35666:return Vz;case 35674:return kz;case 35675:return Xz;case 35676:return jz;case 5124:case 35670:return Yz;case 35667:case 35671:return Wz;case 35668:case 35672:return qz;case 35669:case 35673:return Kz;case 5125:return Jz;case 36294:return Zz;case 36295:return Qz;case 36296:return $z;case 35678:case 36198:case 36298:case 36306:case 35682:return e9;case 35679:case 36299:case 36307:return t9;case 35680:case 36300:case 36308:case 36293:return n9;case 36289:case 36303:case 36311:case 36292:return i9}}class a9{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=Fz(t.type)}}class r9{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=s9(t.type)}}class o9{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const s=this.seq;for(let a=0,r=s.length;a!==r;++a){const l=s[a];l.setValue(e,t[l.id],n)}}}const M2=/(\w+)(\])?(\[|\.)?/g;function k3(i,e){i.seq.push(e),i.map[e.id]=e}function l9(i,e,t){const n=i.name,s=n.length;for(M2.lastIndex=0;;){const a=M2.exec(n),r=M2.lastIndex;let l=a[1];const c=a[2]==="]",f=a[3];if(c&&(l=l|0),f===void 0||f==="["&&r+2===s){k3(t,f===void 0?new a9(l,i,e):new r9(l,i,e));break}else{let g=t.map[l];g===void 0&&(g=new o9(l),k3(t,g)),t=g}}}class L_{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){const a=e.getActiveUniform(t,s),r=e.getUniformLocation(t,a.name);l9(a,r,this)}}setValue(e,t,n,s){const a=this.map[t];a!==void 0&&a.setValue(e,n,s)}setOptional(e,t,n){const s=t[n];s!==void 0&&this.setValue(e,n,s)}static upload(e,t,n,s){for(let a=0,r=t.length;a!==r;++a){const l=t[a],c=n[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,s)}}static seqWithValue(e,t){const n=[];for(let s=0,a=e.length;s!==a;++s){const r=e[s];r.id in t&&n.push(r)}return n}}function X3(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const c9=37297;let u9=0;function f9(i,e){const t=i.split(`
`),n=[],s=Math.max(e-6,0),a=Math.min(e+6,t.length);for(let r=s;r<a;r++){const l=r+1;n.push(`${l===e?">":" "} ${l}: ${t[r]}`)}return n.join(`
`)}const j3=new cn;function h9(i){Nn._getMatrix(j3,Nn.workingColorSpace,i);const e=`mat3( ${j3.elements.map(t=>t.toFixed(4))} )`;switch(Nn.getTransfer(i)){case pv:return[e,"LinearTransferOETF"];case li:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function Y3(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),s=i.getShaderInfoLog(e).trim();if(n&&s==="")return"";const a=/ERROR: 0:(\d+)/.exec(s);if(a){const r=parseInt(a[1]);return t.toUpperCase()+`

`+s+`

`+f9(i.getShaderSource(e),r)}else return s}function d9(i,e){const t=h9(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function p9(i,e){let t;switch(e){case uB:t="Linear";break;case fB:t="Reinhard";break;case hB:t="Cineon";break;case $x:t="ACESFilmic";break;case pB:t="AgX";break;case mB:t="Neutral";break;case dB:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const g_=new le;function m9(){Nn.getLuminanceCoefficients(g_);const i=g_.x.toFixed(4),e=g_.y.toFixed(4),t=g_.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function g9(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(zg).join(`
`)}function v9(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function y9(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let s=0;s<n;s++){const a=i.getActiveAttrib(e,s),r=a.name;let l=1;a.type===i.FLOAT_MAT2&&(l=2),a.type===i.FLOAT_MAT3&&(l=3),a.type===i.FLOAT_MAT4&&(l=4),t[r]={type:a.type,location:i.getAttribLocation(e,r),locationSize:l}}return t}function zg(i){return i!==""}function W3(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function q3(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const _9=/^[ \t]*#include +<([\w\d./]+)>/gm;function PM(i){return i.replace(_9,S9)}const x9=new Map;function S9(i,e){let t=pn[e];if(t===void 0){const n=x9.get(e);if(n!==void 0)t=pn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return PM(t)}const A9=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function K3(i){return i.replace(A9,M9)}function M9(i,e,t,n){let s="";for(let a=parseInt(e);a<parseInt(t);a++)s+=n.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return s}function J3(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function b9(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===Qx?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===jg?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Rl&&(e="SHADOWMAP_TYPE_VSM"),e}function T9(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case bu:case If:e="ENVMAP_TYPE_CUBE";break;case Qm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function E9(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case If:e="ENVMAP_MODE_REFRACTION";break}return e}function C9(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case Gv:e="ENVMAP_BLENDING_MULTIPLY";break;case lB:e="ENVMAP_BLENDING_MIX";break;case cB:e="ENVMAP_BLENDING_ADD";break}return e}function w9(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function R9(i,e,t,n){const s=i.getContext(),a=t.defines;let r=t.vertexShader,l=t.fragmentShader;const c=b9(t),f=T9(t),d=E9(t),g=C9(t),v=w9(t),y=g9(t),S=v9(a),A=s.createProgram();let M,b,C=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(zg).join(`
`),M.length>0&&(M+=`
`),b=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(zg).join(`
`),b.length>0&&(b+=`
`)):(M=[J3(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(zg).join(`
`),b=[J3(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+d:"",t.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Nl?"#define TONE_MAPPING":"",t.toneMapping!==Nl?pn.tonemapping_pars_fragment:"",t.toneMapping!==Nl?p9("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",pn.colorspace_pars_fragment,d9("linearToOutputTexel",t.outputColorSpace),m9(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(zg).join(`
`)),r=PM(r),r=W3(r,t),r=q3(r,t),l=PM(l),l=W3(l,t),l=q3(l,t),r=K3(r),l=K3(l),t.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,M=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+M,b=["#define varying in",t.glslVersion===CM?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===CM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+b);const w=C+M+r,R=C+b+l,U=X3(s,s.VERTEX_SHADER,w),O=X3(s,s.FRAGMENT_SHADER,R);s.attachShader(A,U),s.attachShader(A,O),t.index0AttributeName!==void 0?s.bindAttribLocation(A,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(A,0,"position"),s.linkProgram(A);function I(k){if(i.debug.checkShaderErrors){const X=s.getProgramInfoLog(A).trim(),W=s.getShaderInfoLog(U).trim(),$=s.getShaderInfoLog(O).trim();let ce=!0,z=!0;if(s.getProgramParameter(A,s.LINK_STATUS)===!1)if(ce=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(s,A,U,O);else{const q=Y3(s,U,"vertex"),Q=Y3(s,O,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(A,s.VALIDATE_STATUS)+`

Material Name: `+k.name+`
Material Type: `+k.type+`

Program Info Log: `+X+`
`+q+`
`+Q)}else X!==""?console.warn("THREE.WebGLProgram: Program Info Log:",X):(W===""||$==="")&&(z=!1);z&&(k.diagnostics={runnable:ce,programLog:X,vertexShader:{log:W,prefix:M},fragmentShader:{log:$,prefix:b}})}s.deleteShader(U),s.deleteShader(O),P=new L_(s,A),N=y9(s,A)}let P;this.getUniforms=function(){return P===void 0&&I(this),P};let N;this.getAttributes=function(){return N===void 0&&I(this),N};let L=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=s.getProgramParameter(A,c9)),L},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(A),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=u9++,this.cacheKey=e,this.usedTimes=1,this.program=A,this.vertexShader=U,this.fragmentShader=O,this}let D9=0;class B9{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,s=this._getShaderStage(t),a=this._getShaderStage(n),r=this._getShaderCacheForMaterial(e);return r.has(s)===!1&&(r.add(s),s.usedTimes++),r.has(a)===!1&&(r.add(a),a.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new U9(e),t.set(e,n)),n}}class U9{constructor(e){this.id=D9++,this.code=e,this.usedTimes=0}}function L9(i,e,t,n,s,a,r){const l=new Pm,c=new B9,f=new Set,d=[],g=s.logarithmicDepthBuffer,v=s.vertexTextures;let y=s.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(N){return f.add(N),N===0?"uv":`uv${N}`}function M(N,L,k,X,W){const $=X.fog,ce=W.geometry,z=N.isMeshStandardMaterial?X.environment:null,q=(N.isMeshStandardMaterial?t:e).get(N.envMap||z),Q=q&&q.mapping===Qm?q.image.height:null,re=S[N.type];N.precision!==null&&(y=s.getMaxPrecision(N.precision),y!==N.precision&&console.warn("THREE.WebGLProgram.getParameters:",N.precision,"not supported, using",y,"instead."));const H=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,G=H!==void 0?H.length:0;let K=0;ce.morphAttributes.position!==void 0&&(K=1),ce.morphAttributes.normal!==void 0&&(K=2),ce.morphAttributes.color!==void 0&&(K=3);let se,J,ne,ue;if(re){const At=Dl[re];se=At.vertexShader,J=At.fragmentShader}else se=N.vertexShader,J=N.fragmentShader,c.update(N),ne=c.getVertexShaderID(N),ue=c.getFragmentShaderID(N);const pe=i.getRenderTarget(),ve=i.state.buffers.depth.getReversed(),Ve=W.isInstancedMesh===!0,ze=W.isBatchedMesh===!0,Qe=!!N.map,Ie=!!N.matcap,rt=!!q,Z=!!N.aoMap,Le=!!N.lightMap,Ue=!!N.bumpMap,Re=!!N.normalMap,me=!!N.displacementMap,Pe=!!N.emissiveMap,Se=!!N.metalnessMap,ye=!!N.roughnessMap,nt=N.anisotropy>0,ee=N.clearcoat>0,V=N.dispersion>0,de=N.iridescence>0,Be=N.sheen>0,be=N.transmission>0,Me=nt&&!!N.anisotropyMap,$e=ee&&!!N.clearcoatMap,at=ee&&!!N.clearcoatNormalMap,ut=ee&&!!N.clearcoatRoughnessMap,Y=de&&!!N.iridescenceMap,Oe=de&&!!N.iridescenceThicknessMap,Ke=Be&&!!N.sheenColorMap,it=Be&&!!N.sheenRoughnessMap,fe=!!N.specularMap,Ae=!!N.specularColorMap,st=!!N.specularIntensityMap,he=be&&!!N.transmissionMap,je=be&&!!N.thicknessMap,He=!!N.gradientMap,gt=!!N.alphaMap,et=N.alphaTest>0,Ge=!!N.alphaHash,pt=!!N.extensions;let vt=Nl;N.toneMapped&&(pe===null||pe.isXRRenderTarget===!0)&&(vt=i.toneMapping);const mt={shaderID:re,shaderType:N.type,shaderName:N.name,vertexShader:se,fragmentShader:J,defines:N.defines,customVertexShaderID:ne,customFragmentShaderID:ue,isRawShaderMaterial:N.isRawShaderMaterial===!0,glslVersion:N.glslVersion,precision:y,batching:ze,batchingColor:ze&&W._colorsTexture!==null,instancing:Ve,instancingColor:Ve&&W.instanceColor!==null,instancingMorph:Ve&&W.morphTexture!==null,supportsVertexTextures:v,outputColorSpace:pe===null?i.outputColorSpace:pe.isXRRenderTarget===!0?pe.texture.colorSpace:Pl,alphaToCoverage:!!N.alphaToCoverage,map:Qe,matcap:Ie,envMap:rt,envMapMode:rt&&q.mapping,envMapCubeUVHeight:Q,aoMap:Z,lightMap:Le,bumpMap:Ue,normalMap:Re,displacementMap:v&&me,emissiveMap:Pe,normalMapObjectSpace:Re&&N.normalMapType===AB,normalMapTangentSpace:Re&&N.normalMapType===Wf,metalnessMap:Se,roughnessMap:ye,anisotropy:nt,anisotropyMap:Me,clearcoat:ee,clearcoatMap:$e,clearcoatNormalMap:at,clearcoatRoughnessMap:ut,dispersion:V,iridescence:de,iridescenceMap:Y,iridescenceThicknessMap:Oe,sheen:Be,sheenColorMap:Ke,sheenRoughnessMap:it,specularMap:fe,specularColorMap:Ae,specularIntensityMap:st,transmission:be,transmissionMap:he,thicknessMap:je,gradientMap:He,opaque:N.transparent===!1&&N.blending===Md&&N.alphaToCoverage===!1,alphaMap:gt,alphaTest:et,alphaHash:Ge,combine:N.combine,mapUv:Qe&&A(N.map.channel),aoMapUv:Z&&A(N.aoMap.channel),lightMapUv:Le&&A(N.lightMap.channel),bumpMapUv:Ue&&A(N.bumpMap.channel),normalMapUv:Re&&A(N.normalMap.channel),displacementMapUv:me&&A(N.displacementMap.channel),emissiveMapUv:Pe&&A(N.emissiveMap.channel),metalnessMapUv:Se&&A(N.metalnessMap.channel),roughnessMapUv:ye&&A(N.roughnessMap.channel),anisotropyMapUv:Me&&A(N.anisotropyMap.channel),clearcoatMapUv:$e&&A(N.clearcoatMap.channel),clearcoatNormalMapUv:at&&A(N.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ut&&A(N.clearcoatRoughnessMap.channel),iridescenceMapUv:Y&&A(N.iridescenceMap.channel),iridescenceThicknessMapUv:Oe&&A(N.iridescenceThicknessMap.channel),sheenColorMapUv:Ke&&A(N.sheenColorMap.channel),sheenRoughnessMapUv:it&&A(N.sheenRoughnessMap.channel),specularMapUv:fe&&A(N.specularMap.channel),specularColorMapUv:Ae&&A(N.specularColorMap.channel),specularIntensityMapUv:st&&A(N.specularIntensityMap.channel),transmissionMapUv:he&&A(N.transmissionMap.channel),thicknessMapUv:je&&A(N.thicknessMap.channel),alphaMapUv:gt&&A(N.alphaMap.channel),vertexTangents:!!ce.attributes.tangent&&(Re||nt),vertexColors:N.vertexColors,vertexAlphas:N.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!ce.attributes.uv&&(Qe||gt),fog:!!$,useFog:N.fog===!0,fogExp2:!!$&&$.isFogExp2,flatShading:N.flatShading===!0,sizeAttenuation:N.sizeAttenuation===!0,logarithmicDepthBuffer:g,reverseDepthBuffer:ve,skinning:W.isSkinnedMesh===!0,morphTargets:ce.morphAttributes.position!==void 0,morphNormals:ce.morphAttributes.normal!==void 0,morphColors:ce.morphAttributes.color!==void 0,morphTargetsCount:G,morphTextureStride:K,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:r.numPlanes,numClipIntersection:r.numIntersection,dithering:N.dithering,shadowMapEnabled:i.shadowMap.enabled&&k.length>0,shadowMapType:i.shadowMap.type,toneMapping:vt,decodeVideoTexture:Qe&&N.map.isVideoTexture===!0&&Nn.getTransfer(N.map.colorSpace)===li,decodeVideoTextureEmissive:Pe&&N.emissiveMap.isVideoTexture===!0&&Nn.getTransfer(N.emissiveMap.colorSpace)===li,premultipliedAlpha:N.premultipliedAlpha,doubleSided:N.side===ha,flipSided:N.side===vs,useDepthPacking:N.depthPacking>=0,depthPacking:N.depthPacking||0,index0AttributeName:N.index0AttributeName,extensionClipCullDistance:pt&&N.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(pt&&N.extensions.multiDraw===!0||ze)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:N.customProgramCacheKey()};return mt.vertexUv1s=f.has(1),mt.vertexUv2s=f.has(2),mt.vertexUv3s=f.has(3),f.clear(),mt}function b(N){const L=[];if(N.shaderID?L.push(N.shaderID):(L.push(N.customVertexShaderID),L.push(N.customFragmentShaderID)),N.defines!==void 0)for(const k in N.defines)L.push(k),L.push(N.defines[k]);return N.isRawShaderMaterial===!1&&(C(L,N),w(L,N),L.push(i.outputColorSpace)),L.push(N.customProgramCacheKey),L.join()}function C(N,L){N.push(L.precision),N.push(L.outputColorSpace),N.push(L.envMapMode),N.push(L.envMapCubeUVHeight),N.push(L.mapUv),N.push(L.alphaMapUv),N.push(L.lightMapUv),N.push(L.aoMapUv),N.push(L.bumpMapUv),N.push(L.normalMapUv),N.push(L.displacementMapUv),N.push(L.emissiveMapUv),N.push(L.metalnessMapUv),N.push(L.roughnessMapUv),N.push(L.anisotropyMapUv),N.push(L.clearcoatMapUv),N.push(L.clearcoatNormalMapUv),N.push(L.clearcoatRoughnessMapUv),N.push(L.iridescenceMapUv),N.push(L.iridescenceThicknessMapUv),N.push(L.sheenColorMapUv),N.push(L.sheenRoughnessMapUv),N.push(L.specularMapUv),N.push(L.specularColorMapUv),N.push(L.specularIntensityMapUv),N.push(L.transmissionMapUv),N.push(L.thicknessMapUv),N.push(L.combine),N.push(L.fogExp2),N.push(L.sizeAttenuation),N.push(L.morphTargetsCount),N.push(L.morphAttributeCount),N.push(L.numDirLights),N.push(L.numPointLights),N.push(L.numSpotLights),N.push(L.numSpotLightMaps),N.push(L.numHemiLights),N.push(L.numRectAreaLights),N.push(L.numDirLightShadows),N.push(L.numPointLightShadows),N.push(L.numSpotLightShadows),N.push(L.numSpotLightShadowsWithMaps),N.push(L.numLightProbes),N.push(L.shadowMapType),N.push(L.toneMapping),N.push(L.numClippingPlanes),N.push(L.numClipIntersection),N.push(L.depthPacking)}function w(N,L){l.disableAll(),L.supportsVertexTextures&&l.enable(0),L.instancing&&l.enable(1),L.instancingColor&&l.enable(2),L.instancingMorph&&l.enable(3),L.matcap&&l.enable(4),L.envMap&&l.enable(5),L.normalMapObjectSpace&&l.enable(6),L.normalMapTangentSpace&&l.enable(7),L.clearcoat&&l.enable(8),L.iridescence&&l.enable(9),L.alphaTest&&l.enable(10),L.vertexColors&&l.enable(11),L.vertexAlphas&&l.enable(12),L.vertexUv1s&&l.enable(13),L.vertexUv2s&&l.enable(14),L.vertexUv3s&&l.enable(15),L.vertexTangents&&l.enable(16),L.anisotropy&&l.enable(17),L.alphaHash&&l.enable(18),L.batching&&l.enable(19),L.dispersion&&l.enable(20),L.batchingColor&&l.enable(21),N.push(l.mask),l.disableAll(),L.fog&&l.enable(0),L.useFog&&l.enable(1),L.flatShading&&l.enable(2),L.logarithmicDepthBuffer&&l.enable(3),L.reverseDepthBuffer&&l.enable(4),L.skinning&&l.enable(5),L.morphTargets&&l.enable(6),L.morphNormals&&l.enable(7),L.morphColors&&l.enable(8),L.premultipliedAlpha&&l.enable(9),L.shadowMapEnabled&&l.enable(10),L.doubleSided&&l.enable(11),L.flipSided&&l.enable(12),L.useDepthPacking&&l.enable(13),L.dithering&&l.enable(14),L.transmission&&l.enable(15),L.sheen&&l.enable(16),L.opaque&&l.enable(17),L.pointsUvs&&l.enable(18),L.decodeVideoTexture&&l.enable(19),L.decodeVideoTextureEmissive&&l.enable(20),L.alphaToCoverage&&l.enable(21),N.push(l.mask)}function R(N){const L=S[N.type];let k;if(L){const X=Dl[L];k=Kb.clone(X.uniforms)}else k=N.uniforms;return k}function U(N,L){let k;for(let X=0,W=d.length;X<W;X++){const $=d[X];if($.cacheKey===L){k=$,++k.usedTimes;break}}return k===void 0&&(k=new R9(i,L,N,a),d.push(k)),k}function O(N){if(--N.usedTimes===0){const L=d.indexOf(N);d[L]=d[d.length-1],d.pop(),N.destroy()}}function I(N){c.remove(N)}function P(){c.dispose()}return{getParameters:M,getProgramCacheKey:b,getUniforms:R,acquireProgram:U,releaseProgram:O,releaseShaderCache:I,programs:d,dispose:P}}function O9(){let i=new WeakMap;function e(r){return i.has(r)}function t(r){let l=i.get(r);return l===void 0&&(l={},i.set(r,l)),l}function n(r){i.delete(r)}function s(r,l,c){i.get(r)[l]=c}function a(){i=new WeakMap}return{has:e,get:t,remove:n,update:s,dispose:a}}function N9(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function Z3(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function Q3(){const i=[];let e=0;const t=[],n=[],s=[];function a(){e=0,t.length=0,n.length=0,s.length=0}function r(g,v,y,S,A,M){let b=i[e];return b===void 0?(b={id:g.id,object:g,geometry:v,material:y,groupOrder:S,renderOrder:g.renderOrder,z:A,group:M},i[e]=b):(b.id=g.id,b.object=g,b.geometry=v,b.material=y,b.groupOrder=S,b.renderOrder=g.renderOrder,b.z=A,b.group=M),e++,b}function l(g,v,y,S,A,M){const b=r(g,v,y,S,A,M);y.transmission>0?n.push(b):y.transparent===!0?s.push(b):t.push(b)}function c(g,v,y,S,A,M){const b=r(g,v,y,S,A,M);y.transmission>0?n.unshift(b):y.transparent===!0?s.unshift(b):t.unshift(b)}function f(g,v){t.length>1&&t.sort(g||N9),n.length>1&&n.sort(v||Z3),s.length>1&&s.sort(v||Z3)}function d(){for(let g=e,v=i.length;g<v;g++){const y=i[g];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:n,transparent:s,init:a,push:l,unshift:c,finish:d,sort:f}}function P9(){let i=new WeakMap;function e(n,s){const a=i.get(n);let r;return a===void 0?(r=new Q3,i.set(n,[r])):s>=a.length?(r=new Q3,a.push(r)):r=a[s],r}function t(){i=new WeakMap}return{get:e,dispose:t}}function I9(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new le,color:new St};break;case"SpotLight":t={position:new le,direction:new le,color:new St,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new le,color:new St,distance:0,decay:0};break;case"HemisphereLight":t={direction:new le,skyColor:new St,groundColor:new St};break;case"RectAreaLight":t={color:new St,position:new le,halfWidth:new le,halfHeight:new le};break}return i[e.id]=t,t}}}function F9(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new tt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let z9=0;function G9(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function H9(i){const e=new I9,t=F9(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)n.probe.push(new le);const s=new le,a=new Ft,r=new Ft;function l(f){let d=0,g=0,v=0;for(let N=0;N<9;N++)n.probe[N].set(0,0,0);let y=0,S=0,A=0,M=0,b=0,C=0,w=0,R=0,U=0,O=0,I=0;f.sort(G9);for(let N=0,L=f.length;N<L;N++){const k=f[N],X=k.color,W=k.intensity,$=k.distance,ce=k.shadow&&k.shadow.map?k.shadow.map.texture:null;if(k.isAmbientLight)d+=X.r*W,g+=X.g*W,v+=X.b*W;else if(k.isLightProbe){for(let z=0;z<9;z++)n.probe[z].addScaledVector(k.sh.coefficients[z],W);I++}else if(k.isDirectionalLight){const z=e.get(k);if(z.color.copy(k.color).multiplyScalar(k.intensity),k.castShadow){const q=k.shadow,Q=t.get(k);Q.shadowIntensity=q.intensity,Q.shadowBias=q.bias,Q.shadowNormalBias=q.normalBias,Q.shadowRadius=q.radius,Q.shadowMapSize=q.mapSize,n.directionalShadow[y]=Q,n.directionalShadowMap[y]=ce,n.directionalShadowMatrix[y]=k.shadow.matrix,C++}n.directional[y]=z,y++}else if(k.isSpotLight){const z=e.get(k);z.position.setFromMatrixPosition(k.matrixWorld),z.color.copy(X).multiplyScalar(W),z.distance=$,z.coneCos=Math.cos(k.angle),z.penumbraCos=Math.cos(k.angle*(1-k.penumbra)),z.decay=k.decay,n.spot[A]=z;const q=k.shadow;if(k.map&&(n.spotLightMap[U]=k.map,U++,q.updateMatrices(k),k.castShadow&&O++),n.spotLightMatrix[A]=q.matrix,k.castShadow){const Q=t.get(k);Q.shadowIntensity=q.intensity,Q.shadowBias=q.bias,Q.shadowNormalBias=q.normalBias,Q.shadowRadius=q.radius,Q.shadowMapSize=q.mapSize,n.spotShadow[A]=Q,n.spotShadowMap[A]=ce,R++}A++}else if(k.isRectAreaLight){const z=e.get(k);z.color.copy(X).multiplyScalar(W),z.halfWidth.set(k.width*.5,0,0),z.halfHeight.set(0,k.height*.5,0),n.rectArea[M]=z,M++}else if(k.isPointLight){const z=e.get(k);if(z.color.copy(k.color).multiplyScalar(k.intensity),z.distance=k.distance,z.decay=k.decay,k.castShadow){const q=k.shadow,Q=t.get(k);Q.shadowIntensity=q.intensity,Q.shadowBias=q.bias,Q.shadowNormalBias=q.normalBias,Q.shadowRadius=q.radius,Q.shadowMapSize=q.mapSize,Q.shadowCameraNear=q.camera.near,Q.shadowCameraFar=q.camera.far,n.pointShadow[S]=Q,n.pointShadowMap[S]=ce,n.pointShadowMatrix[S]=k.shadow.matrix,w++}n.point[S]=z,S++}else if(k.isHemisphereLight){const z=e.get(k);z.skyColor.copy(k.color).multiplyScalar(W),z.groundColor.copy(k.groundColor).multiplyScalar(W),n.hemi[b]=z,b++}}M>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Et.LTC_FLOAT_1,n.rectAreaLTC2=Et.LTC_FLOAT_2):(n.rectAreaLTC1=Et.LTC_HALF_1,n.rectAreaLTC2=Et.LTC_HALF_2)),n.ambient[0]=d,n.ambient[1]=g,n.ambient[2]=v;const P=n.hash;(P.directionalLength!==y||P.pointLength!==S||P.spotLength!==A||P.rectAreaLength!==M||P.hemiLength!==b||P.numDirectionalShadows!==C||P.numPointShadows!==w||P.numSpotShadows!==R||P.numSpotMaps!==U||P.numLightProbes!==I)&&(n.directional.length=y,n.spot.length=A,n.rectArea.length=M,n.point.length=S,n.hemi.length=b,n.directionalShadow.length=C,n.directionalShadowMap.length=C,n.pointShadow.length=w,n.pointShadowMap.length=w,n.spotShadow.length=R,n.spotShadowMap.length=R,n.directionalShadowMatrix.length=C,n.pointShadowMatrix.length=w,n.spotLightMatrix.length=R+U-O,n.spotLightMap.length=U,n.numSpotLightShadowsWithMaps=O,n.numLightProbes=I,P.directionalLength=y,P.pointLength=S,P.spotLength=A,P.rectAreaLength=M,P.hemiLength=b,P.numDirectionalShadows=C,P.numPointShadows=w,P.numSpotShadows=R,P.numSpotMaps=U,P.numLightProbes=I,n.version=z9++)}function c(f,d){let g=0,v=0,y=0,S=0,A=0;const M=d.matrixWorldInverse;for(let b=0,C=f.length;b<C;b++){const w=f[b];if(w.isDirectionalLight){const R=n.directional[g];R.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),R.direction.sub(s),R.direction.transformDirection(M),g++}else if(w.isSpotLight){const R=n.spot[y];R.position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(M),R.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),R.direction.sub(s),R.direction.transformDirection(M),y++}else if(w.isRectAreaLight){const R=n.rectArea[S];R.position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(M),r.identity(),a.copy(w.matrixWorld),a.premultiply(M),r.extractRotation(a),R.halfWidth.set(w.width*.5,0,0),R.halfHeight.set(0,w.height*.5,0),R.halfWidth.applyMatrix4(r),R.halfHeight.applyMatrix4(r),S++}else if(w.isPointLight){const R=n.point[v];R.position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(M),v++}else if(w.isHemisphereLight){const R=n.hemi[A];R.direction.setFromMatrixPosition(w.matrixWorld),R.direction.transformDirection(M),A++}}}return{setup:l,setupView:c,state:n}}function $3(i){const e=new H9(i),t=[],n=[];function s(d){f.camera=d,t.length=0,n.length=0}function a(d){t.push(d)}function r(d){n.push(d)}function l(){e.setup(t)}function c(d){e.setupView(t,d)}const f={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:f,setupLights:l,setupLightsView:c,pushLight:a,pushShadow:r}}function V9(i){let e=new WeakMap;function t(s,a=0){const r=e.get(s);let l;return r===void 0?(l=new $3(i),e.set(s,[l])):a>=r.length?(l=new $3(i),r.push(l)):l=r[a],l}function n(){e=new WeakMap}return{get:t,dispose:n}}const k9=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,X9=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function j9(i,e,t){let n=new $m;const s=new tt,a=new tt,r=new wn,l=new BS({depthPacking:kb}),c=new US,f={},d=t.maxTextureSize,g={[ao]:vs,[vs]:ao,[ha]:ha},v=new ls({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new tt},radius:{value:4}},vertexShader:k9,fragmentShader:X9}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const S=new $t;S.setAttribute("position",new Fn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const A=new Di(S,v),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Qx;let b=this.type;this.render=function(O,I,P){if(M.enabled===!1||M.autoUpdate===!1&&M.needsUpdate===!1||O.length===0)return;const N=i.getRenderTarget(),L=i.getActiveCubeFace(),k=i.getActiveMipmapLevel(),X=i.state;X.setBlending(da),X.buffers.color.setClear(1,1,1,1),X.buffers.depth.setTest(!0),X.setScissorTest(!1);const W=b!==Rl&&this.type===Rl,$=b===Rl&&this.type!==Rl;for(let ce=0,z=O.length;ce<z;ce++){const q=O[ce],Q=q.shadow;if(Q===void 0){console.warn("THREE.WebGLShadowMap:",q,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;s.copy(Q.mapSize);const re=Q.getFrameExtents();if(s.multiply(re),a.copy(Q.mapSize),(s.x>d||s.y>d)&&(s.x>d&&(a.x=Math.floor(d/re.x),s.x=a.x*re.x,Q.mapSize.x=a.x),s.y>d&&(a.y=Math.floor(d/re.y),s.y=a.y*re.y,Q.mapSize.y=a.y)),Q.map===null||W===!0||$===!0){const G=this.type!==Rl?{minFilter:Hi,magFilter:Hi}:{};Q.map!==null&&Q.map.dispose(),Q.map=new os(s.x,s.y,G),Q.map.texture.name=q.name+".shadowMap",Q.camera.updateProjectionMatrix()}i.setRenderTarget(Q.map),i.clear();const H=Q.getViewportCount();for(let G=0;G<H;G++){const K=Q.getViewport(G);r.set(a.x*K.x,a.y*K.y,a.x*K.z,a.y*K.w),X.viewport(r),Q.updateMatrices(q,G),n=Q.getFrustum(),R(I,P,Q.camera,q,this.type)}Q.isPointLightShadow!==!0&&this.type===Rl&&C(Q,P),Q.needsUpdate=!1}b=this.type,M.needsUpdate=!1,i.setRenderTarget(N,L,k)};function C(O,I){const P=e.update(A);v.defines.VSM_SAMPLES!==O.blurSamples&&(v.defines.VSM_SAMPLES=O.blurSamples,y.defines.VSM_SAMPLES=O.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new os(s.x,s.y)),v.uniforms.shadow_pass.value=O.map.texture,v.uniforms.resolution.value=O.mapSize,v.uniforms.radius.value=O.radius,i.setRenderTarget(O.mapPass),i.clear(),i.renderBufferDirect(I,null,P,v,A,null),y.uniforms.shadow_pass.value=O.mapPass.texture,y.uniforms.resolution.value=O.mapSize,y.uniforms.radius.value=O.radius,i.setRenderTarget(O.map),i.clear(),i.renderBufferDirect(I,null,P,y,A,null)}function w(O,I,P,N){let L=null;const k=P.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(k!==void 0)L=k;else if(L=P.isPointLight===!0?c:l,i.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0||I.alphaToCoverage===!0){const X=L.uuid,W=I.uuid;let $=f[X];$===void 0&&($={},f[X]=$);let ce=$[W];ce===void 0&&(ce=L.clone(),$[W]=ce,I.addEventListener("dispose",U)),L=ce}if(L.visible=I.visible,L.wireframe=I.wireframe,N===Rl?L.side=I.shadowSide!==null?I.shadowSide:I.side:L.side=I.shadowSide!==null?I.shadowSide:g[I.side],L.alphaMap=I.alphaMap,L.alphaTest=I.alphaToCoverage===!0?.5:I.alphaTest,L.map=I.map,L.clipShadows=I.clipShadows,L.clippingPlanes=I.clippingPlanes,L.clipIntersection=I.clipIntersection,L.displacementMap=I.displacementMap,L.displacementScale=I.displacementScale,L.displacementBias=I.displacementBias,L.wireframeLinewidth=I.wireframeLinewidth,L.linewidth=I.linewidth,P.isPointLight===!0&&L.isMeshDistanceMaterial===!0){const X=i.properties.get(L);X.light=P}return L}function R(O,I,P,N,L){if(O.visible===!1)return;if(O.layers.test(I.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&L===Rl)&&(!O.frustumCulled||n.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,O.matrixWorld);const W=e.update(O),$=O.material;if(Array.isArray($)){const ce=W.groups;for(let z=0,q=ce.length;z<q;z++){const Q=ce[z],re=$[Q.materialIndex];if(re&&re.visible){const H=w(O,re,N,L);O.onBeforeShadow(i,O,I,P,W,H,Q),i.renderBufferDirect(P,null,W,H,O,Q),O.onAfterShadow(i,O,I,P,W,H,Q)}}}else if($.visible){const ce=w(O,$,N,L);O.onBeforeShadow(i,O,I,P,W,ce,null),i.renderBufferDirect(P,null,W,ce,O,null),O.onAfterShadow(i,O,I,P,W,ce,null)}}const X=O.children;for(let W=0,$=X.length;W<$;W++)R(X[W],I,P,N,L)}function U(O){O.target.removeEventListener("dispose",U);for(const P in f){const N=f[P],L=O.target.uuid;L in N&&(N[L].dispose(),delete N[L])}}}const Y9={[K_]:J_,[Z_]:ex,[Q_]:tx,[Ld]:$_,[J_]:K_,[ex]:Z_,[tx]:Q_,[$_]:Ld};function W9(i,e){function t(){let he=!1;const je=new wn;let He=null;const gt=new wn(0,0,0,0);return{setMask:function(et){He!==et&&!he&&(i.colorMask(et,et,et,et),He=et)},setLocked:function(et){he=et},setClear:function(et,Ge,pt,vt,mt){mt===!0&&(et*=vt,Ge*=vt,pt*=vt),je.set(et,Ge,pt,vt),gt.equals(je)===!1&&(i.clearColor(et,Ge,pt,vt),gt.copy(je))},reset:function(){he=!1,He=null,gt.set(-1,0,0,0)}}}function n(){let he=!1,je=!1,He=null,gt=null,et=null;return{setReversed:function(Ge){if(je!==Ge){const pt=e.get("EXT_clip_control");Ge?pt.clipControlEXT(pt.LOWER_LEFT_EXT,pt.ZERO_TO_ONE_EXT):pt.clipControlEXT(pt.LOWER_LEFT_EXT,pt.NEGATIVE_ONE_TO_ONE_EXT),je=Ge;const vt=et;et=null,this.setClear(vt)}},getReversed:function(){return je},setTest:function(Ge){Ge?pe(i.DEPTH_TEST):ve(i.DEPTH_TEST)},setMask:function(Ge){He!==Ge&&!he&&(i.depthMask(Ge),He=Ge)},setFunc:function(Ge){if(je&&(Ge=Y9[Ge]),gt!==Ge){switch(Ge){case K_:i.depthFunc(i.NEVER);break;case J_:i.depthFunc(i.ALWAYS);break;case Z_:i.depthFunc(i.LESS);break;case Ld:i.depthFunc(i.LEQUAL);break;case Q_:i.depthFunc(i.EQUAL);break;case $_:i.depthFunc(i.GEQUAL);break;case ex:i.depthFunc(i.GREATER);break;case tx:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}gt=Ge}},setLocked:function(Ge){he=Ge},setClear:function(Ge){et!==Ge&&(je&&(Ge=1-Ge),i.clearDepth(Ge),et=Ge)},reset:function(){he=!1,He=null,gt=null,et=null,je=!1}}}function s(){let he=!1,je=null,He=null,gt=null,et=null,Ge=null,pt=null,vt=null,mt=null;return{setTest:function(At){he||(At?pe(i.STENCIL_TEST):ve(i.STENCIL_TEST))},setMask:function(At){je!==At&&!he&&(i.stencilMask(At),je=At)},setFunc:function(At,Vt,Pt){(He!==At||gt!==Vt||et!==Pt)&&(i.stencilFunc(At,Vt,Pt),He=At,gt=Vt,et=Pt)},setOp:function(At,Vt,Pt){(Ge!==At||pt!==Vt||vt!==Pt)&&(i.stencilOp(At,Vt,Pt),Ge=At,pt=Vt,vt=Pt)},setLocked:function(At){he=At},setClear:function(At){mt!==At&&(i.clearStencil(At),mt=At)},reset:function(){he=!1,je=null,He=null,gt=null,et=null,Ge=null,pt=null,vt=null,mt=null}}}const a=new t,r=new n,l=new s,c=new WeakMap,f=new WeakMap;let d={},g={},v=new WeakMap,y=[],S=null,A=!1,M=null,b=null,C=null,w=null,R=null,U=null,O=null,I=new St(0,0,0),P=0,N=!1,L=null,k=null,X=null,W=null,$=null;const ce=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let z=!1,q=0;const Q=i.getParameter(i.VERSION);Q.indexOf("WebGL")!==-1?(q=parseFloat(/^WebGL (\d)/.exec(Q)[1]),z=q>=1):Q.indexOf("OpenGL ES")!==-1&&(q=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),z=q>=2);let re=null,H={};const G=i.getParameter(i.SCISSOR_BOX),K=i.getParameter(i.VIEWPORT),se=new wn().fromArray(G),J=new wn().fromArray(K);function ne(he,je,He,gt){const et=new Uint8Array(4),Ge=i.createTexture();i.bindTexture(he,Ge),i.texParameteri(he,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(he,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let pt=0;pt<He;pt++)he===i.TEXTURE_3D||he===i.TEXTURE_2D_ARRAY?i.texImage3D(je,0,i.RGBA,1,1,gt,0,i.RGBA,i.UNSIGNED_BYTE,et):i.texImage2D(je+pt,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,et);return Ge}const ue={};ue[i.TEXTURE_2D]=ne(i.TEXTURE_2D,i.TEXTURE_2D,1),ue[i.TEXTURE_CUBE_MAP]=ne(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),ue[i.TEXTURE_2D_ARRAY]=ne(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),ue[i.TEXTURE_3D]=ne(i.TEXTURE_3D,i.TEXTURE_3D,1,1),a.setClear(0,0,0,1),r.setClear(1),l.setClear(0),pe(i.DEPTH_TEST),r.setFunc(Ld),Ue(!1),Re(AM),pe(i.CULL_FACE),Z(da);function pe(he){d[he]!==!0&&(i.enable(he),d[he]=!0)}function ve(he){d[he]!==!1&&(i.disable(he),d[he]=!1)}function Ve(he,je){return g[he]!==je?(i.bindFramebuffer(he,je),g[he]=je,he===i.DRAW_FRAMEBUFFER&&(g[i.FRAMEBUFFER]=je),he===i.FRAMEBUFFER&&(g[i.DRAW_FRAMEBUFFER]=je),!0):!1}function ze(he,je){let He=y,gt=!1;if(he){He=v.get(je),He===void 0&&(He=[],v.set(je,He));const et=he.textures;if(He.length!==et.length||He[0]!==i.COLOR_ATTACHMENT0){for(let Ge=0,pt=et.length;Ge<pt;Ge++)He[Ge]=i.COLOR_ATTACHMENT0+Ge;He.length=et.length,gt=!0}}else He[0]!==i.BACK&&(He[0]=i.BACK,gt=!0);gt&&i.drawBuffers(He)}function Qe(he){return S!==he?(i.useProgram(he),S=he,!0):!1}const Ie={[Cf]:i.FUNC_ADD,[jD]:i.FUNC_SUBTRACT,[YD]:i.FUNC_REVERSE_SUBTRACT};Ie[WD]=i.MIN,Ie[qD]=i.MAX;const rt={[KD]:i.ZERO,[JD]:i.ONE,[ZD]:i.SRC_COLOR,[W_]:i.SRC_ALPHA,[iB]:i.SRC_ALPHA_SATURATE,[tB]:i.DST_COLOR,[$D]:i.DST_ALPHA,[QD]:i.ONE_MINUS_SRC_COLOR,[q_]:i.ONE_MINUS_SRC_ALPHA,[nB]:i.ONE_MINUS_DST_COLOR,[eB]:i.ONE_MINUS_DST_ALPHA,[sB]:i.CONSTANT_COLOR,[aB]:i.ONE_MINUS_CONSTANT_COLOR,[rB]:i.CONSTANT_ALPHA,[oB]:i.ONE_MINUS_CONSTANT_ALPHA};function Z(he,je,He,gt,et,Ge,pt,vt,mt,At){if(he===da){A===!0&&(ve(i.BLEND),A=!1);return}if(A===!1&&(pe(i.BLEND),A=!0),he!==XD){if(he!==M||At!==N){if((b!==Cf||R!==Cf)&&(i.blendEquation(i.FUNC_ADD),b=Cf,R=Cf),At)switch(he){case Md:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Y_:i.blendFunc(i.ONE,i.ONE);break;case MM:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case bM:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}else switch(he){case Md:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case Y_:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case MM:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case bM:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",he);break}C=null,w=null,U=null,O=null,I.set(0,0,0),P=0,M=he,N=At}return}et=et||je,Ge=Ge||He,pt=pt||gt,(je!==b||et!==R)&&(i.blendEquationSeparate(Ie[je],Ie[et]),b=je,R=et),(He!==C||gt!==w||Ge!==U||pt!==O)&&(i.blendFuncSeparate(rt[He],rt[gt],rt[Ge],rt[pt]),C=He,w=gt,U=Ge,O=pt),(vt.equals(I)===!1||mt!==P)&&(i.blendColor(vt.r,vt.g,vt.b,mt),I.copy(vt),P=mt),M=he,N=!1}function Le(he,je){he.side===ha?ve(i.CULL_FACE):pe(i.CULL_FACE);let He=he.side===vs;je&&(He=!He),Ue(He),he.blending===Md&&he.transparent===!1?Z(da):Z(he.blending,he.blendEquation,he.blendSrc,he.blendDst,he.blendEquationAlpha,he.blendSrcAlpha,he.blendDstAlpha,he.blendColor,he.blendAlpha,he.premultipliedAlpha),r.setFunc(he.depthFunc),r.setTest(he.depthTest),r.setMask(he.depthWrite),a.setMask(he.colorWrite);const gt=he.stencilWrite;l.setTest(gt),gt&&(l.setMask(he.stencilWriteMask),l.setFunc(he.stencilFunc,he.stencilRef,he.stencilFuncMask),l.setOp(he.stencilFail,he.stencilZFail,he.stencilZPass)),Pe(he.polygonOffset,he.polygonOffsetFactor,he.polygonOffsetUnits),he.alphaToCoverage===!0?pe(i.SAMPLE_ALPHA_TO_COVERAGE):ve(i.SAMPLE_ALPHA_TO_COVERAGE)}function Ue(he){L!==he&&(he?i.frontFace(i.CW):i.frontFace(i.CCW),L=he)}function Re(he){he!==HD?(pe(i.CULL_FACE),he!==k&&(he===AM?i.cullFace(i.BACK):he===VD?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):ve(i.CULL_FACE),k=he}function me(he){he!==X&&(z&&i.lineWidth(he),X=he)}function Pe(he,je,He){he?(pe(i.POLYGON_OFFSET_FILL),(W!==je||$!==He)&&(i.polygonOffset(je,He),W=je,$=He)):ve(i.POLYGON_OFFSET_FILL)}function Se(he){he?pe(i.SCISSOR_TEST):ve(i.SCISSOR_TEST)}function ye(he){he===void 0&&(he=i.TEXTURE0+ce-1),re!==he&&(i.activeTexture(he),re=he)}function nt(he,je,He){He===void 0&&(re===null?He=i.TEXTURE0+ce-1:He=re);let gt=H[He];gt===void 0&&(gt={type:void 0,texture:void 0},H[He]=gt),(gt.type!==he||gt.texture!==je)&&(re!==He&&(i.activeTexture(He),re=He),i.bindTexture(he,je||ue[he]),gt.type=he,gt.texture=je)}function ee(){const he=H[re];he!==void 0&&he.type!==void 0&&(i.bindTexture(he.type,null),he.type=void 0,he.texture=void 0)}function V(){try{i.compressedTexImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function de(){try{i.compressedTexImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Be(){try{i.texSubImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function be(){try{i.texSubImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Me(){try{i.compressedTexSubImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function $e(){try{i.compressedTexSubImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function at(){try{i.texStorage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function ut(){try{i.texStorage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Y(){try{i.texImage2D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Oe(){try{i.texImage3D(...arguments)}catch(he){console.error("THREE.WebGLState:",he)}}function Ke(he){se.equals(he)===!1&&(i.scissor(he.x,he.y,he.z,he.w),se.copy(he))}function it(he){J.equals(he)===!1&&(i.viewport(he.x,he.y,he.z,he.w),J.copy(he))}function fe(he,je){let He=f.get(je);He===void 0&&(He=new WeakMap,f.set(je,He));let gt=He.get(he);gt===void 0&&(gt=i.getUniformBlockIndex(je,he.name),He.set(he,gt))}function Ae(he,je){const gt=f.get(je).get(he);c.get(je)!==gt&&(i.uniformBlockBinding(je,gt,he.__bindingPointIndex),c.set(je,gt))}function st(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),r.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},re=null,H={},g={},v=new WeakMap,y=[],S=null,A=!1,M=null,b=null,C=null,w=null,R=null,U=null,O=null,I=new St(0,0,0),P=0,N=!1,L=null,k=null,X=null,W=null,$=null,se.set(0,0,i.canvas.width,i.canvas.height),J.set(0,0,i.canvas.width,i.canvas.height),a.reset(),r.reset(),l.reset()}return{buffers:{color:a,depth:r,stencil:l},enable:pe,disable:ve,bindFramebuffer:Ve,drawBuffers:ze,useProgram:Qe,setBlending:Z,setMaterial:Le,setFlipSided:Ue,setCullFace:Re,setLineWidth:me,setPolygonOffset:Pe,setScissorTest:Se,activeTexture:ye,bindTexture:nt,unbindTexture:ee,compressedTexImage2D:V,compressedTexImage3D:de,texImage2D:Y,texImage3D:Oe,updateUBOMapping:fe,uniformBlockBinding:Ae,texStorage2D:at,texStorage3D:ut,texSubImage2D:Be,texSubImage3D:be,compressedTexSubImage2D:Me,compressedTexSubImage3D:$e,scissor:Ke,viewport:it,reset:st}}function q9(i,e,t,n,s,a,r){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new tt,d=new WeakMap;let g;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(ee,V){return y?new OffscreenCanvas(ee,V):vv("canvas")}function A(ee,V,de){let Be=1;const be=nt(ee);if((be.width>de||be.height>de)&&(Be=de/Math.max(be.width,be.height)),Be<1)if(typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ee instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ee instanceof ImageBitmap||typeof VideoFrame<"u"&&ee instanceof VideoFrame){const Me=Math.floor(Be*be.width),$e=Math.floor(Be*be.height);g===void 0&&(g=S(Me,$e));const at=V?S(Me,$e):g;return at.width=Me,at.height=$e,at.getContext("2d").drawImage(ee,0,0,Me,$e),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+be.width+"x"+be.height+") to ("+Me+"x"+$e+")."),at}else return"data"in ee&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+be.width+"x"+be.height+")."),ee;return ee}function M(ee){return ee.generateMipmaps}function b(ee){i.generateMipmap(ee)}function C(ee){return ee.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:ee.isWebGL3DRenderTarget?i.TEXTURE_3D:ee.isWebGLArrayRenderTarget||ee.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function w(ee,V,de,Be,be=!1){if(ee!==null){if(i[ee]!==void 0)return i[ee];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ee+"'")}let Me=V;if(V===i.RED&&(de===i.FLOAT&&(Me=i.R32F),de===i.HALF_FLOAT&&(Me=i.R16F),de===i.UNSIGNED_BYTE&&(Me=i.R8)),V===i.RED_INTEGER&&(de===i.UNSIGNED_BYTE&&(Me=i.R8UI),de===i.UNSIGNED_SHORT&&(Me=i.R16UI),de===i.UNSIGNED_INT&&(Me=i.R32UI),de===i.BYTE&&(Me=i.R8I),de===i.SHORT&&(Me=i.R16I),de===i.INT&&(Me=i.R32I)),V===i.RG&&(de===i.FLOAT&&(Me=i.RG32F),de===i.HALF_FLOAT&&(Me=i.RG16F),de===i.UNSIGNED_BYTE&&(Me=i.RG8)),V===i.RG_INTEGER&&(de===i.UNSIGNED_BYTE&&(Me=i.RG8UI),de===i.UNSIGNED_SHORT&&(Me=i.RG16UI),de===i.UNSIGNED_INT&&(Me=i.RG32UI),de===i.BYTE&&(Me=i.RG8I),de===i.SHORT&&(Me=i.RG16I),de===i.INT&&(Me=i.RG32I)),V===i.RGB_INTEGER&&(de===i.UNSIGNED_BYTE&&(Me=i.RGB8UI),de===i.UNSIGNED_SHORT&&(Me=i.RGB16UI),de===i.UNSIGNED_INT&&(Me=i.RGB32UI),de===i.BYTE&&(Me=i.RGB8I),de===i.SHORT&&(Me=i.RGB16I),de===i.INT&&(Me=i.RGB32I)),V===i.RGBA_INTEGER&&(de===i.UNSIGNED_BYTE&&(Me=i.RGBA8UI),de===i.UNSIGNED_SHORT&&(Me=i.RGBA16UI),de===i.UNSIGNED_INT&&(Me=i.RGBA32UI),de===i.BYTE&&(Me=i.RGBA8I),de===i.SHORT&&(Me=i.RGBA16I),de===i.INT&&(Me=i.RGBA32I)),V===i.RGB&&de===i.UNSIGNED_INT_5_9_9_9_REV&&(Me=i.RGB9_E5),V===i.RGBA){const $e=be?pv:Nn.getTransfer(Be);de===i.FLOAT&&(Me=i.RGBA32F),de===i.HALF_FLOAT&&(Me=i.RGBA16F),de===i.UNSIGNED_BYTE&&(Me=$e===li?i.SRGB8_ALPHA8:i.RGBA8),de===i.UNSIGNED_SHORT_4_4_4_4&&(Me=i.RGBA4),de===i.UNSIGNED_SHORT_5_5_5_1&&(Me=i.RGB5_A1)}return(Me===i.R16F||Me===i.R32F||Me===i.RG16F||Me===i.RG32F||Me===i.RGBA16F||Me===i.RGBA32F)&&e.get("EXT_color_buffer_float"),Me}function R(ee,V){let de;return ee?V===null||V===Bc||V===Od?de=i.DEPTH24_STENCIL8:V===Zs?de=i.DEPTH32F_STENCIL8:V===Bm&&(de=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):V===null||V===Bc||V===Od?de=i.DEPTH_COMPONENT24:V===Zs?de=i.DEPTH_COMPONENT32F:V===Bm&&(de=i.DEPTH_COMPONENT16),de}function U(ee,V){return M(ee)===!0||ee.isFramebufferTexture&&ee.minFilter!==Hi&&ee.minFilter!==ti?Math.log2(Math.max(V.width,V.height))+1:ee.mipmaps!==void 0&&ee.mipmaps.length>0?ee.mipmaps.length:ee.isCompressedTexture&&Array.isArray(ee.image)?V.mipmaps.length:1}function O(ee){const V=ee.target;V.removeEventListener("dispose",O),P(V),V.isVideoTexture&&d.delete(V)}function I(ee){const V=ee.target;V.removeEventListener("dispose",I),L(V)}function P(ee){const V=n.get(ee);if(V.__webglInit===void 0)return;const de=ee.source,Be=v.get(de);if(Be){const be=Be[V.__cacheKey];be.usedTimes--,be.usedTimes===0&&N(ee),Object.keys(Be).length===0&&v.delete(de)}n.remove(ee)}function N(ee){const V=n.get(ee);i.deleteTexture(V.__webglTexture);const de=ee.source,Be=v.get(de);delete Be[V.__cacheKey],r.memory.textures--}function L(ee){const V=n.get(ee);if(ee.depthTexture&&(ee.depthTexture.dispose(),n.remove(ee.depthTexture)),ee.isWebGLCubeRenderTarget)for(let Be=0;Be<6;Be++){if(Array.isArray(V.__webglFramebuffer[Be]))for(let be=0;be<V.__webglFramebuffer[Be].length;be++)i.deleteFramebuffer(V.__webglFramebuffer[Be][be]);else i.deleteFramebuffer(V.__webglFramebuffer[Be]);V.__webglDepthbuffer&&i.deleteRenderbuffer(V.__webglDepthbuffer[Be])}else{if(Array.isArray(V.__webglFramebuffer))for(let Be=0;Be<V.__webglFramebuffer.length;Be++)i.deleteFramebuffer(V.__webglFramebuffer[Be]);else i.deleteFramebuffer(V.__webglFramebuffer);if(V.__webglDepthbuffer&&i.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&i.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer)for(let Be=0;Be<V.__webglColorRenderbuffer.length;Be++)V.__webglColorRenderbuffer[Be]&&i.deleteRenderbuffer(V.__webglColorRenderbuffer[Be]);V.__webglDepthRenderbuffer&&i.deleteRenderbuffer(V.__webglDepthRenderbuffer)}const de=ee.textures;for(let Be=0,be=de.length;Be<be;Be++){const Me=n.get(de[Be]);Me.__webglTexture&&(i.deleteTexture(Me.__webglTexture),r.memory.textures--),n.remove(de[Be])}n.remove(ee)}let k=0;function X(){k=0}function W(){const ee=k;return ee>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ee+" texture units while this GPU supports only "+s.maxTextures),k+=1,ee}function $(ee){const V=[];return V.push(ee.wrapS),V.push(ee.wrapT),V.push(ee.wrapR||0),V.push(ee.magFilter),V.push(ee.minFilter),V.push(ee.anisotropy),V.push(ee.internalFormat),V.push(ee.format),V.push(ee.type),V.push(ee.generateMipmaps),V.push(ee.premultiplyAlpha),V.push(ee.flipY),V.push(ee.unpackAlignment),V.push(ee.colorSpace),V.join()}function ce(ee,V){const de=n.get(ee);if(ee.isVideoTexture&&Se(ee),ee.isRenderTargetTexture===!1&&ee.version>0&&de.__version!==ee.version){const Be=ee.image;if(Be===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Be.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ue(de,ee,V);return}}t.bindTexture(i.TEXTURE_2D,de.__webglTexture,i.TEXTURE0+V)}function z(ee,V){const de=n.get(ee);if(ee.version>0&&de.__version!==ee.version){ue(de,ee,V);return}t.bindTexture(i.TEXTURE_2D_ARRAY,de.__webglTexture,i.TEXTURE0+V)}function q(ee,V){const de=n.get(ee);if(ee.version>0&&de.__version!==ee.version){ue(de,ee,V);return}t.bindTexture(i.TEXTURE_3D,de.__webglTexture,i.TEXTURE0+V)}function Q(ee,V){const de=n.get(ee);if(ee.version>0&&de.__version!==ee.version){pe(de,ee,V);return}t.bindTexture(i.TEXTURE_CUBE_MAP,de.__webglTexture,i.TEXTURE0+V)}const re={[Ff]:i.REPEAT,[eo]:i.CLAMP_TO_EDGE,[Dm]:i.MIRRORED_REPEAT},H={[Hi]:i.NEAREST,[tS]:i.NEAREST_MIPMAP_NEAREST,[hd]:i.NEAREST_MIPMAP_LINEAR,[ti]:i.LINEAR,[Sm]:i.LINEAR_MIPMAP_NEAREST,[to]:i.LINEAR_MIPMAP_LINEAR},G={[MB]:i.NEVER,[RB]:i.ALWAYS,[bB]:i.LESS,[Xb]:i.LEQUAL,[TB]:i.EQUAL,[wB]:i.GEQUAL,[EB]:i.GREATER,[CB]:i.NOTEQUAL};function K(ee,V){if(V.type===Zs&&e.has("OES_texture_float_linear")===!1&&(V.magFilter===ti||V.magFilter===Sm||V.magFilter===hd||V.magFilter===to||V.minFilter===ti||V.minFilter===Sm||V.minFilter===hd||V.minFilter===to)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(ee,i.TEXTURE_WRAP_S,re[V.wrapS]),i.texParameteri(ee,i.TEXTURE_WRAP_T,re[V.wrapT]),(ee===i.TEXTURE_3D||ee===i.TEXTURE_2D_ARRAY)&&i.texParameteri(ee,i.TEXTURE_WRAP_R,re[V.wrapR]),i.texParameteri(ee,i.TEXTURE_MAG_FILTER,H[V.magFilter]),i.texParameteri(ee,i.TEXTURE_MIN_FILTER,H[V.minFilter]),V.compareFunction&&(i.texParameteri(ee,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(ee,i.TEXTURE_COMPARE_FUNC,G[V.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(V.magFilter===Hi||V.minFilter!==hd&&V.minFilter!==to||V.type===Zs&&e.has("OES_texture_float_linear")===!1)return;if(V.anisotropy>1||n.get(V).__currentAnisotropy){const de=e.get("EXT_texture_filter_anisotropic");i.texParameterf(ee,de.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,s.getMaxAnisotropy())),n.get(V).__currentAnisotropy=V.anisotropy}}}function se(ee,V){let de=!1;ee.__webglInit===void 0&&(ee.__webglInit=!0,V.addEventListener("dispose",O));const Be=V.source;let be=v.get(Be);be===void 0&&(be={},v.set(Be,be));const Me=$(V);if(Me!==ee.__cacheKey){be[Me]===void 0&&(be[Me]={texture:i.createTexture(),usedTimes:0},r.memory.textures++,de=!0),be[Me].usedTimes++;const $e=be[ee.__cacheKey];$e!==void 0&&(be[ee.__cacheKey].usedTimes--,$e.usedTimes===0&&N(V)),ee.__cacheKey=Me,ee.__webglTexture=be[Me].texture}return de}function J(ee,V,de){return Math.floor(Math.floor(ee/de)/V)}function ne(ee,V,de,Be){const Me=ee.updateRanges;if(Me.length===0)t.texSubImage2D(i.TEXTURE_2D,0,0,0,V.width,V.height,de,Be,V.data);else{Me.sort((Oe,Ke)=>Oe.start-Ke.start);let $e=0;for(let Oe=1;Oe<Me.length;Oe++){const Ke=Me[$e],it=Me[Oe],fe=Ke.start+Ke.count,Ae=J(it.start,V.width,4),st=J(Ke.start,V.width,4);it.start<=fe+1&&Ae===st&&J(it.start+it.count-1,V.width,4)===Ae?Ke.count=Math.max(Ke.count,it.start+it.count-Ke.start):(++$e,Me[$e]=it)}Me.length=$e+1;const at=i.getParameter(i.UNPACK_ROW_LENGTH),ut=i.getParameter(i.UNPACK_SKIP_PIXELS),Y=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,V.width);for(let Oe=0,Ke=Me.length;Oe<Ke;Oe++){const it=Me[Oe],fe=Math.floor(it.start/4),Ae=Math.ceil(it.count/4),st=fe%V.width,he=Math.floor(fe/V.width),je=Ae,He=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,st),i.pixelStorei(i.UNPACK_SKIP_ROWS,he),t.texSubImage2D(i.TEXTURE_2D,0,st,he,je,He,de,Be,V.data)}ee.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,at),i.pixelStorei(i.UNPACK_SKIP_PIXELS,ut),i.pixelStorei(i.UNPACK_SKIP_ROWS,Y)}}function ue(ee,V,de){let Be=i.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(Be=i.TEXTURE_2D_ARRAY),V.isData3DTexture&&(Be=i.TEXTURE_3D);const be=se(ee,V),Me=V.source;t.bindTexture(Be,ee.__webglTexture,i.TEXTURE0+de);const $e=n.get(Me);if(Me.version!==$e.__version||be===!0){t.activeTexture(i.TEXTURE0+de);const at=Nn.getPrimaries(Nn.workingColorSpace),ut=V.colorSpace===Ul?null:Nn.getPrimaries(V.colorSpace),Y=V.colorSpace===Ul||at===ut?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,V.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,V.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Y);let Oe=A(V.image,!1,s.maxTextureSize);Oe=ye(V,Oe);const Ke=a.convert(V.format,V.colorSpace),it=a.convert(V.type);let fe=w(V.internalFormat,Ke,it,V.colorSpace,V.isVideoTexture);K(Be,V);let Ae;const st=V.mipmaps,he=V.isVideoTexture!==!0,je=$e.__version===void 0||be===!0,He=Me.dataReady,gt=U(V,Oe);if(V.isDepthTexture)fe=R(V.format===Nd,V.type),je&&(he?t.texStorage2D(i.TEXTURE_2D,1,fe,Oe.width,Oe.height):t.texImage2D(i.TEXTURE_2D,0,fe,Oe.width,Oe.height,0,Ke,it,null));else if(V.isDataTexture)if(st.length>0){he&&je&&t.texStorage2D(i.TEXTURE_2D,gt,fe,st[0].width,st[0].height);for(let et=0,Ge=st.length;et<Ge;et++)Ae=st[et],he?He&&t.texSubImage2D(i.TEXTURE_2D,et,0,0,Ae.width,Ae.height,Ke,it,Ae.data):t.texImage2D(i.TEXTURE_2D,et,fe,Ae.width,Ae.height,0,Ke,it,Ae.data);V.generateMipmaps=!1}else he?(je&&t.texStorage2D(i.TEXTURE_2D,gt,fe,Oe.width,Oe.height),He&&ne(V,Oe,Ke,it)):t.texImage2D(i.TEXTURE_2D,0,fe,Oe.width,Oe.height,0,Ke,it,Oe.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){he&&je&&t.texStorage3D(i.TEXTURE_2D_ARRAY,gt,fe,st[0].width,st[0].height,Oe.depth);for(let et=0,Ge=st.length;et<Ge;et++)if(Ae=st[et],V.format!==Ua)if(Ke!==null)if(he){if(He)if(V.layerUpdates.size>0){const pt=OM(Ae.width,Ae.height,V.format,V.type);for(const vt of V.layerUpdates){const mt=Ae.data.subarray(vt*pt/Ae.data.BYTES_PER_ELEMENT,(vt+1)*pt/Ae.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,et,0,0,vt,Ae.width,Ae.height,1,Ke,mt)}V.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,et,0,0,0,Ae.width,Ae.height,Oe.depth,Ke,Ae.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,et,fe,Ae.width,Ae.height,Oe.depth,0,Ae.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else he?He&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,et,0,0,0,Ae.width,Ae.height,Oe.depth,Ke,it,Ae.data):t.texImage3D(i.TEXTURE_2D_ARRAY,et,fe,Ae.width,Ae.height,Oe.depth,0,Ke,it,Ae.data)}else{he&&je&&t.texStorage2D(i.TEXTURE_2D,gt,fe,st[0].width,st[0].height);for(let et=0,Ge=st.length;et<Ge;et++)Ae=st[et],V.format!==Ua?Ke!==null?he?He&&t.compressedTexSubImage2D(i.TEXTURE_2D,et,0,0,Ae.width,Ae.height,Ke,Ae.data):t.compressedTexImage2D(i.TEXTURE_2D,et,fe,Ae.width,Ae.height,0,Ae.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):he?He&&t.texSubImage2D(i.TEXTURE_2D,et,0,0,Ae.width,Ae.height,Ke,it,Ae.data):t.texImage2D(i.TEXTURE_2D,et,fe,Ae.width,Ae.height,0,Ke,it,Ae.data)}else if(V.isDataArrayTexture)if(he){if(je&&t.texStorage3D(i.TEXTURE_2D_ARRAY,gt,fe,Oe.width,Oe.height,Oe.depth),He)if(V.layerUpdates.size>0){const et=OM(Oe.width,Oe.height,V.format,V.type);for(const Ge of V.layerUpdates){const pt=Oe.data.subarray(Ge*et/Oe.data.BYTES_PER_ELEMENT,(Ge+1)*et/Oe.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Ge,Oe.width,Oe.height,1,Ke,it,pt)}V.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Oe.width,Oe.height,Oe.depth,Ke,it,Oe.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,fe,Oe.width,Oe.height,Oe.depth,0,Ke,it,Oe.data);else if(V.isData3DTexture)he?(je&&t.texStorage3D(i.TEXTURE_3D,gt,fe,Oe.width,Oe.height,Oe.depth),He&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Oe.width,Oe.height,Oe.depth,Ke,it,Oe.data)):t.texImage3D(i.TEXTURE_3D,0,fe,Oe.width,Oe.height,Oe.depth,0,Ke,it,Oe.data);else if(V.isFramebufferTexture){if(je)if(he)t.texStorage2D(i.TEXTURE_2D,gt,fe,Oe.width,Oe.height);else{let et=Oe.width,Ge=Oe.height;for(let pt=0;pt<gt;pt++)t.texImage2D(i.TEXTURE_2D,pt,fe,et,Ge,0,Ke,it,null),et>>=1,Ge>>=1}}else if(st.length>0){if(he&&je){const et=nt(st[0]);t.texStorage2D(i.TEXTURE_2D,gt,fe,et.width,et.height)}for(let et=0,Ge=st.length;et<Ge;et++)Ae=st[et],he?He&&t.texSubImage2D(i.TEXTURE_2D,et,0,0,Ke,it,Ae):t.texImage2D(i.TEXTURE_2D,et,fe,Ke,it,Ae);V.generateMipmaps=!1}else if(he){if(je){const et=nt(Oe);t.texStorage2D(i.TEXTURE_2D,gt,fe,et.width,et.height)}He&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Ke,it,Oe)}else t.texImage2D(i.TEXTURE_2D,0,fe,Ke,it,Oe);M(V)&&b(Be),$e.__version=Me.version,V.onUpdate&&V.onUpdate(V)}ee.__version=V.version}function pe(ee,V,de){if(V.image.length!==6)return;const Be=se(ee,V),be=V.source;t.bindTexture(i.TEXTURE_CUBE_MAP,ee.__webglTexture,i.TEXTURE0+de);const Me=n.get(be);if(be.version!==Me.__version||Be===!0){t.activeTexture(i.TEXTURE0+de);const $e=Nn.getPrimaries(Nn.workingColorSpace),at=V.colorSpace===Ul?null:Nn.getPrimaries(V.colorSpace),ut=V.colorSpace===Ul||$e===at?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,V.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,V.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ut);const Y=V.isCompressedTexture||V.image[0].isCompressedTexture,Oe=V.image[0]&&V.image[0].isDataTexture,Ke=[];for(let Ge=0;Ge<6;Ge++)!Y&&!Oe?Ke[Ge]=A(V.image[Ge],!0,s.maxCubemapSize):Ke[Ge]=Oe?V.image[Ge].image:V.image[Ge],Ke[Ge]=ye(V,Ke[Ge]);const it=Ke[0],fe=a.convert(V.format,V.colorSpace),Ae=a.convert(V.type),st=w(V.internalFormat,fe,Ae,V.colorSpace),he=V.isVideoTexture!==!0,je=Me.__version===void 0||Be===!0,He=be.dataReady;let gt=U(V,it);K(i.TEXTURE_CUBE_MAP,V);let et;if(Y){he&&je&&t.texStorage2D(i.TEXTURE_CUBE_MAP,gt,st,it.width,it.height);for(let Ge=0;Ge<6;Ge++){et=Ke[Ge].mipmaps;for(let pt=0;pt<et.length;pt++){const vt=et[pt];V.format!==Ua?fe!==null?he?He&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,pt,0,0,vt.width,vt.height,fe,vt.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,pt,st,vt.width,vt.height,0,vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):he?He&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,pt,0,0,vt.width,vt.height,fe,Ae,vt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,pt,st,vt.width,vt.height,0,fe,Ae,vt.data)}}}else{if(et=V.mipmaps,he&&je){et.length>0&&gt++;const Ge=nt(Ke[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,gt,st,Ge.width,Ge.height)}for(let Ge=0;Ge<6;Ge++)if(Oe){he?He&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,0,0,Ke[Ge].width,Ke[Ge].height,fe,Ae,Ke[Ge].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,st,Ke[Ge].width,Ke[Ge].height,0,fe,Ae,Ke[Ge].data);for(let pt=0;pt<et.length;pt++){const mt=et[pt].image[Ge].image;he?He&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,pt+1,0,0,mt.width,mt.height,fe,Ae,mt.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,pt+1,st,mt.width,mt.height,0,fe,Ae,mt.data)}}else{he?He&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,0,0,fe,Ae,Ke[Ge]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,st,fe,Ae,Ke[Ge]);for(let pt=0;pt<et.length;pt++){const vt=et[pt];he?He&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,pt+1,0,0,fe,Ae,vt.image[Ge]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,pt+1,st,fe,Ae,vt.image[Ge])}}}M(V)&&b(i.TEXTURE_CUBE_MAP),Me.__version=be.version,V.onUpdate&&V.onUpdate(V)}ee.__version=V.version}function ve(ee,V,de,Be,be,Me){const $e=a.convert(de.format,de.colorSpace),at=a.convert(de.type),ut=w(de.internalFormat,$e,at,de.colorSpace),Y=n.get(V),Oe=n.get(de);if(Oe.__renderTarget=V,!Y.__hasExternalTextures){const Ke=Math.max(1,V.width>>Me),it=Math.max(1,V.height>>Me);be===i.TEXTURE_3D||be===i.TEXTURE_2D_ARRAY?t.texImage3D(be,Me,ut,Ke,it,V.depth,0,$e,at,null):t.texImage2D(be,Me,ut,Ke,it,0,$e,at,null)}t.bindFramebuffer(i.FRAMEBUFFER,ee),Pe(V)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Be,be,Oe.__webglTexture,0,me(V)):(be===i.TEXTURE_2D||be>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&be<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Be,be,Oe.__webglTexture,Me),t.bindFramebuffer(i.FRAMEBUFFER,null)}function Ve(ee,V,de){if(i.bindRenderbuffer(i.RENDERBUFFER,ee),V.depthBuffer){const Be=V.depthTexture,be=Be&&Be.isDepthTexture?Be.type:null,Me=R(V.stencilBuffer,be),$e=V.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,at=me(V);Pe(V)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,at,Me,V.width,V.height):de?i.renderbufferStorageMultisample(i.RENDERBUFFER,at,Me,V.width,V.height):i.renderbufferStorage(i.RENDERBUFFER,Me,V.width,V.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,$e,i.RENDERBUFFER,ee)}else{const Be=V.textures;for(let be=0;be<Be.length;be++){const Me=Be[be],$e=a.convert(Me.format,Me.colorSpace),at=a.convert(Me.type),ut=w(Me.internalFormat,$e,at,Me.colorSpace),Y=me(V);de&&Pe(V)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Y,ut,V.width,V.height):Pe(V)?l.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Y,ut,V.width,V.height):i.renderbufferStorage(i.RENDERBUFFER,ut,V.width,V.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function ze(ee,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,ee),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Be=n.get(V.depthTexture);Be.__renderTarget=V,(!Be.__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),ce(V.depthTexture,0);const be=Be.__webglTexture,Me=me(V);if(V.depthTexture.format===Um)Pe(V)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,be,0,Me):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,be,0);else if(V.depthTexture.format===Nd)Pe(V)?l.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,be,0,Me):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,be,0);else throw new Error("Unknown depthTexture format")}function Qe(ee){const V=n.get(ee),de=ee.isWebGLCubeRenderTarget===!0;if(V.__boundDepthTexture!==ee.depthTexture){const Be=ee.depthTexture;if(V.__depthDisposeCallback&&V.__depthDisposeCallback(),Be){const be=()=>{delete V.__boundDepthTexture,delete V.__depthDisposeCallback,Be.removeEventListener("dispose",be)};Be.addEventListener("dispose",be),V.__depthDisposeCallback=be}V.__boundDepthTexture=Be}if(ee.depthTexture&&!V.__autoAllocateDepthBuffer){if(de)throw new Error("target.depthTexture not supported in Cube render targets");const Be=ee.texture.mipmaps;Be&&Be.length>0?ze(V.__webglFramebuffer[0],ee):ze(V.__webglFramebuffer,ee)}else if(de){V.__webglDepthbuffer=[];for(let Be=0;Be<6;Be++)if(t.bindFramebuffer(i.FRAMEBUFFER,V.__webglFramebuffer[Be]),V.__webglDepthbuffer[Be]===void 0)V.__webglDepthbuffer[Be]=i.createRenderbuffer(),Ve(V.__webglDepthbuffer[Be],ee,!1);else{const be=ee.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Me=V.__webglDepthbuffer[Be];i.bindRenderbuffer(i.RENDERBUFFER,Me),i.framebufferRenderbuffer(i.FRAMEBUFFER,be,i.RENDERBUFFER,Me)}}else{const Be=ee.texture.mipmaps;if(Be&&Be.length>0?t.bindFramebuffer(i.FRAMEBUFFER,V.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer===void 0)V.__webglDepthbuffer=i.createRenderbuffer(),Ve(V.__webglDepthbuffer,ee,!1);else{const be=ee.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Me=V.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,Me),i.framebufferRenderbuffer(i.FRAMEBUFFER,be,i.RENDERBUFFER,Me)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function Ie(ee,V,de){const Be=n.get(ee);V!==void 0&&ve(Be.__webglFramebuffer,ee,ee.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),de!==void 0&&Qe(ee)}function rt(ee){const V=ee.texture,de=n.get(ee),Be=n.get(V);ee.addEventListener("dispose",I);const be=ee.textures,Me=ee.isWebGLCubeRenderTarget===!0,$e=be.length>1;if($e||(Be.__webglTexture===void 0&&(Be.__webglTexture=i.createTexture()),Be.__version=V.version,r.memory.textures++),Me){de.__webglFramebuffer=[];for(let at=0;at<6;at++)if(V.mipmaps&&V.mipmaps.length>0){de.__webglFramebuffer[at]=[];for(let ut=0;ut<V.mipmaps.length;ut++)de.__webglFramebuffer[at][ut]=i.createFramebuffer()}else de.__webglFramebuffer[at]=i.createFramebuffer()}else{if(V.mipmaps&&V.mipmaps.length>0){de.__webglFramebuffer=[];for(let at=0;at<V.mipmaps.length;at++)de.__webglFramebuffer[at]=i.createFramebuffer()}else de.__webglFramebuffer=i.createFramebuffer();if($e)for(let at=0,ut=be.length;at<ut;at++){const Y=n.get(be[at]);Y.__webglTexture===void 0&&(Y.__webglTexture=i.createTexture(),r.memory.textures++)}if(ee.samples>0&&Pe(ee)===!1){de.__webglMultisampledFramebuffer=i.createFramebuffer(),de.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,de.__webglMultisampledFramebuffer);for(let at=0;at<be.length;at++){const ut=be[at];de.__webglColorRenderbuffer[at]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,de.__webglColorRenderbuffer[at]);const Y=a.convert(ut.format,ut.colorSpace),Oe=a.convert(ut.type),Ke=w(ut.internalFormat,Y,Oe,ut.colorSpace,ee.isXRRenderTarget===!0),it=me(ee);i.renderbufferStorageMultisample(i.RENDERBUFFER,it,Ke,ee.width,ee.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+at,i.RENDERBUFFER,de.__webglColorRenderbuffer[at])}i.bindRenderbuffer(i.RENDERBUFFER,null),ee.depthBuffer&&(de.__webglDepthRenderbuffer=i.createRenderbuffer(),Ve(de.__webglDepthRenderbuffer,ee,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Me){t.bindTexture(i.TEXTURE_CUBE_MAP,Be.__webglTexture),K(i.TEXTURE_CUBE_MAP,V);for(let at=0;at<6;at++)if(V.mipmaps&&V.mipmaps.length>0)for(let ut=0;ut<V.mipmaps.length;ut++)ve(de.__webglFramebuffer[at][ut],ee,V,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+at,ut);else ve(de.__webglFramebuffer[at],ee,V,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+at,0);M(V)&&b(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if($e){for(let at=0,ut=be.length;at<ut;at++){const Y=be[at],Oe=n.get(Y);t.bindTexture(i.TEXTURE_2D,Oe.__webglTexture),K(i.TEXTURE_2D,Y),ve(de.__webglFramebuffer,ee,Y,i.COLOR_ATTACHMENT0+at,i.TEXTURE_2D,0),M(Y)&&b(i.TEXTURE_2D)}t.unbindTexture()}else{let at=i.TEXTURE_2D;if((ee.isWebGL3DRenderTarget||ee.isWebGLArrayRenderTarget)&&(at=ee.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(at,Be.__webglTexture),K(at,V),V.mipmaps&&V.mipmaps.length>0)for(let ut=0;ut<V.mipmaps.length;ut++)ve(de.__webglFramebuffer[ut],ee,V,i.COLOR_ATTACHMENT0,at,ut);else ve(de.__webglFramebuffer,ee,V,i.COLOR_ATTACHMENT0,at,0);M(V)&&b(at),t.unbindTexture()}ee.depthBuffer&&Qe(ee)}function Z(ee){const V=ee.textures;for(let de=0,Be=V.length;de<Be;de++){const be=V[de];if(M(be)){const Me=C(ee),$e=n.get(be).__webglTexture;t.bindTexture(Me,$e),b(Me),t.unbindTexture()}}}const Le=[],Ue=[];function Re(ee){if(ee.samples>0){if(Pe(ee)===!1){const V=ee.textures,de=ee.width,Be=ee.height;let be=i.COLOR_BUFFER_BIT;const Me=ee.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,$e=n.get(ee),at=V.length>1;if(at)for(let Y=0;Y<V.length;Y++)t.bindFramebuffer(i.FRAMEBUFFER,$e.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Y,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,$e.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Y,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,$e.__webglMultisampledFramebuffer);const ut=ee.texture.mipmaps;ut&&ut.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,$e.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,$e.__webglFramebuffer);for(let Y=0;Y<V.length;Y++){if(ee.resolveDepthBuffer&&(ee.depthBuffer&&(be|=i.DEPTH_BUFFER_BIT),ee.stencilBuffer&&ee.resolveStencilBuffer&&(be|=i.STENCIL_BUFFER_BIT)),at){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,$e.__webglColorRenderbuffer[Y]);const Oe=n.get(V[Y]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Oe,0)}i.blitFramebuffer(0,0,de,Be,0,0,de,Be,be,i.NEAREST),c===!0&&(Le.length=0,Ue.length=0,Le.push(i.COLOR_ATTACHMENT0+Y),ee.depthBuffer&&ee.resolveDepthBuffer===!1&&(Le.push(Me),Ue.push(Me),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Ue)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Le))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),at)for(let Y=0;Y<V.length;Y++){t.bindFramebuffer(i.FRAMEBUFFER,$e.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Y,i.RENDERBUFFER,$e.__webglColorRenderbuffer[Y]);const Oe=n.get(V[Y]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,$e.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Y,i.TEXTURE_2D,Oe,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,$e.__webglMultisampledFramebuffer)}else if(ee.depthBuffer&&ee.resolveDepthBuffer===!1&&c){const V=ee.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[V])}}}function me(ee){return Math.min(s.maxSamples,ee.samples)}function Pe(ee){const V=n.get(ee);return ee.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function Se(ee){const V=r.render.frame;d.get(ee)!==V&&(d.set(ee,V),ee.update())}function ye(ee,V){const de=ee.colorSpace,Be=ee.format,be=ee.type;return ee.isCompressedTexture===!0||ee.isVideoTexture===!0||de!==Pl&&de!==Ul&&(Nn.getTransfer(de)===li?(Be!==Ua||be!==Gs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",de)),V}function nt(ee){return typeof HTMLImageElement<"u"&&ee instanceof HTMLImageElement?(f.width=ee.naturalWidth||ee.width,f.height=ee.naturalHeight||ee.height):typeof VideoFrame<"u"&&ee instanceof VideoFrame?(f.width=ee.displayWidth,f.height=ee.displayHeight):(f.width=ee.width,f.height=ee.height),f}this.allocateTextureUnit=W,this.resetTextureUnits=X,this.setTexture2D=ce,this.setTexture2DArray=z,this.setTexture3D=q,this.setTextureCube=Q,this.rebindTextures=Ie,this.setupRenderTarget=rt,this.updateRenderTargetMipmap=Z,this.updateMultisampleRenderTarget=Re,this.setupDepthRenderbuffer=Qe,this.setupFrameBufferTexture=ve,this.useMultisampledRTT=Pe}function D4(i,e){function t(n,s=Ul){let a;const r=Nn.getTransfer(s);if(n===Gs)return i.UNSIGNED_BYTE;if(n===iS)return i.UNSIGNED_SHORT_4_4_4_4;if(n===sS)return i.UNSIGNED_SHORT_5_5_5_1;if(n===Pb)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===Ob)return i.BYTE;if(n===Nb)return i.SHORT;if(n===Bm)return i.UNSIGNED_SHORT;if(n===nS)return i.INT;if(n===Bc)return i.UNSIGNED_INT;if(n===Zs)return i.FLOAT;if(n===Ll)return i.HALF_FLOAT;if(n===Ib)return i.ALPHA;if(n===Fb)return i.RGB;if(n===Ua)return i.RGBA;if(n===Um)return i.DEPTH_COMPONENT;if(n===Nd)return i.DEPTH_STENCIL;if(n===aS)return i.RED;if(n===Hv)return i.RED_INTEGER;if(n===zb)return i.RG;if(n===rS)return i.RG_INTEGER;if(n===oS)return i.RGBA_INTEGER;if(n===Yg||n===Wg||n===qg||n===Kg)if(r===li)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(n===Yg)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Wg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===qg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Kg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(n===Yg)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Wg)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===qg)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Kg)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===nx||n===ix||n===sx||n===ax)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(n===nx)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===ix)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===sx)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===ax)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===rx||n===ox||n===lx)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(n===rx||n===ox)return r===li?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===lx)return r===li?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===cx||n===ux||n===fx||n===hx||n===dx||n===px||n===mx||n===gx||n===vx||n===yx||n===_x||n===xx||n===Sx||n===Ax)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(n===cx)return r===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===ux)return r===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===fx)return r===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===hx)return r===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===dx)return r===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===px)return r===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===mx)return r===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===gx)return r===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===vx)return r===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===yx)return r===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===_x)return r===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===xx)return r===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Sx)return r===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Ax)return r===li?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Jg||n===Mx||n===bx)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(n===Jg)return r===li?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Mx)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===bx)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===Gb||n===Tx||n===Ex||n===Cx)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(n===Jg)return a.COMPRESSED_RED_RGTC1_EXT;if(n===Tx)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Ex)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Cx)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Od?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}const K9=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,J9=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Z9{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(this.texture===null){const s=new Ai,a=e.properties.get(s);a.__webglTexture=t.texture,(t.depthNear!==n.depthNear||t.depthFar!==n.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new ls({vertexShader:K9,fragmentShader:J9,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Di(new Ru(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Q9 extends uo{constructor(e,t){super();const n=this;let s=null,a=1,r=null,l="local-floor",c=1,f=null,d=null,g=null,v=null,y=null,S=null;const A=new Z9,M=t.getContextAttributes();let b=null,C=null;const w=[],R=[],U=new tt;let O=null;const I=new Ji;I.viewport=new wn;const P=new Ji;P.viewport=new wn;const N=[I,P],L=new _4;let k=null,X=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(J){let ne=w[J];return ne===void 0&&(ne=new U_,w[J]=ne),ne.getTargetRaySpace()},this.getControllerGrip=function(J){let ne=w[J];return ne===void 0&&(ne=new U_,w[J]=ne),ne.getGripSpace()},this.getHand=function(J){let ne=w[J];return ne===void 0&&(ne=new U_,w[J]=ne),ne.getHandSpace()};function W(J){const ne=R.indexOf(J.inputSource);if(ne===-1)return;const ue=w[ne];ue!==void 0&&(ue.update(J.inputSource,J.frame,f||r),ue.dispatchEvent({type:J.type,data:J.inputSource}))}function $(){s.removeEventListener("select",W),s.removeEventListener("selectstart",W),s.removeEventListener("selectend",W),s.removeEventListener("squeeze",W),s.removeEventListener("squeezestart",W),s.removeEventListener("squeezeend",W),s.removeEventListener("end",$),s.removeEventListener("inputsourceschange",ce);for(let J=0;J<w.length;J++){const ne=R[J];ne!==null&&(R[J]=null,w[J].disconnect(ne))}k=null,X=null,A.reset(),e.setRenderTarget(b),y=null,v=null,g=null,s=null,C=null,se.stop(),n.isPresenting=!1,e.setPixelRatio(O),e.setSize(U.width,U.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(J){a=J,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(J){l=J,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||r},this.setReferenceSpace=function(J){f=J},this.getBaseLayer=function(){return v!==null?v:y},this.getBinding=function(){return g},this.getFrame=function(){return S},this.getSession=function(){return s},this.setSession=async function(J){if(s=J,s!==null){if(b=e.getRenderTarget(),s.addEventListener("select",W),s.addEventListener("selectstart",W),s.addEventListener("selectend",W),s.addEventListener("squeeze",W),s.addEventListener("squeezestart",W),s.addEventListener("squeezeend",W),s.addEventListener("end",$),s.addEventListener("inputsourceschange",ce),M.xrCompatible!==!0&&await t.makeXRCompatible(),O=e.getPixelRatio(),e.getSize(U),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let ue=null,pe=null,ve=null;M.depth&&(ve=M.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ue=M.stencil?Nd:Um,pe=M.stencil?Od:Bc);const Ve={colorFormat:t.RGBA8,depthFormat:ve,scaleFactor:a};g=new XRWebGLBinding(s,t),v=g.createProjectionLayer(Ve),s.updateRenderState({layers:[v]}),e.setPixelRatio(1),e.setSize(v.textureWidth,v.textureHeight,!1),C=new os(v.textureWidth,v.textureHeight,{format:Ua,type:Gs,depthTexture:new yS(v.textureWidth,v.textureHeight,pe,void 0,void 0,void 0,void 0,void 0,void 0,ue),stencilBuffer:M.stencil,colorSpace:e.outputColorSpace,samples:M.antialias?4:0,resolveDepthBuffer:v.ignoreDepthValues===!1,resolveStencilBuffer:v.ignoreDepthValues===!1})}else{const ue={antialias:M.antialias,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:a};y=new XRWebGLLayer(s,t,ue),s.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),C=new os(y.framebufferWidth,y.framebufferHeight,{format:Ua,type:Gs,colorSpace:e.outputColorSpace,stencilBuffer:M.stencil,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}C.isXRRenderTarget=!0,this.setFoveation(c),f=null,r=await s.requestReferenceSpace(l),se.setContext(s),se.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return A.getDepthTexture()};function ce(J){for(let ne=0;ne<J.removed.length;ne++){const ue=J.removed[ne],pe=R.indexOf(ue);pe>=0&&(R[pe]=null,w[pe].disconnect(ue))}for(let ne=0;ne<J.added.length;ne++){const ue=J.added[ne];let pe=R.indexOf(ue);if(pe===-1){for(let Ve=0;Ve<w.length;Ve++)if(Ve>=R.length){R.push(ue),pe=Ve;break}else if(R[Ve]===null){R[Ve]=ue,pe=Ve;break}if(pe===-1)break}const ve=w[pe];ve&&ve.connect(ue)}}const z=new le,q=new le;function Q(J,ne,ue){z.setFromMatrixPosition(ne.matrixWorld),q.setFromMatrixPosition(ue.matrixWorld);const pe=z.distanceTo(q),ve=ne.projectionMatrix.elements,Ve=ue.projectionMatrix.elements,ze=ve[14]/(ve[10]-1),Qe=ve[14]/(ve[10]+1),Ie=(ve[9]+1)/ve[5],rt=(ve[9]-1)/ve[5],Z=(ve[8]-1)/ve[0],Le=(Ve[8]+1)/Ve[0],Ue=ze*Z,Re=ze*Le,me=pe/(-Z+Le),Pe=me*-Z;if(ne.matrixWorld.decompose(J.position,J.quaternion,J.scale),J.translateX(Pe),J.translateZ(me),J.matrixWorld.compose(J.position,J.quaternion,J.scale),J.matrixWorldInverse.copy(J.matrixWorld).invert(),ve[10]===-1)J.projectionMatrix.copy(ne.projectionMatrix),J.projectionMatrixInverse.copy(ne.projectionMatrixInverse);else{const Se=ze+me,ye=Qe+me,nt=Ue-Pe,ee=Re+(pe-Pe),V=Ie*Qe/ye*Se,de=rt*Qe/ye*Se;J.projectionMatrix.makePerspective(nt,ee,V,de,Se,ye),J.projectionMatrixInverse.copy(J.projectionMatrix).invert()}}function re(J,ne){ne===null?J.matrixWorld.copy(J.matrix):J.matrixWorld.multiplyMatrices(ne.matrixWorld,J.matrix),J.matrixWorldInverse.copy(J.matrixWorld).invert()}this.updateCamera=function(J){if(s===null)return;let ne=J.near,ue=J.far;A.texture!==null&&(A.depthNear>0&&(ne=A.depthNear),A.depthFar>0&&(ue=A.depthFar)),L.near=P.near=I.near=ne,L.far=P.far=I.far=ue,(k!==L.near||X!==L.far)&&(s.updateRenderState({depthNear:L.near,depthFar:L.far}),k=L.near,X=L.far),I.layers.mask=J.layers.mask|2,P.layers.mask=J.layers.mask|4,L.layers.mask=I.layers.mask|P.layers.mask;const pe=J.parent,ve=L.cameras;re(L,pe);for(let Ve=0;Ve<ve.length;Ve++)re(ve[Ve],pe);ve.length===2?Q(L,I,P):L.projectionMatrix.copy(I.projectionMatrix),H(J,L,pe)};function H(J,ne,ue){ue===null?J.matrix.copy(ne.matrixWorld):(J.matrix.copy(ue.matrixWorld),J.matrix.invert(),J.matrix.multiply(ne.matrixWorld)),J.matrix.decompose(J.position,J.quaternion,J.scale),J.updateMatrixWorld(!0),J.projectionMatrix.copy(ne.projectionMatrix),J.projectionMatrixInverse.copy(ne.projectionMatrixInverse),J.isPerspectiveCamera&&(J.fov=Nm*2*Math.atan(1/J.projectionMatrix.elements[5]),J.zoom=1)}this.getCamera=function(){return L},this.getFoveation=function(){if(!(v===null&&y===null))return c},this.setFoveation=function(J){c=J,v!==null&&(v.fixedFoveation=J),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=J)},this.hasDepthSensing=function(){return A.texture!==null},this.getDepthSensingMesh=function(){return A.getMesh(L)};let G=null;function K(J,ne){if(d=ne.getViewerPose(f||r),S=ne,d!==null){const ue=d.views;y!==null&&(e.setRenderTargetFramebuffer(C,y.framebuffer),e.setRenderTarget(C));let pe=!1;ue.length!==L.cameras.length&&(L.cameras.length=0,pe=!0);for(let ze=0;ze<ue.length;ze++){const Qe=ue[ze];let Ie=null;if(y!==null)Ie=y.getViewport(Qe);else{const Z=g.getViewSubImage(v,Qe);Ie=Z.viewport,ze===0&&(e.setRenderTargetTextures(C,Z.colorTexture,Z.depthStencilTexture),e.setRenderTarget(C))}let rt=N[ze];rt===void 0&&(rt=new Ji,rt.layers.enable(ze),rt.viewport=new wn,N[ze]=rt),rt.matrix.fromArray(Qe.transform.matrix),rt.matrix.decompose(rt.position,rt.quaternion,rt.scale),rt.projectionMatrix.fromArray(Qe.projectionMatrix),rt.projectionMatrixInverse.copy(rt.projectionMatrix).invert(),rt.viewport.set(Ie.x,Ie.y,Ie.width,Ie.height),ze===0&&(L.matrix.copy(rt.matrix),L.matrix.decompose(L.position,L.quaternion,L.scale)),pe===!0&&L.cameras.push(rt)}const ve=s.enabledFeatures;if(ve&&ve.includes("depth-sensing")&&s.depthUsage=="gpu-optimized"&&g){const ze=g.getDepthInformation(ue[0]);ze&&ze.isValid&&ze.texture&&A.init(e,ze,s.renderState)}}for(let ue=0;ue<w.length;ue++){const pe=R[ue],ve=w[ue];pe!==null&&ve!==void 0&&ve.update(pe,ne,f||r)}G&&G(J,ne),ne.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:ne}),S=null}const se=new T4;se.setAnimationLoop(K),this.setAnimationLoop=function(J){G=J},this.dispose=function(){}}}const $h=new ro,$9=new Ft;function eG(i,e){function t(M,b){M.matrixAutoUpdate===!0&&M.updateMatrix(),b.value.copy(M.matrix)}function n(M,b){b.color.getRGB(M.fogColor.value,OB(i)),b.isFog?(M.fogNear.value=b.near,M.fogFar.value=b.far):b.isFogExp2&&(M.fogDensity.value=b.density)}function s(M,b,C,w,R){b.isMeshBasicMaterial||b.isMeshLambertMaterial?a(M,b):b.isMeshToonMaterial?(a(M,b),g(M,b)):b.isMeshPhongMaterial?(a(M,b),d(M,b)):b.isMeshStandardMaterial?(a(M,b),v(M,b),b.isMeshPhysicalMaterial&&y(M,b,R)):b.isMeshMatcapMaterial?(a(M,b),S(M,b)):b.isMeshDepthMaterial?a(M,b):b.isMeshDistanceMaterial?(a(M,b),A(M,b)):b.isMeshNormalMaterial?a(M,b):b.isLineBasicMaterial?(r(M,b),b.isLineDashedMaterial&&l(M,b)):b.isPointsMaterial?c(M,b,C,w):b.isSpriteMaterial?f(M,b):b.isShadowMaterial?(M.color.value.copy(b.color),M.opacity.value=b.opacity):b.isShaderMaterial&&(b.uniformsNeedUpdate=!1)}function a(M,b){M.opacity.value=b.opacity,b.color&&M.diffuse.value.copy(b.color),b.emissive&&M.emissive.value.copy(b.emissive).multiplyScalar(b.emissiveIntensity),b.map&&(M.map.value=b.map,t(b.map,M.mapTransform)),b.alphaMap&&(M.alphaMap.value=b.alphaMap,t(b.alphaMap,M.alphaMapTransform)),b.bumpMap&&(M.bumpMap.value=b.bumpMap,t(b.bumpMap,M.bumpMapTransform),M.bumpScale.value=b.bumpScale,b.side===vs&&(M.bumpScale.value*=-1)),b.normalMap&&(M.normalMap.value=b.normalMap,t(b.normalMap,M.normalMapTransform),M.normalScale.value.copy(b.normalScale),b.side===vs&&M.normalScale.value.negate()),b.displacementMap&&(M.displacementMap.value=b.displacementMap,t(b.displacementMap,M.displacementMapTransform),M.displacementScale.value=b.displacementScale,M.displacementBias.value=b.displacementBias),b.emissiveMap&&(M.emissiveMap.value=b.emissiveMap,t(b.emissiveMap,M.emissiveMapTransform)),b.specularMap&&(M.specularMap.value=b.specularMap,t(b.specularMap,M.specularMapTransform)),b.alphaTest>0&&(M.alphaTest.value=b.alphaTest);const C=e.get(b),w=C.envMap,R=C.envMapRotation;w&&(M.envMap.value=w,$h.copy(R),$h.x*=-1,$h.y*=-1,$h.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&($h.y*=-1,$h.z*=-1),M.envMapRotation.value.setFromMatrix4($9.makeRotationFromEuler($h)),M.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,M.reflectivity.value=b.reflectivity,M.ior.value=b.ior,M.refractionRatio.value=b.refractionRatio),b.lightMap&&(M.lightMap.value=b.lightMap,M.lightMapIntensity.value=b.lightMapIntensity,t(b.lightMap,M.lightMapTransform)),b.aoMap&&(M.aoMap.value=b.aoMap,M.aoMapIntensity.value=b.aoMapIntensity,t(b.aoMap,M.aoMapTransform))}function r(M,b){M.diffuse.value.copy(b.color),M.opacity.value=b.opacity,b.map&&(M.map.value=b.map,t(b.map,M.mapTransform))}function l(M,b){M.dashSize.value=b.dashSize,M.totalSize.value=b.dashSize+b.gapSize,M.scale.value=b.scale}function c(M,b,C,w){M.diffuse.value.copy(b.color),M.opacity.value=b.opacity,M.size.value=b.size*C,M.scale.value=w*.5,b.map&&(M.map.value=b.map,t(b.map,M.uvTransform)),b.alphaMap&&(M.alphaMap.value=b.alphaMap,t(b.alphaMap,M.alphaMapTransform)),b.alphaTest>0&&(M.alphaTest.value=b.alphaTest)}function f(M,b){M.diffuse.value.copy(b.color),M.opacity.value=b.opacity,M.rotation.value=b.rotation,b.map&&(M.map.value=b.map,t(b.map,M.mapTransform)),b.alphaMap&&(M.alphaMap.value=b.alphaMap,t(b.alphaMap,M.alphaMapTransform)),b.alphaTest>0&&(M.alphaTest.value=b.alphaTest)}function d(M,b){M.specular.value.copy(b.specular),M.shininess.value=Math.max(b.shininess,1e-4)}function g(M,b){b.gradientMap&&(M.gradientMap.value=b.gradientMap)}function v(M,b){M.metalness.value=b.metalness,b.metalnessMap&&(M.metalnessMap.value=b.metalnessMap,t(b.metalnessMap,M.metalnessMapTransform)),M.roughness.value=b.roughness,b.roughnessMap&&(M.roughnessMap.value=b.roughnessMap,t(b.roughnessMap,M.roughnessMapTransform)),b.envMap&&(M.envMapIntensity.value=b.envMapIntensity)}function y(M,b,C){M.ior.value=b.ior,b.sheen>0&&(M.sheenColor.value.copy(b.sheenColor).multiplyScalar(b.sheen),M.sheenRoughness.value=b.sheenRoughness,b.sheenColorMap&&(M.sheenColorMap.value=b.sheenColorMap,t(b.sheenColorMap,M.sheenColorMapTransform)),b.sheenRoughnessMap&&(M.sheenRoughnessMap.value=b.sheenRoughnessMap,t(b.sheenRoughnessMap,M.sheenRoughnessMapTransform))),b.clearcoat>0&&(M.clearcoat.value=b.clearcoat,M.clearcoatRoughness.value=b.clearcoatRoughness,b.clearcoatMap&&(M.clearcoatMap.value=b.clearcoatMap,t(b.clearcoatMap,M.clearcoatMapTransform)),b.clearcoatRoughnessMap&&(M.clearcoatRoughnessMap.value=b.clearcoatRoughnessMap,t(b.clearcoatRoughnessMap,M.clearcoatRoughnessMapTransform)),b.clearcoatNormalMap&&(M.clearcoatNormalMap.value=b.clearcoatNormalMap,t(b.clearcoatNormalMap,M.clearcoatNormalMapTransform),M.clearcoatNormalScale.value.copy(b.clearcoatNormalScale),b.side===vs&&M.clearcoatNormalScale.value.negate())),b.dispersion>0&&(M.dispersion.value=b.dispersion),b.iridescence>0&&(M.iridescence.value=b.iridescence,M.iridescenceIOR.value=b.iridescenceIOR,M.iridescenceThicknessMinimum.value=b.iridescenceThicknessRange[0],M.iridescenceThicknessMaximum.value=b.iridescenceThicknessRange[1],b.iridescenceMap&&(M.iridescenceMap.value=b.iridescenceMap,t(b.iridescenceMap,M.iridescenceMapTransform)),b.iridescenceThicknessMap&&(M.iridescenceThicknessMap.value=b.iridescenceThicknessMap,t(b.iridescenceThicknessMap,M.iridescenceThicknessMapTransform))),b.transmission>0&&(M.transmission.value=b.transmission,M.transmissionSamplerMap.value=C.texture,M.transmissionSamplerSize.value.set(C.width,C.height),b.transmissionMap&&(M.transmissionMap.value=b.transmissionMap,t(b.transmissionMap,M.transmissionMapTransform)),M.thickness.value=b.thickness,b.thicknessMap&&(M.thicknessMap.value=b.thicknessMap,t(b.thicknessMap,M.thicknessMapTransform)),M.attenuationDistance.value=b.attenuationDistance,M.attenuationColor.value.copy(b.attenuationColor)),b.anisotropy>0&&(M.anisotropyVector.value.set(b.anisotropy*Math.cos(b.anisotropyRotation),b.anisotropy*Math.sin(b.anisotropyRotation)),b.anisotropyMap&&(M.anisotropyMap.value=b.anisotropyMap,t(b.anisotropyMap,M.anisotropyMapTransform))),M.specularIntensity.value=b.specularIntensity,M.specularColor.value.copy(b.specularColor),b.specularColorMap&&(M.specularColorMap.value=b.specularColorMap,t(b.specularColorMap,M.specularColorMapTransform)),b.specularIntensityMap&&(M.specularIntensityMap.value=b.specularIntensityMap,t(b.specularIntensityMap,M.specularIntensityMapTransform))}function S(M,b){b.matcap&&(M.matcap.value=b.matcap)}function A(M,b){const C=e.get(b).light;M.referencePosition.value.setFromMatrixPosition(C.matrixWorld),M.nearDistance.value=C.shadow.camera.near,M.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:s}}function tG(i,e,t,n){let s={},a={},r=[];const l=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function c(C,w){const R=w.program;n.uniformBlockBinding(C,R)}function f(C,w){let R=s[C.id];R===void 0&&(S(C),R=d(C),s[C.id]=R,C.addEventListener("dispose",M));const U=w.program;n.updateUBOMapping(C,U);const O=e.render.frame;a[C.id]!==O&&(v(C),a[C.id]=O)}function d(C){const w=g();C.__bindingPointIndex=w;const R=i.createBuffer(),U=C.__size,O=C.usage;return i.bindBuffer(i.UNIFORM_BUFFER,R),i.bufferData(i.UNIFORM_BUFFER,U,O),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,w,R),R}function g(){for(let C=0;C<l;C++)if(r.indexOf(C)===-1)return r.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(C){const w=s[C.id],R=C.uniforms,U=C.__cache;i.bindBuffer(i.UNIFORM_BUFFER,w);for(let O=0,I=R.length;O<I;O++){const P=Array.isArray(R[O])?R[O]:[R[O]];for(let N=0,L=P.length;N<L;N++){const k=P[N];if(y(k,O,N,U)===!0){const X=k.__offset,W=Array.isArray(k.value)?k.value:[k.value];let $=0;for(let ce=0;ce<W.length;ce++){const z=W[ce],q=A(z);typeof z=="number"||typeof z=="boolean"?(k.__data[0]=z,i.bufferSubData(i.UNIFORM_BUFFER,X+$,k.__data)):z.isMatrix3?(k.__data[0]=z.elements[0],k.__data[1]=z.elements[1],k.__data[2]=z.elements[2],k.__data[3]=0,k.__data[4]=z.elements[3],k.__data[5]=z.elements[4],k.__data[6]=z.elements[5],k.__data[7]=0,k.__data[8]=z.elements[6],k.__data[9]=z.elements[7],k.__data[10]=z.elements[8],k.__data[11]=0):(z.toArray(k.__data,$),$+=q.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,X,k.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function y(C,w,R,U){const O=C.value,I=w+"_"+R;if(U[I]===void 0)return typeof O=="number"||typeof O=="boolean"?U[I]=O:U[I]=O.clone(),!0;{const P=U[I];if(typeof O=="number"||typeof O=="boolean"){if(P!==O)return U[I]=O,!0}else if(P.equals(O)===!1)return P.copy(O),!0}return!1}function S(C){const w=C.uniforms;let R=0;const U=16;for(let I=0,P=w.length;I<P;I++){const N=Array.isArray(w[I])?w[I]:[w[I]];for(let L=0,k=N.length;L<k;L++){const X=N[L],W=Array.isArray(X.value)?X.value:[X.value];for(let $=0,ce=W.length;$<ce;$++){const z=W[$],q=A(z),Q=R%U,re=Q%q.boundary,H=Q+re;R+=re,H!==0&&U-H<q.storage&&(R+=U-H),X.__data=new Float32Array(q.storage/Float32Array.BYTES_PER_ELEMENT),X.__offset=R,R+=q.storage}}}const O=R%U;return O>0&&(R+=U-O),C.__size=R,C.__cache={},this}function A(C){const w={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(w.boundary=4,w.storage=4):C.isVector2?(w.boundary=8,w.storage=8):C.isVector3||C.isColor?(w.boundary=16,w.storage=12):C.isVector4?(w.boundary=16,w.storage=16):C.isMatrix3?(w.boundary=48,w.storage=48):C.isMatrix4?(w.boundary=64,w.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),w}function M(C){const w=C.target;w.removeEventListener("dispose",M);const R=r.indexOf(w.__bindingPointIndex);r.splice(R,1),i.deleteBuffer(s[w.id]),delete s[w.id],delete a[w.id]}function b(){for(const C in s)i.deleteBuffer(s[C]);r=[],s={},a={}}return{bind:c,update:f,dispose:b}}class B4{constructor(e={}){const{canvas:t=BB(),context:n=null,depth:s=!0,stencil:a=!1,alpha:r=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:f=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:g=!1,reverseDepthBuffer:v=!1}=e;this.isWebGLRenderer=!0;let y;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=n.getContextAttributes().alpha}else y=r;const S=new Uint32Array(4),A=new Int32Array(4);let M=null,b=null;const C=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Nl,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const R=this;let U=!1;this._outputColorSpace=Zn;let O=0,I=0,P=null,N=-1,L=null;const k=new wn,X=new wn;let W=null;const $=new St(0);let ce=0,z=t.width,q=t.height,Q=1,re=null,H=null;const G=new wn(0,0,z,q),K=new wn(0,0,z,q);let se=!1;const J=new $m;let ne=!1,ue=!1;const pe=new Ft,ve=new Ft,Ve=new le,ze=new wn,Qe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ie=!1;function rt(){return P===null?Q:1}let Z=n;function Le(te,Ee){return t.getContext(te,Ee)}try{const te={alpha:!0,depth:s,stencil:a,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:f,powerPreference:d,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${jf}`),t.addEventListener("webglcontextlost",gt,!1),t.addEventListener("webglcontextrestored",et,!1),t.addEventListener("webglcontextcreationerror",Ge,!1),Z===null){const Ee="webgl2";if(Z=Le(Ee,te),Z===null)throw Le(Ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(te){throw console.error("THREE.WebGLRenderer: "+te.message),te}let Ue,Re,me,Pe,Se,ye,nt,ee,V,de,Be,be,Me,$e,at,ut,Y,Oe,Ke,it,fe,Ae,st,he;function je(){Ue=new dz(Z),Ue.init(),Ae=new D4(Z,Ue),Re=new rz(Z,Ue,e,Ae),me=new W9(Z,Ue),Re.reverseDepthBuffer&&v&&me.buffers.depth.setReversed(!0),Pe=new gz(Z),Se=new O9,ye=new q9(Z,Ue,me,Se,Re,Ae,Pe),nt=new lz(R),ee=new hz(R),V=new A8(Z),st=new sz(Z,V),de=new pz(Z,V,Pe,st),Be=new yz(Z,de,V,Pe),Ke=new vz(Z,Re,ye),ut=new oz(Se),be=new L9(R,nt,ee,Ue,Re,st,ut),Me=new eG(R,Se),$e=new P9,at=new V9(Ue),Oe=new iz(R,nt,ee,me,Be,y,c),Y=new j9(R,Be,Re),he=new tG(Z,Pe,Re,me),it=new az(Z,Ue,Pe),fe=new mz(Z,Ue,Pe),Pe.programs=be.programs,R.capabilities=Re,R.extensions=Ue,R.properties=Se,R.renderLists=$e,R.shadowMap=Y,R.state=me,R.info=Pe}je();const He=new Q9(R,Z);this.xr=He,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const te=Ue.get("WEBGL_lose_context");te&&te.loseContext()},this.forceContextRestore=function(){const te=Ue.get("WEBGL_lose_context");te&&te.restoreContext()},this.getPixelRatio=function(){return Q},this.setPixelRatio=function(te){te!==void 0&&(Q=te,this.setSize(z,q,!1))},this.getSize=function(te){return te.set(z,q)},this.setSize=function(te,Ee,Ye=!0){if(He.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=te,q=Ee,t.width=Math.floor(te*Q),t.height=Math.floor(Ee*Q),Ye===!0&&(t.style.width=te+"px",t.style.height=Ee+"px"),this.setViewport(0,0,te,Ee)},this.getDrawingBufferSize=function(te){return te.set(z*Q,q*Q).floor()},this.setDrawingBufferSize=function(te,Ee,Ye){z=te,q=Ee,Q=Ye,t.width=Math.floor(te*Ye),t.height=Math.floor(Ee*Ye),this.setViewport(0,0,te,Ee)},this.getCurrentViewport=function(te){return te.copy(k)},this.getViewport=function(te){return te.copy(G)},this.setViewport=function(te,Ee,Ye,Te){te.isVector4?G.set(te.x,te.y,te.z,te.w):G.set(te,Ee,Ye,Te),me.viewport(k.copy(G).multiplyScalar(Q).round())},this.getScissor=function(te){return te.copy(K)},this.setScissor=function(te,Ee,Ye,Te){te.isVector4?K.set(te.x,te.y,te.z,te.w):K.set(te,Ee,Ye,Te),me.scissor(X.copy(K).multiplyScalar(Q).round())},this.getScissorTest=function(){return se},this.setScissorTest=function(te){me.setScissorTest(se=te)},this.setOpaqueSort=function(te){re=te},this.setTransparentSort=function(te){H=te},this.getClearColor=function(te){return te.copy(Oe.getClearColor())},this.setClearColor=function(){Oe.setClearColor(...arguments)},this.getClearAlpha=function(){return Oe.getClearAlpha()},this.setClearAlpha=function(){Oe.setClearAlpha(...arguments)},this.clear=function(te=!0,Ee=!0,Ye=!0){let Te=0;if(te){let De=!1;if(P!==null){const ht=P.texture.format;De=ht===oS||ht===rS||ht===Hv}if(De){const ht=P.texture.type,yt=ht===Gs||ht===Bc||ht===Bm||ht===Od||ht===iS||ht===sS,Mt=Oe.getClearColor(),bt=Oe.getClearAlpha(),Bt=Mt.r,Rt=Mt.g,wt=Mt.b;yt?(S[0]=Bt,S[1]=Rt,S[2]=wt,S[3]=bt,Z.clearBufferuiv(Z.COLOR,0,S)):(A[0]=Bt,A[1]=Rt,A[2]=wt,A[3]=bt,Z.clearBufferiv(Z.COLOR,0,A))}else Te|=Z.COLOR_BUFFER_BIT}Ee&&(Te|=Z.DEPTH_BUFFER_BIT),Ye&&(Te|=Z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Z.clear(Te)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",gt,!1),t.removeEventListener("webglcontextrestored",et,!1),t.removeEventListener("webglcontextcreationerror",Ge,!1),Oe.dispose(),$e.dispose(),at.dispose(),Se.dispose(),nt.dispose(),ee.dispose(),Be.dispose(),st.dispose(),he.dispose(),be.dispose(),He.dispose(),He.removeEventListener("sessionstart",ot),He.removeEventListener("sessionend",tn),gn.stop()};function gt(te){te.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),U=!0}function et(){console.log("THREE.WebGLRenderer: Context Restored."),U=!1;const te=Pe.autoReset,Ee=Y.enabled,Ye=Y.autoUpdate,Te=Y.needsUpdate,De=Y.type;je(),Pe.autoReset=te,Y.enabled=Ee,Y.autoUpdate=Ye,Y.needsUpdate=Te,Y.type=De}function Ge(te){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",te.statusMessage)}function pt(te){const Ee=te.target;Ee.removeEventListener("dispose",pt),vt(Ee)}function vt(te){mt(te),Se.remove(te)}function mt(te){const Ee=Se.get(te).programs;Ee!==void 0&&(Ee.forEach(function(Ye){be.releaseProgram(Ye)}),te.isShaderMaterial&&be.releaseShaderCache(te))}this.renderBufferDirect=function(te,Ee,Ye,Te,De,ht){Ee===null&&(Ee=Qe);const yt=De.isMesh&&De.matrixWorld.determinant()<0,Mt=Ti(te,Ee,Ye,Te,De);me.setMaterial(Te,yt);let bt=Ye.index,Bt=1;if(Te.wireframe===!0){if(bt=de.getWireframeAttribute(Ye),bt===void 0)return;Bt=2}const Rt=Ye.drawRange,wt=Ye.attributes.position;let Yt=Rt.start*Bt,fn=(Rt.start+Rt.count)*Bt;ht!==null&&(Yt=Math.max(Yt,ht.start*Bt),fn=Math.min(fn,(ht.start+ht.count)*Bt)),bt!==null?(Yt=Math.max(Yt,0),fn=Math.min(fn,bt.count)):wt!=null&&(Yt=Math.max(Yt,0),fn=Math.min(fn,wt.count));const Rn=fn-Yt;if(Rn<0||Rn===1/0)return;st.setup(De,Te,Mt,Ye,bt);let Xt,nn=it;if(bt!==null&&(Xt=V.get(bt),nn=fe,nn.setIndex(Xt)),De.isMesh)Te.wireframe===!0?(me.setLineWidth(Te.wireframeLinewidth*rt()),nn.setMode(Z.LINES)):nn.setMode(Z.TRIANGLES);else if(De.isLine){let Ut=Te.linewidth;Ut===void 0&&(Ut=1),me.setLineWidth(Ut*rt()),De.isLineSegments?nn.setMode(Z.LINES):De.isLineLoop?nn.setMode(Z.LINE_LOOP):nn.setMode(Z.LINE_STRIP)}else De.isPoints?nn.setMode(Z.POINTS):De.isSprite&&nn.setMode(Z.TRIANGLES);if(De.isBatchedMesh)if(De._multiDrawInstances!==null)Am("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),nn.renderMultiDrawInstances(De._multiDrawStarts,De._multiDrawCounts,De._multiDrawCount,De._multiDrawInstances);else if(Ue.get("WEBGL_multi_draw"))nn.renderMultiDraw(De._multiDrawStarts,De._multiDrawCounts,De._multiDrawCount);else{const Ut=De._multiDrawStarts,Un=De._multiDrawCounts,Jt=De._multiDrawCount,ii=bt?V.get(bt).bytesPerElement:1,_s=Se.get(Te).currentProgram.getUniforms();for(let Tn=0;Tn<Jt;Tn++)_s.setValue(Z,"_gl_DrawID",Tn),nn.render(Ut[Tn]/ii,Un[Tn])}else if(De.isInstancedMesh)nn.renderInstances(Yt,Rn,De.count);else if(Ye.isInstancedBufferGeometry){const Ut=Ye._maxInstanceCount!==void 0?Ye._maxInstanceCount:1/0,Un=Math.min(Ye.instanceCount,Ut);nn.renderInstances(Yt,Rn,Un)}else nn.render(Yt,Rn)};function At(te,Ee,Ye){te.transparent===!0&&te.side===ha&&te.forceSinglePass===!1?(te.side=vs,te.needsUpdate=!0,Kt(te,Ee,Ye),te.side=ao,te.needsUpdate=!0,Kt(te,Ee,Ye),te.side=ha):Kt(te,Ee,Ye)}this.compile=function(te,Ee,Ye=null){Ye===null&&(Ye=te),b=at.get(Ye),b.init(Ee),w.push(b),Ye.traverseVisible(function(De){De.isLight&&De.layers.test(Ee.layers)&&(b.pushLight(De),De.castShadow&&b.pushShadow(De))}),te!==Ye&&te.traverseVisible(function(De){De.isLight&&De.layers.test(Ee.layers)&&(b.pushLight(De),De.castShadow&&b.pushShadow(De))}),b.setupLights();const Te=new Set;return te.traverse(function(De){if(!(De.isMesh||De.isPoints||De.isLine||De.isSprite))return;const ht=De.material;if(ht)if(Array.isArray(ht))for(let yt=0;yt<ht.length;yt++){const Mt=ht[yt];At(Mt,Ye,De),Te.add(Mt)}else At(ht,Ye,De),Te.add(ht)}),b=w.pop(),Te},this.compileAsync=function(te,Ee,Ye=null){const Te=this.compile(te,Ee,Ye);return new Promise(De=>{function ht(){if(Te.forEach(function(yt){Se.get(yt).currentProgram.isReady()&&Te.delete(yt)}),Te.size===0){De(te);return}setTimeout(ht,10)}Ue.get("KHR_parallel_shader_compile")!==null?ht():setTimeout(ht,10)})};let Vt=null;function Pt(te){Vt&&Vt(te)}function ot(){gn.stop()}function tn(){gn.start()}const gn=new T4;gn.setAnimationLoop(Pt),typeof self<"u"&&gn.setContext(self),this.setAnimationLoop=function(te){Vt=te,He.setAnimationLoop(te),te===null?gn.stop():gn.start()},He.addEventListener("sessionstart",ot),He.addEventListener("sessionend",tn),this.render=function(te,Ee){if(Ee!==void 0&&Ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(U===!0)return;if(te.matrixWorldAutoUpdate===!0&&te.updateMatrixWorld(),Ee.parent===null&&Ee.matrixWorldAutoUpdate===!0&&Ee.updateMatrixWorld(),He.enabled===!0&&He.isPresenting===!0&&(He.cameraAutoUpdate===!0&&He.updateCamera(Ee),Ee=He.getCamera()),te.isScene===!0&&te.onBeforeRender(R,te,Ee,P),b=at.get(te,w.length),b.init(Ee),w.push(b),ve.multiplyMatrices(Ee.projectionMatrix,Ee.matrixWorldInverse),J.setFromProjectionMatrix(ve),ue=this.localClippingEnabled,ne=ut.init(this.clippingPlanes,ue),M=$e.get(te,C.length),M.init(),C.push(M),He.enabled===!0&&He.isPresenting===!0){const ht=R.xr.getDepthSensingMesh();ht!==null&&zn(ht,Ee,-1/0,R.sortObjects)}zn(te,Ee,0,R.sortObjects),M.finish(),R.sortObjects===!0&&M.sort(re,H),Ie=He.enabled===!1||He.isPresenting===!1||He.hasDepthSensing()===!1,Ie&&Oe.addToRenderList(M,te),this.info.render.frame++,ne===!0&&ut.beginShadows();const Ye=b.state.shadowsArray;Y.render(Ye,te,Ee),ne===!0&&ut.endShadows(),this.info.autoReset===!0&&this.info.reset();const Te=M.opaque,De=M.transmissive;if(b.setupLights(),Ee.isArrayCamera){const ht=Ee.cameras;if(De.length>0)for(let yt=0,Mt=ht.length;yt<Mt;yt++){const bt=ht[yt];ci(Te,De,te,bt)}Ie&&Oe.render(te);for(let yt=0,Mt=ht.length;yt<Mt;yt++){const bt=ht[yt];en(M,te,bt,bt.viewport)}}else De.length>0&&ci(Te,De,te,Ee),Ie&&Oe.render(te),en(M,te,Ee);P!==null&&I===0&&(ye.updateMultisampleRenderTarget(P),ye.updateRenderTargetMipmap(P)),te.isScene===!0&&te.onAfterRender(R,te,Ee),st.resetDefaultState(),N=-1,L=null,w.pop(),w.length>0?(b=w[w.length-1],ne===!0&&ut.setGlobalState(R.clippingPlanes,b.state.camera)):b=null,C.pop(),C.length>0?M=C[C.length-1]:M=null};function zn(te,Ee,Ye,Te){if(te.visible===!1)return;if(te.layers.test(Ee.layers)){if(te.isGroup)Ye=te.renderOrder;else if(te.isLOD)te.autoUpdate===!0&&te.update(Ee);else if(te.isLight)b.pushLight(te),te.castShadow&&b.pushShadow(te);else if(te.isSprite){if(!te.frustumCulled||J.intersectsSprite(te)){Te&&ze.setFromMatrixPosition(te.matrixWorld).applyMatrix4(ve);const yt=Be.update(te),Mt=te.material;Mt.visible&&M.push(te,yt,Mt,Ye,ze.z,null)}}else if((te.isMesh||te.isLine||te.isPoints)&&(!te.frustumCulled||J.intersectsObject(te))){const yt=Be.update(te),Mt=te.material;if(Te&&(te.boundingSphere!==void 0?(te.boundingSphere===null&&te.computeBoundingSphere(),ze.copy(te.boundingSphere.center)):(yt.boundingSphere===null&&yt.computeBoundingSphere(),ze.copy(yt.boundingSphere.center)),ze.applyMatrix4(te.matrixWorld).applyMatrix4(ve)),Array.isArray(Mt)){const bt=yt.groups;for(let Bt=0,Rt=bt.length;Bt<Rt;Bt++){const wt=bt[Bt],Yt=Mt[wt.materialIndex];Yt&&Yt.visible&&M.push(te,yt,Yt,Ye,ze.z,wt)}}else Mt.visible&&M.push(te,yt,Mt,Ye,ze.z,null)}}const ht=te.children;for(let yt=0,Mt=ht.length;yt<Mt;yt++)zn(ht[yt],Ee,Ye,Te)}function en(te,Ee,Ye,Te){const De=te.opaque,ht=te.transmissive,yt=te.transparent;b.setupLightsView(Ye),ne===!0&&ut.setGlobalState(R.clippingPlanes,Ye),Te&&me.viewport(k.copy(Te)),De.length>0&&jn(De,Ee,Ye),ht.length>0&&jn(ht,Ee,Ye),yt.length>0&&jn(yt,Ee,Ye),me.buffers.depth.setTest(!0),me.buffers.depth.setMask(!0),me.buffers.color.setMask(!0),me.setPolygonOffset(!1)}function ci(te,Ee,Ye,Te){if((Ye.isScene===!0?Ye.overrideMaterial:null)!==null)return;b.state.transmissionRenderTarget[Te.id]===void 0&&(b.state.transmissionRenderTarget[Te.id]=new os(1,1,{generateMipmaps:!0,type:Ue.has("EXT_color_buffer_half_float")||Ue.has("EXT_color_buffer_float")?Ll:Gs,minFilter:to,samples:4,stencilBuffer:a,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Nn.workingColorSpace}));const ht=b.state.transmissionRenderTarget[Te.id],yt=Te.viewport||k;ht.setSize(yt.z*R.transmissionResolutionScale,yt.w*R.transmissionResolutionScale);const Mt=R.getRenderTarget();R.setRenderTarget(ht),R.getClearColor($),ce=R.getClearAlpha(),ce<1&&R.setClearColor(16777215,.5),R.clear(),Ie&&Oe.render(Ye);const bt=R.toneMapping;R.toneMapping=Nl;const Bt=Te.viewport;if(Te.viewport!==void 0&&(Te.viewport=void 0),b.setupLightsView(Te),ne===!0&&ut.setGlobalState(R.clippingPlanes,Te),jn(te,Ye,Te),ye.updateMultisampleRenderTarget(ht),ye.updateRenderTargetMipmap(ht),Ue.has("WEBGL_multisampled_render_to_texture")===!1){let Rt=!1;for(let wt=0,Yt=Ee.length;wt<Yt;wt++){const fn=Ee[wt],Rn=fn.object,Xt=fn.geometry,nn=fn.material,Ut=fn.group;if(nn.side===ha&&Rn.layers.test(Te.layers)){const Un=nn.side;nn.side=vs,nn.needsUpdate=!0,Bn(Rn,Ye,Te,Xt,nn,Ut),nn.side=Un,nn.needsUpdate=!0,Rt=!0}}Rt===!0&&(ye.updateMultisampleRenderTarget(ht),ye.updateRenderTargetMipmap(ht))}R.setRenderTarget(Mt),R.setClearColor($,ce),Bt!==void 0&&(Te.viewport=Bt),R.toneMapping=bt}function jn(te,Ee,Ye){const Te=Ee.isScene===!0?Ee.overrideMaterial:null;for(let De=0,ht=te.length;De<ht;De++){const yt=te[De],Mt=yt.object,bt=yt.geometry,Bt=yt.group;let Rt=yt.material;Rt.allowOverride===!0&&Te!==null&&(Rt=Te),Mt.layers.test(Ye.layers)&&Bn(Mt,Ee,Ye,bt,Rt,Bt)}}function Bn(te,Ee,Ye,Te,De,ht){te.onBeforeRender(R,Ee,Ye,Te,De,ht),te.modelViewMatrix.multiplyMatrices(Ye.matrixWorldInverse,te.matrixWorld),te.normalMatrix.getNormalMatrix(te.modelViewMatrix),De.onBeforeRender(R,Ee,Ye,Te,te,ht),De.transparent===!0&&De.side===ha&&De.forceSinglePass===!1?(De.side=vs,De.needsUpdate=!0,R.renderBufferDirect(Ye,Ee,Te,De,te,ht),De.side=ao,De.needsUpdate=!0,R.renderBufferDirect(Ye,Ee,Te,De,te,ht),De.side=ha):R.renderBufferDirect(Ye,Ee,Te,De,te,ht),te.onAfterRender(R,Ee,Ye,Te,De,ht)}function Kt(te,Ee,Ye){Ee.isScene!==!0&&(Ee=Qe);const Te=Se.get(te),De=b.state.lights,ht=b.state.shadowsArray,yt=De.state.version,Mt=be.getParameters(te,De.state,ht,Ee,Ye),bt=be.getProgramCacheKey(Mt);let Bt=Te.programs;Te.environment=te.isMeshStandardMaterial?Ee.environment:null,Te.fog=Ee.fog,Te.envMap=(te.isMeshStandardMaterial?ee:nt).get(te.envMap||Te.environment),Te.envMapRotation=Te.environment!==null&&te.envMap===null?Ee.environmentRotation:te.envMapRotation,Bt===void 0&&(te.addEventListener("dispose",pt),Bt=new Map,Te.programs=Bt);let Rt=Bt.get(bt);if(Rt!==void 0){if(Te.currentProgram===Rt&&Te.lightsStateVersion===yt)return bn(te,Mt),Rt}else Mt.uniforms=be.getUniforms(te),te.onBeforeCompile(Mt,R),Rt=be.acquireProgram(Mt,bt),Bt.set(bt,Rt),Te.uniforms=Mt.uniforms;const wt=Te.uniforms;return(!te.isShaderMaterial&&!te.isRawShaderMaterial||te.clipping===!0)&&(wt.clippingPlanes=ut.uniform),bn(te,Mt),Te.needsLights=Gn(te),Te.lightsStateVersion=yt,Te.needsLights&&(wt.ambientLightColor.value=De.state.ambient,wt.lightProbe.value=De.state.probe,wt.directionalLights.value=De.state.directional,wt.directionalLightShadows.value=De.state.directionalShadow,wt.spotLights.value=De.state.spot,wt.spotLightShadows.value=De.state.spotShadow,wt.rectAreaLights.value=De.state.rectArea,wt.ltc_1.value=De.state.rectAreaLTC1,wt.ltc_2.value=De.state.rectAreaLTC2,wt.pointLights.value=De.state.point,wt.pointLightShadows.value=De.state.pointShadow,wt.hemisphereLights.value=De.state.hemi,wt.directionalShadowMap.value=De.state.directionalShadowMap,wt.directionalShadowMatrix.value=De.state.directionalShadowMatrix,wt.spotShadowMap.value=De.state.spotShadowMap,wt.spotLightMatrix.value=De.state.spotLightMatrix,wt.spotLightMap.value=De.state.spotLightMap,wt.pointShadowMap.value=De.state.pointShadowMap,wt.pointShadowMatrix.value=De.state.pointShadowMatrix),Te.currentProgram=Rt,Te.uniformsList=null,Rt}function ui(te){if(te.uniformsList===null){const Ee=te.currentProgram.getUniforms();te.uniformsList=L_.seqWithValue(Ee.seq,te.uniforms)}return te.uniformsList}function bn(te,Ee){const Ye=Se.get(te);Ye.outputColorSpace=Ee.outputColorSpace,Ye.batching=Ee.batching,Ye.batchingColor=Ee.batchingColor,Ye.instancing=Ee.instancing,Ye.instancingColor=Ee.instancingColor,Ye.instancingMorph=Ee.instancingMorph,Ye.skinning=Ee.skinning,Ye.morphTargets=Ee.morphTargets,Ye.morphNormals=Ee.morphNormals,Ye.morphColors=Ee.morphColors,Ye.morphTargetsCount=Ee.morphTargetsCount,Ye.numClippingPlanes=Ee.numClippingPlanes,Ye.numIntersection=Ee.numClipIntersection,Ye.vertexAlphas=Ee.vertexAlphas,Ye.vertexTangents=Ee.vertexTangents,Ye.toneMapping=Ee.toneMapping}function Ti(te,Ee,Ye,Te,De){Ee.isScene!==!0&&(Ee=Qe),ye.resetTextureUnits();const ht=Ee.fog,yt=Te.isMeshStandardMaterial?Ee.environment:null,Mt=P===null?R.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:Pl,bt=(Te.isMeshStandardMaterial?ee:nt).get(Te.envMap||yt),Bt=Te.vertexColors===!0&&!!Ye.attributes.color&&Ye.attributes.color.itemSize===4,Rt=!!Ye.attributes.tangent&&(!!Te.normalMap||Te.anisotropy>0),wt=!!Ye.morphAttributes.position,Yt=!!Ye.morphAttributes.normal,fn=!!Ye.morphAttributes.color;let Rn=Nl;Te.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(Rn=R.toneMapping);const Xt=Ye.morphAttributes.position||Ye.morphAttributes.normal||Ye.morphAttributes.color,nn=Xt!==void 0?Xt.length:0,Ut=Se.get(Te),Un=b.state.lights;if(ne===!0&&(ue===!0||te!==L)){const Ci=te===L&&Te.id===N;ut.setState(Te,te,Ci)}let Jt=!1;Te.version===Ut.__version?(Ut.needsLights&&Ut.lightsStateVersion!==Un.state.version||Ut.outputColorSpace!==Mt||De.isBatchedMesh&&Ut.batching===!1||!De.isBatchedMesh&&Ut.batching===!0||De.isBatchedMesh&&Ut.batchingColor===!0&&De.colorTexture===null||De.isBatchedMesh&&Ut.batchingColor===!1&&De.colorTexture!==null||De.isInstancedMesh&&Ut.instancing===!1||!De.isInstancedMesh&&Ut.instancing===!0||De.isSkinnedMesh&&Ut.skinning===!1||!De.isSkinnedMesh&&Ut.skinning===!0||De.isInstancedMesh&&Ut.instancingColor===!0&&De.instanceColor===null||De.isInstancedMesh&&Ut.instancingColor===!1&&De.instanceColor!==null||De.isInstancedMesh&&Ut.instancingMorph===!0&&De.morphTexture===null||De.isInstancedMesh&&Ut.instancingMorph===!1&&De.morphTexture!==null||Ut.envMap!==bt||Te.fog===!0&&Ut.fog!==ht||Ut.numClippingPlanes!==void 0&&(Ut.numClippingPlanes!==ut.numPlanes||Ut.numIntersection!==ut.numIntersection)||Ut.vertexAlphas!==Bt||Ut.vertexTangents!==Rt||Ut.morphTargets!==wt||Ut.morphNormals!==Yt||Ut.morphColors!==fn||Ut.toneMapping!==Rn||Ut.morphTargetsCount!==nn)&&(Jt=!0):(Jt=!0,Ut.__version=Te.version);let ii=Ut.currentProgram;Jt===!0&&(ii=Kt(Te,Ee,De));let _s=!1,Tn=!1,Ei=!1;const Hn=ii.getUniforms(),Mi=Ut.uniforms;if(me.useProgram(ii.program)&&(_s=!0,Tn=!0,Ei=!0),Te.id!==N&&(N=Te.id,Tn=!0),_s||L!==te){me.buffers.depth.getReversed()?(pe.copy(te.projectionMatrix),q5(pe),K5(pe),Hn.setValue(Z,"projectionMatrix",pe)):Hn.setValue(Z,"projectionMatrix",te.projectionMatrix),Hn.setValue(Z,"viewMatrix",te.matrixWorldInverse);const vi=Hn.map.cameraPosition;vi!==void 0&&vi.setValue(Z,Ve.setFromMatrixPosition(te.matrixWorld)),Re.logarithmicDepthBuffer&&Hn.setValue(Z,"logDepthBufFC",2/(Math.log(te.far+1)/Math.LN2)),(Te.isMeshPhongMaterial||Te.isMeshToonMaterial||Te.isMeshLambertMaterial||Te.isMeshBasicMaterial||Te.isMeshStandardMaterial||Te.isShaderMaterial)&&Hn.setValue(Z,"isOrthographic",te.isOrthographicCamera===!0),L!==te&&(L=te,Tn=!0,Ei=!0)}if(De.isSkinnedMesh){Hn.setOptional(Z,De,"bindMatrix"),Hn.setOptional(Z,De,"bindMatrixInverse");const Ci=De.skeleton;Ci&&(Ci.boneTexture===null&&Ci.computeBoneTexture(),Hn.setValue(Z,"boneTexture",Ci.boneTexture,ye))}De.isBatchedMesh&&(Hn.setOptional(Z,De,"batchingTexture"),Hn.setValue(Z,"batchingTexture",De._matricesTexture,ye),Hn.setOptional(Z,De,"batchingIdTexture"),Hn.setValue(Z,"batchingIdTexture",De._indirectTexture,ye),Hn.setOptional(Z,De,"batchingColorTexture"),De._colorsTexture!==null&&Hn.setValue(Z,"batchingColorTexture",De._colorsTexture,ye));const $n=Ye.morphAttributes;if(($n.position!==void 0||$n.normal!==void 0||$n.color!==void 0)&&Ke.update(De,Ye,ii),(Tn||Ut.receiveShadow!==De.receiveShadow)&&(Ut.receiveShadow=De.receiveShadow,Hn.setValue(Z,"receiveShadow",De.receiveShadow)),Te.isMeshGouraudMaterial&&Te.envMap!==null&&(Mi.envMap.value=bt,Mi.flipEnvMap.value=bt.isCubeTexture&&bt.isRenderTargetTexture===!1?-1:1),Te.isMeshStandardMaterial&&Te.envMap===null&&Ee.environment!==null&&(Mi.envMapIntensity.value=Ee.environmentIntensity),Tn&&(Hn.setValue(Z,"toneMappingExposure",R.toneMappingExposure),Ut.needsLights&&cs(Mi,Ei),ht&&Te.fog===!0&&Me.refreshFogUniforms(Mi,ht),Me.refreshMaterialUniforms(Mi,Te,Q,q,b.state.transmissionRenderTarget[te.id]),L_.upload(Z,ui(Ut),Mi,ye)),Te.isShaderMaterial&&Te.uniformsNeedUpdate===!0&&(L_.upload(Z,ui(Ut),Mi,ye),Te.uniformsNeedUpdate=!1),Te.isSpriteMaterial&&Hn.setValue(Z,"center",De.center),Hn.setValue(Z,"modelViewMatrix",De.modelViewMatrix),Hn.setValue(Z,"normalMatrix",De.normalMatrix),Hn.setValue(Z,"modelMatrix",De.matrixWorld),Te.isShaderMaterial||Te.isRawShaderMaterial){const Ci=Te.uniformsGroups;for(let vi=0,Bi=Ci.length;vi<Bi;vi++){const ks=Ci[vi];he.update(ks,ii),he.bind(ks,ii)}}return ii}function cs(te,Ee){te.ambientLightColor.needsUpdate=Ee,te.lightProbe.needsUpdate=Ee,te.directionalLights.needsUpdate=Ee,te.directionalLightShadows.needsUpdate=Ee,te.pointLights.needsUpdate=Ee,te.pointLightShadows.needsUpdate=Ee,te.spotLights.needsUpdate=Ee,te.spotLightShadows.needsUpdate=Ee,te.rectAreaLights.needsUpdate=Ee,te.hemisphereLights.needsUpdate=Ee}function Gn(te){return te.isMeshLambertMaterial||te.isMeshToonMaterial||te.isMeshPhongMaterial||te.isMeshStandardMaterial||te.isShadowMaterial||te.isShaderMaterial&&te.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(te,Ee,Ye){const Te=Se.get(te);Te.__autoAllocateDepthBuffer=te.resolveDepthBuffer===!1,Te.__autoAllocateDepthBuffer===!1&&(Te.__useRenderToTexture=!1),Se.get(te.texture).__webglTexture=Ee,Se.get(te.depthTexture).__webglTexture=Te.__autoAllocateDepthBuffer?void 0:Ye,Te.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(te,Ee){const Ye=Se.get(te);Ye.__webglFramebuffer=Ee,Ye.__useDefaultFramebuffer=Ee===void 0};const ni=Z.createFramebuffer();this.setRenderTarget=function(te,Ee=0,Ye=0){P=te,O=Ee,I=Ye;let Te=!0,De=null,ht=!1,yt=!1;if(te){const bt=Se.get(te);if(bt.__useDefaultFramebuffer!==void 0)me.bindFramebuffer(Z.FRAMEBUFFER,null),Te=!1;else if(bt.__webglFramebuffer===void 0)ye.setupRenderTarget(te);else if(bt.__hasExternalTextures)ye.rebindTextures(te,Se.get(te.texture).__webglTexture,Se.get(te.depthTexture).__webglTexture);else if(te.depthBuffer){const wt=te.depthTexture;if(bt.__boundDepthTexture!==wt){if(wt!==null&&Se.has(wt)&&(te.width!==wt.image.width||te.height!==wt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");ye.setupDepthRenderbuffer(te)}}const Bt=te.texture;(Bt.isData3DTexture||Bt.isDataArrayTexture||Bt.isCompressedArrayTexture)&&(yt=!0);const Rt=Se.get(te).__webglFramebuffer;te.isWebGLCubeRenderTarget?(Array.isArray(Rt[Ee])?De=Rt[Ee][Ye]:De=Rt[Ee],ht=!0):te.samples>0&&ye.useMultisampledRTT(te)===!1?De=Se.get(te).__webglMultisampledFramebuffer:Array.isArray(Rt)?De=Rt[Ye]:De=Rt,k.copy(te.viewport),X.copy(te.scissor),W=te.scissorTest}else k.copy(G).multiplyScalar(Q).floor(),X.copy(K).multiplyScalar(Q).floor(),W=se;if(Ye!==0&&(De=ni),me.bindFramebuffer(Z.FRAMEBUFFER,De)&&Te&&me.drawBuffers(te,De),me.viewport(k),me.scissor(X),me.setScissorTest(W),ht){const bt=Se.get(te.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,bt.__webglTexture,Ye)}else if(yt){const bt=Se.get(te.texture),Bt=Ee;Z.framebufferTextureLayer(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,bt.__webglTexture,Ye,Bt)}else if(te!==null&&Ye!==0){const bt=Se.get(te.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,bt.__webglTexture,Ye)}N=-1},this.readRenderTargetPixels=function(te,Ee,Ye,Te,De,ht,yt,Mt=0){if(!(te&&te.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let bt=Se.get(te).__webglFramebuffer;if(te.isWebGLCubeRenderTarget&&yt!==void 0&&(bt=bt[yt]),bt){me.bindFramebuffer(Z.FRAMEBUFFER,bt);try{const Bt=te.textures[Mt],Rt=Bt.format,wt=Bt.type;if(!Re.textureFormatReadable(Rt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Re.textureTypeReadable(wt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ee>=0&&Ee<=te.width-Te&&Ye>=0&&Ye<=te.height-De&&(te.textures.length>1&&Z.readBuffer(Z.COLOR_ATTACHMENT0+Mt),Z.readPixels(Ee,Ye,Te,De,Ae.convert(Rt),Ae.convert(wt),ht))}finally{const Bt=P!==null?Se.get(P).__webglFramebuffer:null;me.bindFramebuffer(Z.FRAMEBUFFER,Bt)}}},this.readRenderTargetPixelsAsync=async function(te,Ee,Ye,Te,De,ht,yt,Mt=0){if(!(te&&te.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let bt=Se.get(te).__webglFramebuffer;if(te.isWebGLCubeRenderTarget&&yt!==void 0&&(bt=bt[yt]),bt)if(Ee>=0&&Ee<=te.width-Te&&Ye>=0&&Ye<=te.height-De){me.bindFramebuffer(Z.FRAMEBUFFER,bt);const Bt=te.textures[Mt],Rt=Bt.format,wt=Bt.type;if(!Re.textureFormatReadable(Rt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Re.textureTypeReadable(wt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Yt=Z.createBuffer();Z.bindBuffer(Z.PIXEL_PACK_BUFFER,Yt),Z.bufferData(Z.PIXEL_PACK_BUFFER,ht.byteLength,Z.STREAM_READ),te.textures.length>1&&Z.readBuffer(Z.COLOR_ATTACHMENT0+Mt),Z.readPixels(Ee,Ye,Te,De,Ae.convert(Rt),Ae.convert(wt),0);const fn=P!==null?Se.get(P).__webglFramebuffer:null;me.bindFramebuffer(Z.FRAMEBUFFER,fn);const Rn=Z.fenceSync(Z.SYNC_GPU_COMMANDS_COMPLETE,0);return Z.flush(),await W5(Z,Rn,4),Z.bindBuffer(Z.PIXEL_PACK_BUFFER,Yt),Z.getBufferSubData(Z.PIXEL_PACK_BUFFER,0,ht),Z.deleteBuffer(Yt),Z.deleteSync(Rn),ht}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(te,Ee=null,Ye=0){const Te=Math.pow(2,-Ye),De=Math.floor(te.image.width*Te),ht=Math.floor(te.image.height*Te),yt=Ee!==null?Ee.x:0,Mt=Ee!==null?Ee.y:0;ye.setTexture2D(te,0),Z.copyTexSubImage2D(Z.TEXTURE_2D,Ye,0,0,yt,Mt,De,ht),me.unbindTexture()};const gi=Z.createFramebuffer(),_n=Z.createFramebuffer();this.copyTextureToTexture=function(te,Ee,Ye=null,Te=null,De=0,ht=null){ht===null&&(De!==0?(Am("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),ht=De,De=0):ht=0);let yt,Mt,bt,Bt,Rt,wt,Yt,fn,Rn;const Xt=te.isCompressedTexture?te.mipmaps[ht]:te.image;if(Ye!==null)yt=Ye.max.x-Ye.min.x,Mt=Ye.max.y-Ye.min.y,bt=Ye.isBox3?Ye.max.z-Ye.min.z:1,Bt=Ye.min.x,Rt=Ye.min.y,wt=Ye.isBox3?Ye.min.z:0;else{const $n=Math.pow(2,-De);yt=Math.floor(Xt.width*$n),Mt=Math.floor(Xt.height*$n),te.isDataArrayTexture?bt=Xt.depth:te.isData3DTexture?bt=Math.floor(Xt.depth*$n):bt=1,Bt=0,Rt=0,wt=0}Te!==null?(Yt=Te.x,fn=Te.y,Rn=Te.z):(Yt=0,fn=0,Rn=0);const nn=Ae.convert(Ee.format),Ut=Ae.convert(Ee.type);let Un;Ee.isData3DTexture?(ye.setTexture3D(Ee,0),Un=Z.TEXTURE_3D):Ee.isDataArrayTexture||Ee.isCompressedArrayTexture?(ye.setTexture2DArray(Ee,0),Un=Z.TEXTURE_2D_ARRAY):(ye.setTexture2D(Ee,0),Un=Z.TEXTURE_2D),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,Ee.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ee.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,Ee.unpackAlignment);const Jt=Z.getParameter(Z.UNPACK_ROW_LENGTH),ii=Z.getParameter(Z.UNPACK_IMAGE_HEIGHT),_s=Z.getParameter(Z.UNPACK_SKIP_PIXELS),Tn=Z.getParameter(Z.UNPACK_SKIP_ROWS),Ei=Z.getParameter(Z.UNPACK_SKIP_IMAGES);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,Xt.width),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,Xt.height),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,Bt),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,Rt),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,wt);const Hn=te.isDataArrayTexture||te.isData3DTexture,Mi=Ee.isDataArrayTexture||Ee.isData3DTexture;if(te.isDepthTexture){const $n=Se.get(te),Ci=Se.get(Ee),vi=Se.get($n.__renderTarget),Bi=Se.get(Ci.__renderTarget);me.bindFramebuffer(Z.READ_FRAMEBUFFER,vi.__webglFramebuffer),me.bindFramebuffer(Z.DRAW_FRAMEBUFFER,Bi.__webglFramebuffer);for(let ks=0;ks<bt;ks++)Hn&&(Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Se.get(te).__webglTexture,De,wt+ks),Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Se.get(Ee).__webglTexture,ht,Rn+ks)),Z.blitFramebuffer(Bt,Rt,yt,Mt,Yt,fn,yt,Mt,Z.DEPTH_BUFFER_BIT,Z.NEAREST);me.bindFramebuffer(Z.READ_FRAMEBUFFER,null),me.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else if(De!==0||te.isRenderTargetTexture||Se.has(te)){const $n=Se.get(te),Ci=Se.get(Ee);me.bindFramebuffer(Z.READ_FRAMEBUFFER,gi),me.bindFramebuffer(Z.DRAW_FRAMEBUFFER,_n);for(let vi=0;vi<bt;vi++)Hn?Z.framebufferTextureLayer(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,$n.__webglTexture,De,wt+vi):Z.framebufferTexture2D(Z.READ_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,$n.__webglTexture,De),Mi?Z.framebufferTextureLayer(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Ci.__webglTexture,ht,Rn+vi):Z.framebufferTexture2D(Z.DRAW_FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_2D,Ci.__webglTexture,ht),De!==0?Z.blitFramebuffer(Bt,Rt,yt,Mt,Yt,fn,yt,Mt,Z.COLOR_BUFFER_BIT,Z.NEAREST):Mi?Z.copyTexSubImage3D(Un,ht,Yt,fn,Rn+vi,Bt,Rt,yt,Mt):Z.copyTexSubImage2D(Un,ht,Yt,fn,Bt,Rt,yt,Mt);me.bindFramebuffer(Z.READ_FRAMEBUFFER,null),me.bindFramebuffer(Z.DRAW_FRAMEBUFFER,null)}else Mi?te.isDataTexture||te.isData3DTexture?Z.texSubImage3D(Un,ht,Yt,fn,Rn,yt,Mt,bt,nn,Ut,Xt.data):Ee.isCompressedArrayTexture?Z.compressedTexSubImage3D(Un,ht,Yt,fn,Rn,yt,Mt,bt,nn,Xt.data):Z.texSubImage3D(Un,ht,Yt,fn,Rn,yt,Mt,bt,nn,Ut,Xt):te.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,ht,Yt,fn,yt,Mt,nn,Ut,Xt.data):te.isCompressedTexture?Z.compressedTexSubImage2D(Z.TEXTURE_2D,ht,Yt,fn,Xt.width,Xt.height,nn,Xt.data):Z.texSubImage2D(Z.TEXTURE_2D,ht,Yt,fn,yt,Mt,nn,Ut,Xt);Z.pixelStorei(Z.UNPACK_ROW_LENGTH,Jt),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,ii),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,_s),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,Tn),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,Ei),ht===0&&Ee.generateMipmaps&&Z.generateMipmap(Un),me.unbindTexture()},this.copyTextureToTexture3D=function(te,Ee,Ye=null,Te=null,De=0){return Am('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(te,Ee,Ye,Te,De)},this.initRenderTarget=function(te){Se.get(te).__webglFramebuffer===void 0&&ye.setupRenderTarget(te)},this.initTexture=function(te){te.isCubeTexture?ye.setTextureCube(te,0):te.isData3DTexture?ye.setTexture3D(te,0):te.isDataArrayTexture||te.isCompressedArrayTexture?ye.setTexture2DArray(te,0):ye.setTexture2D(te,0),me.unbindTexture()},this.resetState=function(){O=0,I=0,P=null,me.reset(),st.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return zo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Nn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Nn._getUnpackColorSpace()}}const nG=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:$x,AddEquation:Cf,AddOperation:cB,AdditiveAnimationBlendMode:Hb,AdditiveBlending:Y_,AgXToneMapping:pB,AlphaFormat:Ib,AlwaysCompare:RB,AlwaysDepth:J_,AlwaysStencilFunc:EM,AmbientLight:d4,AnimationAction:A4,AnimationClip:zm,AnimationLoader:xI,AnimationMixer:YI,AnimationObjectGroup:XI,AnimationUtils:gI,ArcCurve:VB,ArrayCamera:_4,ArrowHelper:d8,AttachedBindMode:TM,Audio:x4,AudioAnalyser:OI,AudioContext:vT,AudioListener:BI,AudioLoader:wI,AxesHelper:p8,BackSide:vs,BasicDepthPacking:Yf,BasicShadowMap:kD,BatchedMesh:zB,Bone:pS,BooleanKeyframeTrack:Xd,Box2:$I,Box3:Ds,Box3Helper:f8,BoxGeometry:kd,BoxHelper:u8,BufferAttribute:Fn,BufferGeometry:$t,BufferGeometryLoader:v4,ByteType:Ob,Cache:_u,Camera:Vv,CameraHelper:c8,CanvasTexture:zP,CapsuleGeometry:_S,CatmullRomCurve3:kB,CineonToneMapping:hB,CircleGeometry:xS,ClampToEdgeWrapping:eo,Clock:yT,Color:St,ColorKeyframeTrack:uT,ColorManagement:Nn,CompressedArrayTexture:IP,CompressedCubeTexture:FP,CompressedTexture:vS,CompressedTextureLoader:SI,ConeGeometry:Wv,ConstantAlphaFactor:rB,ConstantColorFactor:sB,Controls:g8,CubeCamera:NB,CubeReflectionMapping:bu,CubeRefractionMapping:If,CubeTexture:kv,CubeTextureLoader:AI,CubeUVReflectionMapping:Qm,CubicBezierCurve:nT,CubicBezierCurve3:XB,CubicInterpolant:o4,CullFaceBack:AM,CullFaceFront:VD,CullFaceFrontBack:ZN,CullFaceNone:HD,Curve:zl,CurvePath:YB,CustomBlending:XD,CustomToneMapping:dB,CylinderGeometry:Yv,Cylindrical:QI,Data3DTexture:uS,DataArrayTexture:cS,DataTexture:Cc,DataTextureLoader:f4,DataUtils:Ig,DecrementStencilOp:o5,DecrementWrapStencilOp:c5,DefaultLoadingManager:u4,DepthFormat:Um,DepthStencilFormat:Nd,DepthTexture:yS,DetachedBindMode:gB,DirectionalLight:mT,DirectionalLightHelper:l8,DiscreteInterpolant:l4,DodecahedronGeometry:SS,DoubleSide:ha,DstAlphaFactor:$D,DstColorFactor:tB,DynamicCopyUsage:b5,DynamicDrawUsage:y5,DynamicReadUsage:S5,EdgesGeometry:HB,EllipseCurve:AS,EqualCompare:TB,EqualDepth:Q_,EqualStencilFunc:d5,EquirectangularReflectionMapping:Rm,EquirectangularRefractionMapping:hv,Euler:ro,EventDispatcher:uo,ExtrudeGeometry:MS,FileLoader:oo,Float16BufferAttribute:gP,Float32BufferAttribute:Dt,FloatType:Zs,Fog:hS,FogExp2:fS,FramebufferTexture:PP,FrontSide:ao,Frustum:$m,FrustumArray:mS,GLBufferAttribute:ZI,GLSL1:E5,GLSL3:CM,GreaterCompare:EB,GreaterDepth:ex,GreaterEqualCompare:wB,GreaterEqualDepth:$_,GreaterEqualStencilFunc:v5,GreaterStencilFunc:m5,GridHelper:r8,Group:Tc,HalfFloatType:Ll,HemisphereLight:h4,HemisphereLightHelper:a8,IcosahedronGeometry:bS,ImageBitmapLoader:y4,ImageLoader:Av,ImageUtils:UB,IncrementStencilOp:r5,IncrementWrapStencilOp:l5,InstancedBufferAttribute:Gf,InstancedBufferGeometry:gT,InstancedInterleavedBuffer:JI,InstancedMesh:Qb,Int16BufferAttribute:pP,Int32BufferAttribute:mP,Int8BufferAttribute:fP,IntType:nS,InterleavedBuffer:Xv,InterleavedBufferAttribute:zf,Interpolant:e0,InterpolateDiscrete:Lm,InterpolateLinear:Om,InterpolateSmooth:B_,InterpolationSamplingMode:R5,InterpolationSamplingType:w5,InvertStencilOp:u5,KeepStencilOp:od,KeyframeTrack:Yo,LOD:FB,LatheGeometry:TS,Layers:Pm,LessCompare:bB,LessDepth:Z_,LessEqualCompare:Xb,LessEqualDepth:Ld,LessEqualStencilFunc:p5,LessStencilFunc:h5,Light:Kf,LightProbe:g4,Line:Uc,Line3:e8,LineBasicMaterial:ma,LineCurve:iT,LineCurve3:jB,LineDashedMaterial:s4,LineLoop:$b,LineSegments:Fl,LinearFilter:ti,LinearInterpolant:cT,LinearMipMapLinearFilter:vB,LinearMipMapNearestFilter:e5,LinearMipmapLinearFilter:to,LinearMipmapNearestFilter:Sm,LinearSRGBColorSpace:Pl,LinearToneMapping:uB,LinearTransfer:pv,Loader:Ia,LoaderUtils:Of,LoadingManager:fT,LoopOnce:yB,LoopPingPong:xB,LoopRepeat:_B,MOUSE:ad,Material:ys,MaterialLoader:LS,MathUtils:ko,Matrix2:ST,Matrix3:cn,Matrix4:Ft,MaxEquation:qD,Mesh:Di,MeshBasicMaterial:La,MeshDepthMaterial:BS,MeshDistanceMaterial:US,MeshLambertMaterial:n4,MeshMatcapMaterial:i4,MeshNormalMaterial:oT,MeshPhongMaterial:e4,MeshPhysicalMaterial:jo,MeshStandardMaterial:Zv,MeshToonMaterial:t4,MinEquation:WD,MirroredRepeatWrapping:Dm,MixOperation:lB,MultiplyBlending:bM,MultiplyOperation:Gv,NearestFilter:Hi,NearestMipMapLinearFilter:$N,NearestMipMapNearestFilter:QN,NearestMipmapLinearFilter:hd,NearestMipmapNearestFilter:tS,NeutralToneMapping:mB,NeverCompare:MB,NeverDepth:K_,NeverStencilFunc:f5,NoBlending:da,NoColorSpace:Ul,NoToneMapping:Nl,NormalAnimationBlendMode:lS,NormalBlending:Md,NotEqualCompare:CB,NotEqualDepth:tx,NotEqualStencilFunc:g5,NumberKeyframeTrack:Id,Object3D:In,ObjectLoader:EI,ObjectSpaceNormalMap:AB,OctahedronGeometry:qv,OneFactor:JD,OneMinusConstantAlphaFactor:oB,OneMinusConstantColorFactor:aB,OneMinusDstAlphaFactor:eB,OneMinusDstColorFactor:nB,OneMinusSrcAlphaFactor:q_,OneMinusSrcColorFactor:QD,OrthographicCamera:Au,PCFShadowMap:Qx,PCFSoftShadowMap:jg,PMREMGenerator:NM,Path:Ux,PerspectiveCamera:Ji,Plane:gu,PlaneGeometry:Ru,PlaneHelper:h8,PointLight:pT,PointLightHelper:i8,Points:eT,PointsMaterial:gS,PolarGridHelper:o8,PolyhedronGeometry:qf,PositionalAudio:LI,PropertyBinding:Xn,PropertyMixer:S4,QuadraticBezierCurve:sT,QuadraticBezierCurve3:aT,Quaternion:Rs,QuaternionKeyframeTrack:Fd,QuaternionLinearInterpolant:c4,RED_GREEN_RGTC2_Format:Ex,RED_RGTC1_Format:Gb,REVISION:jf,RGBADepthPacking:kb,RGBAFormat:Ua,RGBAIntegerFormat:oS,RGBA_ASTC_10x10_Format:xx,RGBA_ASTC_10x5_Format:vx,RGBA_ASTC_10x6_Format:yx,RGBA_ASTC_10x8_Format:_x,RGBA_ASTC_12x10_Format:Sx,RGBA_ASTC_12x12_Format:Ax,RGBA_ASTC_4x4_Format:cx,RGBA_ASTC_5x4_Format:ux,RGBA_ASTC_5x5_Format:fx,RGBA_ASTC_6x5_Format:hx,RGBA_ASTC_6x6_Format:dx,RGBA_ASTC_8x5_Format:px,RGBA_ASTC_8x6_Format:mx,RGBA_ASTC_8x8_Format:gx,RGBA_BPTC_Format:Jg,RGBA_ETC2_EAC_Format:lx,RGBA_PVRTC_2BPPV1_Format:ax,RGBA_PVRTC_4BPPV1_Format:sx,RGBA_S3TC_DXT1_Format:Wg,RGBA_S3TC_DXT3_Format:qg,RGBA_S3TC_DXT5_Format:Kg,RGBDepthPacking:n5,RGBFormat:Fb,RGBIntegerFormat:t5,RGB_BPTC_SIGNED_Format:Mx,RGB_BPTC_UNSIGNED_Format:bx,RGB_ETC1_Format:rx,RGB_ETC2_Format:ox,RGB_PVRTC_2BPPV1_Format:ix,RGB_PVRTC_4BPPV1_Format:nx,RGB_S3TC_DXT1_Format:Yg,RGDepthPacking:i5,RGFormat:zb,RGIntegerFormat:rS,RawShaderMaterial:$B,Ray:Vd,Raycaster:M4,RectAreaLight:p4,RedFormat:aS,RedIntegerFormat:Hv,ReinhardToneMapping:fB,RenderTarget:Yb,RenderTarget3D:WI,RepeatWrapping:Ff,ReplaceStencilOp:a5,ReverseSubtractEquation:YD,RingGeometry:ES,SIGNED_RED_GREEN_RGTC2_Format:Cx,SIGNED_RED_RGTC1_Format:Tx,SRGBColorSpace:Zn,SRGBTransfer:li,Scene:yv,ShaderChunk:pn,ShaderLib:Dl,ShaderMaterial:ls,ShadowMaterial:QB,Shape:Lf,ShapeGeometry:Kv,ShapePath:m8,ShapeUtils:Ol,ShortType:Nb,Skeleton:jv,SkeletonHelper:n8,SkinnedMesh:Zb,Source:Rf,Sphere:zs,SphereGeometry:Jv,Spherical:LM,SphericalHarmonics3:m4,SplineCurve:rT,SpotLight:dT,SpotLightHelper:t8,Sprite:Jb,SpriteMaterial:dS,SrcAlphaFactor:W_,SrcAlphaSaturateFactor:iB,SrcColorFactor:ZD,StaticCopyUsage:M5,StaticDrawUsage:mv,StaticReadUsage:x5,StereoCamera:RI,StreamCopyUsage:T5,StreamDrawUsage:_5,StreamReadUsage:A5,StringKeyframeTrack:jd,SubtractEquation:jD,SubtractiveBlending:MM,TOUCH:rd,TangentSpaceNormalMap:Wf,TetrahedronGeometry:CS,Texture:Ai,TextureLoader:Qv,TextureUtils:S8,TimestampQuery:C5,TorusGeometry:wS,TorusKnotGeometry:RS,Triangle:Cr,TriangleFanDrawMode:wx,TriangleStripDrawMode:Vb,TrianglesDrawMode:SB,TubeGeometry:DS,UVMapping:eS,Uint16BufferAttribute:Wb,Uint32BufferAttribute:qb,Uint8BufferAttribute:hP,Uint8ClampedBufferAttribute:dP,Uniform:rn,UniformsGroup:KI,UniformsLib:Et,UniformsUtils:Kb,UnsignedByteType:Gs,UnsignedInt248Type:Od,UnsignedInt5999Type:Pb,UnsignedIntType:Bc,UnsignedShort4444Type:iS,UnsignedShort5551Type:sS,UnsignedShortType:Bm,VSMShadowMap:Rl,Vector2:tt,Vector3:le,Vector4:wn,VectorKeyframeTrack:zd,VideoFrameTexture:NP,VideoTexture:GB,WebGL3DRenderTarget:eP,WebGLArrayRenderTarget:$5,WebGLCoordinateSystem:zo,WebGLCubeRenderTarget:PB,WebGLRenderTarget:os,WebGLRenderer:B4,WebGLUtils:D4,WebGPUCoordinateSystem:gv,WebXRController:U_,WireframeGeometry:ZB,WrapAroundEnding:dv,ZeroCurvatureEnding:dd,ZeroFactor:KD,ZeroSlopeEnding:pd,ZeroStencilOp:s5,createCanvasElement:BB},Symbol.toStringTag,{value:"Module"}));var b2={exports:{}},du={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew;function iG(){return ew||(ew=1,du.ConcurrentRoot=1,du.ContinuousEventPriority=8,du.DefaultEventPriority=32,du.DiscreteEventPriority=2,du.IdleEventPriority=268435456,du.LegacyRoot=0,du.NoEventPriority=0),du}var tw;function sG(){return tw||(tw=1,b2.exports=iG()),b2.exports}var O_=sG(),T2={exports:{}},E2={},C2={exports:{}},w2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nw;function aG(){if(nw)return w2;nw=1;var i=Zm();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var t=typeof Object.is=="function"?Object.is:e,n=i.useState,s=i.useEffect,a=i.useLayoutEffect,r=i.useDebugValue;function l(g,v){var y=v(),S=n({inst:{value:y,getSnapshot:v}}),A=S[0].inst,M=S[1];return a(function(){A.value=y,A.getSnapshot=v,c(A)&&M({inst:A})},[g,y,v]),s(function(){return c(A)&&M({inst:A}),g(function(){c(A)&&M({inst:A})})},[g]),r(y),y}function c(g){var v=g.getSnapshot;g=g.value;try{var y=v();return!t(g,y)}catch{return!0}}function f(g,v){return v()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return w2.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:d,w2}var iw;function rG(){return iw||(iw=1,C2.exports=aG()),C2.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw;function oG(){if(sw)return E2;sw=1;var i=Zm(),e=rG();function t(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,a=i.useRef,r=i.useEffect,l=i.useMemo,c=i.useDebugValue;return E2.useSyncExternalStoreWithSelector=function(f,d,g,v,y){var S=a(null);if(S.current===null){var A={hasValue:!1,value:null};S.current=A}else A=S.current;S=l(function(){function b(O){if(!C){if(C=!0,w=O,O=v(O),y!==void 0&&A.hasValue){var I=A.value;if(y(I,O))return R=I}return R=O}if(I=R,n(w,O))return I;var P=v(O);return y!==void 0&&y(I,P)?(w=O,I):(w=O,R=P)}var C=!1,w,R,U=g===void 0?null:g;return[function(){return b(d())},U===null?void 0:function(){return b(U())}]},[d,g,v,y]);var M=s(f,S[0],S[1]);return r(function(){A.hasValue=!0,A.value=M},[M]),c(M),M},E2}var aw;function lG(){return aw||(aw=1,T2.exports=oG()),T2.exports}var cG=lG();const uG=Zx(cG),rw=i=>{let e;const t=new Set,n=(f,d)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const v=e;e=d??(typeof g!="object"||g===null)?g:Object.assign({},e,g),t.forEach(y=>y(e,v))}},s=()=>e,l={setState:n,getState:s,getInitialState:()=>c,subscribe:f=>(t.add(f),()=>t.delete(f))},c=e=i(n,s,l);return l},fG=i=>i?rw(i):rw,{useSyncExternalStoreWithSelector:hG}=uG,dG=i=>i;function pG(i,e=dG,t){const n=hG(i.subscribe,i.getState,i.getInitialState,e,t);return j_.useDebugValue(n),n}const ow=(i,e)=>{const t=fG(i),n=(s,a=e)=>pG(t,s,a);return Object.assign(n,t),n},mG=(i,e)=>i?ow(i,e):ow;var R2={exports:{}},D2={exports:{}},B2={exports:{}},U2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lw;function gG(){return lw||(lw=1,function(i){function e(z,q){var Q=z.length;z.push(q);e:for(;0<Q;){var re=Q-1>>>1,H=z[re];if(0<s(H,q))z[re]=q,z[Q]=H,Q=re;else break e}}function t(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var q=z[0],Q=z.pop();if(Q!==q){z[0]=Q;e:for(var re=0,H=z.length,G=H>>>1;re<G;){var K=2*(re+1)-1,se=z[K],J=K+1,ne=z[J];if(0>s(se,Q))J<H&&0>s(ne,se)?(z[re]=ne,z[J]=Q,re=J):(z[re]=se,z[K]=Q,re=K);else if(J<H&&0>s(ne,Q))z[re]=ne,z[J]=Q,re=J;else break e}}return q}function s(z,q){var Q=z.sortIndex-q.sortIndex;return Q!==0?Q:z.id-q.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var r=Date,l=r.now();i.unstable_now=function(){return r.now()-l}}var c=[],f=[],d=1,g=null,v=3,y=!1,S=!1,A=!1,M=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function w(z){for(var q=t(f);q!==null;){if(q.callback===null)n(f);else if(q.startTime<=z)n(f),q.sortIndex=q.expirationTime,e(c,q);else break;q=t(f)}}function R(z){if(A=!1,w(z),!S)if(t(c)!==null)S=!0,$();else{var q=t(f);q!==null&&ce(R,q.startTime-z)}}var U=!1,O=-1,I=5,P=-1;function N(){return!(i.unstable_now()-P<I)}function L(){if(U){var z=i.unstable_now();P=z;var q=!0;try{e:{S=!1,A&&(A=!1,b(O),O=-1),y=!0;var Q=v;try{t:{for(w(z),g=t(c);g!==null&&!(g.expirationTime>z&&N());){var re=g.callback;if(typeof re=="function"){g.callback=null,v=g.priorityLevel;var H=re(g.expirationTime<=z);if(z=i.unstable_now(),typeof H=="function"){g.callback=H,w(z),q=!0;break t}g===t(c)&&n(c),w(z)}else n(c);g=t(c)}if(g!==null)q=!0;else{var G=t(f);G!==null&&ce(R,G.startTime-z),q=!1}}break e}finally{g=null,v=Q,y=!1}q=void 0}}finally{q?k():U=!1}}}var k;if(typeof C=="function")k=function(){C(L)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,W=X.port2;X.port1.onmessage=L,k=function(){W.postMessage(null)}}else k=function(){M(L,0)};function $(){U||(U=!0,k())}function ce(z,q){O=M(function(){z(i.unstable_now())},q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_continueExecution=function(){S||y||(S=!0,$())},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(z){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var Q=v;v=q;try{return z()}finally{v=Q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=v;v=z;try{return q()}finally{v=Q}},i.unstable_scheduleCallback=function(z,q,Q){var re=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?re+Q:re):Q=re,z){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Q+H,z={id:d++,callback:q,priorityLevel:z,startTime:Q,expirationTime:H,sortIndex:-1},Q>re?(z.sortIndex=Q,e(f,z),t(c)===null&&z===t(f)&&(A?(b(O),O=-1):A=!0,ce(R,Q-re))):(z.sortIndex=H,e(c,z),S||y||(S=!0,$())),z},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(z){var q=v;return function(){var Q=v;v=q;try{return z.apply(this,arguments)}finally{v=Q}}}}(U2)),U2}var cw;function vG(){return cw||(cw=1,B2.exports=gG()),B2.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uw;function yG(){return uw||(uw=1,function(i){i.exports=function(e){function t(h,p,x,E){return new U0(h,p,x,E)}function n(){}function s(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)p+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(h){return h===null||typeof h!="object"?null:(h=dl&&h[dl]||h["@@iterator"],typeof h=="function"?h:null)}function r(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===P0?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case tc:return"Fragment";case pr:return"Portal";case fp:return"Profiler";case Ah:return"StrictMode";case hp:return"Suspense";case ku:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case Fr:return(h.displayName||"Context")+".Provider";case O0:return(h._context.displayName||"Context")+".Consumer";case bh:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case dp:return p=h.displayName||null,p!==null?p:r(h.type)||"Memo";case mr:p=h._payload,h=h._init;try{return r(h(p))}catch{}}return null}function l(h){if(yo===void 0)try{throw Error()}catch(x){var p=x.stack.trim().match(/\n( *(at )?)/);yo=p&&p[1]||"",pl=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+yo+h+pl}function c(h,p){if(!h||Vc)return"";Vc=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(p){var Tt=function(){throw Error()};if(Object.defineProperty(Tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Tt,[])}catch(an){var Ct=an}Reflect.construct(h,[],Tt)}else{try{Tt.call()}catch(an){Ct=an}h.call(Tt.prototype)}}else{try{throw Error()}catch(an){Ct=an}(Tt=h())&&typeof Tt.catch=="function"&&Tt.catch(function(){})}}catch(an){if(an&&Ct&&typeof an.stack=="string")return[an.stack,Ct.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var B=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");B&&B.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var F=E.DetermineComponentFrameRoot(),ae=F[0],xe=F[1];if(ae&&xe){var Fe=ae.split(`
`),lt=xe.split(`
`);for(B=E=0;E<Fe.length&&!Fe[E].includes("DetermineComponentFrameRoot");)E++;for(;B<lt.length&&!lt[B].includes("DetermineComponentFrameRoot");)B++;if(E===Fe.length||B===lt.length)for(E=Fe.length-1,B=lt.length-1;1<=E&&0<=B&&Fe[E]!==lt[B];)B--;for(;1<=E&&0<=B;E--,B--)if(Fe[E]!==lt[B]){if(E!==1||B!==1)do if(E--,B--,0>B||Fe[E]!==lt[B]){var xt=`
`+Fe[E].replace(" at new "," at ");return h.displayName&&xt.includes("<anonymous>")&&(xt=xt.replace("<anonymous>",h.displayName)),xt}while(1<=E&&0<=B);break}}}finally{Vc=!1,Error.prepareStackTrace=x}return(x=h?h.displayName||h.name:"")?l(x):""}function f(h){switch(h.tag){case 26:case 27:case 5:return l(h.type);case 16:return l("Lazy");case 13:return l("Suspense");case 19:return l("SuspenseList");case 0:case 15:return h=c(h.type,!1),h;case 11:return h=c(h.type.render,!1),h;case 1:return h=c(h.type,!0),h;default:return""}}function d(h){try{var p="";do p+=f(h),h=h.return;while(h);return p}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function g(h){var p=h,x=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,(p.flags&4098)!==0&&(x=p.return),h=p.return;while(h)}return p.tag===3?x:null}function v(h){if(g(h)!==h)throw Error(s(188))}function y(h){var p=h.alternate;if(!p){if(p=g(h),p===null)throw Error(s(188));return p!==h?null:h}for(var x=h,E=p;;){var B=x.return;if(B===null)break;var F=B.alternate;if(F===null){if(E=B.return,E!==null){x=E;continue}break}if(B.child===F.child){for(F=B.child;F;){if(F===x)return v(B),h;if(F===E)return v(B),p;F=F.sibling}throw Error(s(188))}if(x.return!==E.return)x=B,E=F;else{for(var ae=!1,xe=B.child;xe;){if(xe===x){ae=!0,x=B,E=F;break}if(xe===E){ae=!0,E=B,x=F;break}xe=xe.sibling}if(!ae){for(xe=F.child;xe;){if(xe===x){ae=!0,x=F,E=B;break}if(xe===E){ae=!0,E=F,x=B;break}xe=xe.sibling}if(!ae)throw Error(s(189))}}if(x.alternate!==E)throw Error(s(190))}if(x.tag!==3)throw Error(s(188));return x.stateNode.current===x?h:p}function S(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h;for(h=h.child;h!==null;){if(p=S(h),p!==null)return p;h=h.sibling}return null}function A(h){var p=h.tag;if(p===5||p===26||p===27||p===6)return h;for(h=h.child;h!==null;){if(h.tag!==4&&(p=A(h),p!==null))return p;h=h.sibling}return null}function M(h){return{current:h}}function b(h){0>yl||(h.current=Yi[yl],Yi[yl]=null,yl--)}function C(h,p){yl++,Yi[yl]=h.current,h.current=p}function w(h){return h>>>=0,h===0?32:31-(iy(h)/sy|0)|0}function R(h){var p=h&42;if(p!==0)return p;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function U(h,p){var x=h.pendingLanes;if(x===0)return 0;var E=0,B=h.suspendedLanes,F=h.pingedLanes,ae=h.warmLanes;h=h.finishedLanes!==0;var xe=x&134217727;return xe!==0?(x=xe&~B,x!==0?E=R(x):(F&=xe,F!==0?E=R(F):h||(ae=xe&~ae,ae!==0&&(E=R(ae))))):(xe=x&~B,xe!==0?E=R(xe):F!==0?E=R(F):h||(ae=x&~ae,ae!==0&&(E=R(ae)))),E===0?0:p!==0&&p!==E&&(p&B)===0&&(B=E&-E,ae=p&-p,B>=ae||B===32&&(ae&4194176)!==0)?p:E}function O(h,p){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&p)===0}function I(h,p){switch(h){case 1:case 2:case 4:case 8:return p+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P(){var h=xo;return xo<<=1,(xo&4194176)===0&&(xo=128),h}function N(){var h=jc;return jc<<=1,(jc&62914560)===0&&(jc=4194304),h}function L(h){for(var p=[],x=0;31>x;x++)p.push(h);return p}function k(h,p){h.pendingLanes|=p,p!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function X(h,p,x,E,B,F){var ae=h.pendingLanes;h.pendingLanes=x,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=x,h.entangledLanes&=x,h.errorRecoveryDisabledLanes&=x,h.shellSuspendCounter=0;var xe=h.entanglements,Fe=h.expirationTimes,lt=h.hiddenUpdates;for(x=ae&~x;0<x;){var xt=31-aa(x),Tt=1<<xt;xe[xt]=0,Fe[xt]=-1;var Ct=lt[xt];if(Ct!==null)for(lt[xt]=null,xt=0;xt<Ct.length;xt++){var an=Ct[xt];an!==null&&(an.lane&=-536870913)}x&=~Tt}E!==0&&W(h,E,0),F!==0&&B===0&&h.tag!==0&&(h.suspendedLanes|=F&~(ae&~p))}function W(h,p,x){h.pendingLanes|=p,h.suspendedLanes&=~p;var E=31-aa(p);h.entangledLanes|=p,h.entanglements[E]=h.entanglements[E]|1073741824|x&4194218}function $(h,p){var x=h.entangledLanes|=p;for(h=h.entanglements;x;){var E=31-aa(x),B=1<<E;B&p|h[E]&p&&(h[E]|=p),x&=~B}}function ce(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function z(h){if(Ta&&typeof Ta.onCommitFiberRoot=="function")try{Ta.onCommitFiberRoot(Wi,h,void 0,(h.current.flags&128)===128)}catch{}}function q(h){if(typeof oy=="function"&&As(h),Ta&&typeof Ta.setStrictMode=="function")try{Ta.setStrictMode(Wi,h)}catch{}}function Q(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}function re(h,p){if(typeof h=="object"&&h!==null){var x=tg.get(h);return x!==void 0?x:(p={value:h,source:p,stack:d(p)},tg.set(h,p),p)}return{value:h,source:p,stack:d(p)}}function H(h,p){Yc[Wc++]=Qu,Yc[Wc++]=qc,qc=h,Qu=p}function G(h,p,x){Xa[ja++]=Hr,Xa[ja++]=Vr,Xa[ja++]=lc,lc=h;var E=Hr;h=Vr;var B=32-aa(E)-1;E&=~(1<<B),x+=1;var F=32-aa(p)+B;if(30<F){var ae=B-B%5;F=(E&(1<<ae)-1).toString(32),E>>=ae,B-=ae,Hr=1<<32-aa(p)+B|x<<B|E,Vr=F+h}else Hr=1<<F|x<<B|E,Vr=h}function K(h){h.return!==null&&(H(h,1),G(h,1,0))}function se(h){for(;h===qc;)qc=Yc[--Wc],Yc[Wc]=null,Qu=Yc[--Wc],Yc[Wc]=null;for(;h===lc;)lc=Xa[--ja],Xa[ja]=null,Vr=Xa[--ja],Xa[ja]=null,Hr=Xa[--ja],Xa[ja]=null}function J(h,p){C(So,p),C($u,h),C(fs,null),h=A1(p),b(fs),C(fs,h)}function ne(){b(fs),b($u),b(So)}function ue(h){h.memoizedState!==null&&C(Kc,h);var p=fs.current,x=Wu(p,h.type);p!==x&&(C($u,h),C(fs,x))}function pe(h){$u.current===h&&(b(fs),b($u)),Kc.current===h&&(b(Kc),ia?zr._currentValue=ic:zr._currentValue2=ic)}function ve(h){var p=Error(s(418,""));throw rt(re(p,h)),Lh}function Ve(h,p){if(!Ps)throw Error(s(175));W1(h.stateNode,h.type,h.memoizedProps,p,h)||ve(h)}function ze(h){for(Is=h.return;Is;)switch(Is.tag){case 3:case 27:Ms=!0;return;case 5:case 13:Ms=!1;return;default:Is=Is.return}}function Qe(h){if(!Ps||h!==Is)return!1;if(!Dn)return ze(h),Dn=!0,!1;var p=!1;if(si?h.tag!==3&&h.tag!==27&&(h.tag!==5||Ap(h.type)&&!ln(h.type,h.memoizedProps))&&(p=!0):h.tag!==3&&(h.tag!==5||Ap(h.type)&&!ln(h.type,h.memoizedProps))&&(p=!0),p&&Fs&&ve(h),ze(h),h.tag===13){if(!Ps)throw Error(s(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));Fs=K1(h)}else Fs=Is?Z0(h.stateNode):null;return!0}function Ie(){Ps&&(Fs=Is=null,Dn=!1)}function rt(h){yr===null?yr=[h]:yr.push(h)}function Z(){for(var h=Jc,p=kr=Jc=0;p<h;){var x=_r[p];_r[p++]=null;var E=_r[p];_r[p++]=null;var B=_r[p];_r[p++]=null;var F=_r[p];if(_r[p++]=null,E!==null&&B!==null){var ae=E.pending;ae===null?B.next=B:(B.next=ae.next,ae.next=B),E.pending=B}F!==0&&me(x,B,F)}}function Le(h,p,x,E){_r[Jc++]=h,_r[Jc++]=p,_r[Jc++]=x,_r[Jc++]=E,kr|=E,h.lanes|=E,h=h.alternate,h!==null&&(h.lanes|=E)}function Ue(h,p,x,E){return Le(h,p,x,E),Pe(h)}function Re(h,p){return Le(h,null,null,p),Pe(h)}function me(h,p,x){h.lanes|=x;var E=h.alternate;E!==null&&(E.lanes|=x);for(var B=!1,F=h.return;F!==null;)F.childLanes|=x,E=F.alternate,E!==null&&(E.childLanes|=x),F.tag===22&&(h=F.stateNode,h===null||h._visibility&1||(B=!0)),h=F,F=F.return;B&&p!==null&&h.tag===3&&(F=h.stateNode,B=31-aa(x),F=F.hiddenUpdates,h=F[B],h===null?F[B]=[p]:h.push(p),p.lane=x|536870912)}function Pe(h){if(50<cf)throw cf=0,Ip=null,Error(s(185));for(var p=h.return;p!==null;)h=p,p=h.return;return h.tag===3?h.stateNode:null}function Se(h){h!==_l&&h.next===null&&(_l===null?Oh=_l=h:_l=_l.next=h),fi=!0,Zc||(Zc=!0,Be(nt))}function ye(h,p){if(!ng&&fi){ng=!0;do for(var x=!1,E=Oh;E!==null;){if(h!==0){var B=E.pendingLanes;if(B===0)var F=0;else{var ae=E.suspendedLanes,xe=E.pingedLanes;F=(1<<31-aa(42|h)+1)-1,F&=B&~(ae&~xe),F=F&201326677?F&201326677|1:F?F|2:0}F!==0&&(x=!0,de(E,F))}else F=Sn,F=U(E,E===qn?F:0),(F&3)===0||O(E,F)||(x=!0,de(E,F));E=E.next}while(x);ng=!1}}function nt(){fi=Zc=!1;var h=0;ef!==0&&(E1()&&(h=ef),ef=0);for(var p=vr(),x=null,E=Oh;E!==null;){var B=E.next,F=ee(E,p);F===0?(E.next=null,x===null?Oh=B:x.next=B,B===null&&(_l=x)):(x=E,(h!==0||(F&3)!==0)&&(fi=!0)),E=B}ye(h)}function ee(h,p){for(var x=h.suspendedLanes,E=h.pingedLanes,B=h.expirationTimes,F=h.pendingLanes&-62914561;0<F;){var ae=31-aa(F),xe=1<<ae,Fe=B[ae];Fe===-1?((xe&x)===0||(xe&E)!==0)&&(B[ae]=I(xe,p)):Fe<=p&&(h.expiredLanes|=xe),F&=~xe}if(p=qn,x=Sn,x=U(h,h===p?x:0),E=h.callbackNode,x===0||h===p&&ei===2||h.cancelPendingCommit!==null)return E!==null&&E!==null&&Ep(E),h.callbackNode=null,h.callbackPriority=0;if((x&3)===0||O(h,x)){if(p=x&-x,p===h.callbackPriority)return p;switch(E!==null&&Ep(E),ce(x)){case 2:case 8:x=ry;break;case 32:x=Rp;break;case 268435456:x=sA;break;default:x=Rp}return E=V.bind(null,h),x=Uh(x,E),h.callbackPriority=p,h.callbackNode=x,p}return E!==null&&E!==null&&Ep(E),h.callbackPriority=2,h.callbackNode=null,2}function V(h,p){var x=h.callbackNode;if(Ir()&&h.callbackNode!==x)return null;var E=Sn;return E=U(h,h===qn?E:0),E===0?null:(Jl(h,E,p),ee(h,vr()),h.callbackNode!=null&&h.callbackNode===x?V.bind(null,h):null)}function de(h,p){if(Ir())return null;Jl(h,p,!0)}function Be(h){H0?vl(function(){(On&6)!==0?Uh(wp,h):h()}):Uh(wp,h)}function be(){return ef===0&&(ef=P()),ef}function Me(h,p){if(tf===null){var x=tf=[];Qc=0,Ya=be(),$c={status:"pending",value:void 0,then:function(E){x.push(E)}}}return Qc++,p.then($e,$e),p}function $e(){if(--Qc===0&&tf!==null){$c!==null&&($c.status="fulfilled");var h=tf;tf=null,Ya=0,$c=null;for(var p=0;p<h.length;p++)(0,h[p])()}}function at(h,p){var x=[],E={status:"pending",value:null,reason:null,then:function(B){x.push(B)}};return h.then(function(){E.status="fulfilled",E.value=p;for(var B=0;B<x.length;B++)(0,x[B])(p)},function(B){for(E.status="rejected",E.reason=B,B=0;B<x.length;B++)(0,x[B])(void 0)}),E}function ut(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Y(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function Oe(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Ke(h,p,x){var E=h.updateQueue;if(E===null)return null;if(E=E.shared,(On&2)!==0){var B=E.pending;return B===null?p.next=p:(p.next=B.next,B.next=p),E.pending=p,p=Pe(h),me(h,null,x),p}return Le(h,E,p,x),Pe(h)}function it(h,p,x){if(p=p.updateQueue,p!==null&&(p=p.shared,(x&4194176)!==0)){var E=p.lanes;E&=h.pendingLanes,x|=E,p.lanes=x,$(h,x)}}function fe(h,p){var x=h.updateQueue,E=h.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var B=null,F=null;if(x=x.firstBaseUpdate,x!==null){do{var ae={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};F===null?B=F=ae:F=F.next=ae,x=x.next}while(x!==null);F===null?B=F=p:F=F.next=p}else B=F=p;x={baseState:E.baseState,firstBaseUpdate:B,lastBaseUpdate:F,shared:E.shared,callbacks:E.callbacks},h.updateQueue=x;return}h=x.lastBaseUpdate,h===null?x.firstBaseUpdate=p:h.next=p,x.lastBaseUpdate=p}function Ae(){if(eu){var h=$c;if(h!==null)throw h}}function st(h,p,x,E){eu=!1;var B=h.updateQueue;xl=!1;var F=B.firstBaseUpdate,ae=B.lastBaseUpdate,xe=B.shared.pending;if(xe!==null){B.shared.pending=null;var Fe=xe,lt=Fe.next;Fe.next=null,ae===null?F=lt:ae.next=lt,ae=Fe;var xt=h.alternate;xt!==null&&(xt=xt.updateQueue,xe=xt.lastBaseUpdate,xe!==ae&&(xe===null?xt.firstBaseUpdate=lt:xe.next=lt,xt.lastBaseUpdate=Fe))}if(F!==null){var Tt=B.baseState;ae=0,xt=lt=Fe=null,xe=F;do{var Ct=xe.lane&-536870913,an=Ct!==xe.lane;if(an?(Sn&Ct)===Ct:(E&Ct)===Ct){Ct!==0&&Ct===Ya&&(eu=!0),xt!==null&&(xt=xt.next={lane:0,tag:xe.tag,payload:xe.payload,callback:null,next:null});e:{var er=h,vc=xe;Ct=p;var yc=x;switch(vc.tag){case 1:if(er=vc.payload,typeof er=="function"){Tt=er.call(yc,Tt,Ct);break e}Tt=er;break e;case 3:er.flags=er.flags&-65537|128;case 0:if(er=vc.payload,Ct=typeof er=="function"?er.call(yc,Tt,Ct):er,Ct==null)break e;Tt=up({},Tt,Ct);break e;case 2:xl=!0}}Ct=xe.callback,Ct!==null&&(h.flags|=64,an&&(h.flags|=8192),an=B.callbacks,an===null?B.callbacks=[Ct]:an.push(Ct))}else an={lane:Ct,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},xt===null?(lt=xt=an,Fe=Tt):xt=xt.next=an,ae|=Ct;if(xe=xe.next,xe===null){if(xe=B.shared.pending,xe===null)break;an=xe,xe=an.next,an.next=null,B.lastBaseUpdate=an,B.shared.pending=null}}while(!0);xt===null&&(Fe=Tt),B.baseState=Fe,B.firstBaseUpdate=lt,B.lastBaseUpdate=xt,F===null&&(B.shared.lanes=0),Qa|=ae,h.lanes=ae,h.memoizedState=Tt}}function he(h,p){if(typeof h!="function")throw Error(s(191,h));h.call(p)}function je(h,p){var x=h.callbacks;if(x!==null)for(h.callbacks=null,h=0;h<x.length;h++)he(x[h],p)}function He(h,p){if(Ea(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var x=Object.keys(h),E=Object.keys(p);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var B=x[E];if(!Ao.call(p,B)||!Ea(h[B],p[B]))return!1}return!0}function gt(h){return h=h.status,h==="fulfilled"||h==="rejected"}function et(){}function Ge(h,p,x){switch(x=h[x],x===void 0?h.push(p):x!==p&&(p.then(et,et),p=x),p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,h===nf?Error(s(483)):h;default:if(typeof p.status=="string")p.then(et,et);else{if(h=qn,h!==null&&100<h.shellSuspendCounter)throw Error(s(482));h=p,h.status="pending",h.then(function(E){if(p.status==="pending"){var B=p;B.status="fulfilled",B.value=E}},function(E){if(p.status==="pending"){var B=p;B.status="rejected",B.reason=E}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw h=p.reason,h===nf?Error(s(483)):h}throw cc=p,nf}}function pt(){if(cc===null)throw Error(s(459));var h=cc;return cc=null,h}function vt(h){var p=fc;return fc+=1,uc===null&&(uc=[]),Ge(uc,h,p)}function mt(h,p){p=p.props.ref,h.ref=p!==void 0?p:null}function At(h,p){throw p.$$typeof===ZS?Error(s(525)):(h=Object.prototype.toString.call(p),Error(s(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h)))}function Vt(h){var p=h._init;return p(h._payload)}function Pt(h){function p(We,Ce){if(h){var Ze=We.deletions;Ze===null?(We.deletions=[Ce],We.flags|=16):Ze.push(Ce)}}function x(We,Ce){if(!h)return null;for(;Ce!==null;)p(We,Ce),Ce=Ce.sibling;return null}function E(We){for(var Ce=new Map;We!==null;)We.key!==null?Ce.set(We.key,We):Ce.set(We.index,We),We=We.sibling;return Ce}function B(We,Ce){return We=dr(We,Ce),We.index=0,We.sibling=null,We}function F(We,Ce,Ze){return We.index=Ze,h?(Ze=We.alternate,Ze!==null?(Ze=Ze.index,Ze<Ce?(We.flags|=33554434,Ce):Ze):(We.flags|=33554434,Ce)):(We.flags|=1048576,Ce)}function ae(We){return h&&We.alternate===null&&(We.flags|=33554434),We}function xe(We,Ce,Ze,_t){return Ce===null||Ce.tag!==6?(Ce=lp(Ze,We.mode,_t),Ce.return=We,Ce):(Ce=B(Ce,Ze),Ce.return=We,Ce)}function Fe(We,Ce,Ze,_t){var Ot=Ze.type;return Ot===tc?xt(We,Ce,Ze.props.children,_t,Ze.key):Ce!==null&&(Ce.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===mr&&Vt(Ot)===Ce.type)?(Ce=B(Ce,Ze.props),mt(Ce,Ze),Ce.return=We,Ce):(Ce=vo(Ze.type,Ze.key,Ze.props,null,We.mode,_t),mt(Ce,Ze),Ce.return=We,Ce)}function lt(We,Ce,Ze,_t){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Ze.containerInfo||Ce.stateNode.implementation!==Ze.implementation?(Ce=L0(Ze,We.mode,_t),Ce.return=We,Ce):(Ce=B(Ce,Ze.children||[]),Ce.return=We,Ce)}function xt(We,Ce,Ze,_t,Ot){return Ce===null||Ce.tag!==7?(Ce=Li(Ze,We.mode,_t,Ot),Ce.return=We,Ce):(Ce=B(Ce,Ze),Ce.return=We,Ce)}function Tt(We,Ce,Ze){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Ce=lp(""+Ce,We.mode,Ze),Ce.return=We,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case Sh:return Ze=vo(Ce.type,Ce.key,Ce.props,null,We.mode,Ze),mt(Ze,Ce),Ze.return=We,Ze;case pr:return Ce=L0(Ce,We.mode,Ze),Ce.return=We,Ce;case mr:var _t=Ce._init;return Ce=_t(Ce._payload),Tt(We,Ce,Ze)}if(Xu(Ce)||a(Ce))return Ce=Li(Ce,We.mode,Ze,null),Ce.return=We,Ce;if(typeof Ce.then=="function")return Tt(We,vt(Ce),Ze);if(Ce.$$typeof===Fr)return Tt(We,rh(We,Ce),Ze);At(We,Ce)}return null}function Ct(We,Ce,Ze,_t){var Ot=Ce!==null?Ce.key:null;if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ot!==null?null:xe(We,Ce,""+Ze,_t);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case Sh:return Ze.key===Ot?Fe(We,Ce,Ze,_t):null;case pr:return Ze.key===Ot?lt(We,Ce,Ze,_t):null;case mr:return Ot=Ze._init,Ze=Ot(Ze._payload),Ct(We,Ce,Ze,_t)}if(Xu(Ze)||a(Ze))return Ot!==null?null:xt(We,Ce,Ze,_t,null);if(typeof Ze.then=="function")return Ct(We,Ce,vt(Ze),_t);if(Ze.$$typeof===Fr)return Ct(We,Ce,rh(We,Ze),_t);At(We,Ze)}return null}function an(We,Ce,Ze,_t,Ot){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return We=We.get(Ze)||null,xe(Ce,We,""+_t,Ot);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case Sh:return We=We.get(_t.key===null?Ze:_t.key)||null,Fe(Ce,We,_t,Ot);case pr:return We=We.get(_t.key===null?Ze:_t.key)||null,lt(Ce,We,_t,Ot);case mr:var _i=_t._init;return _t=_i(_t._payload),an(We,Ce,Ze,_t,Ot)}if(Xu(_t)||a(_t))return We=We.get(Ze)||null,xt(Ce,We,_t,Ot,null);if(typeof _t.then=="function")return an(We,Ce,Ze,vt(_t),Ot);if(_t.$$typeof===Fr)return an(We,Ce,Ze,rh(Ce,_t),Ot);At(Ce,_t)}return null}function er(We,Ce,Ze,_t){for(var Ot=null,_i=null,qt=Ce,kn=Ce=0,qi=null;qt!==null&&kn<Ze.length;kn++){qt.index>kn?(qi=qt,qt=null):qi=qt.sibling;var xn=Ct(We,qt,Ze[kn],_t);if(xn===null){qt===null&&(qt=qi);break}h&&qt&&xn.alternate===null&&p(We,qt),Ce=F(xn,Ce,kn),_i===null?Ot=xn:_i.sibling=xn,_i=xn,qt=qi}if(kn===Ze.length)return x(We,qt),Dn&&H(We,kn),Ot;if(qt===null){for(;kn<Ze.length;kn++)qt=Tt(We,Ze[kn],_t),qt!==null&&(Ce=F(qt,Ce,kn),_i===null?Ot=qt:_i.sibling=qt,_i=qt);return Dn&&H(We,kn),Ot}for(qt=E(qt);kn<Ze.length;kn++)qi=an(qt,We,kn,Ze[kn],_t),qi!==null&&(h&&qi.alternate!==null&&qt.delete(qi.key===null?kn:qi.key),Ce=F(qi,Ce,kn),_i===null?Ot=qi:_i.sibling=qi,_i=qi);return h&&qt.forEach(function(Do){return p(We,Do)}),Dn&&H(We,kn),Ot}function vc(We,Ce,Ze,_t){if(Ze==null)throw Error(s(151));for(var Ot=null,_i=null,qt=Ce,kn=Ce=0,qi=null,xn=Ze.next();qt!==null&&!xn.done;kn++,xn=Ze.next()){qt.index>kn?(qi=qt,qt=null):qi=qt.sibling;var Do=Ct(We,qt,xn.value,_t);if(Do===null){qt===null&&(qt=qi);break}h&&qt&&Do.alternate===null&&p(We,qt),Ce=F(Do,Ce,kn),_i===null?Ot=Do:_i.sibling=Do,_i=Do,qt=qi}if(xn.done)return x(We,qt),Dn&&H(We,kn),Ot;if(qt===null){for(;!xn.done;kn++,xn=Ze.next())xn=Tt(We,xn.value,_t),xn!==null&&(Ce=F(xn,Ce,kn),_i===null?Ot=xn:_i.sibling=xn,_i=xn);return Dn&&H(We,kn),Ot}for(qt=E(qt);!xn.done;kn++,xn=Ze.next())xn=an(qt,We,kn,xn.value,_t),xn!==null&&(h&&xn.alternate!==null&&qt.delete(xn.key===null?kn:xn.key),Ce=F(xn,Ce,kn),_i===null?Ot=xn:_i.sibling=xn,_i=xn);return h&&qt.forEach(function(Fp){return p(We,Fp)}),Dn&&H(We,kn),Ot}function yc(We,Ce,Ze,_t){if(typeof Ze=="object"&&Ze!==null&&Ze.type===tc&&Ze.key===null&&(Ze=Ze.props.children),typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case Sh:e:{for(var Ot=Ze.key;Ce!==null;){if(Ce.key===Ot){if(Ot=Ze.type,Ot===tc){if(Ce.tag===7){x(We,Ce.sibling),_t=B(Ce,Ze.props.children),_t.return=We,We=_t;break e}}else if(Ce.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===mr&&Vt(Ot)===Ce.type){x(We,Ce.sibling),_t=B(Ce,Ze.props),mt(_t,Ze),_t.return=We,We=_t;break e}x(We,Ce);break}else p(We,Ce);Ce=Ce.sibling}Ze.type===tc?(_t=Li(Ze.props.children,We.mode,_t,Ze.key),_t.return=We,We=_t):(_t=vo(Ze.type,Ze.key,Ze.props,null,We.mode,_t),mt(_t,Ze),_t.return=We,We=_t)}return ae(We);case pr:e:{for(Ot=Ze.key;Ce!==null;){if(Ce.key===Ot)if(Ce.tag===4&&Ce.stateNode.containerInfo===Ze.containerInfo&&Ce.stateNode.implementation===Ze.implementation){x(We,Ce.sibling),_t=B(Ce,Ze.children||[]),_t.return=We,We=_t;break e}else{x(We,Ce);break}else p(We,Ce);Ce=Ce.sibling}_t=L0(Ze,We.mode,_t),_t.return=We,We=_t}return ae(We);case mr:return Ot=Ze._init,Ze=Ot(Ze._payload),yc(We,Ce,Ze,_t)}if(Xu(Ze))return er(We,Ce,Ze,_t);if(a(Ze)){if(Ot=a(Ze),typeof Ot!="function")throw Error(s(150));return Ze=Ot.call(Ze),vc(We,Ce,Ze,_t)}if(typeof Ze.then=="function")return yc(We,Ce,vt(Ze),_t);if(Ze.$$typeof===Fr)return yc(We,Ce,rh(We,Ze),_t);At(We,Ze)}return typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint"?(Ze=""+Ze,Ce!==null&&Ce.tag===6?(x(We,Ce.sibling),_t=B(Ce,Ze),_t.return=We,We=_t):(x(We,Ce),_t=lp(Ze,We.mode,_t),_t.return=We,We=_t),ae(We)):x(We,Ce)}return function(We,Ce,Ze,_t){try{fc=0;var Ot=yc(We,Ce,Ze,_t);return uc=null,Ot}catch(qt){if(qt===nf)throw qt;var _i=t(29,qt,null,We.mode);return _i.lanes=_t,_i.return=We,_i}finally{}}}function ot(h,p){h=qs,C(sf,h),C(hi,p),qs=h|p.baseLanes}function tn(){C(sf,qs),C(hi,hi.current)}function gn(){qs=sf.current,b(hi),b(sf)}function zn(h){var p=h.alternate;C(hs,hs.current&1),C(Wa,h),ai===null&&(p===null||hi.current!==null||p.memoizedState!==null)&&(ai=h)}function en(h){if(h.tag===22){if(C(hs,hs.current),C(Wa,h),ai===null){var p=h.alternate;p!==null&&p.memoizedState!==null&&(ai=h)}}else ci()}function ci(){C(hs,hs.current),C(Wa,Wa.current)}function jn(h){b(Wa),ai===h&&(ai=null),b(hs)}function Bn(h){for(var p=h;p!==null;){if(p.tag===13){var x=p.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||_p(x)||xp(x)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function Kt(){throw Error(s(321))}function ui(h,p){if(p===null)return!1;for(var x=0;x<p.length&&x<h.length;x++)if(!Ea(h[x],p[x]))return!1;return!0}function bn(h,p,x,E,B,F){return Sl=F,dn=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Wt.H=h===null||h.memoizedState===null?pc:ra,dc=!1,F=x(E,B),dc=!1,tu&&(F=cs(p,x,E,B)),Ti(h),F}function Ti(h){Wt.H=Oi;var p=zt!==null&&zt.next!==null;if(Sl=0,Ln=zt=dn=null,xr=!1,nu=0,bs=null,p)throw Error(s(300));h===null||ri||(h=h.dependencies,h!==null&&ah(h)&&(ri=!0))}function cs(h,p,x,E){dn=h;var B=0;do{if(tu&&(bs=null),nu=0,tu=!1,25<=B)throw Error(s(301));if(B+=1,Ln=zt=null,h.updateQueue!=null){var F=h.updateQueue;F.lastEffect=null,F.events=null,F.stores=null,F.memoCache!=null&&(F.memoCache.index=0)}Wt.H=qa,F=p(x,E)}while(tu);return F}function Gn(){var h=Wt.H,p=h.useState()[0];return p=typeof p.then=="function"?Ye(p):p,h=h.useState()[0],(zt!==null?zt.memoizedState:null)!==h&&(dn.flags|=1024),p}function ni(){var h=Dp!==0;return Dp=0,h}function gi(h,p,x){p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~x}function _n(h){if(xr){for(h=h.memoizedState;h!==null;){var p=h.queue;p!==null&&(p.pending=null),h=h.next}xr=!1}Sl=0,Ln=zt=dn=null,tu=!1,nu=Dp=0,bs=null}function te(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?dn.memoizedState=Ln=h:Ln=Ln.next=h,Ln}function Ee(){if(zt===null){var h=dn.alternate;h=h!==null?h.memoizedState:null}else h=zt.next;var p=Ln===null?dn.memoizedState:Ln.next;if(p!==null)Ln=p,zt=h;else{if(h===null)throw dn.alternate===null?Error(s(467)):Error(s(310));zt=h,h={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Ln===null?dn.memoizedState=Ln=h:Ln=Ln.next=h}return Ln}function Ye(h){var p=nu;return nu+=1,bs===null&&(bs=[]),h=Ge(bs,h,p),p=dn,(Ln===null?p.memoizedState:Ln.next)===null&&(p=p.alternate,Wt.H=p===null||p.memoizedState===null?pc:ra),h}function Te(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return Ye(h);if(h.$$typeof===Fr)return Us(h)}throw Error(s(438,String(h)))}function De(h){var p=null,x=dn.updateQueue;if(x!==null&&(p=x.memoCache),p==null){var E=dn.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(p={data:E.data.map(function(B){return B.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),x===null&&(x=Bp(),dn.updateQueue=x),x.memoCache=p,x=p.data[p.index],x===void 0)for(x=p.data[p.index]=Array(h),E=0;E<h;E++)x[E]=S1;return p.index++,x}function ht(h,p){return typeof p=="function"?p(h):p}function yt(h){var p=Ee();return Mt(p,zt,h)}function Mt(h,p,x){var E=h.queue;if(E===null)throw Error(s(311));E.lastRenderedReducer=x;var B=h.baseQueue,F=E.pending;if(F!==null){if(B!==null){var ae=B.next;B.next=F.next,F.next=ae}p.baseQueue=B=F,E.pending=null}if(F=h.baseState,B===null)h.memoizedState=F;else{p=B.next;var xe=ae=null,Fe=null,lt=p,xt=!1;do{var Tt=lt.lane&-536870913;if(Tt!==lt.lane?(Sn&Tt)===Tt:(Sl&Tt)===Tt){var Ct=lt.revertLane;if(Ct===0)Fe!==null&&(Fe=Fe.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),Tt===Ya&&(xt=!0);else if((Sl&Ct)===Ct){lt=lt.next,Ct===Ya&&(xt=!0);continue}else Tt={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Fe===null?(xe=Fe=Tt,ae=F):Fe=Fe.next=Tt,dn.lanes|=Ct,Qa|=Ct;Tt=lt.action,dc&&x(F,Tt),F=lt.hasEagerState?lt.eagerState:x(F,Tt)}else Ct={lane:Tt,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Fe===null?(xe=Fe=Ct,ae=F):Fe=Fe.next=Ct,dn.lanes|=Tt,Qa|=Tt;lt=lt.next}while(lt!==null&&lt!==p);if(Fe===null?ae=F:Fe.next=xe,!Ea(F,h.memoizedState)&&(ri=!0,xt&&(x=$c,x!==null)))throw x;h.memoizedState=F,h.baseState=ae,h.baseQueue=Fe,E.lastRenderedState=F}return B===null&&(E.lanes=0),[h.memoizedState,E.dispatch]}function bt(h){var p=Ee(),x=p.queue;if(x===null)throw Error(s(311));x.lastRenderedReducer=h;var E=x.dispatch,B=x.pending,F=p.memoizedState;if(B!==null){x.pending=null;var ae=B=B.next;do F=h(F,ae.action),ae=ae.next;while(ae!==B);Ea(F,p.memoizedState)||(ri=!0),p.memoizedState=F,p.baseQueue===null&&(p.baseState=F),x.lastRenderedState=F}return[F,E]}function Bt(h,p,x){var E=dn,B=Ee(),F=Dn;if(F){if(x===void 0)throw Error(s(407));x=x()}else x=p();var ae=!Ea((zt||B).memoizedState,x);if(ae&&(B.memoizedState=x,ri=!0),B=B.queue,Wo(Yt.bind(null,E,B,h),[h]),B.getSnapshot!==p||ae||Ln!==null&&Ln.memoizedState.tag&1){if(E.flags|=2048,Bi(9,wt.bind(null,E,B,x,p),{destroy:void 0},null),qn===null)throw Error(s(349));F||(Sl&60)!==0||Rt(E,p,x)}return x}function Rt(h,p,x){h.flags|=16384,h={getSnapshot:p,value:x},p=dn.updateQueue,p===null?(p=Bp(),dn.updateQueue=p,p.stores=[h]):(x=p.stores,x===null?p.stores=[h]:x.push(h))}function wt(h,p,x,E){p.value=x,p.getSnapshot=E,fn(p)&&Rn(h)}function Yt(h,p,x){return x(function(){fn(p)&&Rn(h)})}function fn(h){var p=h.getSnapshot;h=h.value;try{var x=p();return!Ea(h,x)}catch{return!0}}function Rn(h){var p=Re(h,2);p!==null&&Ss(p,h,2)}function Xt(h){var p=te();if(typeof h=="function"){var x=h;if(h=x(),dc){q(!0);try{x()}finally{q(!1)}}}return p.memoizedState=p.baseState=h,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ht,lastRenderedState:h},p}function nn(h,p,x,E){return h.baseState=x,Mt(h,zt,typeof E=="function"?E:ht)}function Ut(h,p,x,E,B){if(Vl(h))throw Error(s(485));if(h=p.action,h!==null){var F={payload:B,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ae){F.listeners.push(ae)}};Wt.T!==null?x(!0):F.isTransition=!1,E(F),x=p.pending,x===null?(F.next=p.pending=F,Un(p,F)):(F.next=x.next,p.pending=x.next=F)}}function Un(h,p){var x=p.action,E=p.payload,B=h.state;if(p.isTransition){var F=Wt.T,ae={};Wt.T=ae;try{var xe=x(B,E),Fe=Wt.S;Fe!==null&&Fe(ae,xe),Jt(h,p,xe)}catch(lt){_s(h,p,lt)}finally{Wt.T=F}}else try{F=x(B,E),Jt(h,p,F)}catch(lt){_s(h,p,lt)}}function Jt(h,p,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(E){ii(h,p,E)},function(E){return _s(h,p,E)}):ii(h,p,x)}function ii(h,p,x){p.status="fulfilled",p.value=x,Tn(p),h.state=x,p=h.pending,p!==null&&(x=p.next,x===p?h.pending=null:(x=x.next,p.next=x,Un(h,x)))}function _s(h,p,x){var E=h.pending;if(h.pending=null,E!==null){E=E.next;do p.status="rejected",p.reason=x,Tn(p),p=p.next;while(p!==E)}h.action=null}function Tn(h){h=h.listeners;for(var p=0;p<h.length;p++)(0,h[p])()}function Ei(h,p){return p}function Hn(h,p){if(Dn){var x=qn.formState;if(x!==null){e:{var E=dn;if(Dn){if(Fs){var B=J0(Fs,Ms);if(B){Fs=Z0(B),E=k1(B);break e}}ve(E)}E=!1}E&&(p=x[0])}}x=te(),x.memoizedState=x.baseState=p,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:p},x.queue=E,x=Du.bind(null,dn,E),E.dispatch=x,E=Xt(!1);var F=$o.bind(null,dn,!1,E.queue);return E=te(),B={state:p,dispatch:null,action:h,pending:null},E.queue=B,x=Ut.bind(null,dn,B,F,x),B.dispatch=x,E.memoizedState=h,[p,x,!1]}function Mi(h){var p=Ee();return $n(p,zt,h)}function $n(h,p,x){p=Mt(h,p,Ei)[0],h=yt(ht)[0],p=typeof p=="object"&&p!==null&&typeof p.then=="function"?Ye(p):p;var E=Ee(),B=E.queue,F=B.dispatch;return x!==E.memoizedState&&(dn.flags|=2048,Bi(9,Ci.bind(null,B,x),{destroy:void 0},null)),[p,F,h]}function Ci(h,p){h.action=p}function vi(h){var p=Ee(),x=zt;if(x!==null)return $n(p,x,h);Ee(),p=p.memoizedState,x=Ee();var E=x.queue.dispatch;return x.memoizedState=h,[p,E,!1]}function Bi(h,p,x,E){return h={tag:h,create:p,inst:x,deps:E,next:null},p=dn.updateQueue,p===null&&(p=Bp(),dn.updateQueue=p),x=p.lastEffect,x===null?p.lastEffect=h.next=h:(E=x.next,x.next=h,h.next=E,p.lastEffect=h),h}function ks(){return Ee().memoizedState}function fo(h,p,x,E){var B=te();dn.flags|=h,B.memoizedState=Bi(1|p,x,{destroy:void 0},E===void 0?null:E)}function Gl(h,p,x,E){var B=Ee();E=E===void 0?null:E;var F=B.memoizedState.inst;zt!==null&&E!==null&&ui(E,zt.memoizedState.deps)?B.memoizedState=Bi(p,x,F,E):(dn.flags|=h,B.memoizedState=Bi(1|p,x,F,E))}function Hl(h,p){fo(8390656,8,h,p)}function Wo(h,p){Gl(2048,8,h,p)}function $f(h,p){return Gl(4,2,h,p)}function ho(h,p){return Gl(4,4,h,p)}function Or(h,p){if(typeof p=="function"){h=h();var x=p(h);return function(){typeof x=="function"?x():p(null)}}if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function Nr(h,p,x){x=x!=null?x.concat([h]):null,Gl(4,4,Or.bind(null,p,h),x)}function ga(){}function po(h,p){var x=Ee();p=p===void 0?null:p;var E=x.memoizedState;return p!==null&&ui(p,E[1])?E[0]:(x.memoizedState=[h,p],h)}function qo(h,p){var x=Ee();p=p===void 0?null:p;var E=x.memoizedState;if(p!==null&&ui(p,E[1]))return E[0];if(E=h(),dc){q(!0);try{h()}finally{q(!1)}}return x.memoizedState=[E,p],E}function Ko(h,p,x){return x===void 0||(Sl&1073741824)!==0?h.memoizedState=p:(h.memoizedState=x,h=C0(),dn.lanes|=h,Qa|=h,x)}function Nc(h,p,x,E){return Ea(x,p)?x:hi.current!==null?(h=Ko(h,x,E),Ea(h,p)||(ri=!0),h):(Sl&42)===0?(ri=!0,h.memoizedState=x):(h=C0(),dn.lanes|=h,Qa|=h,p)}function Jo(h,p,x,E,B){var F=gl();Ys(F!==0&&8>F?F:8);var ae=Wt.T,xe={};Wt.T=xe,$o(h,!1,p,x);try{var Fe=B(),lt=Wt.S;if(lt!==null&&lt(xe,Fe),Fe!==null&&typeof Fe=="object"&&typeof Fe.then=="function"){var xt=at(Fe,E);lr(h,p,xt,Xi(h))}else lr(h,p,E,Xi(h))}catch(Tt){lr(h,p,{then:function(){},status:"rejected",reason:Tt},Xi())}finally{Ys(F),Wt.T=ae}}function $s(h){var p=h.memoizedState;if(p!==null)return p;p={memoizedState:ic,baseState:ic,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ht,lastRenderedState:ic},next:null};var x={};return p.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ht,lastRenderedState:x},next:null},h.memoizedState=p,h=h.alternate,h!==null&&(h.memoizedState=p),p}function Zo(){return Us(zr)}function Qo(){return Ee().memoizedState}function Vi(){return Ee().memoizedState}function Pc(h){for(var p=h.return;p!==null;){switch(p.tag){case 24:case 3:var x=Xi();h=Oe(x);var E=Ke(p,h,x);E!==null&&(Ss(E,p,x),it(E,p,x)),p={cache:jl()},h.payload=p;return}p=p.return}}function Ic(h,p,x){var E=Xi();x={lane:E,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},Vl(h)?ki(p,x):(x=Ue(h,p,x,E),x!==null&&(Ss(x,h,E),va(x,p,E)))}function Du(h,p,x){var E=Xi();lr(h,p,x,E)}function lr(h,p,x,E){var B={lane:E,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(Vl(h))ki(p,B);else{var F=h.alternate;if(h.lanes===0&&(F===null||F.lanes===0)&&(F=p.lastRenderedReducer,F!==null))try{var ae=p.lastRenderedState,xe=F(ae,x);if(B.hasEagerState=!0,B.eagerState=xe,Ea(xe,ae))return Le(h,p,B,0),qn===null&&Z(),!1}catch{}finally{}if(x=Ue(h,p,B,E),x!==null)return Ss(x,h,E),va(x,p,E),!0}return!1}function $o(h,p,x,E){if(E={lane:2,revertLane:be(),action:E,hasEagerState:!1,eagerState:null,next:null},Vl(h)){if(p)throw Error(s(479))}else p=Ue(h,x,E,2),p!==null&&Ss(p,h,2)}function Vl(h){var p=h.alternate;return h===dn||p!==null&&p===dn}function ki(h,p){tu=xr=!0;var x=h.pending;x===null?p.next=p:(p.next=x.next,x.next=p),h.pending=p}function va(h,p,x){if((x&4194176)!==0){var E=p.lanes;E&=h.pendingLanes,x|=E,p.lanes=x,$(h,x)}}function ea(h,p,x,E){p=h.memoizedState,x=x(E,p),x=x==null?p:up({},p,x),h.memoizedState=x,h.lanes===0&&(h.updateQueue.baseState=x)}function el(h,p,x,E,B,F,ae){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(E,F,ae):p.prototype&&p.prototype.isPureReactComponent?!He(x,E)||!He(B,F):!0}function Bu(h,p,x,E){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(x,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(x,E),p.state!==h&&bo.enqueueReplaceState(p,p.state,null)}function Fa(h,p){var x=p;if("ref"in p){x={};for(var E in p)E!=="ref"&&(x[E]=p[E])}if(h=h.defaultProps){x===p&&(x=up({},x));for(var B in h)x[B]===void 0&&(x[B]=h[B])}return x}function cr(h,p){try{var x=h.onUncaughtError;x(p.value,{componentStack:p.stack})}catch(E){setTimeout(function(){throw E})}}function tl(h,p,x){try{var E=h.onCaughtError;E(x.value,{componentStack:x.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(B){setTimeout(function(){throw B})}}function ur(h,p,x){return x=Oe(x),x.tag=3,x.payload={element:null},x.callback=function(){cr(h,p)},x}function Fc(h){return h=Oe(h),h.tag=3,h}function Xs(h,p,x,E){var B=x.type.getDerivedStateFromError;if(typeof B=="function"){var F=E.value;h.payload=function(){return B(F)},h.callback=function(){tl(p,x,E)}}var ae=x.stateNode;ae!==null&&typeof ae.componentDidCatch=="function"&&(h.callback=function(){tl(p,x,E),typeof B!="function"&&(mc===null?mc=new Set([this]):mc.add(this));var xe=E.stack;this.componentDidCatch(E.value,{componentStack:xe!==null?xe:""})})}function c0(h,p,x,E,B){if(x.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(p=x.alternate,p!==null&&sh(p,x,B,!0),x=Wa.current,x!==null){switch(x.tag){case 13:return ai===null?ul():x.alternate===null&&oi===0&&(oi=3),x.flags&=-257,x.flags|=65536,x.lanes=B,E===Ph?x.flags|=16384:(p=x.updateQueue,p===null?x.updateQueue=new Set([E]):p.add(E),Hc(h,E,B)),!1;case 22:return x.flags|=65536,E===Ph?x.flags|=16384:(p=x.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([E])},x.updateQueue=p):(x=p.retryQueue,x===null?p.retryQueue=new Set([E]):x.add(E)),Hc(h,E,B)),!1}throw Error(s(435,x.tag))}return Hc(h,E,B),ul(),!1}if(Dn)return p=Wa.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=B,E!==Lh&&(h=Error(s(422),{cause:E}),rt(re(h,x)))):(E!==Lh&&(p=Error(s(423),{cause:E}),rt(re(p,x))),h=h.current.alternate,h.flags|=65536,B&=-B,h.lanes|=B,E=re(E,x),B=ur(h.stateNode,E,B),fe(h,B),oi!==4&&(oi=2)),!1;var F=Error(s(520),{cause:E});if(F=re(F,x),su===null?su=[F]:su.push(F),oi!==4&&(oi=2),p===null)return!0;E=re(E,x),x=p;do{switch(x.tag){case 3:return x.flags|=65536,h=B&-B,x.lanes|=h,h=ur(x.stateNode,E,h),fe(x,h),!1;case 1:if(p=x.type,F=x.stateNode,(x.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(mc===null||!mc.has(F))))return x.flags|=65536,B&=-B,x.lanes|=B,B=Fc(B),Xs(B,h,x,E),fe(x,B),!1}x=x.return}while(x!==null);return!1}function Ui(h,p,x,E){p.child=h===null?Mo(p,null,x,E):hc(p,h.child,x,E)}function nl(h,p,x,E,B){x=x.render;var F=p.ref;if("ref"in E){var ae={};for(var xe in E)xe!=="ref"&&(ae[xe]=E[xe])}else ae=E;return Xl(p),E=bn(h,p,x,ae,F,B),xe=ni(),h!==null&&!ri?(gi(h,p,B),il(h,p,B)):(Dn&&xe&&K(p),p.flags|=1,Ui(h,p,E,B),p.child)}function eh(h,p,x,E,B){if(h===null){var F=x.type;return typeof F=="function"&&!vh(F)&&F.defaultProps===void 0&&x.compare===null?(p.tag=15,p.type=F,Wd(h,p,F,E,B)):(h=vo(x.type,null,E,p,p.mode,B),h.ref=p.ref,h.return=p,p.child=h)}if(F=h.child,!p0(h,B)){var ae=F.memoizedProps;if(x=x.compare,x=x!==null?x:He,x(ae,E)&&h.ref===p.ref)return il(h,p,B)}return p.flags|=1,h=dr(F,E),h.ref=p.ref,h.return=p,p.child=h}function Wd(h,p,x,E,B){if(h!==null){var F=h.memoizedProps;if(He(F,E)&&h.ref===p.ref)if(ri=!1,p.pendingProps=E=F,p0(h,B))(h.flags&131072)!==0&&(ri=!0);else return p.lanes=h.lanes,il(h,p,B)}return za(h,p,x,E,B)}function Bs(h,p,x){var E=p.pendingProps,B=E.children,F=(p.stateNode._pendingVisibility&2)!==0,ae=h!==null?h.memoizedState:null;if(es(h,p),E.mode==="hidden"||F){if((p.flags&128)!==0){if(E=ae!==null?ae.baseLanes|x:x,h!==null){for(B=p.child=h.child,F=0;B!==null;)F=F|B.lanes|B.childLanes,B=B.sibling;p.childLanes=F&~E}else p.childLanes=0,p.child=null;return ya(h,p,E,x)}if((x&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},h!==null&&Kd(p,ae!==null?ae.cachePool:null),ae!==null?ot(p,ae):tn(),en(p);else return p.lanes=p.childLanes=536870912,ya(h,p,ae!==null?ae.baseLanes|x:x,x)}else ae!==null?(Kd(p,ae.cachePool),ot(p,ae),ci(),p.memoizedState=null):(h!==null&&Kd(p,null),tn(),ci());return Ui(h,p,B,x),p.child}function ya(h,p,x,E){var B=g0();return B=B===null?null:{parent:ia?di._currentValue:di._currentValue2,pool:B},p.memoizedState={baseLanes:x,cachePool:B},h!==null&&Kd(p,null),tn(),en(p),h!==null&&sh(h,p,E,!0),null}function es(h,p){var x=p.ref;if(x===null)h!==null&&h.ref!==null&&(p.flags|=2097664);else{if(typeof x!="function"&&typeof x!="object")throw Error(s(284));(h===null||h.ref!==x)&&(p.flags|=2097664)}}function za(h,p,x,E,B){return Xl(p),x=bn(h,p,x,E,void 0,B),E=ni(),h!==null&&!ri?(gi(h,p,B),il(h,p,B)):(Dn&&E&&K(p),p.flags|=1,Ui(h,p,x,B),p.child)}function th(h,p,x,E,B,F){return Xl(p),p.updateQueue=null,x=cs(p,E,x,B),Ti(h),E=ni(),h!==null&&!ri?(gi(h,p,F),il(h,p,F)):(Dn&&E&&K(p),p.flags|=1,Ui(h,p,x,F),p.child)}function o1(h,p,x,E,B){if(Xl(p),p.stateNode===null){var F=oc,ae=x.contextType;typeof ae=="object"&&ae!==null&&(F=Us(ae)),F=new x(E,F),p.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,F.updater=bo,p.stateNode=F,F._reactInternals=p,F=p.stateNode,F.props=E,F.state=p.memoizedState,F.refs={},ut(p),ae=x.contextType,F.context=typeof ae=="object"&&ae!==null?Us(ae):oc,F.state=p.memoizedState,ae=x.getDerivedStateFromProps,typeof ae=="function"&&(ea(p,x,ae,E),F.state=p.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(ae=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),ae!==F.state&&bo.enqueueReplaceState(F,F.state,null),st(p,E,F,B),Ae(),F.state=p.memoizedState),typeof F.componentDidMount=="function"&&(p.flags|=4194308),E=!0}else if(h===null){F=p.stateNode;var xe=p.memoizedProps,Fe=Fa(x,xe);F.props=Fe;var lt=F.context,xt=x.contextType;ae=oc,typeof xt=="object"&&xt!==null&&(ae=Us(xt));var Tt=x.getDerivedStateFromProps;xt=typeof Tt=="function"||typeof F.getSnapshotBeforeUpdate=="function",xe=p.pendingProps!==xe,xt||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(xe||lt!==ae)&&Bu(p,F,E,ae),xl=!1;var Ct=p.memoizedState;F.state=Ct,st(p,E,F,B),Ae(),lt=p.memoizedState,xe||Ct!==lt||xl?(typeof Tt=="function"&&(ea(p,x,Tt,E),lt=p.memoizedState),(Fe=xl||el(p,x,Fe,E,Ct,lt,ae))?(xt||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount()),typeof F.componentDidMount=="function"&&(p.flags|=4194308)):(typeof F.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=lt),F.props=E,F.state=lt,F.context=ae,E=Fe):(typeof F.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{F=p.stateNode,Y(h,p),ae=p.memoizedProps,xt=Fa(x,ae),F.props=xt,Tt=p.pendingProps,Ct=F.context,lt=x.contextType,Fe=oc,typeof lt=="object"&&lt!==null&&(Fe=Us(lt)),xe=x.getDerivedStateFromProps,(lt=typeof xe=="function"||typeof F.getSnapshotBeforeUpdate=="function")||typeof F.UNSAFE_componentWillReceiveProps!="function"&&typeof F.componentWillReceiveProps!="function"||(ae!==Tt||Ct!==Fe)&&Bu(p,F,E,Fe),xl=!1,Ct=p.memoizedState,F.state=Ct,st(p,E,F,B),Ae();var an=p.memoizedState;ae!==Tt||Ct!==an||xl||h!==null&&h.dependencies!==null&&ah(h.dependencies)?(typeof xe=="function"&&(ea(p,x,xe,E),an=p.memoizedState),(xt=xl||el(p,x,xt,E,Ct,an,Fe)||h!==null&&h.dependencies!==null&&ah(h.dependencies))?(lt||typeof F.UNSAFE_componentWillUpdate!="function"&&typeof F.componentWillUpdate!="function"||(typeof F.componentWillUpdate=="function"&&F.componentWillUpdate(E,an,Fe),typeof F.UNSAFE_componentWillUpdate=="function"&&F.UNSAFE_componentWillUpdate(E,an,Fe)),typeof F.componentDidUpdate=="function"&&(p.flags|=4),typeof F.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof F.componentDidUpdate!="function"||ae===h.memoizedProps&&Ct===h.memoizedState||(p.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ae===h.memoizedProps&&Ct===h.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=an),F.props=E,F.state=an,F.context=Fe,E=xt):(typeof F.componentDidUpdate!="function"||ae===h.memoizedProps&&Ct===h.memoizedState||(p.flags|=4),typeof F.getSnapshotBeforeUpdate!="function"||ae===h.memoizedProps&&Ct===h.memoizedState||(p.flags|=1024),E=!1)}return F=E,es(h,p),E=(p.flags&128)!==0,F||E?(F=p.stateNode,x=E&&typeof x.getDerivedStateFromError!="function"?null:F.render(),p.flags|=1,h!==null&&E?(p.child=hc(p,h.child,null,B),p.child=hc(p,null,x,B)):Ui(h,p,x,B),p.memoizedState=F.state,h=p.child):h=il(h,p,B),h}function l1(h,p,x,E){return Ie(),p.flags|=256,Ui(h,p,x,E),p.child}function u0(h){return{baseLanes:h,cachePool:v0()}}function nh(h,p,x){return h=h!==null?h.childLanes&~x:0,p&&(h|=$a),h}function c1(h,p,x){var E=p.pendingProps,B=!1,F=(p.flags&128)!==0,ae;if((ae=F)||(ae=h!==null&&h.memoizedState===null?!1:(hs.current&2)!==0),ae&&(B=!0,p.flags&=-129),ae=(p.flags&32)!==0,p.flags&=-33,h===null){if(Dn){if(B?zn(p):ci(),Dn){var xe=Fs,Fe;(Fe=xe)&&(xe=Y1(xe,Ms),xe!==null?(p.memoizedState={dehydrated:xe,treeContext:lc!==null?{id:Hr,overflow:Vr}:null,retryLane:536870912},Fe=t(18,null,null,0),Fe.stateNode=xe,Fe.return=p,p.child=Fe,Is=p,Fs=null,Fe=!0):Fe=!1),Fe||ve(p)}if(xe=p.memoizedState,xe!==null&&(xe=xe.dehydrated,xe!==null))return xp(xe)?p.lanes=16:p.lanes=536870912,null;jn(p)}return xe=E.children,E=E.fallback,B?(ci(),B=p.mode,xe=h0({mode:"hidden",children:xe},B),E=Li(E,B,x,null),xe.return=p,E.return=p,xe.sibling=E,p.child=xe,B=p.child,B.memoizedState=u0(x),B.childLanes=nh(h,ae,x),p.memoizedState=Op,E):(zn(p),f0(p,xe))}if(Fe=h.memoizedState,Fe!==null&&(xe=Fe.dehydrated,xe!==null)){if(F)p.flags&256?(zn(p),p.flags&=-257,p=qd(h,p,x)):p.memoizedState!==null?(ci(),p.child=h.child,p.flags|=128,p=null):(ci(),B=E.fallback,xe=p.mode,E=h0({mode:"visible",children:E.children},xe),B=Li(B,xe,x,null),B.flags|=2,E.return=p,B.return=p,E.sibling=B,p.child=E,hc(p,h.child,null,x),E=p.child,E.memoizedState=u0(x),E.childLanes=nh(h,ae,x),p.memoizedState=Op,p=B);else if(zn(p),xp(xe))ae=H1(xe).digest,E=Error(s(419)),E.stack="",E.digest=ae,rt({value:E,source:null,stack:null}),p=qd(h,p,x);else if(ri||sh(h,p,x,!1),ae=(x&h.childLanes)!==0,ri||ae){if(ae=qn,ae!==null){if(E=x&-x,(E&42)!==0)E=1;else switch(E){case 2:E=1;break;case 8:E=4;break;case 32:E=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:E=64;break;case 268435456:E=134217728;break;default:E=0}if(E=(E&(ae.suspendedLanes|x))!==0?0:E,E!==0&&E!==Fe.retryLane)throw Fe.retryLane=E,Re(h,E),Ss(ae,h,E),Lp}_p(xe)||ul(),p=qd(h,p,x)}else _p(xe)?(p.flags|=128,p.child=h.child,p=fl.bind(null,h),V1(xe,p),p=null):(h=Fe.treeContext,Ps&&(Fs=j1(xe),Is=p,Dn=!0,yr=null,Ms=!1,h!==null&&(Xa[ja++]=Hr,Xa[ja++]=Vr,Xa[ja++]=lc,Hr=h.id,Vr=h.overflow,lc=p)),p=f0(p,E.children),p.flags|=4096);return p}return B?(ci(),B=E.fallback,xe=p.mode,Fe=h.child,F=Fe.sibling,E=dr(Fe,{mode:"hidden",children:E.children}),E.subtreeFlags=Fe.subtreeFlags&31457280,F!==null?B=dr(F,B):(B=Li(B,xe,x,null),B.flags|=2),B.return=p,E.return=p,E.sibling=B,p.child=E,E=B,B=p.child,xe=h.child.memoizedState,xe===null?xe=u0(x):(Fe=xe.cachePool,Fe!==null?(F=ia?di._currentValue:di._currentValue2,Fe=Fe.parent!==F?{parent:F,pool:F}:Fe):Fe=v0(),xe={baseLanes:xe.baseLanes|x,cachePool:Fe}),B.memoizedState=xe,B.childLanes=nh(h,ae,x),p.memoizedState=Op,E):(zn(p),x=h.child,h=x.sibling,x=dr(x,{mode:"visible",children:E.children}),x.return=p,x.sibling=null,h!==null&&(ae=p.deletions,ae===null?(p.deletions=[h],p.flags|=16):ae.push(h)),p.child=x,p.memoizedState=null,x)}function f0(h,p){return p=h0({mode:"visible",children:p},h.mode),p.return=h,h.child=p}function h0(h,p){return _h(h,p,0,null)}function qd(h,p,x){return hc(p,h.child,null,x),h=f0(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function u1(h,p,x){h.lanes|=p;var E=h.alternate;E!==null&&(E.lanes|=p),ih(h.return,p,x)}function d0(h,p,x,E,B){var F=h.memoizedState;F===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:B}:(F.isBackwards=p,F.rendering=null,F.renderingStartTime=0,F.last=E,F.tail=x,F.tailMode=B)}function f1(h,p,x){var E=p.pendingProps,B=E.revealOrder,F=E.tail;if(Ui(h,p,E.children,x),E=hs.current,(E&2)!==0)E=E&1|2,p.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&u1(h,x,p);else if(h.tag===19)u1(h,x,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}E&=1}switch(C(hs,E),B){case"forwards":for(x=p.child,B=null;x!==null;)h=x.alternate,h!==null&&Bn(h)===null&&(B=x),x=x.sibling;x=B,x===null?(B=p.child,p.child=null):(B=x.sibling,x.sibling=null),d0(p,!1,B,x,F);break;case"backwards":for(x=null,B=p.child,p.child=null;B!==null;){if(h=B.alternate,h!==null&&Bn(h)===null){p.child=B;break}h=B.sibling,B.sibling=x,x=B,B=h}d0(p,!0,x,null,F);break;case"together":d0(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function il(h,p,x){if(h!==null&&(p.dependencies=h.dependencies),Qa|=p.lanes,(x&p.childLanes)===0)if(h!==null){if(sh(h,p,x,!1),(x&p.childLanes)===0)return null}else return null;if(h!==null&&p.child!==h.child)throw Error(s(153));if(p.child!==null){for(h=p.child,x=dr(h,h.pendingProps),p.child=x,x.return=p;h.sibling!==null;)h=h.sibling,x=x.sibling=dr(h,h.pendingProps),x.return=p;x.sibling=null}return p.child}function p0(h,p){return(h.lanes&p)!==0?!0:(h=h.dependencies,!!(h!==null&&ah(h)))}function qS(h,p,x){switch(p.tag){case 3:J(p,p.stateNode.containerInfo),kl(p,di,h.memoizedState.cache),Ie();break;case 27:case 5:ue(p);break;case 4:J(p,p.stateNode.containerInfo);break;case 10:kl(p,p.type,p.memoizedProps.value);break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(zn(p),p.flags|=128,null):(x&p.child.childLanes)!==0?c1(h,p,x):(zn(p),h=il(h,p,x),h!==null?h.sibling:null);zn(p);break;case 19:var B=(h.flags&128)!==0;if(E=(x&p.childLanes)!==0,E||(sh(h,p,x,!1),E=(x&p.childLanes)!==0),B){if(E)return f1(h,p,x);p.flags|=128}if(B=p.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),C(hs,hs.current),E)break;return null;case 22:case 23:return p.lanes=0,Bs(h,p,x);case 24:kl(p,di,h.memoizedState.cache)}return il(h,p,x)}function h1(h,p,x){if(h!==null)if(h.memoizedProps!==p.pendingProps)ri=!0;else{if(!p0(h,x)&&(p.flags&128)===0)return ri=!1,qS(h,p,x);ri=(h.flags&131072)!==0}else ri=!1,Dn&&(p.flags&1048576)!==0&&G(p,Qu,p.index);switch(p.lanes=0,p.tag){case 16:e:{h=p.pendingProps;var E=p.elementType,B=E._init;if(E=B(E._payload),p.type=E,typeof E=="function")vh(E)?(h=Fa(E,h),p.tag=1,p=o1(null,p,E,h,x)):(p.tag=0,p=za(null,p,E,h,x));else{if(E!=null){if(B=E.$$typeof,B===bh){p.tag=11,p=nl(null,p,E,h,x);break e}else if(B===dp){p.tag=14,p=eh(null,p,E,h,x);break e}}throw p=r(E)||E,Error(s(306,p,""))}}return p;case 0:return za(h,p,p.type,p.pendingProps,x);case 1:return E=p.type,B=Fa(E,p.pendingProps),o1(h,p,E,B,x);case 3:e:{if(J(p,p.stateNode.containerInfo),h===null)throw Error(s(387));var F=p.pendingProps;B=p.memoizedState,E=B.element,Y(h,p),st(p,F,null,x);var ae=p.memoizedState;if(F=ae.cache,kl(p,di,F),F!==B.cache&&zc(p,[di],x,!0),Ae(),F=ae.element,Ps&&B.isDehydrated)if(B={element:F,isDehydrated:!1,cache:ae.cache},p.updateQueue.baseState=B,p.memoizedState=B,p.flags&256){p=l1(h,p,F,x);break e}else if(F!==E){E=re(Error(s(424)),p),rt(E),p=l1(h,p,F,x);break e}else for(Ps&&(Fs=X1(p.stateNode.containerInfo),Is=p,Dn=!0,yr=null,Ms=!0),x=Mo(p,null,F,x),p.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(Ie(),F===E){p=il(h,p,x);break e}Ui(h,p,F,x)}p=p.child}return p;case 26:if(ka)return es(h,p),h===null?(x=eg(p.type,null,p.pendingProps,null))?p.memoizedState=x:Dn||(p.stateNode=Tp(p.type,p.pendingProps,So.current,p)):p.memoizedState=eg(p.type,h.memoizedProps,p.pendingProps,h.memoizedState),null;case 27:if(si)return ue(p),h===null&&si&&Dn&&(E=p.stateNode=Gr(p.type,p.pendingProps,So.current,fs.current,!1),Is=p,Ms=!0,Fs=Sp(E)),E=p.pendingProps.children,h!==null||Dn?Ui(h,p,E,x):p.child=hc(p,null,E,x),es(h,p),p.child;case 5:return h===null&&Dn&&(Mp(p.type,p.pendingProps,fs.current),(B=E=Fs)&&(E=tA(E,p.type,p.pendingProps,Ms),E!==null?(p.stateNode=E,Is=p,Fs=Sp(E),Ms=!1,B=!0):B=!1),B||ve(p)),ue(p),B=p.type,F=p.pendingProps,ae=h!==null?h.memoizedProps:null,E=F.children,ln(B,F)?E=null:ae!==null&&ln(B,ae)&&(p.flags|=32),p.memoizedState!==null&&(B=bn(h,p,Gn,null,null,x),ia?zr._currentValue=B:zr._currentValue2=B),es(h,p),Ui(h,p,E,x),p.child;case 6:return h===null&&Dn&&(Z1(p.pendingProps,fs.current),(h=x=Fs)&&(x=Q0(x,p.pendingProps,Ms),x!==null?(p.stateNode=x,Is=p,Fs=null,h=!0):h=!1),h||ve(p)),null;case 13:return c1(h,p,x);case 4:return J(p,p.stateNode.containerInfo),E=p.pendingProps,h===null?p.child=hc(p,null,E,x):Ui(h,p,E,x),p.child;case 11:return nl(h,p,p.type,p.pendingProps,x);case 7:return Ui(h,p,p.pendingProps,x),p.child;case 8:return Ui(h,p,p.pendingProps.children,x),p.child;case 12:return Ui(h,p,p.pendingProps.children,x),p.child;case 10:return E=p.pendingProps,kl(p,p.type,E.value),Ui(h,p,E.children,x),p.child;case 9:return B=p.type._context,E=p.pendingProps.children,Xl(p),B=Us(B),E=E(B),p.flags|=1,Ui(h,p,E,x),p.child;case 14:return eh(h,p,p.type,p.pendingProps,x);case 15:return Wd(h,p,p.type,p.pendingProps,x);case 19:return f1(h,p,x);case 22:return Bs(h,p,x);case 24:return Xl(p),E=Us(di),h===null?(B=g0(),B===null&&(B=qn,F=jl(),B.pooledCache=F,F.refCount++,F!==null&&(B.pooledCacheLanes|=x),B=F),p.memoizedState={parent:E,cache:B},ut(p),kl(p,di,B)):((h.lanes&x)!==0&&(Y(h,p),st(p,null,null,x),Ae()),B=h.memoizedState,F=p.memoizedState,B.parent!==E?(B={parent:E,cache:E},p.memoizedState=B,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=B),kl(p,di,E)):(E=F.cache,kl(p,di,E),E!==B.cache&&zc(p,[di],x,!0))),Ui(h,p,p.pendingProps.children,x),p.child;case 29:throw p.pendingProps}throw Error(s(156,p.tag))}function kl(h,p,x){ia?(C(Al,p._currentValue),p._currentValue=x):(C(Al,p._currentValue2),p._currentValue2=x)}function sl(h){var p=Al.current;ia?h._currentValue=p:h._currentValue2=p,b(Al)}function ih(h,p,x){for(;h!==null;){var E=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),h===x)break;h=h.return}}function zc(h,p,x,E){var B=h.child;for(B!==null&&(B.return=h);B!==null;){var F=B.dependencies;if(F!==null){var ae=B.child;F=F.firstContext;e:for(;F!==null;){var xe=F;F=B;for(var Fe=0;Fe<p.length;Fe++)if(xe.context===p[Fe]){F.lanes|=x,xe=F.alternate,xe!==null&&(xe.lanes|=x),ih(F.return,x,h),E||(ae=null);break e}F=xe.next}}else if(B.tag===18){if(ae=B.return,ae===null)throw Error(s(341));ae.lanes|=x,F=ae.alternate,F!==null&&(F.lanes|=x),ih(ae,x,h),ae=null}else ae=B.child;if(ae!==null)ae.return=B;else for(ae=B;ae!==null;){if(ae===h){ae=null;break}if(B=ae.sibling,B!==null){B.return=ae.return,ae=B;break}ae=ae.return}B=ae}}function sh(h,p,x,E){h=null;for(var B=p,F=!1;B!==null;){if(!F){if((B.flags&524288)!==0)F=!0;else if((B.flags&262144)!==0)break}if(B.tag===10){var ae=B.alternate;if(ae===null)throw Error(s(387));if(ae=ae.memoizedProps,ae!==null){var xe=B.type;Ea(B.pendingProps.value,ae.value)||(h!==null?h.push(xe):h=[xe])}}else if(B===Kc.current){if(ae=B.alternate,ae===null)throw Error(s(387));ae.memoizedState.memoizedState!==B.memoizedState.memoizedState&&(h!==null?h.push(zr):h=[zr])}B=B.return}h!==null&&zc(p,h,x,E),p.flags|=262144}function ah(h){for(h=h.firstContext;h!==null;){var p=h.context;if(!Ea(ia?p._currentValue:p._currentValue2,h.memoizedValue))return!0;h=h.next}return!1}function Xl(h){jr=h,Ka=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Us(h){return m0(jr,h)}function rh(h,p){return jr===null&&Xl(h),m0(h,p)}function m0(h,p){var x=ia?p._currentValue:p._currentValue2;if(p={context:p,memoizedValue:x,next:null},Ka===null){if(h===null)throw Error(s(308));Ka=p,h.dependencies={lanes:0,firstContext:p},h.flags|=524288}else Ka=Ka.next=p;return x}function jl(){return{controller:new af,data:new Map,refCount:0}}function oh(h){h.refCount--,h.refCount===0&&ly(cy,function(){h.controller.abort()})}function g0(){var h=To.current;return h!==null?h:qn.pooledCache}function Kd(h,p){p===null?C(To,To.current):C(To,p.pool)}function v0(){var h=g0();return h===null?null:{parent:ia?di._currentValue:di._currentValue2,pool:h}}function _a(h){h.flags|=4}function Uu(h,p){if(h!==null&&h.child===p.child)return!1;if((p.flags&16)!==0)return!0;for(h=p.child;h!==null;){if((h.flags&13878)!==0||(h.subtreeFlags&13878)!==0)return!0;h=h.sibling}return!1}function Gc(h,p,x,E){if(us)for(x=p.child;x!==null;){if(x.tag===5||x.tag===6)Eh(h,x.stateNode);else if(!(x.tag===4||si&&x.tag===27)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===p)break;for(;x.sibling===null;){if(x.return===null||x.return===p)return;x=x.return}x.sibling.return=x.return,x=x.sibling}else if(gr)for(var B=p.child;B!==null;){if(B.tag===5){var F=B.stateNode;x&&E&&(F=q0(F,B.type,B.memoizedProps)),Eh(h,F)}else if(B.tag===6)F=B.stateNode,x&&E&&(F=K0(F,B.memoizedProps)),Eh(h,F);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)F=B.child,F!==null&&(F.return=B),Gc(h,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===p)break;for(;B.sibling===null;){if(B.return===null||B.return===p)return;B=B.return}B.sibling.return=B.return,B=B.sibling}}function d1(h,p,x,E){if(gr)for(var B=p.child;B!==null;){if(B.tag===5){var F=B.stateNode;x&&E&&(F=q0(F,B.type,B.memoizedProps)),W0(h,F)}else if(B.tag===6)F=B.stateNode,x&&E&&(F=K0(F,B.memoizedProps)),W0(h,F);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)F=B.child,F!==null&&(F.return=B),d1(h,B,!(B.memoizedProps!==null&&B.memoizedProps.mode==="manual"),!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===p)break;for(;B.sibling===null;){if(B.return===null||B.return===p)return;B=B.return}B.sibling.return=B.return,B=B.sibling}}function lh(h,p){if(gr&&Uu(h,p)){h=p.stateNode;var x=h.containerInfo,E=Ch();d1(E,p,!1,!1),h.pendingChildren=E,_a(p),yp(x,E)}}function Jd(h,p,x,E){if(us)h.memoizedProps!==E&&_a(p);else if(gr){var B=h.stateNode,F=h.memoizedProps;if((h=Uu(h,p))||F!==E){var ae=fs.current;F=Ku(B,x,F,E,!h,null),F===B?p.stateNode=B:(ml(F,x,E,ae)&&_a(p),p.stateNode=F,h?Gc(F,p,!1,!1):_a(p))}else p.stateNode=B}}function Zd(h,p,x){if(z0(p,x)){if(h.flags|=16777216,!gp(p,x))if(Zl())h.flags|=8192;else throw cc=Ph,Nh}else h.flags&=-16777217}function Qd(h,p){if(ey(p)){if(h.flags|=16777216,!Xc(p))if(Zl())h.flags|=8192;else throw cc=Ph,Nh}else h.flags&=-16777217}function Lu(h,p){p!==null&&(h.flags|=4),h.flags&16384&&(p=h.tag!==22?N():536870912,h.lanes|=p,wo|=p)}function Ou(h,p){if(!Dn)switch(h.tailMode){case"hidden":p=h.tail;for(var x=null;p!==null;)p.alternate!==null&&(x=p),p=p.sibling;x===null?h.tail=null:x.sibling=null;break;case"collapsed":x=h.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:E.sibling=null}}function bi(h){var p=h.alternate!==null&&h.alternate.child===h.child,x=0,E=0;if(p)for(var B=h.child;B!==null;)x|=B.lanes|B.childLanes,E|=B.subtreeFlags&31457280,E|=B.flags&31457280,B.return=h,B=B.sibling;else for(B=h.child;B!==null;)x|=B.lanes|B.childLanes,E|=B.subtreeFlags,E|=B.flags,B.return=h,B=B.sibling;return h.subtreeFlags|=E,h.childLanes=x,p}function p1(h,p,x){var E=p.pendingProps;switch(se(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bi(p),null;case 1:return bi(p),null;case 3:return x=p.stateNode,E=null,h!==null&&(E=h.memoizedState.cache),p.memoizedState.cache!==E&&(p.flags|=2048),sl(di),ne(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(h===null||h.child===null)&&(Qe(p)?_a(p):h===null||h.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,yr!==null&&(mh(yr),yr=null))),lh(h,p),bi(p),null;case 26:if(ka){x=p.type;var B=p.memoizedState;return h===null?(_a(p),B!==null?(bi(p),Qd(p,B)):(bi(p),Zd(p,x,E))):B?B!==h.memoizedState?(_a(p),bi(p),Qd(p,B)):(bi(p),p.flags&=-16777217):(us?h.memoizedProps!==E&&_a(p):Jd(h,p,x,E),bi(p),Zd(p,x,E)),null}case 27:if(si){if(pe(p),x=So.current,B=p.type,h!==null&&p.stateNode!=null)us?h.memoizedProps!==E&&_a(p):Jd(h,p,B,E);else{if(!E){if(p.stateNode===null)throw Error(s(166));return bi(p),null}h=fs.current,Qe(p)?Ve(p,h):(h=Gr(B,E,x,h,!0),p.stateNode=h,_a(p))}return bi(p),null}case 5:if(pe(p),x=p.type,h!==null&&p.stateNode!=null)Jd(h,p,x,E);else{if(!E){if(p.stateNode===null)throw Error(s(166));return bi(p),null}h=fs.current,Qe(p)?Ve(p,h):(B=F0(x,E,So.current,h,p),Gc(B,p,!1,!1),p.stateNode=B,ml(B,x,E,h)&&_a(p))}return bi(p),Zd(p,p.type,p.pendingProps),null;case 6:if(h&&p.stateNode!=null)x=h.memoizedProps,us?x!==E&&_a(p):gr&&(x!==E?(p.stateNode=Qn(E,So.current,fs.current,p),_a(p)):p.stateNode=h.stateNode);else{if(typeof E!="string"&&p.stateNode===null)throw Error(s(166));if(h=So.current,x=fs.current,Qe(p)){if(!Ps)throw Error(s(176));if(h=p.stateNode,x=p.memoizedProps,E=null,B=Is,B!==null)switch(B.tag){case 27:case 5:E=B.memoizedProps}$0(h,x,p,E)||ve(p)}else p.stateNode=Qn(E,h,x,p)}return bi(p),null;case 13:if(E=p.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(B=Qe(p),E!==null&&E.dehydrated!==null){if(h===null){if(!B)throw Error(s(318));if(!Ps)throw Error(s(344));if(B=p.memoizedState,B=B!==null?B.dehydrated:null,!B)throw Error(s(317));q1(B,p)}else Ie(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;bi(p),B=!1}else yr!==null&&(mh(yr),yr=null),B=!0;if(!B)return p.flags&256?(jn(p),p):(jn(p),null)}if(jn(p),(p.flags&128)!==0)return p.lanes=x,p;if(x=E!==null,h=h!==null&&h.memoizedState!==null,x){E=p.child,B=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(B=E.alternate.memoizedState.cachePool.pool);var F=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(F=E.memoizedState.cachePool.pool),F!==B&&(E.flags|=2048)}return x!==h&&x&&(p.child.flags|=8192),Lu(p,p.updateQueue),bi(p),null;case 4:return ne(),lh(h,p),h===null&&ji(p.stateNode.containerInfo),bi(p),null;case 10:return sl(p.type),bi(p),null;case 19:if(b(hs),B=p.memoizedState,B===null)return bi(p),null;if(E=(p.flags&128)!==0,F=B.rendering,F===null)if(E)Ou(B,!1);else{if(oi!==0||h!==null&&(h.flags&128)!==0)for(h=p.child;h!==null;){if(F=Bn(h),F!==null){for(p.flags|=128,Ou(B,!1),h=F.updateQueue,p.updateQueue=h,Lu(p,h),p.subtreeFlags=0,h=x,x=p.child;x!==null;)yh(x,h),x=x.sibling;return C(hs,hs.current&1|2),p.child}h=h.sibling}B.tail!==null&&vr()>lf&&(p.flags|=128,E=!0,Ou(B,!1),p.lanes=4194304)}else{if(!E)if(h=Bn(F),h!==null){if(p.flags|=128,E=!0,h=h.updateQueue,p.updateQueue=h,Lu(p,h),Ou(B,!0),B.tail===null&&B.tailMode==="hidden"&&!F.alternate&&!Dn)return bi(p),null}else 2*vr()-B.renderingStartTime>lf&&x!==536870912&&(p.flags|=128,E=!0,Ou(B,!1),p.lanes=4194304);B.isBackwards?(F.sibling=p.child,p.child=F):(h=B.last,h!==null?h.sibling=F:p.child=F,B.last=F)}return B.tail!==null?(p=B.tail,B.rendering=p,B.tail=p.sibling,B.renderingStartTime=vr(),p.sibling=null,h=hs.current,C(hs,E?h&1|2:h&1),p):(bi(p),null);case 22:case 23:return jn(p),gn(),E=p.memoizedState!==null,h!==null?h.memoizedState!==null!==E&&(p.flags|=8192):E&&(p.flags|=8192),E?(x&536870912)!==0&&(p.flags&128)===0&&(bi(p),p.subtreeFlags&6&&(p.flags|=8192)):bi(p),x=p.updateQueue,x!==null&&Lu(p,x.retryQueue),x=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),E=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(E=p.memoizedState.cachePool.pool),E!==x&&(p.flags|=2048),h!==null&&b(To),null;case 24:return x=null,h!==null&&(x=h.memoizedState.cache),p.memoizedState.cache!==x&&(p.flags|=2048),sl(di),bi(p),null;case 25:return null}throw Error(s(156,p.tag))}function KS(h,p){switch(se(p),p.tag){case 1:return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return sl(di),ne(),h=p.flags,(h&65536)!==0&&(h&128)===0?(p.flags=h&-65537|128,p):null;case 26:case 27:case 5:return pe(p),null;case 13:if(jn(p),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(s(340));Ie()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return b(hs),null;case 4:return ne(),null;case 10:return sl(p.type),null;case 22:case 23:return jn(p),gn(),h!==null&&b(To),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 24:return sl(di),null;case 25:return null;default:return null}}function m1(h,p){switch(se(p),p.tag){case 3:sl(di),ne();break;case 26:case 27:case 5:pe(p);break;case 4:ne();break;case 13:jn(p);break;case 19:b(hs);break;case 10:sl(p.type);break;case 22:case 23:jn(p),gn(),h!==null&&b(To);break;case 24:sl(di)}}function ch(h,p){try{var x=p.updateQueue,E=x!==null?x.lastEffect:null;if(E!==null){var B=E.next;x=B;do{if((x.tag&h)===h){E=void 0;var F=x.create,ae=x.inst;E=F(),ae.destroy=E}x=x.next}while(x!==B)}}catch(xe){Yn(p,p.return,xe)}}function Yl(h,p,x){try{var E=p.updateQueue,B=E!==null?E.lastEffect:null;if(B!==null){var F=B.next;E=F;do{if((E.tag&h)===h){var ae=E.inst,xe=ae.destroy;if(xe!==void 0){ae.destroy=void 0,B=p;var Fe=x;try{xe()}catch(lt){Yn(B,Fe,lt)}}}E=E.next}while(E!==F)}}catch(lt){Yn(p,p.return,lt)}}function g1(h){var p=h.updateQueue;if(p!==null){var x=h.stateNode;try{je(p,x)}catch(E){Yn(h,h.return,E)}}}function xa(h,p,x){x.props=Fa(h.type,h.memoizedProps),x.state=h.memoizedState;try{x.componentWillUnmount()}catch(E){Yn(h,p,E)}}function Pr(h,p){try{var x=h.ref;if(x!==null){var E=h.stateNode;switch(h.tag){case 26:case 27:case 5:var B=Yu(E);break;default:B=E}typeof x=="function"?h.refCleanup=x(B):x.current=B}}catch(F){Yn(h,p,F)}}function Sa(h,p){var x=h.ref,E=h.refCleanup;if(x!==null)if(typeof E=="function")try{E()}catch(B){Yn(h,p,B)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(B){Yn(h,p,B)}else x.current=null}function y0(h){var p=h.type,x=h.memoizedProps,E=h.stateNode;try{$S(E,p,x,h)}catch(B){Yn(h,h.return,B)}}function _0(h,p,x){try{L1(h.stateNode,h.type,x,p,h)}catch(E){Yn(h,h.return,E)}}function x0(h){return h.tag===5||h.tag===3||(ka?h.tag===26:!1)||(si?h.tag===27:!1)||h.tag===4}function uh(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||x0(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&(!si||h.tag!==27)&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function S0(h,p,x){var E=h.tag;if(E===5||E===6)h=h.stateNode,p?N1(x,h,p):X0(x,h);else if(!(E===4||si&&E===27)&&(h=h.child,h!==null))for(S0(h,p,x),h=h.sibling;h!==null;)S0(h,p,x),h=h.sibling}function al(h,p,x){var E=h.tag;if(E===5||E===6)h=h.stateNode,p?O1(x,h,p):B1(x,h);else if(!(E===4||si&&E===27)&&(h=h.child,h!==null))for(al(h,p,x),h=h.sibling;h!==null;)al(h,p,x),h=h.sibling}function $d(h,p,x){h=h.containerInfo;try{Ju(h,x)}catch(E){Yn(p,p.return,E)}}function fh(h,p){for(pp(h.containerInfo),sn=p;sn!==null;)if(h=sn,p=h.child,(h.subtreeFlags&1028)!==0&&p!==null)p.return=h,sn=p;else for(;sn!==null;){h=sn;var x=h.alternate;switch(p=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((p&1024)!==0&&x!==null){p=void 0;var E=h,B=x.memoizedProps;x=x.memoizedState;var F=E.stateNode;try{var ae=Fa(E.type,B,E.elementType===E.type);p=F.getSnapshotBeforeUpdate(ae,x),F.__reactInternalSnapshotBeforeUpdate=p}catch(xe){Yn(E,E.return,xe)}}break;case 3:(p&1024)!==0&&us&&G1(h.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(s(163))}if(p=h.sibling,p!==null){p.return=h.return,sn=p;break}sn=h.return}return ae=yn,yn=!1,ae}function ep(h,p,x){var E=x.flags;switch(x.tag){case 0:case 11:case 15:ol(h,x),E&4&&ch(5,x);break;case 1:if(ol(h,x),E&4)if(h=x.stateNode,p===null)try{h.componentDidMount()}catch(xe){Yn(x,x.return,xe)}else{var B=Fa(x.type,p.memoizedProps);p=p.memoizedState;try{h.componentDidUpdate(B,p,h.__reactInternalSnapshotBeforeUpdate)}catch(xe){Yn(x,x.return,xe)}}E&64&&g1(x),E&512&&Pr(x,x.return);break;case 3:if(ol(h,x),E&64&&(E=x.updateQueue,E!==null)){if(h=null,x.child!==null)switch(x.child.tag){case 27:case 5:h=Yu(x.child.stateNode);break;case 1:h=x.child.stateNode}try{je(E,h)}catch(xe){Yn(x,x.return,xe)}}break;case 26:if(ka){ol(h,x),E&512&&Pr(x,x.return);break}case 27:case 5:ol(h,x),p===null&&E&4&&y0(x),E&512&&Pr(x,x.return);break;case 12:ol(h,x);break;case 13:ol(h,x),E&4&&tp(h,x);break;case 22:if(B=x.memoizedState!==null||Eo,!B){p=p!==null&&p.memoizedState!==null||Ni;var F=Eo,ae=Ni;Eo=B,(Ni=p)&&!ae?ll(h,x,(x.subtreeFlags&8772)!==0):ol(h,x),Eo=F,Ni=ae}E&512&&(x.memoizedProps.mode==="manual"?Pr(x,x.return):Sa(x,x.return));break;default:ol(h,x)}}function A0(h){var p=h.alternate;p!==null&&(h.alternate=null,A0(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&QS(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Ls(h,p,x){for(x=x.child;x!==null;)Wl(h,p,x),x=x.sibling}function Wl(h,p,x){if(Ta&&typeof Ta.onCommitFiberUnmount=="function")try{Ta.onCommitFiberUnmount(Wi,x)}catch{}switch(x.tag){case 26:if(ka){Ni||Sa(x,p),Ls(h,p,x),x.memoizedState?kc(x.memoizedState):x.stateNode&&Zu(x.stateNode);break}case 27:if(si){Ni||Sa(x,p);var E=It,B=hn;It=x.stateNode,Ls(h,p,x),rc(x.stateNode),It=E,hn=B;break}case 5:Ni||Sa(x,p);case 6:if(us){if(E=It,B=hn,It=null,Ls(h,p,x),It=E,hn=B,It!==null)if(hn)try{P1(It,x.stateNode)}catch(F){Yn(x,p,F)}else try{j0(It,x.stateNode)}catch(F){Yn(x,p,F)}}else Ls(h,p,x);break;case 18:us&&It!==null&&(hn?wh(It,x.stateNode):J1(It,x.stateNode));break;case 4:us?(E=It,B=hn,It=x.stateNode.containerInfo,hn=!0,Ls(h,p,x),It=E,hn=B):(gr&&$d(x.stateNode,x,Ch()),Ls(h,p,x));break;case 0:case 11:case 14:case 15:Ni||Yl(2,x,p),Ni||Yl(4,x,p),Ls(h,p,x);break;case 1:Ni||(Sa(x,p),E=x.stateNode,typeof E.componentWillUnmount=="function"&&xa(x,p,E)),Ls(h,p,x);break;case 21:Ls(h,p,x);break;case 22:Ni||Sa(x,p),Ni=(E=Ni)||x.memoizedState!==null,Ls(h,p,x),Ni=E;break;default:Ls(h,p,x)}}function tp(h,p){if(Ps&&p.memoizedState===null&&(h=p.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{iA(h)}catch(x){Yn(p,p.return,x)}}function v1(h){switch(h.tag){case 13:case 19:var p=h.stateNode;return p===null&&(p=h.stateNode=new Wn),p;case 22:return h=h.stateNode,p=h._retryCache,p===null&&(p=h._retryCache=new Wn),p;default:throw Error(s(435,h.tag))}}function rl(h,p){var x=v1(h);p.forEach(function(E){var B=ec.bind(null,h,E);x.has(E)||(x.add(E),E.then(B,B))})}function ta(h,p){var x=p.deletions;if(x!==null)for(var E=0;E<x.length;E++){var B=x[E],F=h,ae=p;if(us){var xe=ae;e:for(;xe!==null;){switch(xe.tag){case 27:case 5:It=xe.stateNode,hn=!1;break e;case 3:It=xe.stateNode.containerInfo,hn=!0;break e;case 4:It=xe.stateNode.containerInfo,hn=!0;break e}xe=xe.return}if(It===null)throw Error(s(160));Wl(F,ae,B),It=null,hn=!1}else Wl(F,ae,B);F=B.alternate,F!==null&&(F.return=null),B.return=null}if(p.subtreeFlags&13878)for(p=p.child;p!==null;)M0(p,h),p=p.sibling}function M0(h,p){var x=h.alternate,E=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:ta(p,h),Aa(h),E&4&&(Yl(3,h,h.return),ch(3,h),Yl(5,h,h.return));break;case 1:ta(p,h),Aa(h),E&512&&(Ni||x===null||Sa(x,x.return)),E&64&&Eo&&(h=h.updateQueue,h!==null&&(E=h.callbacks,E!==null&&(x=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=x===null?E:x.concat(E))));break;case 26:if(ka){var B=Ri;ta(p,h),Aa(h),E&512&&(Ni||x===null||Sa(x,x.return)),E&4&&(E=x!==null?x.memoizedState:null,p=h.memoizedState,x===null?p===null?h.stateNode===null?h.stateNode=Dh(B,h.type,h.memoizedProps,h):Bh(B,h.type,h.stateNode):h.stateNode=Q1(B,p,h.memoizedProps):E!==p?(E===null?x.stateNode!==null&&Zu(x.stateNode):kc(E),p===null?Bh(B,h.type,h.stateNode):Q1(B,p,h.memoizedProps)):p===null&&h.stateNode!==null&&_0(h,h.memoizedProps,x.memoizedProps));break}case 27:if(si&&E&4&&h.alternate===null){B=h.stateNode;var F=h.memoizedProps;try{ac(B),ny(h.type,F,B,h)}catch(xt){Yn(h,h.return,xt)}}case 5:if(ta(p,h),Aa(h),E&512&&(Ni||x===null||Sa(x,x.return)),us){if(h.flags&32){p=h.stateNode;try{Y0(p)}catch(xt){Yn(h,h.return,xt)}}E&4&&h.stateNode!=null&&(p=h.memoizedProps,_0(h,p,x!==null?x.memoizedProps:p)),E&1024&&(sg=!0)}break;case 6:if(ta(p,h),Aa(h),E&4&&us){if(h.stateNode===null)throw Error(s(162));E=h.memoizedProps,x=x!==null?x.memoizedProps:E,p=h.stateNode;try{U1(p,x,E)}catch(xt){Yn(h,h.return,xt)}}break;case 3:if(ka?($1(),B=Ri,Ri=bp(p.containerInfo),ta(p,h),Ri=B):ta(p,h),Aa(h),E&4){if(us&&Ps&&x!==null&&x.memoizedState.isDehydrated)try{nA(p.containerInfo)}catch(xt){Yn(h,h.return,xt)}if(gr){E=p.containerInfo,x=p.pendingChildren;try{Ju(E,x)}catch(xt){Yn(h,h.return,xt)}}}sg&&(sg=!1,y1(h));break;case 4:ka?(x=Ri,Ri=bp(h.stateNode.containerInfo),ta(p,h),Aa(h),Ri=x):(ta(p,h),Aa(h)),E&4&&gr&&$d(h.stateNode,h,h.stateNode.pendingChildren);break;case 12:ta(p,h),Aa(h);break;case 13:ta(p,h),Aa(h),h.child.flags&8192&&h.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(oa=vr()),E&4&&(E=h.updateQueue,E!==null&&(h.updateQueue=null,rl(h,E)));break;case 22:E&512&&(Ni||x===null||Sa(x,x.return)),B=h.memoizedState!==null;var ae=x!==null&&x.memoizedState!==null,xe=Eo,Fe=Ni;if(Eo=xe||B,Ni=Fe||ae,ta(p,h),Ni=Fe,Eo=xe,Aa(h),p=h.stateNode,p._current=h,p._visibility&=-3,p._visibility|=p._pendingVisibility&2,E&8192&&(p._visibility=B?p._visibility&-2:p._visibility|1,B&&(p=Eo||Ni,x===null||ae||p||Nu(h)),us&&(h.memoizedProps===null||h.memoizedProps.mode!=="manual"))){e:if(x=null,us)for(p=h;;){if(p.tag===5||ka&&p.tag===26||si&&p.tag===27){if(x===null){ae=x=p;try{F=ae.stateNode,B?I1(F):z1(ae.stateNode,ae.memoizedProps)}catch(xt){Yn(ae,ae.return,xt)}}}else if(p.tag===6){if(x===null){ae=p;try{var lt=ae.stateNode;B?F1(lt):eA(lt,ae.memoizedProps)}catch(xt){Yn(ae,ae.return,xt)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===h)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break e;for(;p.sibling===null;){if(p.return===null||p.return===h)break e;x===p&&(x=null),p=p.return}x===p&&(x=null),p.sibling.return=p.return,p=p.sibling}}E&4&&(E=h.updateQueue,E!==null&&(x=E.retryQueue,x!==null&&(E.retryQueue=null,rl(h,x))));break;case 19:ta(p,h),Aa(h),E&4&&(E=h.updateQueue,E!==null&&(h.updateQueue=null,rl(h,E)));break;case 21:break;default:ta(p,h),Aa(h)}}function Aa(h){var p=h.flags;if(p&2){try{if(us&&(!si||h.tag!==27)){e:{for(var x=h.return;x!==null;){if(x0(x)){var E=x;break e}x=x.return}throw Error(s(160))}switch(E.tag){case 27:if(si){var B=E.stateNode,F=uh(h);al(h,F,B);break}case 5:var ae=E.stateNode;E.flags&32&&(Y0(ae),E.flags&=-33);var xe=uh(h);al(h,xe,ae);break;case 3:case 4:var Fe=E.stateNode.containerInfo,lt=uh(h);S0(h,lt,Fe);break;default:throw Error(s(161))}}}catch(xt){Yn(h,h.return,xt)}h.flags&=-3}p&4096&&(h.flags&=-4097)}function y1(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var p=h;y1(p),p.tag===5&&p.flags&1024&&vp(p.stateNode),h=h.sibling}}function ol(h,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)ep(h,p.alternate,p),p=p.sibling}function Nu(h){for(h=h.child;h!==null;){var p=h;switch(p.tag){case 0:case 11:case 14:case 15:Yl(4,p,p.return),Nu(p);break;case 1:Sa(p,p.return);var x=p.stateNode;typeof x.componentWillUnmount=="function"&&xa(p,p.return,x),Nu(p);break;case 26:case 27:case 5:Sa(p,p.return),Nu(p);break;case 22:Sa(p,p.return),p.memoizedState===null&&Nu(p);break;default:Nu(p)}h=h.sibling}}function ll(h,p,x){for(x=x&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var E=p.alternate,B=h,F=p,ae=F.flags;switch(F.tag){case 0:case 11:case 15:ll(B,F,x),ch(4,F);break;case 1:if(ll(B,F,x),E=F,B=E.stateNode,typeof B.componentDidMount=="function")try{B.componentDidMount()}catch(lt){Yn(E,E.return,lt)}if(E=F,B=E.updateQueue,B!==null){var xe=E.stateNode;try{var Fe=B.shared.hiddenCallbacks;if(Fe!==null)for(B.shared.hiddenCallbacks=null,B=0;B<Fe.length;B++)he(Fe[B],xe)}catch(lt){Yn(E,E.return,lt)}}x&&ae&64&&g1(F),Pr(F,F.return);break;case 26:case 27:case 5:ll(B,F,x),x&&E===null&&ae&4&&y0(F),Pr(F,F.return);break;case 12:ll(B,F,x);break;case 13:ll(B,F,x),x&&ae&4&&tp(B,F);break;case 22:F.memoizedState===null&&ll(B,F,x),Pr(F,F.return);break;default:ll(B,F,x)}p=p.sibling}}function np(h,p){var x=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),h=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(h=p.memoizedState.cachePool.pool),h!==x&&(h!=null&&h.refCount++,x!=null&&oh(x))}function hh(h,p){h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&oh(h))}function xs(h,p,x,E){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)b0(h,p,x,E),p=p.sibling}function b0(h,p,x,E){var B=p.flags;switch(p.tag){case 0:case 11:case 15:xs(h,p,x,E),B&2048&&ch(9,p);break;case 3:xs(h,p,x,E),B&2048&&(h=null,p.alternate!==null&&(h=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==h&&(p.refCount++,h!=null&&oh(h)));break;case 12:if(B&2048){xs(h,p,x,E),h=p.stateNode;try{var F=p.memoizedProps,ae=F.id,xe=F.onPostCommit;typeof xe=="function"&&xe(ae,p.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(Fe){Yn(p,p.return,Fe)}}else xs(h,p,x,E);break;case 23:break;case 22:F=p.stateNode,p.memoizedState!==null?F._visibility&4?xs(h,p,x,E):js(h,p):F._visibility&4?xs(h,p,x,E):(F._visibility|=4,Os(h,p,x,E,(p.subtreeFlags&10256)!==0)),B&2048&&np(p.alternate,p);break;case 24:xs(h,p,x,E),B&2048&&hh(p.alternate,p);break;default:xs(h,p,x,E)}}function Os(h,p,x,E,B){for(B=B&&(p.subtreeFlags&10256)!==0,p=p.child;p!==null;){var F=h,ae=p,xe=x,Fe=E,lt=ae.flags;switch(ae.tag){case 0:case 11:case 15:Os(F,ae,xe,Fe,B),ch(8,ae);break;case 23:break;case 22:var xt=ae.stateNode;ae.memoizedState!==null?xt._visibility&4?Os(F,ae,xe,Fe,B):js(F,ae):(xt._visibility|=4,Os(F,ae,xe,Fe,B)),B&&lt&2048&&np(ae.alternate,ae);break;case 24:Os(F,ae,xe,Fe,B),B&&lt&2048&&hh(ae.alternate,ae);break;default:Os(F,ae,xe,Fe,B)}p=p.sibling}}function js(h,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var x=h,E=p,B=E.flags;switch(E.tag){case 22:js(x,E),B&2048&&np(E.alternate,E);break;case 24:js(x,E),B&2048&&hh(E.alternate,E);break;default:js(x,E)}p=p.sibling}}function fr(h){if(h.subtreeFlags&Ja)for(h=h.child;h!==null;)ip(h),h=h.sibling}function ip(h){switch(h.tag){case 26:fr(h),h.flags&Ja&&(h.memoizedState!==null?ty(Ri,h.memoizedState,h.memoizedProps):sa(h.type,h.memoizedProps));break;case 5:fr(h),h.flags&Ja&&sa(h.type,h.memoizedProps);break;case 3:case 4:if(ka){var p=Ri;Ri=bp(h.stateNode.containerInfo),fr(h),Ri=p}else fr(h);break;case 22:h.memoizedState===null&&(p=h.alternate,p!==null&&p.memoizedState!==null?(p=Ja,Ja=16777216,fr(h),Ja=p):fr(h));break;default:fr(h)}}function dh(h){var p=h.alternate;if(p!==null&&(h=p.child,h!==null)){p.child=null;do p=h.sibling,h.sibling=null,h=p;while(h!==null)}}function ql(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var x=0;x<p.length;x++){var E=p[x];sn=E,T0(E,h)}dh(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)sp(h),h=h.sibling}function sp(h){switch(h.tag){case 0:case 11:case 15:ql(h),h.flags&2048&&Yl(9,h,h.return);break;case 3:ql(h);break;case 12:ql(h);break;case 22:var p=h.stateNode;h.memoizedState!==null&&p._visibility&4&&(h.return===null||h.return.tag!==13)?(p._visibility&=-5,cl(h)):ql(h);break;default:ql(h)}}function cl(h){var p=h.deletions;if((h.flags&16)!==0){if(p!==null)for(var x=0;x<p.length;x++){var E=p[x];sn=E,T0(E,h)}dh(h)}for(h=h.child;h!==null;){switch(p=h,p.tag){case 0:case 11:case 15:Yl(8,p,p.return),cl(p);break;case 22:x=p.stateNode,x._visibility&4&&(x._visibility&=-5,cl(p));break;default:cl(p)}h=h.sibling}}function T0(h,p){for(;sn!==null;){var x=sn;switch(x.tag){case 0:case 11:case 15:Yl(8,x,p);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var E=x.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:oh(x.memoizedState.cache)}if(E=x.child,E!==null)E.return=x,sn=E;else e:for(x=h;sn!==null;){E=sn;var B=E.sibling,F=E.return;if(A0(E),E===x){sn=null;break e}if(B!==null){B.return=F,sn=B;break e}sn=F}}}function Pu(h){var p=b1(h);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(s(364));return p}if(h=V0(h),h===null)throw Error(s(362));return h.stateNode.current}function Kl(h,p){var x=h.tag;switch(p.$$typeof){case of:if(h.type===p.value)return!0;break;case Sr:e:{for(p=p.value,h=[h,0],x=0;x<h.length;){var E=h[x++],B=E.tag,F=h[x++],ae=p[F];if(B!==5&&B!==26&&B!==27||!qu(E)){for(;ae!=null&&Kl(E,ae);)F++,ae=p[F];if(F===p.length){p=!0;break e}else for(E=E.child;E!==null;)h.push(E,F),E=E.sibling}}p=!1}return p;case yi:if((x===5||x===26||x===27)&&w1(h.stateNode,p.value))return!0;break;case Co:if((x===5||x===6||x===26||x===27)&&(h=C1(h),h!==null&&0<=h.indexOf(p.value)))return!0;break;case Yr:if((x===5||x===26||x===27)&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function E0(h){switch(h.$$typeof){case of:return"<"+(r(h.value)||"Unknown")+">";case Sr:return":has("+(E0(h)||"")+")";case yi:return'[role="'+h.value+'"]';case Co:return'"'+h.value+'"';case Yr:return'[data-testname="'+h.value+'"]';default:throw Error(s(365))}}function Ma(h,p){var x=[];h=[h,0];for(var E=0;E<h.length;){var B=h[E++],F=B.tag,ae=h[E++],xe=p[ae];if(F!==5&&F!==26&&F!==27||!qu(B)){for(;xe!=null&&Kl(B,xe);)ae++,xe=p[ae];if(ae===p.length)x.push(B);else for(B=B.child;B!==null;)h.push(B,ae),B=B.sibling}}return x}function ph(h,p){if(!sc)throw Error(s(363));h=Pu(h),h=Ma(h,p),p=[],h=Array.from(h);for(var x=0;x<h.length;){var E=h[x++],B=E.tag;if(B===5||B===26||B===27)qu(E)||p.push(E.stateNode);else for(E=E.child;E!==null;)h.push(E),E=E.sibling}return p}function Xi(){if((On&2)!==0&&Sn!==0)return Sn&-Sn;if(Wt.T!==null){var h=Ya;return h!==0?h:be()}return T1()}function C0(){$a===0&&($a=(Sn&536870912)===0||Dn?P():536870912);var h=Wa.current;return h!==null&&(h.flags|=32),$a}function Ss(h,p,x){(h===qn&&ei===2||h.cancelPendingCommit!==null)&&(Ns(h,0),ba(h,Sn,$a,!1)),k(h,x),((On&2)===0||h!==qn)&&(h===qn&&((On&2)===0&&(Ml|=x),oi===4&&ba(h,Sn,$a,!1)),Se(h))}function Jl(h,p,x){if((On&6)!==0)throw Error(s(327));var E=!x&&(p&60)===0&&(p&h.expiredLanes)===0||O(h,p),B=E?R0(h,p):rp(h,p,!0),F=E;do{if(B===0){Za&&!E&&ba(h,p,0,!1);break}else if(B===6)ba(h,p,0,!Mr);else{if(x=h.current.alternate,F&&!Iu(x)){B=rp(h,p,!1),F=!1;continue}if(B===2){if(F=p,h.errorRecoveryDisabledLanes&F)var ae=0;else ae=h.pendingLanes&-536870913,ae=ae!==0?ae:ae&536870912?536870912:0;if(ae!==0){p=ae;e:{var xe=h;B=su;var Fe=Ps&&xe.current.memoizedState.isDehydrated;if(Fe&&(Ns(xe,ae).flags|=256),ae=rp(xe,ae,!1),ae!==2){if(ds&&!Fe){xe.errorRecoveryDisabledLanes|=F,Ml|=F,B=4;break e}F=Pi,Pi=B,F!==null&&mh(F)}B=ae}if(F=!1,B!==2)continue}}if(B===1){Ns(h,0),ba(h,p,0,!0);break}e:{switch(E=h,B){case 0:case 1:throw Error(s(345));case 4:if((p&4194176)===p){ba(E,p,$a,!Mr);break e}break;case 2:Pi=null;break;case 3:case 5:break;default:throw Error(s(329))}if(E.finishedWork=x,E.finishedLanes=p,(p&62914560)===p&&(F=oa+300-vr(),10<F)){if(ba(E,p,$a,!Mr),U(E,0)!==0)break e;E.timeoutHandle=ns(ap.bind(null,E,x,Pi,Fh,Np,p,$a,Ml,wo,Mr,2,-0,0),F);break e}ap(E,x,Pi,Fh,Np,p,$a,Ml,wo,Mr,0,-0,0)}}break}while(!0);Se(h)}function mh(h){Pi===null?Pi=h:Pi.push.apply(Pi,h)}function ap(h,p,x,E,B,F,ae,xe,Fe,lt,xt,Tt,Ct){var an=p.subtreeFlags;if((an&8192||(an&16785408)===16785408)&&(G0(),ip(p),p=is(),p!==null)){h.cancelPendingCommit=p(Ql.bind(null,h,x,E,B,ae,xe,Fe,1,Tt,Ct)),ba(h,F,ae,!lt);return}Ql(h,x,E,B,ae,xe,Fe,xt,Tt,Ct)}function Iu(h){for(var p=h;;){var x=p.tag;if((x===0||x===11||x===15)&&p.flags&16384&&(x=p.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var E=0;E<x.length;E++){var B=x[E],F=B.getSnapshot;B=B.value;try{if(!Ea(F(),B))return!1}catch{return!1}}if(x=p.child,p.subtreeFlags&16384&&x!==null)x.return=p,p=x;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function ba(h,p,x,E){p&=~Ih,p&=~Ml,h.suspendedLanes|=p,h.pingedLanes&=~p,E&&(h.warmLanes|=p),E=h.expirationTimes;for(var B=p;0<B;){var F=31-aa(B),ae=1<<F;E[F]=-1,B&=~ae}x!==0&&W(h,x,p)}function gh(){return(On&6)===0?(ye(0),!1):!0}function Fu(){if(Gt!==null){if(ei===0)var h=Gt.return;else h=Gt,Ka=jr=null,_n(h),uc=null,fc=0,h=Gt;for(;h!==null;)m1(h.alternate,h),h=h.return;Gt=null}}function Ns(h,p){h.finishedWork=null,h.finishedLanes=0;var x=h.timeoutHandle;x!==nc&&(h.timeoutHandle=nc,mp(x)),x=h.cancelPendingCommit,x!==null&&(h.cancelPendingCommit=null,x()),Fu(),qn=h,Gt=x=dr(h.current,null),Sn=p,ei=0,Ws=null,Mr=!1,Za=O(h,p),ds=!1,wo=$a=Ih=Ml=Qa=oi=0,Pi=su=null,Np=!1,(p&8)!==0&&(p|=p&32);var E=h.entangledLanes;if(E!==0)for(h=h.entanglements,E&=p;0<E;){var B=31-aa(E),F=1<<B;p|=h[B],E&=~F}return qs=p,Z(),x}function Ga(h,p){dn=null,Wt.H=Oi,p===nf?(p=pt(),ei=3):p===Nh?(p=pt(),ei=4):ei=p===Lp?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,Ws=p,Gt===null&&(oi=1,cr(h,re(p,h.current)))}function Zl(){var h=Wa.current;return h===null?!0:(Sn&4194176)===Sn?ai===null:(Sn&62914560)===Sn||(Sn&536870912)!==0?h===ai:!1}function mo(){var h=Wt.H;return Wt.H=Oi,h===null?Oi:h}function go(){var h=Wt.A;return Wt.A=rf,h}function ul(){oi=4,Mr||(Sn&4194176)!==Sn&&Wa.current!==null||(Za=!0),(Qa&134217727)===0&&(Ml&134217727)===0||qn===null||ba(qn,Sn,$a,!1)}function rp(h,p,x){var E=On;On|=2;var B=mo(),F=go();(qn!==h||Sn!==p)&&(Fh=null,Ns(h,p)),p=!1;var ae=oi;e:do try{if(ei!==0&&Gt!==null){var xe=Gt,Fe=Ws;switch(ei){case 8:Fu(),ae=6;break e;case 3:case 2:case 6:Wa.current===null&&(p=!0);var lt=ei;if(ei=0,Ws=null,hr(h,xe,Fe,lt),x&&Za){ae=0;break e}break;default:lt=ei,ei=0,Ws=null,hr(h,xe,Fe,lt)}}w0(),ae=oi;break}catch(xt){Ga(h,xt)}while(!0);return p&&h.shellSuspendCounter++,Ka=jr=null,On=E,Wt.H=B,Wt.A=F,Gt===null&&(qn=null,Sn=0,Z()),ae}function w0(){for(;Gt!==null;)wi(Gt)}function R0(h,p){var x=On;On|=2;var E=mo(),B=go();qn!==h||Sn!==p?(Fh=null,lf=vr()+500,Ns(h,p)):Za=O(h,p);e:do try{if(ei!==0&&Gt!==null){p=Gt;var F=Ws;t:switch(ei){case 1:ei=0,Ws=null,hr(h,p,F,1);break;case 2:if(gt(F)){ei=0,Ws=null,Vn(p);break}p=function(){ei===2&&qn===h&&(ei=7),Se(h)},F.then(p,p);break e;case 3:ei=7;break e;case 4:ei=5;break e;case 7:gt(F)?(ei=0,Ws=null,Vn(p)):(ei=0,Ws=null,hr(h,p,F,7));break;case 5:var ae=null;switch(Gt.tag){case 26:ae=Gt.memoizedState;case 5:case 27:var xe=Gt,Fe=xe.type,lt=xe.pendingProps;if(ae?Xc(ae):gp(Fe,lt)){ei=0,Ws=null;var xt=xe.sibling;if(xt!==null)Gt=xt;else{var Tt=xe.return;Tt!==null?(Gt=Tt,Ha(Tt)):Gt=null}break t}}ei=0,Ws=null,hr(h,p,F,5);break;case 6:ei=0,Ws=null,hr(h,p,F,6);break;case 8:Fu(),oi=6;break e;default:throw Error(s(462))}}na();break}catch(Ct){Ga(h,Ct)}while(!0);return Ka=jr=null,Wt.H=E,Wt.A=B,On=x,Gt!==null?0:(qn=null,Sn=0,Z(),oi)}function na(){for(;Gt!==null&&!ay();)wi(Gt)}function wi(h){var p=h1(h.alternate,h,qs);h.memoizedProps=h.pendingProps,p===null?Ha(h):Gt=p}function Vn(h){var p=h,x=p.alternate;switch(p.tag){case 15:case 0:p=th(x,p,p.pendingProps,p.type,void 0,Sn);break;case 11:p=th(x,p,p.pendingProps,p.type.render,p.ref,Sn);break;case 5:_n(p);default:m1(x,p),p=Gt=yh(p,qs),p=h1(x,p,qs)}h.memoizedProps=h.pendingProps,p===null?Ha(h):Gt=p}function hr(h,p,x,E){Ka=jr=null,_n(p),uc=null,fc=0;var B=p.return;try{if(c0(h,B,p,x,Sn)){oi=1,cr(h,re(x,h.current)),Gt=null;return}}catch(F){if(B!==null)throw Gt=B,F;oi=1,cr(h,re(x,h.current)),Gt=null;return}p.flags&32768?(Dn||E===1?h=!0:Za||(Sn&536870912)!==0?h=!1:(Mr=h=!0,(E===2||E===3||E===6)&&(E=Wa.current,E!==null&&E.tag===13&&(E.flags|=16384))),op(p,h)):Ha(p)}function Ha(h){var p=h;do{if((p.flags&32768)!==0){op(p,Mr);return}h=p.return;var x=p1(p.alternate,p,qs);if(x!==null){Gt=x;return}if(p=p.sibling,p!==null){Gt=p;return}Gt=p=h}while(p!==null);oi===0&&(oi=5)}function op(h,p){do{var x=KS(h.alternate,h);if(x!==null){x.flags&=32767,Gt=x;return}if(x=h.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!p&&(h=h.sibling,h!==null)){Gt=h;return}Gt=h=x}while(h!==null);oi=6,Gt=null}function Ql(h,p,x,E,B,F,ae,xe,Fe,lt){var xt=Wt.T,Tt=gl();try{Ys(2),Wt.T=null,_1(h,p,x,E,Tt,B,F,ae,xe,Fe,lt)}finally{Wt.T=xt,Ys(Tt)}}function _1(h,p,x,E,B,F,ae,xe){do Ir();while(Ro!==null);if((On&6)!==0)throw Error(s(327));var Fe=h.finishedWork;if(E=h.finishedLanes,Fe===null)return null;if(h.finishedWork=null,h.finishedLanes=0,Fe===h.current)throw Error(s(177));h.callbackNode=null,h.callbackPriority=0,h.cancelPendingCommit=null;var lt=Fe.lanes|Fe.childLanes;if(lt|=kr,X(h,E,lt,F,ae,xe),h===qn&&(Gt=qn=null,Sn=0),(Fe.subtreeFlags&10256)===0&&(Fe.flags&10256)===0||Wr||(Wr=!0,gc=lt,Pp=x,hl(Rp,function(){return Ir(),null})),x=(Fe.flags&15990)!==0,(Fe.subtreeFlags&15990)!==0||x?(x=Wt.T,Wt.T=null,F=gl(),Ys(2),ae=On,On|=4,fh(h,Fe),M0(Fe,h),M1(h.containerInfo),h.current=Fe,ep(h,Fe.alternate,Fe),Cp(),On=ae,Ys(F),Wt.T=x):h.current=Fe,Wr?(Wr=!1,Ro=h,au=E):D0(h,lt),lt=h.pendingLanes,lt===0&&(mc=null),z(Fe.stateNode),Se(h),p!==null)for(B=h.onRecoverableError,Fe=0;Fe<p.length;Fe++)lt=p[Fe],B(lt.value,{componentStack:lt.stack});return(au&3)!==0&&Ir(),lt=h.pendingLanes,(E&4194218)!==0&&(lt&42)!==0?h===Ip?cf++:(cf=0,Ip=h):cf=0,ye(0),null}function D0(h,p){(h.pooledCacheLanes&=p)===0&&(p=h.pooledCache,p!=null&&(h.pooledCache=null,oh(p)))}function Ir(){if(Ro!==null){var h=Ro,p=gc;gc=0;var x=ce(au),E=32>x?32:x;x=Wt.T;var B=gl();try{if(Ys(E),Wt.T=null,Ro===null)var F=!1;else{E=Pp,Pp=null;var ae=Ro,xe=au;if(Ro=null,au=0,(On&6)!==0)throw Error(s(331));var Fe=On;if(On|=4,sp(ae.current),b0(ae,ae.current,xe,E),On=Fe,ye(0,!1),Ta&&typeof Ta.onPostCommitFiberRoot=="function")try{Ta.onPostCommitFiberRoot(Wi,ae)}catch{}F=!0}return F}finally{Ys(B),Wt.T=x,D0(h,p)}}return!1}function zu(h,p,x){p=re(x,p),p=ur(h.stateNode,p,2),h=Ke(h,p,2),h!==null&&(k(h,2),Se(h))}function Yn(h,p,x){if(h.tag===3)zu(h,h,x);else for(;p!==null;){if(p.tag===3){zu(p,h,x);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(mc===null||!mc.has(E))){h=re(x,h),x=Fc(2),E=Ke(p,x,2),E!==null&&(Xs(x,E,p,h),k(E,2),Se(E));break}}p=p.return}}function Hc(h,p,x){var E=h.pingCache;if(E===null){E=h.pingCache=new Ar;var B=new Set;E.set(p,B)}else B=E.get(p),B===void 0&&(B=new Set,E.set(p,B));B.has(x)||(ds=!0,B.add(x),h=B0.bind(null,h,p,x),p.then(h,h))}function B0(h,p,x){var E=h.pingCache;E!==null&&E.delete(p),h.pingedLanes|=h.suspendedLanes&x,h.warmLanes&=~x,qn===h&&(Sn&x)===x&&(oi===4||oi===3&&(Sn&62914560)===Sn&&300>vr()-oa?(On&2)===0&&Ns(h,0):Ih|=x,wo===Sn&&(wo=0)),Se(h)}function $l(h,p){p===0&&(p=N()),h=Re(h,p),h!==null&&(k(h,p),Se(h))}function fl(h){var p=h.memoizedState,x=0;p!==null&&(x=p.retryLane),$l(h,x)}function ec(h,p){var x=0;switch(h.tag){case 13:var E=h.stateNode,B=h.memoizedState;B!==null&&(x=B.retryLane);break;case 19:E=h.stateNode;break;case 22:E=h.stateNode._retryCache;break;default:throw Error(s(314))}E!==null&&E.delete(p),$l(h,x)}function hl(h,p){return Uh(h,p)}function U0(h,p,x,E){this.tag=h,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vh(h){return h=h.prototype,!(!h||!h.isReactComponent)}function dr(h,p){var x=h.alternate;return x===null?(x=t(h.tag,p,h.key,h.mode),x.elementType=h.elementType,x.type=h.type,x.stateNode=h.stateNode,x.alternate=h,h.alternate=x):(x.pendingProps=p,x.type=h.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=h.flags&31457280,x.childLanes=h.childLanes,x.lanes=h.lanes,x.child=h.child,x.memoizedProps=h.memoizedProps,x.memoizedState=h.memoizedState,x.updateQueue=h.updateQueue,p=h.dependencies,x.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},x.sibling=h.sibling,x.index=h.index,x.ref=h.ref,x.refCleanup=h.refCleanup,x}function yh(h,p){h.flags&=31457282;var x=h.alternate;return x===null?(h.childLanes=0,h.lanes=p,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=x.childLanes,h.lanes=x.lanes,h.child=x.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=x.memoizedProps,h.memoizedState=x.memoizedState,h.updateQueue=x.updateQueue,h.type=x.type,p=x.dependencies,h.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),h}function vo(h,p,x,E,B,F){var ae=0;if(E=h,typeof h=="function")vh(h)&&(ae=1);else if(typeof h=="string")ae=ka&&si?Rh(h,x,fs.current)?26:_o(h)?27:5:ka?Rh(h,x,fs.current)?26:5:si&&_o(h)?27:5;else e:switch(h){case tc:return Li(x.children,B,F,p);case Ah:ae=8,B|=24;break;case fp:return h=t(12,x,p,B|2),h.elementType=fp,h.lanes=F,h;case hp:return h=t(13,x,p,B),h.elementType=hp,h.lanes=F,h;case ku:return h=t(19,x,p,B),h.elementType=ku,h.lanes=F,h;case N0:return _h(x,B,F,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case Mh:case Fr:ae=10;break e;case O0:ae=9;break e;case bh:ae=11;break e;case dp:ae=14;break e;case mr:ae=16,E=null;break e}ae=29,x=Error(s(130,h===null?"null":typeof h,"")),E=null}return p=t(ae,x,p,B),p.elementType=h,p.type=E,p.lanes=F,p}function Li(h,p,x,E){return h=t(7,h,E,p),h.lanes=x,h}function _h(h,p,x,E){h=t(22,h,E,p),h.elementType=N0,h.lanes=x;var B={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var F=B._current;if(F===null)throw Error(s(456));if((B._pendingVisibility&2)===0){var ae=Re(F,2);ae!==null&&(B._pendingVisibility|=2,Ss(ae,F,2))}},attach:function(){var F=B._current;if(F===null)throw Error(s(456));if((B._pendingVisibility&2)!==0){var ae=Re(F,2);ae!==null&&(B._pendingVisibility&=-3,Ss(ae,F,2))}}};return h.stateNode=B,h}function lp(h,p,x){return h=t(6,h,null,p),h.lanes=x,h}function L0(h,p,x){return p=t(4,h.children!==null?h.children:[],h.key,p),p.lanes=x,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function JS(h,p,x,E,B,F,ae,xe){this.tag=1,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=nc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=L(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L(0),this.hiddenUpdates=L(null),this.identifierPrefix=E,this.onUncaughtError=B,this.onCaughtError=F,this.onRecoverableError=ae,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=xe,this.incompleteTransitions=new Map}function x1(h,p,x,E,B,F,ae,xe,Fe,lt,xt,Tt){return h=new JS(h,p,x,ae,xe,Fe,lt,Tt),p=1,F===!0&&(p|=24),F=t(3,null,null,p),h.current=F,F.stateNode=h,p=jl(),p.refCount++,h.pooledCache=p,p.refCount++,F.memoizedState={element:E,isDehydrated:x,cache:p},ut(F),h}function ts(h){return h?(h=oc,h):oc}function cp(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(s(188)):(h=Object.keys(h).join(","),Error(s(268,h)));return h=y(p),h=h!==null?S(h):null,h===null?null:Yu(h.stateNode)}function Gu(h,p,x,E,B,F){B=ts(B),E.context===null?E.context=B:E.pendingContext=B,E=Oe(p),E.payload={element:x},F=F===void 0?null:F,F!==null&&(E.callback=F),x=Ke(h,E,p),x!==null&&(Ss(x,h,p),it(x,h,p))}function Hu(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var x=h.retryLane;h.retryLane=x!==0&&x<p?x:p}}function xh(h,p){Hu(h,p),(h=h.alternate)&&Hu(h,p)}var on={},Vu=Zm(),Va=vG(),up=Object.assign,ZS=Symbol.for("react.element"),Sh=Symbol.for("react.transitional.element"),pr=Symbol.for("react.portal"),tc=Symbol.for("react.fragment"),Ah=Symbol.for("react.strict_mode"),fp=Symbol.for("react.profiler"),Mh=Symbol.for("react.provider"),O0=Symbol.for("react.consumer"),Fr=Symbol.for("react.context"),bh=Symbol.for("react.forward_ref"),hp=Symbol.for("react.suspense"),ku=Symbol.for("react.suspense_list"),dp=Symbol.for("react.memo"),mr=Symbol.for("react.lazy"),N0=Symbol.for("react.offscreen"),S1=Symbol.for("react.memo_cache_sentinel"),dl=Symbol.iterator,P0=Symbol.for("react.client.reference"),Wt=Vu.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,yo,pl,Vc=!1,Xu=Array.isArray,I0=e.rendererVersion,Th=e.rendererPackageName,ju=e.extraDevToolsConfig,Yu=e.getPublicInstance,A1=e.getRootHostContext,Wu=e.getChildHostContext,pp=e.prepareForCommit,M1=e.resetAfterCommit,F0=e.createInstance,Eh=e.appendInitialChild,ml=e.finalizeInitialChildren,ln=e.shouldSetTextContent,Qn=e.createTextInstance,ns=e.scheduleTimeout,mp=e.cancelTimeout,nc=e.noTimeout,ia=e.isPrimaryRenderer;e.warnsIfNotActing;var us=e.supportsMutation,gr=e.supportsPersistence,Ps=e.supportsHydration,b1=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var ji=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Ys=e.setCurrentUpdatePriority,gl=e.getCurrentUpdatePriority,T1=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var E1=e.shouldAttemptEagerTransition,QS=e.detachDeletedInstance;e.requestPostPaintCallback;var z0=e.maySuspendCommit,gp=e.preloadInstance,G0=e.startSuspendingCommit,sa=e.suspendInstance,is=e.waitForCommitToBeReady,ic=e.NotPendingTransition,zr=e.HostTransitionContext,vp=e.resetFormInstance;e.bindToConsole;var H0=e.supportsMicrotasks,vl=e.scheduleMicrotask,sc=e.supportsTestSelectors,V0=e.findFiberRoot,k0=e.getBoundingRect,C1=e.getTextContent,qu=e.isHiddenSubtree,w1=e.matchAccessibilityRole,R1=e.setFocusIfFocusable,D1=e.setupIntersectionObserver,B1=e.appendChild,X0=e.appendChildToContainer,U1=e.commitTextUpdate,$S=e.commitMount,L1=e.commitUpdate,O1=e.insertBefore,N1=e.insertInContainerBefore,j0=e.removeChild,P1=e.removeChildFromContainer,Y0=e.resetTextContent,I1=e.hideInstance,F1=e.hideTextInstance,z1=e.unhideInstance,eA=e.unhideTextInstance,G1=e.clearContainer,Ku=e.cloneInstance,Ch=e.createContainerChildSet,W0=e.appendChildToContainerChildSet,yp=e.finalizeContainerChildren,Ju=e.replaceContainerChildren,q0=e.cloneHiddenInstance,K0=e.cloneHiddenTextInstance,_p=e.isSuspenseInstancePending,xp=e.isSuspenseInstanceFallback,H1=e.getSuspenseInstanceFallbackErrorDetails,V1=e.registerSuspenseInstanceRetry,J0=e.canHydrateFormStateMarker,k1=e.isFormStateMarkerMatching,Z0=e.getNextHydratableSibling,Sp=e.getFirstHydratableChild,X1=e.getFirstHydratableChildWithinContainer,j1=e.getFirstHydratableChildWithinSuspenseInstance,tA=e.canHydrateInstance,Q0=e.canHydrateTextInstance,Y1=e.canHydrateSuspenseInstance,W1=e.hydrateInstance,$0=e.hydrateTextInstance,q1=e.hydrateSuspenseInstance,K1=e.getNextHydratableInstanceAfterSuspenseInstance,nA=e.commitHydratedContainer,iA=e.commitHydratedSuspenseInstance,J1=e.clearSuspenseBoundary,wh=e.clearSuspenseBoundaryFromContainer,Ap=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Mp=e.validateHydratableInstance,Z1=e.validateHydratableTextInstance,ka=e.supportsResources,Rh=e.isHostHoistableType,bp=e.getHoistableRoot,eg=e.getResource,Q1=e.acquireResource,kc=e.releaseResource,Dh=e.hydrateHoistable,Bh=e.mountHoistable,Zu=e.unmountHoistable,Tp=e.createHoistableInstance,$1=e.prepareToCommitHoistables,ey=e.mayResourceSuspendCommit,Xc=e.preloadResource,ty=e.suspendResource,si=e.supportsSingletons,Gr=e.resolveSingletonInstance,ac=e.clearSingleton,ny=e.acquireSingletonInstance,rc=e.releaseSingletonInstance,_o=e.isHostSingletonType,Yi=[],yl=-1,oc={},aa=Math.clz32?Math.clz32:w,iy=Math.log,sy=Math.LN2,xo=128,jc=4194304,Uh=Va.unstable_scheduleCallback,Ep=Va.unstable_cancelCallback,ay=Va.unstable_shouldYield,Cp=Va.unstable_requestPaint,vr=Va.unstable_now,wp=Va.unstable_ImmediatePriority,ry=Va.unstable_UserBlockingPriority,Rp=Va.unstable_NormalPriority,sA=Va.unstable_IdlePriority,oy=Va.log,As=Va.unstable_setDisableYieldValue,Wi=null,Ta=null,Ea=typeof Object.is=="function"?Object.is:Q,tg=new WeakMap,Yc=[],Wc=0,qc=null,Qu=0,Xa=[],ja=0,lc=null,Hr=1,Vr="",fs=M(null),$u=M(null),So=M(null),Kc=M(null),Is=null,Fs=null,Dn=!1,yr=null,Ms=!1,Lh=Error(s(519)),_r=[],Jc=0,kr=0,Oh=null,_l=null,Zc=!1,fi=!1,ng=!1,ef=0,tf=null,Qc=0,Ya=0,$c=null,xl=!1,eu=!1,Ao=Object.prototype.hasOwnProperty,nf=Error(s(460)),Nh=Error(s(474)),Ph={then:function(){}},cc=null,uc=null,fc=0,hc=Pt(!0),Mo=Pt(!1),hi=M(null),sf=M(0),Wa=M(null),ai=null,hs=M(0),Sl=0,dn=null,zt=null,Ln=null,xr=!1,tu=!1,dc=!1,Dp=0,nu=0,bs=null,Xr=0,Bp=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Oi={readContext:Us,use:Te,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useLayoutEffect:Kt,useInsertionEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useSyncExternalStore:Kt,useId:Kt};Oi.useCacheRefresh=Kt,Oi.useMemoCache=Kt,Oi.useHostTransitionStatus=Kt,Oi.useFormState=Kt,Oi.useActionState=Kt,Oi.useOptimistic=Kt;var pc={readContext:Us,use:Te,useCallback:function(h,p){return te().memoizedState=[h,p===void 0?null:p],h},useContext:Us,useEffect:Hl,useImperativeHandle:function(h,p,x){x=x!=null?x.concat([h]):null,fo(4194308,4,Or.bind(null,p,h),x)},useLayoutEffect:function(h,p){return fo(4194308,4,h,p)},useInsertionEffect:function(h,p){fo(4,2,h,p)},useMemo:function(h,p){var x=te();p=p===void 0?null:p;var E=h();if(dc){q(!0);try{h()}finally{q(!1)}}return x.memoizedState=[E,p],E},useReducer:function(h,p,x){var E=te();if(x!==void 0){var B=x(p);if(dc){q(!0);try{x(p)}finally{q(!1)}}}else B=p;return E.memoizedState=E.baseState=B,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:B},E.queue=h,h=h.dispatch=Ic.bind(null,dn,h),[E.memoizedState,h]},useRef:function(h){var p=te();return h={current:h},p.memoizedState=h},useState:function(h){h=Xt(h);var p=h.queue,x=Du.bind(null,dn,p);return p.dispatch=x,[h.memoizedState,x]},useDebugValue:ga,useDeferredValue:function(h,p){var x=te();return Ko(x,h,p)},useTransition:function(){var h=Xt(!1);return h=Jo.bind(null,dn,h.queue,!0,!1),te().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,p,x){var E=dn,B=te();if(Dn){if(x===void 0)throw Error(s(407));x=x()}else{if(x=p(),qn===null)throw Error(s(349));(Sn&60)!==0||Rt(E,p,x)}B.memoizedState=x;var F={value:x,getSnapshot:p};return B.queue=F,Hl(Yt.bind(null,E,F,h),[h]),E.flags|=2048,Bi(9,wt.bind(null,E,F,x,p),{destroy:void 0},null),x},useId:function(){var h=te(),p=qn.identifierPrefix;if(Dn){var x=Vr,E=Hr;x=(E&~(1<<32-aa(E)-1)).toString(32)+x,p=":"+p+"R"+x,x=Dp++,0<x&&(p+="H"+x.toString(32)),p+=":"}else x=Xr++,p=":"+p+"r"+x.toString(32)+":";return h.memoizedState=p},useCacheRefresh:function(){return te().memoizedState=Pc.bind(null,dn)}};pc.useMemoCache=De,pc.useHostTransitionStatus=Zo,pc.useFormState=Hn,pc.useActionState=Hn,pc.useOptimistic=function(h){var p=te();p.memoizedState=p.baseState=h;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=x,p=$o.bind(null,dn,!0,x),x.dispatch=p,[h,p]};var ra={readContext:Us,use:Te,useCallback:po,useContext:Us,useEffect:Wo,useImperativeHandle:Nr,useInsertionEffect:$f,useLayoutEffect:ho,useMemo:qo,useReducer:yt,useRef:ks,useState:function(){return yt(ht)},useDebugValue:ga,useDeferredValue:function(h,p){var x=Ee();return Nc(x,zt.memoizedState,h,p)},useTransition:function(){var h=yt(ht)[0],p=Ee().memoizedState;return[typeof h=="boolean"?h:Ye(h),p]},useSyncExternalStore:Bt,useId:Qo};ra.useCacheRefresh=Vi,ra.useMemoCache=De,ra.useHostTransitionStatus=Zo,ra.useFormState=Mi,ra.useActionState=Mi,ra.useOptimistic=function(h,p){var x=Ee();return nn(x,zt,h,p)};var qa={readContext:Us,use:Te,useCallback:po,useContext:Us,useEffect:Wo,useImperativeHandle:Nr,useInsertionEffect:$f,useLayoutEffect:ho,useMemo:qo,useReducer:bt,useRef:ks,useState:function(){return bt(ht)},useDebugValue:ga,useDeferredValue:function(h,p){var x=Ee();return zt===null?Ko(x,h,p):Nc(x,zt.memoizedState,h,p)},useTransition:function(){var h=bt(ht)[0],p=Ee().memoizedState;return[typeof h=="boolean"?h:Ye(h),p]},useSyncExternalStore:Bt,useId:Qo};qa.useCacheRefresh=Vi,qa.useMemoCache=De,qa.useHostTransitionStatus=Zo,qa.useFormState=vi,qa.useActionState=vi,qa.useOptimistic=function(h,p){var x=Ee();return zt!==null?nn(x,zt,h,p):(x.baseState=h,[h,x.queue.dispatch])};var bo={isMounted:function(h){return(h=h._reactInternals)?g(h)===h:!1},enqueueSetState:function(h,p,x){h=h._reactInternals;var E=Xi(),B=Oe(E);B.payload=p,x!=null&&(B.callback=x),p=Ke(h,B,E),p!==null&&(Ss(p,h,E),it(p,h,E))},enqueueReplaceState:function(h,p,x){h=h._reactInternals;var E=Xi(),B=Oe(E);B.tag=1,B.payload=p,x!=null&&(B.callback=x),p=Ke(h,B,E),p!==null&&(Ss(p,h,E),it(p,h,E))},enqueueForceUpdate:function(h,p){h=h._reactInternals;var x=Xi(),E=Oe(x);E.tag=2,p!=null&&(E.callback=p),p=Ke(h,E,x),p!==null&&(Ss(p,h,x),it(p,h,x))}},Up=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},Lp=Error(s(461)),ri=!1,Op={dehydrated:null,treeContext:null,retryLane:0},Al=M(null),jr=null,Ka=null,af=typeof AbortController<"u"?AbortController:function(){var h=[],p=this.signal={aborted:!1,addEventListener:function(x,E){h.push(E)}};this.abort=function(){p.aborted=!0,h.forEach(function(x){return x()})}},ly=Va.unstable_scheduleCallback,cy=Va.unstable_NormalPriority,di={$$typeof:Fr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},ig=Wt.S;Wt.S=function(h,p){typeof p=="object"&&p!==null&&typeof p.then=="function"&&Me(h,p),ig!==null&&ig(h,p)};var To=M(null),Eo=!1,Ni=!1,sg=!1,Wn=typeof WeakSet=="function"?WeakSet:Set,sn=null,yn=!1,It=null,hn=!1,Ri=null,Ja=8192,rf={getCacheForType:function(h){var p=Us(di),x=p.data.get(h);return x===void 0&&(x=h(),p.data.set(h,x)),x}},of=0,Sr=1,yi=2,Yr=3,Co=4;if(typeof Symbol=="function"&&Symbol.for){var iu=Symbol.for;of=iu("selector.component"),Sr=iu("selector.has_pseudo_class"),yi=iu("selector.role"),Yr=iu("selector.test_id"),Co=iu("selector.text")}var Ar=typeof WeakMap=="function"?WeakMap:Map,On=0,qn=null,Gt=null,Sn=0,ei=0,Ws=null,Mr=!1,Za=!1,ds=!1,qs=0,oi=0,Qa=0,Ml=0,Ih=0,$a=0,wo=0,su=null,Pi=null,Np=!1,oa=0,lf=1/0,Fh=null,mc=null,Wr=!1,Ro=null,au=0,gc=0,Pp=null,cf=0,Ip=null;return on.attemptContinuousHydration=function(h){if(h.tag===13){var p=Re(h,67108864);p!==null&&Ss(p,h,67108864),xh(h,67108864)}},on.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var p=Xi(),x=Re(h,p);x!==null&&Ss(x,h,p),xh(h,p)}},on.attemptSynchronousHydration=function(h){switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var p=R(h.pendingLanes);if(p!==0){for(h.pendingLanes|=2,h.entangledLanes|=2;p;){var x=1<<31-aa(p);h.entanglements[1]|=x,p&=~x}Se(h),(On&6)===0&&(lf=vr()+500,ye(0))}}break;case 13:p=Re(h,2),p!==null&&Ss(p,h,2),gh(),xh(h,2)}},on.batchedUpdates=function(h,p){return h(p)},on.createComponentSelector=function(h){return{$$typeof:of,value:h}},on.createContainer=function(h,p,x,E,B,F,ae,xe,Fe,lt){return x1(h,p,!1,null,x,E,F,ae,xe,Fe,lt,null)},on.createHasPseudoClassSelector=function(h){return{$$typeof:Sr,value:h}},on.createHydrationContainer=function(h,p,x,E,B,F,ae,xe,Fe,lt,xt,Tt,Ct){return h=x1(x,E,!0,h,B,F,xe,Fe,lt,xt,Tt,Ct),h.context=ts(null),x=h.current,E=Xi(),B=Oe(E),B.callback=p??null,Ke(x,B,E),h.current.lanes=E,k(h,E),Se(h),h},on.createPortal=function(h,p,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pr,key:E==null?null:""+E,children:h,containerInfo:p,implementation:x}},on.createRoleSelector=function(h){return{$$typeof:yi,value:h}},on.createTestNameSelector=function(h){return{$$typeof:Yr,value:h}},on.createTextSelector=function(h){return{$$typeof:Co,value:h}},on.defaultOnCaughtError=function(h){console.error(h)},on.defaultOnRecoverableError=function(h){Up(h)},on.defaultOnUncaughtError=function(h){Up(h)},on.deferredUpdates=function(h){var p=Wt.T,x=gl();try{return Ys(32),Wt.T=null,h()}finally{Ys(x),Wt.T=p}},on.discreteUpdates=function(h,p,x,E,B){var F=Wt.T,ae=gl();try{return Ys(2),Wt.T=null,h(p,x,E,B)}finally{Ys(ae),Wt.T=F,On===0&&(lf=vr()+500)}},on.findAllNodes=ph,on.findBoundingRects=function(h,p){if(!sc)throw Error(s(363));p=ph(h,p),h=[];for(var x=0;x<p.length;x++)h.push(k0(p[x]));for(p=h.length-1;0<p;p--){x=h[p];for(var E=x.x,B=E+x.width,F=x.y,ae=F+x.height,xe=p-1;0<=xe;xe--)if(p!==xe){var Fe=h[xe],lt=Fe.x,xt=lt+Fe.width,Tt=Fe.y,Ct=Tt+Fe.height;if(E>=lt&&F>=Tt&&B<=xt&&ae<=Ct){h.splice(p,1);break}else if(E!==lt||x.width!==Fe.width||Ct<F||Tt>ae){if(!(F!==Tt||x.height!==Fe.height||xt<E||lt>B)){lt>E&&(Fe.width+=lt-E,Fe.x=E),xt<B&&(Fe.width=B-lt),h.splice(p,1);break}}else{Tt>F&&(Fe.height+=Tt-F,Fe.y=F),Ct<ae&&(Fe.height=ae-Tt),h.splice(p,1);break}}}return h},on.findHostInstance=cp,on.findHostInstanceWithNoPortals=function(h){return h=y(h),h=h!==null?A(h):null,h===null?null:Yu(h.stateNode)},on.findHostInstanceWithWarning=function(h){return cp(h)},on.flushPassiveEffects=Ir,on.flushSyncFromReconciler=function(h){var p=On;On|=1;var x=Wt.T,E=gl();try{if(Ys(2),Wt.T=null,h)return h()}finally{Ys(E),Wt.T=x,On=p,(On&6)===0&&ye(0)}},on.flushSyncWork=gh,on.focusWithin=function(h,p){if(!sc)throw Error(s(363));for(h=Pu(h),p=Ma(h,p),p=Array.from(p),h=0;h<p.length;){var x=p[h++],E=x.tag;if(!qu(x)){if((E===5||E===26||E===27)&&R1(x.stateNode))return!0;for(x=x.child;x!==null;)p.push(x),x=x.sibling}}return!1},on.getFindAllNodesFailureDescription=function(h,p){if(!sc)throw Error(s(363));var x=0,E=[];h=[Pu(h),0];for(var B=0;B<h.length;){var F=h[B++],ae=F.tag,xe=h[B++],Fe=p[xe];if((ae!==5&&ae!==26&&ae!==27||!qu(F))&&(Kl(F,Fe)&&(E.push(E0(Fe)),xe++,xe>x&&(x=xe)),xe<p.length))for(F=F.child;F!==null;)h.push(F,xe),F=F.sibling}if(x<p.length){for(h=[];x<p.length;x++)h.push(E0(p[x]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},on.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 27:case 5:return Yu(h.child.stateNode);default:return h.child.stateNode}},on.injectIntoDevTools=function(){var h={bundleType:0,version:I0,rendererPackageName:Th,currentDispatcherRef:Wt,findFiberByHostInstance:b1,reconcilerVersion:"19.0.0"};if(ju!==null&&(h.rendererConfig=ju),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)h=!0;else{try{Wi=p.inject(h),Ta=p}catch{}h=!!p.checkDCE}}return h},on.isAlreadyRendering=function(){return!1},on.observeVisibleRects=function(h,p,x,E){if(!sc)throw Error(s(363));h=ph(h,p);var B=D1(h,x,E).disconnect;return{disconnect:function(){B()}}},on.shouldError=function(){return null},on.shouldSuspend=function(){return!1},on.startHostTransition=function(h,p,x,E){if(h.tag!==5)throw Error(s(476));var B=$s(h).queue;Jo(h,B,p,ic,x===null?n:function(){var F=$s(h).next.queue;return lr(h,F,{},Xi()),x(E)})},on.updateContainer=function(h,p,x,E){var B=p.current,F=Xi();return Gu(B,F,h,p,x,E),F},on.updateContainerSync=function(h,p,x,E){return p.tag===0&&Ir(),Gu(p.current,2,h,p,x,E),2},on},i.exports.default=i.exports,Object.defineProperty(i.exports,"__esModule",{value:!0})}(D2)),D2.exports}var fw;function _G(){return fw||(fw=1,R2.exports=yG()),R2.exports}var xG=_G();const SG=Zx(xG);var L2={exports:{}},O2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hw;function AG(){return hw||(hw=1,function(i){function e(z,q){var Q=z.length;z.push(q);e:for(;0<Q;){var re=Q-1>>>1,H=z[re];if(0<s(H,q))z[re]=q,z[Q]=H,Q=re;else break e}}function t(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var q=z[0],Q=z.pop();if(Q!==q){z[0]=Q;e:for(var re=0,H=z.length,G=H>>>1;re<G;){var K=2*(re+1)-1,se=z[K],J=K+1,ne=z[J];if(0>s(se,Q))J<H&&0>s(ne,se)?(z[re]=ne,z[J]=Q,re=J):(z[re]=se,z[K]=Q,re=K);else if(J<H&&0>s(ne,Q))z[re]=ne,z[J]=Q,re=J;else break e}}return q}function s(z,q){var Q=z.sortIndex-q.sortIndex;return Q!==0?Q:z.id-q.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var r=Date,l=r.now();i.unstable_now=function(){return r.now()-l}}var c=[],f=[],d=1,g=null,v=3,y=!1,S=!1,A=!1,M=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function w(z){for(var q=t(f);q!==null;){if(q.callback===null)n(f);else if(q.startTime<=z)n(f),q.sortIndex=q.expirationTime,e(c,q);else break;q=t(f)}}function R(z){if(A=!1,w(z),!S)if(t(c)!==null)S=!0,$();else{var q=t(f);q!==null&&ce(R,q.startTime-z)}}var U=!1,O=-1,I=5,P=-1;function N(){return!(i.unstable_now()-P<I)}function L(){if(U){var z=i.unstable_now();P=z;var q=!0;try{e:{S=!1,A&&(A=!1,b(O),O=-1),y=!0;var Q=v;try{t:{for(w(z),g=t(c);g!==null&&!(g.expirationTime>z&&N());){var re=g.callback;if(typeof re=="function"){g.callback=null,v=g.priorityLevel;var H=re(g.expirationTime<=z);if(z=i.unstable_now(),typeof H=="function"){g.callback=H,w(z),q=!0;break t}g===t(c)&&n(c),w(z)}else n(c);g=t(c)}if(g!==null)q=!0;else{var G=t(f);G!==null&&ce(R,G.startTime-z),q=!1}}break e}finally{g=null,v=Q,y=!1}q=void 0}}finally{q?k():U=!1}}}var k;if(typeof C=="function")k=function(){C(L)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,W=X.port2;X.port1.onmessage=L,k=function(){W.postMessage(null)}}else k=function(){M(L,0)};function $(){U||(U=!0,k())}function ce(z,q){O=M(function(){z(i.unstable_now())},q)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_continueExecution=function(){S||y||(S=!0,$())},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_getFirstCallbackNode=function(){return t(c)},i.unstable_next=function(z){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var Q=v;v=q;try{return z()}finally{v=Q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=v;v=z;try{return q()}finally{v=Q}},i.unstable_scheduleCallback=function(z,q,Q){var re=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?re+Q:re):Q=re,z){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Q+H,z={id:d++,callback:q,priorityLevel:z,startTime:Q,expirationTime:H,sortIndex:-1},Q>re?(z.sortIndex=Q,e(f,z),t(c)===null&&z===t(f)&&(A?(b(O),O=-1):A=!0,ce(R,Q-re))):(z.sortIndex=H,e(c,z),S||y||(S=!0,$())),z},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(z){var q=v;return function(){var Q=v;v=q;try{return z.apply(this,arguments)}finally{v=Q}}}}(O2)),O2}var dw;function MG(){return dw||(dw=1,L2.exports=AG()),L2.exports}var pw=MG();const bG=i=>typeof i=="object"&&typeof i.then=="function",gd=[];function U4(i,e,t=(n,s)=>n===s){if(i===e)return!0;if(!i||!e)return!1;const n=i.length;if(e.length!==n)return!1;for(let s=0;s<n;s++)if(!t(i[s],e[s]))return!1;return!0}function L4(i,e=null,t=!1,n={}){e===null&&(e=[i]);for(const a of gd)if(U4(e,a.keys,a.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return n.lifespan&&n.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,n.lifespan)),a.response;if(!t)throw a.promise}const s={keys:e,equal:n.equal,remove:()=>{const a=gd.indexOf(s);a!==-1&&gd.splice(a,1)},promise:(bG(i)?i:i(...e)).then(a=>{s.response=a,n.lifespan&&n.lifespan>0&&(s.timeout=setTimeout(s.remove,n.lifespan))}).catch(a=>s.error=a)};if(gd.push(s),!t)throw s.promise}const O4=(i,e,t)=>L4(i,e,!1,t),TG=(i,e,t)=>void L4(i,e,!0,t),EG=i=>{if(i===void 0||i.length===0)gd.splice(0,gd.length);else{const e=gd.find(t=>U4(i,t.keys,t.equal));e&&e.remove()}};function MT(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=e?i.return:i.child;for(;n;){const s=MT(n,e,t);if(s)return s;n=e?null:n.sibling}}function N4(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const bT=N4(ge.createContext(null));class P4 extends ge.Component{render(){return ge.createElement(bT.Provider,{value:this._reactInternals},this.props.children)}}function I4(){const i=ge.useContext(bT);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ge.useId();return ge.useMemo(()=>{for(const t of[i,i?.alternate]){if(!t)continue;const n=MT(t,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(n)return n}},[i,e])}const CG=Symbol.for("react.context"),wG=i=>i!==null&&typeof i=="object"&&"$$typeof"in i&&i.$$typeof===CG;function RG(){const i=I4(),[e]=ge.useState(()=>new Map);e.clear();let t=i;for(;t;){const n=t.type;wG(n)&&n!==bT&&!e.has(n)&&e.set(n,ge.use(N4(n))),t=t.return}return e}function DG(){const i=RG();return ge.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>ge.createElement(e,null,ge.createElement(t.Provider,{...n,value:i.get(t)})),e=>ge.createElement(P4,{...e})),[i])}function F4(i){let e=i.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const z4=i=>i&&i.isOrthographicCamera,BG=i=>i&&i.hasOwnProperty("current"),UG=i=>i!=null&&(typeof i=="string"||typeof i=="number"||i.isColor),$v=((i,e)=>typeof window<"u"&&(((i=window.document)==null?void 0:i.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?ge.useLayoutEffect:ge.useEffect;function G4(i){const e=ge.useRef(i);return $v(()=>void(e.current=i),[i]),e}function LG(){const i=I4(),e=DG();return ge.useMemo(()=>({children:t})=>{const s=!!MT(i,!0,a=>a.type===ge.StrictMode)?ge.StrictMode:ge.Fragment;return oe.jsx(s,{children:oe.jsx(e,{children:t})})},[i,e])}function OG({set:i}){return $v(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}const NG=(i=>(i=class extends ge.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},i.getDerivedStateFromError=()=>({error:!0}),i))();function H4(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}function om(i){var e;return(e=i.__r3f)==null?void 0:e.root.getState()}const Ii={obj:i=>i===Object(i)&&!Ii.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,nul:i=>i===null,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:s=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(Ii.str(i)||Ii.num(i)||Ii.boo(i))return i===e;const a=Ii.obj(i);if(a&&n==="reference")return i===e;const r=Ii.arr(i);if(r&&t==="reference")return i===e;if((r||a)&&i===e)return!0;let l;for(l in i)if(!(l in e))return!1;if(a&&t==="shallow"&&n==="shallow"){for(l in s?e:i)if(!Ii.equ(i[l],e[l],{strict:s,objects:"reference"}))return!1}else for(l in s?e:i)if(i[l]!==e[l])return!1;if(Ii.und(l)){if(r&&i.length===0&&e.length===0||a&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function PG(i){const e={nodes:{},materials:{},meshes:{}};return i&&i.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function IG(i){i.type!=="Scene"&&(i.dispose==null||i.dispose());for(const e in i){const t=i[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const V4=["children","key","ref"];function FG(i){const e={};for(const t in i)V4.includes(t)||(e[t]=i[t]);return e}function Lx(i,e,t,n){const s=i;let a=s?.__r3f;return a||(a={root:e,type:t,parent:null,children:[],props:FG(n),object:s,eventCount:0,handlers:{},isHidden:!1},s&&(s.__r3f=a)),a}function Mv(i,e){let t=i[e];if(!e.includes("-"))return{root:i,key:e,target:t};t=i;for(const s of e.split("-")){var n;e=s,i=t,t=(n=t)==null?void 0:n[e]}return{root:i,key:e,target:t}}const mw=/-\d+$/;function Ox(i,e){if(Ii.str(e.props.attach)){if(mw.test(e.props.attach)){const s=e.props.attach.replace(mw,""),{root:a,key:r}=Mv(i.object,s);Array.isArray(a[r])||(a[r]=[])}const{root:t,key:n}=Mv(i.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else Ii.fun(e.props.attach)&&(e.previousAttach=e.props.attach(i.object,e.object))}function Nx(i,e){if(Ii.str(e.props.attach)){const{root:t,key:n}=Mv(i.object,e.props.attach),s=e.previousAttach;s===void 0?delete t[n]:t[n]=s}else e.previousAttach==null||e.previousAttach(i.object,e.object);delete e.previousAttach}const IM=[...V4,"args","dispose","attach","object","onUpdate","dispose"],gw=new Map;function zG(i){let e=gw.get(i.constructor);try{e||(e=new i.constructor,gw.set(i.constructor,e))}catch{}return e}function GG(i,e){const t={};for(const n in e)if(!IM.includes(n)&&!Ii.equ(e[n],i.props[n])){t[n]=e[n];for(const s in e)s.startsWith(`${n}-`)&&(t[s]=e[s])}for(const n in i.props){if(IM.includes(n)||e.hasOwnProperty(n))continue;const{root:s,key:a}=Mv(i.object,n);if(s.constructor&&s.constructor.length===0){const r=zG(s);Ii.und(r)||(t[a]=r[a])}else t[a]=0}return t}const HG=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],VG=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function wf(i,e){var t;const n=i.__r3f,s=n&&F4(n).getState(),a=n?.eventCount;for(const l in e){let c=e[l];if(IM.includes(l))continue;if(n&&VG.test(l)){typeof c=="function"?n.handlers[l]=c:delete n.handlers[l],n.eventCount=Object.keys(n.handlers).length;continue}if(c===void 0)continue;let{root:f,key:d,target:g}=Mv(i,l);if(g instanceof Pm&&c instanceof Pm)g.mask=c.mask;else if(g instanceof St&&UG(c))g.set(c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof g.copy=="function"&&c!=null&&c.constructor&&g.constructor===c.constructor)g.copy(c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&Array.isArray(c))typeof g.fromArray=="function"?g.fromArray(c):g.set(...c);else if(g!==null&&typeof g=="object"&&typeof g.set=="function"&&typeof c=="number")typeof g.setScalar=="function"?g.setScalar(c):g.set(c);else{var r;f[d]=c,s&&!s.linear&&HG.includes(d)&&(r=f[d])!=null&&r.isTexture&&f[d].format===Ua&&f[d].type===Gs&&(f[d].colorSpace=Zn)}}if(n!=null&&n.parent&&s!=null&&s.internal&&(t=n.object)!=null&&t.isObject3D&&a!==n.eventCount){const l=n.object,c=s.internal.interaction.indexOf(l);c>-1&&s.internal.interaction.splice(c,1),n.eventCount&&l.raycast!==null&&s.internal.interaction.push(l)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&n0(n),i}function n0(i){var e;if(!i.parent)return;i.props.onUpdate==null||i.props.onUpdate(i.object);const t=(e=i.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function kG(i,e){i.manual||(z4(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix())}const ir=i=>i?.isObject3D;function v_(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function k4(i,e,t,n){const s=t.get(e);s&&(t.delete(e),t.size===0&&(i.delete(n),s.target.releasePointerCapture(n)))}function XG(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,s)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((n,s)=>{k4(t.capturedMap,e,n,s)})}function jG(i){function e(c){const{internal:f}=i.getState(),d=c.offsetX-f.initialClick[0],g=c.offsetY-f.initialClick[1];return Math.round(Math.sqrt(d*d+g*g))}function t(c){return c.filter(f=>["Move","Over","Enter","Out","Leave"].some(d=>{var g;return(g=f.__r3f)==null?void 0:g.handlers["onPointer"+d]}))}function n(c,f){const d=i.getState(),g=new Set,v=[],y=f?f(d.internal.interaction):d.internal.interaction;for(let b=0;b<y.length;b++){const C=om(y[b]);C&&(C.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(c,d);function S(b){const C=om(b);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var w;C.events.compute==null||C.events.compute(c,C,(w=C.previousRoot)==null?void 0:w.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(b,!0):[]}let A=y.flatMap(S).sort((b,C)=>{const w=om(b.object),R=om(C.object);return!w||!R?b.distance-C.distance:R.events.priority-w.events.priority||b.distance-C.distance}).filter(b=>{const C=v_(b);return g.has(C)?!1:(g.add(C),!0)});d.events.filter&&(A=d.events.filter(A,d));for(const b of A){let C=b.object;for(;C;){var M;(M=C.__r3f)!=null&&M.eventCount&&v.push({...b,eventObject:C}),C=C.parent}}if("pointerId"in c&&d.internal.capturedMap.has(c.pointerId))for(let b of d.internal.capturedMap.get(c.pointerId).values())g.has(v_(b.intersection))||v.push(b.intersection);return v}function s(c,f,d,g){if(c.length){const v={stopped:!1};for(const y of c){let S=om(y.object);if(S||y.object.traverseAncestors(A=>{const M=om(A);if(M)return S=M,!1}),S){const{raycaster:A,pointer:M,camera:b,internal:C}=S,w=new le(M.x,M.y,0).unproject(b),R=N=>{var L,k;return(L=(k=C.capturedMap.get(N))==null?void 0:k.has(y.eventObject))!=null?L:!1},U=N=>{const L={intersection:y,target:f.target};C.capturedMap.has(N)?C.capturedMap.get(N).set(y.eventObject,L):C.capturedMap.set(N,new Map([[y.eventObject,L]])),f.target.setPointerCapture(N)},O=N=>{const L=C.capturedMap.get(N);L&&k4(C.capturedMap,y.eventObject,L,N)};let I={};for(let N in f){let L=f[N];typeof L!="function"&&(I[N]=L)}let P={...y,...I,pointer:M,intersections:c,stopped:v.stopped,delta:d,unprojectedPoint:w,ray:A.ray,camera:b,stopPropagation(){const N="pointerId"in f&&C.capturedMap.get(f.pointerId);if((!N||N.has(y.eventObject))&&(P.stopped=v.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(L=>L.eventObject===y.eventObject))){const L=c.slice(0,c.indexOf(y));a([...L,y])}},target:{hasPointerCapture:R,setPointerCapture:U,releasePointerCapture:O},currentTarget:{hasPointerCapture:R,setPointerCapture:U,releasePointerCapture:O},nativeEvent:f};if(g(P),v.stopped===!0)break}}}return c}function a(c){const{internal:f}=i.getState();for(const d of f.hovered.values())if(!c.length||!c.find(g=>g.object===d.object&&g.index===d.index&&g.instanceId===d.instanceId)){const v=d.eventObject.__r3f;if(f.hovered.delete(v_(d)),v!=null&&v.eventCount){const y=v.handlers,S={...d,intersections:c};y.onPointerOut==null||y.onPointerOut(S),y.onPointerLeave==null||y.onPointerLeave(S)}}}function r(c,f){for(let d=0;d<f.length;d++){const g=f[d].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>a([]);case"onLostPointerCapture":return f=>{const{internal:d}=i.getState();"pointerId"in f&&d.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(f.pointerId)&&(d.capturedMap.delete(f.pointerId),a([]))})}}return function(d){const{onPointerMissed:g,internal:v}=i.getState();v.lastEvent.current=d;const y=c==="onPointerMove",S=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",M=n(d,y?t:void 0),b=S?e(d):0;c==="onPointerDown"&&(v.initialClick=[d.offsetX,d.offsetY],v.initialHits=M.map(w=>w.eventObject)),S&&!M.length&&b<=2&&(r(d,v.interaction),g&&g(d)),y&&a(M);function C(w){const R=w.eventObject,U=R.__r3f;if(!(U!=null&&U.eventCount))return;const O=U.handlers;if(y){if(O.onPointerOver||O.onPointerEnter||O.onPointerOut||O.onPointerLeave){const I=v_(w),P=v.hovered.get(I);P?P.stopped&&w.stopPropagation():(v.hovered.set(I,w),O.onPointerOver==null||O.onPointerOver(w),O.onPointerEnter==null||O.onPointerEnter(w))}O.onPointerMove==null||O.onPointerMove(w)}else{const I=O[c];I?(!S||v.initialHits.includes(R))&&(r(d,v.interaction.filter(P=>!v.initialHits.includes(P))),I(w)):S&&v.initialHits.includes(R)&&r(d,v.interaction.filter(P=>!v.initialHits.includes(P)))}}s(M,d,b,C)}}return{handlePointer:l}}const vw=i=>!!(i!=null&&i.render),X4=ge.createContext(null),YG=(i,e)=>{const t=mG((l,c)=>{const f=new le,d=new le,g=new le;function v(b=c().camera,C=d,w=c().size){const{width:R,height:U,top:O,left:I}=w,P=R/U;C.isVector3?g.copy(C):g.set(...C);const N=b.getWorldPosition(f).distanceTo(g);if(z4(b))return{width:R/b.zoom,height:U/b.zoom,top:O,left:I,factor:1,distance:N,aspect:P};{const L=b.fov*Math.PI/180,k=2*Math.tan(L/2)*N,X=k*(R/U);return{width:X,height:k,top:O,left:I,factor:R/X,distance:N,aspect:P}}}let y;const S=b=>l(C=>({performance:{...C.performance,current:b}})),A=new tt;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(b=1)=>i(c(),b),advance:(b,C)=>e(b,C,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new yT,pointer:A,mouse:A,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const b=c();y&&clearTimeout(y),b.performance.current!==b.performance.min&&S(b.performance.min),y=setTimeout(()=>S(c().performance.max),b.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:b=>l(C=>({...C,events:{...C.events,...b}})),setSize:(b,C,w=0,R=0)=>{const U=c().camera,O={width:b,height:C,top:w,left:R};l(I=>({size:O,viewport:{...I.viewport,...v(U,d,O)}}))},setDpr:b=>l(C=>{const w=H4(b);return{viewport:{...C.viewport,dpr:w,initialDpr:C.viewport.initialDpr||w}}}),setFrameloop:(b="always")=>{const C=c().clock;C.stop(),C.elapsedTime=0,b!=="never"&&(C.start(),C.elapsedTime=0),l(()=>({frameloop:b}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:ge.createRef(),active:!1,frames:0,priority:0,subscribe:(b,C,w)=>{const R=c().internal;return R.priority=R.priority+(C>0?1:0),R.subscribers.push({ref:b,priority:C,store:w}),R.subscribers=R.subscribers.sort((U,O)=>U.priority-O.priority),()=>{const U=c().internal;U!=null&&U.subscribers&&(U.priority=U.priority-(C>0?1:0),U.subscribers=U.subscribers.filter(O=>O.ref!==b))}}}}}),n=t.getState();let s=n.size,a=n.viewport.dpr,r=n.camera;return t.subscribe(()=>{const{camera:l,size:c,viewport:f,gl:d,set:g}=t.getState();if(c.width!==s.width||c.height!==s.height||f.dpr!==a){s=c,a=f.dpr,kG(l,c),f.dpr>0&&d.setPixelRatio(f.dpr);const v=typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(c.width,c.height,v)}l!==r&&(r=l,g(v=>({viewport:{...v.viewport,...v.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>i(l)),t};function j4(){const i=ge.useContext(X4);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function Er(i=t=>t,e){return j4()(i,e)}function Oc(i,e=0){const t=j4(),n=t.getState().internal.subscribe,s=G4(i);return $v(()=>n(s,e,t),[e,n,t]),null}const yw=new WeakMap,WG=i=>{var e;return typeof i=="function"&&(i==null||(e=i.prototype)==null?void 0:e.constructor)===i};function Y4(i,e){return function(t,...n){let s;return WG(t)?(s=yw.get(t),s||(s=new t,yw.set(t,s))):s=t,i&&i(s),Promise.all(n.map(a=>new Promise((r,l)=>s.load(a,c=>{ir(c?.scene)&&Object.assign(c,PG(c.scene)),r(c)},e,c=>l(new Error(`Could not load ${a}: ${c?.message}`))))))}}function Jf(i,e,t,n){const s=Array.isArray(e)?e:[e],a=O4(Y4(t,n),[i,...s],{equal:Ii.equ});return Array.isArray(e)?a:a[0]}Jf.preload=function(i,e,t){const n=Array.isArray(e)?e:[e];return TG(Y4(t),[i,...n])};Jf.clear=function(i,e){const t=Array.isArray(e)?e:[e];return EG([i,...t])};function qG(i){const e=SG(i);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ge.version}),e}const W4=0,Gm={},KG=/^three(?=[A-Z])/,NS=i=>`${i[0].toUpperCase()}${i.slice(1)}`;let JG=0;const ZG=i=>typeof i=="function";function q4(i){if(ZG(i)){const e=`${JG++}`;return Gm[e]=i,e}else Object.assign(Gm,i)}function K4(i,e){const t=NS(i),n=Gm[t];if(i!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(i==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function QG(i,e,t){var n;return i=NS(i)in Gm?i:i.replace(KG,""),K4(i,e),i==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,Lx(e.object,t,i,e)}function $G(i){if(!i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?Nx(i.parent,i):ir(i.object)&&(i.object.visible=!1),i.isHidden=!0,n0(i)}}function J4(i){if(i.isHidden){var e;i.props.attach&&(e=i.parent)!=null&&e.object?Ox(i.parent,i):ir(i.object)&&i.props.visible!==!1&&(i.object.visible=!0),i.isHidden=!1,n0(i)}}function TT(i,e,t){const n=e.root.getState();if(!(!i.parent&&i.object!==n.scene)){if(!e.object){var s,a;const r=Gm[NS(e.type)];e.object=(s=e.props.object)!=null?s:new r(...(a=e.props.args)!=null?a:[]),e.object.__r3f=e}if(wf(e.object,e.props),e.props.attach)Ox(i,e);else if(ir(e.object)&&ir(i.object)){const r=i.object.children.indexOf(t?.object);if(t&&r!==-1){const l=i.object.children.indexOf(e.object);if(l!==-1){i.object.children.splice(l,1);const c=l<r?r-1:r;i.object.children.splice(c,0,e.object)}else e.object.parent=i.object,i.object.children.splice(r,0,e.object),e.object.dispatchEvent({type:"added"}),i.object.dispatchEvent({type:"childadded",child:e.object})}else i.object.add(e.object)}for(const r of e.children)TT(e,r);n0(e)}}function N2(i,e){e&&(e.parent=i,i.children.push(e),TT(i,e))}function _w(i,e,t){if(!e||!t)return;e.parent=i;const n=i.children.indexOf(t);n!==-1?i.children.splice(n,0,e):i.children.push(e),TT(i,e,t)}function Z4(i){if(typeof i.dispose=="function"){const e=()=>{try{i.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():pw.unstable_scheduleCallback(pw.unstable_IdlePriority,e)}}function FM(i,e,t){if(!e)return;e.parent=null;const n=i.children.indexOf(e);n!==-1&&i.children.splice(n,1),e.props.attach?Nx(i,e):ir(e.object)&&ir(i.object)&&(i.object.remove(e.object),XG(F4(e),e.object));const s=e.props.dispose!==null&&t!==!1;for(let a=e.children.length-1;a>=0;a--){const r=e.children[a];FM(e,r,s)}e.children.length=0,delete e.object.__r3f,s&&e.type!=="primitive"&&e.object.type!=="Scene"&&Z4(e.object),t===void 0&&n0(e)}function eH(i,e){for(const t of[i,i.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const N_=[];function tH(){for(const[t]of N_){const n=t.parent;if(n){t.props.attach?Nx(n,t):ir(t.object)&&ir(n.object)&&n.object.remove(t.object);for(const s of t.children)s.props.attach?Nx(t,s):ir(s.object)&&ir(t.object)&&t.object.remove(s.object)}t.isHidden&&J4(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&Z4(t.object)}for(const[t,n,s]of N_){t.props=n;const a=t.parent;if(a){var i,e;const r=Gm[NS(t.type)];t.object=(i=t.props.object)!=null?i:new r(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,eH(s,t.object),wf(t.object,t.props),t.props.attach?Ox(a,t):ir(t.object)&&ir(a.object)&&a.object.add(t.object);for(const l of t.children)l.props.attach?Ox(t,l):ir(l.object)&&ir(t.object)&&t.object.add(l.object);n0(t)}}N_.length=0}const P2=()=>{},xw={};let y_=W4;const nH=0,iH=4,zM=qG({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:QG,removeChild:FM,appendChild:N2,appendInitialChild:N2,insertBefore:_w,appendChildToContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||N2(t,e)},removeChildFromContainer(i,e){const t=i.getState().scene.__r3f;!e||!t||FM(t,e)},insertInContainerBefore(i,e,t){const n=i.getState().scene.__r3f;!e||!t||!n||_w(n,e,t)},getRootHostContext:()=>xw,getChildHostContext:()=>xw,commitUpdate(i,e,t,n,s){var a,r,l;K4(e,n);let c=!1;if((i.type==="primitive"&&t.object!==n.object||((a=n.args)==null?void 0:a.length)!==((r=t.args)==null?void 0:r.length)||(l=n.args)!=null&&l.some((d,g)=>{var v;return d!==((v=t.args)==null?void 0:v[g])}))&&(c=!0),c)N_.push([i,{...n},s]);else{const d=GG(i,n);Object.keys(d).length&&(Object.assign(i.props,d),wf(i.object,d))}(s.sibling===null||(s.flags&iH)===nH)&&tH()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:i=>i?.object,prepareForCommit:()=>null,preparePortalMount:i=>Lx(i.getState().scene,i,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:$G,unhideInstance:J4,createTextInstance:P2,hideTextInstance:P2,unhideTextInstance:P2,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:ge.createContext(null),setCurrentUpdatePriority(i){y_=i},getCurrentUpdatePriority(){return y_},resolveUpdatePriority(){var i;if(y_!==W4)return y_;switch(typeof window<"u"&&((i=window.event)==null?void 0:i.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return O_.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return O_.ContinuousEventPriority;default:return O_.DefaultEventPriority}},resetFormInstance(){}}),Gd=new Map,lm={objects:"shallow",strict:!1};function sH(i,e){if(!e&&typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:t,height:n,top:s,left:a}=i.parentElement.getBoundingClientRect();return{width:t,height:n,top:s,left:a}}else if(!e&&typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function aH(i){const e=Gd.get(i),t=e?.fiber,n=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,a=n||YG(VM,Aw),r=t||zM.createContainer(a,O_.ConcurrentRoot,null,!1,null,"",s,s,s,null);e||Gd.set(i,{fiber:r,store:a});let l,c,f=!1,d=null;return{async configure(g={}){let v;d=new Promise(G=>v=G);let{gl:y,size:S,scene:A,events:M,onCreated:b,shadows:C=!1,linear:w=!1,flat:R=!1,legacy:U=!1,orthographic:O=!1,frameloop:I="always",dpr:P=[1,2],performance:N,raycaster:L,camera:k,onPointerMissed:X}=g,W=a.getState(),$=W.gl;if(!W.gl){const G={canvas:i,powerPreference:"high-performance",antialias:!0,alpha:!0},K=typeof y=="function"?await y(G):y;vw(K)?$=K:$=new B4({...G,...y}),W.set({gl:$})}let ce=W.raycaster;ce||W.set({raycaster:ce=new M4});const{params:z,...q}=L||{};if(Ii.equ(q,ce,lm)||wf(ce,{...q}),Ii.equ(z,ce.params,lm)||wf(ce,{params:{...ce.params,...z}}),!W.camera||W.camera===c&&!Ii.equ(c,k,lm)){c=k;const G=k?.isCamera,K=G?k:O?new Au(0,0,0,0,.1,1e3):new Ji(75,0,.1,1e3);G||(K.position.z=5,k&&(wf(K,k),K.manual||("aspect"in k||"left"in k||"right"in k||"bottom"in k||"top"in k)&&(K.manual=!0,K.updateProjectionMatrix())),!W.camera&&!(k!=null&&k.rotation)&&K.lookAt(0,0,0)),W.set({camera:K}),ce.camera=K}if(!W.scene){let G;A!=null&&A.isScene?(G=A,Lx(G,a,"",{})):(G=new yv,Lx(G,a,"",{}),A&&wf(G,A)),W.set({scene:G})}M&&!W.events.handlers&&W.set({events:M(a)});const Q=sH(i,S);if(Ii.equ(Q,W.size,lm)||W.setSize(Q.width,Q.height,Q.top,Q.left),P&&W.viewport.dpr!==H4(P)&&W.setDpr(P),W.frameloop!==I&&W.setFrameloop(I),W.onPointerMissed||W.set({onPointerMissed:X}),N&&!Ii.equ(N,W.performance,lm)&&W.set(G=>({performance:{...G.performance,...N}})),!W.xr){var re;const G=(J,ne)=>{const ue=a.getState();ue.frameloop!=="never"&&Aw(J,!0,ue,ne)},K=()=>{const J=a.getState();J.gl.xr.enabled=J.gl.xr.isPresenting,J.gl.xr.setAnimationLoop(J.gl.xr.isPresenting?G:null),J.gl.xr.isPresenting||VM(J)},se={connect(){const J=a.getState().gl;J.xr.addEventListener("sessionstart",K),J.xr.addEventListener("sessionend",K)},disconnect(){const J=a.getState().gl;J.xr.removeEventListener("sessionstart",K),J.xr.removeEventListener("sessionend",K)}};typeof((re=$.xr)==null?void 0:re.addEventListener)=="function"&&se.connect(),W.set({xr:se})}if($.shadowMap){const G=$.shadowMap.enabled,K=$.shadowMap.type;if($.shadowMap.enabled=!!C,Ii.boo(C))$.shadowMap.type=jg;else if(Ii.str(C)){var H;const se={basic:kD,percentage:Qx,soft:jg,variance:Rl};$.shadowMap.type=(H=se[C])!=null?H:jg}else Ii.obj(C)&&Object.assign($.shadowMap,C);(G!==$.shadowMap.enabled||K!==$.shadowMap.type)&&($.shadowMap.needsUpdate=!0)}return Nn.enabled=!U,f||($.outputColorSpace=w?Pl:Zn,$.toneMapping=R?Nl:$x),W.legacy!==U&&W.set(()=>({legacy:U})),W.linear!==w&&W.set(()=>({linear:w})),W.flat!==R&&W.set(()=>({flat:R})),y&&!Ii.fun(y)&&!vw(y)&&!Ii.equ(y,$,lm)&&wf($,y),l=b,f=!0,v(),this},render(g){return!f&&!d&&this.configure(),d.then(()=>{zM.updateContainer(oe.jsx(rH,{store:a,children:g,onCreated:l,rootElement:i}),r,null,()=>{})}),a},unmount(){Q4(i)}}}function rH({store:i,children:e,onCreated:t,rootElement:n}){return $v(()=>{const s=i.getState();s.set(a=>({internal:{...a.internal,active:!0}})),t&&t(s),i.getState().events.connected||s.events.connect==null||s.events.connect(n)},[]),oe.jsx(X4.Provider,{value:i,children:e})}function Q4(i,e){const t=Gd.get(i),n=t?.fiber;if(n){const s=t?.store.getState();s&&(s.internal.active=!1),zM.updateContainer(null,n,null,()=>{s&&setTimeout(()=>{try{var a,r,l,c;s.events.disconnect==null||s.events.disconnect(),(a=s.gl)==null||(r=a.renderLists)==null||r.dispose==null||r.dispose(),(l=s.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=s.gl)!=null&&c.xr&&s.xr.disconnect(),IG(s.scene),Gd.delete(i)}catch{}},500)})}}const oH=new Set,lH=new Set,cH=new Set;function I2(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function ev(i,e){switch(i){case"before":return I2(oH,e);case"after":return I2(lH,e);case"tail":return I2(cH,e)}}let F2,z2;function GM(i,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),F2=e.internal.subscribers;for(let s=0;s<F2.length;s++)z2=F2[s],z2.ref.current(z2.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let Px=!1,HM=!1,G2,Sw,cm;function $4(i){Sw=requestAnimationFrame($4),Px=!0,G2=0,ev("before",i),HM=!0;for(const t of Gd.values()){var e;cm=t.store.getState(),cm.internal.active&&(cm.frameloop==="always"||cm.internal.frames>0)&&!((e=cm.gl.xr)!=null&&e.isPresenting)&&(G2+=GM(i,cm))}if(HM=!1,ev("after",i),G2===0)return ev("tail",i),Px=!1,cancelAnimationFrame(Sw)}function VM(i,e=1){var t;if(!i)return Gd.forEach(n=>VM(n.store.getState(),e));(t=i.gl.xr)!=null&&t.isPresenting||!i.internal.active||i.frameloop==="never"||(e>1?i.internal.frames=Math.min(60,i.internal.frames+e):HM?i.internal.frames=2:i.internal.frames=1,Px||(Px=!0,requestAnimationFrame($4)))}function Aw(i,e=!0,t,n){if(e&&ev("before",i),t)GM(i,t,n);else for(const s of Gd.values())GM(i,s.store.getState());e&&ev("after",i)}const H2={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function uH(i){const{handlePointer:e}=jG(i);return{priority:1,enabled:!0,compute(t,n,s){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(H2).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:s}=i.getState();(t=s.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{const{set:n,events:s}=i.getState();if(s.disconnect==null||s.disconnect(),n(a=>({events:{...a.events,connected:t}})),s.handlers)for(const a in s.handlers){const r=s.handlers[a],[l,c]=H2[a];t.addEventListener(l,r,{passive:c})}},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){if(n.handlers)for(const s in n.handlers){const a=n.handlers[s],[r]=H2[s];n.connected.removeEventListener(r,a)}t(s=>({events:{...s.events,connected:void 0}}))}}}}function Mw(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function fH({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const s=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,r]=ge.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=ge.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=i?typeof i=="number"?i:i.scroll:null,f=i?typeof i=="number"?i:i.resize:null,d=ge.useRef(!1);ge.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[g,v,y]=ge.useMemo(()=>{const b=()=>{if(!l.current.element)return;const{left:C,top:w,width:R,height:U,bottom:O,right:I,x:P,y:N}=l.current.element.getBoundingClientRect(),L={left:C,top:w,width:R,height:U,bottom:O,right:I,x:P,y:N};l.current.element instanceof HTMLElement&&n&&(L.height=l.current.element.offsetHeight,L.width=l.current.element.offsetWidth),Object.freeze(L),d.current&&!mH(l.current.lastBounds,L)&&r(l.current.lastBounds=L)};return[b,f?Mw(b,f):b,c?Mw(b,c):b]},[r,n,c,f]);function S(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(b=>b.removeEventListener("scroll",y,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function A(){l.current.element&&(l.current.resizeObserver=new s(y),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(b=>b.addEventListener("scroll",y,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const M=b=>{!b||b===l.current.element||(S(),l.current.element=b,l.current.scrollContainers=eU(b),A())};return dH(y,!!e),hH(v),ge.useEffect(()=>{S(),A()},[e,y,v]),ge.useEffect(()=>S,[]),[M,a,g]}function hH(i){ge.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function dH(i,e){ge.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function eU(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:s}=window.getComputedStyle(i);return[t,n,s].some(a=>a==="auto"||a==="scroll")&&e.push(i),[...e,...eU(i.parentElement)]}const pH=["x","y","top","bottom","left","right","width","height"],mH=(i,e)=>pH.every(t=>i[t]===e[t]);function gH({ref:i,children:e,fallback:t,resize:n,style:s,gl:a,events:r=uH,eventSource:l,eventPrefix:c,shadows:f,linear:d,flat:g,legacy:v,orthographic:y,frameloop:S,dpr:A,performance:M,raycaster:b,camera:C,scene:w,onPointerMissed:R,onCreated:U,...O}){ge.useMemo(()=>q4(nG),[]);const I=LG(),[P,N]=fH({scroll:!0,debounce:{scroll:50,resize:0},...n}),L=ge.useRef(null),k=ge.useRef(null);ge.useImperativeHandle(i,()=>L.current);const X=G4(R),[W,$]=ge.useState(!1),[ce,z]=ge.useState(!1);if(W)throw W;if(ce)throw ce;const q=ge.useRef(null);$v(()=>{const re=L.current;if(N.width>0&&N.height>0&&re){q.current||(q.current=aH(re));async function H(){await q.current.configure({gl:a,scene:w,events:r,shadows:f,linear:d,flat:g,legacy:v,orthographic:y,frameloop:S,dpr:A,performance:M,raycaster:b,camera:C,size:N,onPointerMissed:(...G)=>X.current==null?void 0:X.current(...G),onCreated:G=>{G.events.connect==null||G.events.connect(l?BG(l)?l.current:l:k.current),c&&G.setEvents({compute:(K,se)=>{const J=K[c+"X"],ne=K[c+"Y"];se.pointer.set(J/se.size.width*2-1,-(ne/se.size.height)*2+1),se.raycaster.setFromCamera(se.pointer,se.camera)}}),U?.(G)}}),q.current.render(oe.jsx(I,{children:oe.jsx(NG,{set:z,children:oe.jsx(ge.Suspense,{fallback:oe.jsx(OG,{set:$}),children:e??null})})}))}H()}}),ge.useEffect(()=>{const re=L.current;if(re)return()=>Q4(re)},[]);const Q=l?"none":"auto";return oe.jsx("div",{ref:k,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Q,...s},...O,children:oe.jsx("div",{ref:P,style:{width:"100%",height:"100%"},children:oe.jsx("canvas",{ref:L,style:{display:"block"},children:t})})})}function vH(i){return oe.jsx(P4,{children:oe.jsx(gH,{...i})})}var Il=Math.PI,zi=Il*2,Gg=Il/180,yH=1440,_H=398600.8,Qr=6378.135,xu=60/Math.sqrt(Qr*Qr*Qr/_H),V2=Qr*xu/60,xH=1/xu,vd=.001082616,SH=-253881e-11,AH=-165597e-11,yd=SH/vd,bv=2/3,MH=1440/(2*Il);function bH(i,e){for(var t=[31,i%4===0?29:28,31,30,31,30,31,31,30,31,30,31],n=Math.floor(e),s=1,a=0;n>a+t[s-1]&&s<12;)a+=t[s-1],s+=1;var r=s,l=n-a,c=(e-n)*24,f=Math.floor(c);c=(c-f)*60;var d=Math.floor(c),g=(c-d)*60;return{mon:r,day:l,hr:f,minute:d,sec:g}}function bw(i,e,t,n,s,a){var r=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;return 367*i-Math.floor(7*(i+Math.floor((e+9)/12))*.25)+Math.floor(275*e/9)+t+17210135e-1+((r/6e4+a/60+s)/60+n)/24}function e1(i,e,t,n,s,a){var r=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;if(i instanceof Date){var l=i;return bw(l.getUTCFullYear(),l.getUTCMonth()+1,l.getUTCDate(),l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds())}return bw(i,e,t,n,s,a,r)}function tU(i,e){var t=i.e3,n=i.ee2,s=i.peo,a=i.pgho,r=i.pho,l=i.pinco,c=i.plo,f=i.se2,d=i.se3,g=i.sgh2,v=i.sgh3,y=i.sgh4,S=i.sh2,A=i.sh3,M=i.si2,b=i.si3,C=i.sl2,w=i.sl3,R=i.sl4,U=i.t,O=i.xgh2,I=i.xgh3,P=i.xgh4,N=i.xh2,L=i.xh3,k=i.xi2,X=i.xi3,W=i.xl2,$=i.xl3,ce=i.xl4,z=i.zmol,q=i.zmos,Q=e.init,re=e.opsmode,H=e.ep,G=e.inclp,K=e.nodep,se=e.argpp,J=e.mp,ne,ue,pe,ve,Ve,ze,Qe,Ie,rt,Z,Le,Ue,Re,me,Pe,Se,ye,nt,ee,V,de,Be=119459e-10,be=.01675,Me=.00015835218,$e=.0549;de=q+Be*U,Q==="y"&&(de=q),V=de+2*be*Math.sin(de),ye=Math.sin(V),Z=.5*ye*ye-.25,Le=-.5*ye*Math.cos(V);var at=f*Z+d*Le,ut=M*Z+b*Le,Y=C*Z+w*Le+R*ye,Oe=g*Z+v*Le+y*ye,Ke=S*Z+A*Le;de=z+Me*U,Q==="y"&&(de=z),V=de+2*$e*Math.sin(de),ye=Math.sin(V),Z=.5*ye*ye-.25,Le=-.5*ye*Math.cos(V);var it=n*Z+t*Le,fe=k*Z+X*Le,Ae=W*Z+$*Le+ce*ye,st=O*Z+I*Le+P*ye,he=N*Z+L*Le;return Ue=at+it,Pe=ut+fe,Se=Y+Ae,Re=Oe+st,me=Ke+he,Q==="n"&&(Ue-=s,Pe-=l,Se-=c,Re-=a,me-=r,G+=Pe,H+=Ue,ve=Math.sin(G),pe=Math.cos(G),G>=.2?(me/=ve,Re-=pe*me,se+=Re,K+=me,J+=Se):(ze=Math.sin(K),Ve=Math.cos(K),ne=ve*ze,ue=ve*Ve,Qe=me*Ve+Pe*pe*ze,Ie=-me*ze+Pe*pe*Ve,ne+=Qe,ue+=Ie,K%=zi,K<0&&re==="a"&&(K+=zi),nt=J+se+pe*K,rt=Se+Re-Pe*K*ve,nt+=rt,ee=K,K=Math.atan2(ne,ue),K<0&&re==="a"&&(K+=zi),Math.abs(ee-K)>Il&&(K<ee?K+=zi:K-=zi),J+=Se,se=nt-J-pe*K)),{ep:H,inclp:G,nodep:K,argpp:se,mp:J}}function TH(i){var e=i.epoch,t=i.ep,n=i.argpp,s=i.tc,a=i.inclp,r=i.nodep,l=i.np,c,f,d,g,v,y,S,A,M,b,C,w,R,U,O,I,P,N,L,k,X,W,$,ce,z,q,Q,re,H,G,K,se,J,ne,ue,pe,ve,Ve,ze,Qe,Ie,rt,Z,Le,Ue,Re,me,Pe,Se,ye,nt,ee,V,de,Be,be,Me,$e,at,ut,Y,Oe,Ke,it=.01675,fe=.0549,Ae=29864797e-13,st=47968065e-14,he=.39785416,je=.91744867,He=.1945905,gt=-.98088458,et=l,Ge=t,pt=Math.sin(r),vt=Math.cos(r),mt=Math.sin(n),At=Math.cos(n),Vt=Math.sin(a),Pt=Math.cos(a),ot=Ge*Ge,tn=1-ot,gn=Math.sqrt(tn),zn=0,en=0,ci=0,jn=0,Bn=0,Kt=e+18261.5+s/1440,ui=(4.523602-.00092422029*Kt)%zi,bn=Math.sin(ui),Ti=Math.cos(ui),cs=.91375164-.03568096*Ti,Gn=Math.sqrt(1-cs*cs),ni=.089683511*bn/Gn,gi=Math.sqrt(1-ni*ni),_n=5.8351514+.001944368*Kt,te=.39785416*bn/Gn,Ee=gi*Ti+.91744867*ni*bn;te=Math.atan2(te,Ee),te+=_n-ui;var Ye=Math.cos(te),Te=Math.sin(te);k=He,X=gt,ce=je,z=he,W=vt,$=pt,C=Ae;for(var De=1/et,ht=0;ht<2;)ht+=1,c=k*W+X*ce*$,d=-X*W+k*ce*$,S=-k*$+X*ce*W,A=X*z,M=X*$+k*ce*W,b=k*z,f=Pt*S+Vt*A,g=Pt*M+Vt*b,v=-Vt*S+Pt*A,y=-Vt*M+Pt*b,w=c*At+f*mt,R=d*At+g*mt,U=-c*mt+f*At,O=-d*mt+g*At,I=v*mt,P=y*mt,N=v*At,L=y*At,Y=12*w*w-3*U*U,Oe=24*w*R-6*U*O,Ke=12*R*R-3*O*O,ee=3*(c*c+f*f)+Y*ot,V=6*(c*d+f*g)+Oe*ot,de=3*(d*d+g*g)+Ke*ot,Be=-6*c*v+ot*(-24*w*N-6*U*I),be=-6*(c*y+d*v)+ot*(-24*(R*N+w*L)+-6*(U*P+O*I)),Me=-6*d*y+ot*(-24*R*L-6*O*P),$e=6*f*v+ot*(24*w*I-6*U*N),at=6*(g*v+f*y)+ot*(24*(R*I+w*P)-6*(O*N+U*L)),ut=6*g*y+ot*(24*R*P-6*O*L),ee=ee+ee+tn*Y,V=V+V+tn*Oe,de=de+de+tn*Ke,me=C*De,Re=-.5*me/gn,Pe=me*gn,Ue=-15*Ge*Pe,Se=w*U+R*O,ye=R*U+w*O,nt=R*O-w*U,ht===1&&(q=Ue,Q=Re,re=me,H=Pe,G=Se,K=ye,se=nt,J=ee,ne=V,ue=de,pe=Be,ve=be,Ve=Me,ze=$e,Qe=at,Ie=ut,rt=Y,Z=Oe,Le=Ke,k=Ye,X=Te,ce=cs,z=Gn,W=gi*vt+ni*pt,$=pt*gi-vt*ni,C=st);var yt=(4.7199672+(.2299715*Kt-_n))%zi,Mt=(6.2565837+.017201977*Kt)%zi,bt=2*q*K,Bt=2*q*se,Rt=2*Q*ve,wt=2*Q*(Ve-pe),Yt=-2*re*ne,fn=-2*re*(ue-J),Rn=-2*re*(-21-9*ot)*it,Xt=2*H*Z,nn=2*H*(Le-rt),Ut=-18*H*it,Un=-2*Q*Qe,Jt=-2*Q*(Ie-ze),ii=2*Ue*ye,_s=2*Ue*nt,Tn=2*Re*be,Ei=2*Re*(Me-Be),Hn=-2*me*V,Mi=-2*me*(de-ee),$n=-2*me*(-21-9*ot)*fe,Ci=2*Pe*Oe,vi=2*Pe*(Ke-Y),Bi=-18*Pe*fe,ks=-2*Re*at,fo=-2*Re*(ut-$e);return{snodm:pt,cnodm:vt,sinim:Vt,cosim:Pt,sinomm:mt,cosomm:At,day:Kt,e3:_s,ee2:ii,em:Ge,emsq:ot,gam:_n,peo:zn,pgho:jn,pho:Bn,pinco:en,plo:ci,rtemsq:gn,se2:bt,se3:Bt,sgh2:Xt,sgh3:nn,sgh4:Ut,sh2:Un,sh3:Jt,si2:Rt,si3:wt,sl2:Yt,sl3:fn,sl4:Rn,s1:Ue,s2:Re,s3:me,s4:Pe,s5:Se,s6:ye,s7:nt,ss1:q,ss2:Q,ss3:re,ss4:H,ss5:G,ss6:K,ss7:se,sz1:J,sz2:ne,sz3:ue,sz11:pe,sz12:ve,sz13:Ve,sz21:ze,sz22:Qe,sz23:Ie,sz31:rt,sz32:Z,sz33:Le,xgh2:Ci,xgh3:vi,xgh4:Bi,xh2:ks,xh3:fo,xi2:Tn,xi3:Ei,xl2:Hn,xl3:Mi,xl4:$n,nm:et,z1:ee,z2:V,z3:de,z11:Be,z12:be,z13:Me,z21:$e,z22:at,z23:ut,z31:Y,z32:Oe,z33:Ke,zmol:yt,zmos:Mt}}function EH(i){var e=i.cosim,t=i.argpo,n=i.s1,s=i.s2,a=i.s3,r=i.s4,l=i.s5,c=i.sinim,f=i.ss1,d=i.ss2,g=i.ss3,v=i.ss4,y=i.ss5,S=i.sz1,A=i.sz3,M=i.sz11,b=i.sz13,C=i.sz21,w=i.sz23,R=i.sz31,U=i.sz33,O=i.t,I=i.tc,P=i.gsto,N=i.mo,L=i.mdot,k=i.no,X=i.nodeo,W=i.nodedot,$=i.xpidot,ce=i.z1,z=i.z3,q=i.z11,Q=i.z13,re=i.z21,H=i.z23,G=i.z31,K=i.z33,se=i.ecco,J=i.eccsq,ne=i.emsq,ue=i.em,pe=i.argpm,ve=i.inclm,Ve=i.mm,ze=i.nm,Qe=i.nodem,Ie=i.irez,rt=i.atime,Z=i.d2201,Le=i.d2211,Ue=i.d3210,Re=i.d3222,me=i.d4410,Pe=i.d4422,Se=i.d5220,ye=i.d5232,nt=i.d5421,ee=i.d5433,V=i.dedt,de=i.didt,Be=i.dmdt,be=i.dnodt,Me=i.domdt,$e=i.del1,at=i.del2,ut=i.del3,Y=i.xfact,Oe=i.xlamo,Ke=i.xli,it=i.xni,fe,Ae,st,he,je,He,gt,et,Ge,pt,vt,mt,At,Vt,Pt,ot,tn,gn,zn,en,ci,jn,Bn,Kt,ui,bn,Ti,cs,Gn,ni,gi,_n,te=17891679e-13,Ee=21460748e-13,Ye=22123015e-14,Te=17891679e-13,De=73636953e-16,ht=21765803e-16,yt=.0043752690880113,Mt=37393792e-14,bt=11428639e-14,Bt=.00015835218,Rt=119459e-10;Ie=0,ze<.0052359877&&ze>.0034906585&&(Ie=1),ze>=.00826&&ze<=.00924&&ue>=.5&&(Ie=2);var wt=f*Rt*y,Yt=d*Rt*(M+b),fn=-Rt*g*(S+A-14-6*ne),Rn=v*Rt*(R+U-6),Xt=-Rt*d*(C+w);(ve<.052359877||ve>Il-.052359877)&&(Xt=0),c!==0&&(Xt/=c);var nn=Rn-e*Xt;V=wt+n*Bt*l,de=Yt+s*Bt*(q+Q),Be=fn-Bt*a*(ce+z-14-6*ne);var Ut=r*Bt*(G+K-6),Un=-Bt*s*(re+H);(ve<.052359877||ve>Il-.052359877)&&(Un=0),Me=nn+Ut,be=Xt,c!==0&&(Me-=e/c*Un,be+=Un/c);var Jt=0,ii=(P+I*yt)%zi;if(ue+=V*O,ve+=de*O,pe+=Me*O,Qe+=be*O,Ve+=Be*O,Ie!==0){if(ni=Math.pow(ze/xu,bv),Ie===2){gi=e*e;var _s=ue;ue=se;var Tn=ne;ne=J,_n=ue*ne,Vt=-.306-(ue-.64)*.44,ue<=.65?(Pt=3.616-13.247*ue+16.29*ne,tn=-19.302+117.39*ue-228.419*ne+156.591*_n,gn=-18.9068+109.7927*ue-214.6334*ne+146.5816*_n,zn=-41.122+242.694*ue-471.094*ne+313.953*_n,en=-146.407+841.88*ue-1629.014*ne+1083.435*_n,ci=-532.114+3017.977*ue-5740.032*ne+3708.276*_n):(Pt=-72.099+331.819*ue-508.738*ne+266.724*_n,tn=-346.844+1582.851*ue-2415.925*ne+1246.113*_n,gn=-342.585+1554.908*ue-2366.899*ne+1215.972*_n,zn=-1052.797+4758.686*ue-7193.992*ne+3651.957*_n,en=-3581.69+16178.11*ue-24462.77*ne+12422.52*_n,ue>.715?ci=-5149.66+29936.92*ue-54087.36*ne+31324.56*_n:ci=1464.74-4664.75*ue+3763.64*ne),ue<.7?(Kt=-919.2277+4988.61*ue-9064.77*ne+5542.21*_n,jn=-822.71072+4568.6173*ue-8491.4146*ne+5337.524*_n,Bn=-853.666+4690.25*ue-8624.77*ne+5341.4*_n):(Kt=-37995.78+161616.52*ue-229838.2*ne+109377.94*_n,jn=-51752.104+218913.95*ue-309468.16*ne+146349.42*_n,Bn=-40023.88+170470.89*ue-242699.48*ne+115605.82*_n),ui=c*c,fe=.75*(1+2*e+gi),Ae=1.5*ui,he=1.875*c*(1-2*e-3*gi),je=-1.875*c*(1+2*e-3*gi),gt=35*ui*fe,et=39.375*ui*ui,Ge=9.84375*c*(ui*(1-2*e-5*gi)+.33333333*(-2+4*e+6*gi)),pt=c*(4.92187512*ui*(-2-4*e+10*gi)+6.56250012*(1+2*e-3*gi)),vt=29.53125*c*(2-8*e+gi*(-12+8*e+10*gi)),mt=29.53125*c*(-2-8*e+gi*(12+8*e-10*gi)),cs=ze*ze,Gn=ni*ni,Ti=3*cs*Gn,bn=Ti*Te,Z=bn*fe*Vt,Le=bn*Ae*Pt,Ti*=ni,bn=Ti*Mt,Ue=bn*he*tn,Re=bn*je*gn,Ti*=ni,bn=2*Ti*De,me=bn*gt*zn,Pe=bn*et*en,Ti*=ni,bn=Ti*bt,Se=bn*Ge*ci,ye=bn*pt*Bn,bn=2*Ti*ht,nt=bn*vt*jn,ee=bn*mt*Kt,Oe=(N+X+X-(ii+ii))%zi,Y=L+Be+2*(W+be-yt)-k,ue=_s,ne=Tn}Ie===1&&(At=1+ne*(-2.5+.8125*ne),tn=1+2*ne,ot=1+ne*(-6+6.60937*ne),fe=.75*(1+e)*(1+e),st=.9375*c*c*(1+3*e)-.75*(1+e),He=1+e,He*=1.875*He*He,$e=3*ze*ze*ni*ni,at=2*$e*fe*At*te,ut=3*$e*He*ot*Ye*ni,$e=$e*st*tn*Ee*ni,Oe=(N+X+t-ii)%zi,Y=L+$+Be+Me+be-(k+yt)),Ke=Oe,it=k,rt=0,ze=k+Jt}return{em:ue,argpm:pe,inclm:ve,mm:Ve,nm:ze,nodem:Qe,irez:Ie,atime:rt,d2201:Z,d2211:Le,d3210:Ue,d3222:Re,d4410:me,d4422:Pe,d5220:Se,d5232:ye,d5421:nt,d5433:ee,dedt:V,didt:de,dmdt:Be,dndt:Jt,dnodt:be,domdt:Me,del1:$e,del2:at,del3:ut,xfact:Y,xlamo:Oe,xli:Ke,xni:it}}function Tw(i){var e=(i-2451545)/36525,t=-62e-7*e*e*e+.093104*e*e+(876600*3600+8640184812866e-6)*e+67310.54841;return t=t*Gg/240%zi,t<0&&(t+=zi),t}function PS(i,e,t,n,s,a,r){return i instanceof Date?Tw(e1(i)):Tw(i)}function CH(i){var e=i.ecco,t=i.epoch,n=i.inclo,s=i.opsmode,a=i.no,r=e*e,l=1-r,c=Math.sqrt(l),f=Math.cos(n),d=f*f,g=Math.pow(xu/a,bv),v=.75*vd*(3*d-1)/(c*l),y=v/(g*g),S=g*(1-y*y-y*(1/3+134*y*y/81));y=v/(S*S),a/=1+y;var A=Math.pow(xu/a,bv),M=Math.sin(n),b=A*l,C=1-5*d,w=-C-d-d,R=1/A,U=b*b,O=A*(1-e),I="n",P;if(s==="a"){var N=t-7305,L=Math.floor(N+1e-8),k=N-L,X=.017202791694070362,W=1.7321343856509375,$=5075514194322695e-30,ce=X+zi;P=(W+X*L+ce*k+N*N*$)%zi,P<0&&(P+=zi)}else P=PS(t+24332815e-1);return{no:a,method:I,ainv:R,ao:A,con41:w,con42:C,cosio:f,cosio2:d,eccsq:r,omeosq:l,posq:U,rp:O,rteosq:c,sinio:M,gsto:P}}function wH(i){var e=i.irez,t=i.d2201,n=i.d2211,s=i.d3210,a=i.d3222,r=i.d4410,l=i.d4422,c=i.d5220,f=i.d5232,d=i.d5421,g=i.d5433,v=i.dedt,y=i.del1,S=i.del2,A=i.del3,M=i.didt,b=i.dmdt,C=i.dnodt,w=i.domdt,R=i.argpo,U=i.argpdot,O=i.t,I=i.tc,P=i.gsto,N=i.xfact,L=i.xlamo,k=i.no,X=i.atime,W=i.em,$=i.argpm,ce=i.inclm,z=i.xli,q=i.mm,Q=i.xni,re=i.nodem,H=i.nm,G=.13130908,K=2.8843198,se=.37448087,J=5.7686396,ne=.95240898,ue=1.8014998,pe=1.050833,ve=4.4108898,Ve=.0043752690880113,ze=720,Qe=-720,Ie=259200,rt,Z,Le,Ue,Re,me,Pe,Se,ye=0,nt=0,ee=(P+I*Ve)%zi;if(W+=v*O,ce+=M*O,$+=w*O,re+=C*O,q+=b*O,e!==0){(X===0||O*X<=0||Math.abs(O)<Math.abs(X))&&(X=0,Q=k,z=L),O>0?rt=ze:rt=Qe;for(var V=381;V===381;)e!==2?(Pe=y*Math.sin(z-G)+S*Math.sin(2*(z-K))+A*Math.sin(3*(z-se)),Re=Q+N,me=y*Math.cos(z-G)+2*S*Math.cos(2*(z-K))+3*A*Math.cos(3*(z-se)),me*=Re):(Se=R+U*X,Le=Se+Se,Z=z+z,Pe=t*Math.sin(Le+z-J)+n*Math.sin(z-J)+s*Math.sin(Se+z-ne)+a*Math.sin(-Se+z-ne)+r*Math.sin(Le+Z-ue)+l*Math.sin(Z-ue)+c*Math.sin(Se+z-pe)+f*Math.sin(-Se+z-pe)+d*Math.sin(Se+Z-ve)+g*Math.sin(-Se+Z-ve),Re=Q+N,me=t*Math.cos(Le+z-J)+n*Math.cos(z-J)+s*Math.cos(Se+z-ne)+a*Math.cos(-Se+z-ne)+c*Math.cos(Se+z-pe)+f*Math.cos(-Se+z-pe)+2*(r*Math.cos(Le+Z-ue)+l*Math.cos(Z-ue)+d*Math.cos(Se+Z-ve)+g*Math.cos(-Se+Z-ve)),me*=Re),Math.abs(O-X)>=ze?V=381:(nt=O-X,V=0),V===381&&(z+=Re*rt+Pe*Ie,Q+=Pe*rt+me*Ie,X+=rt);H=Q+Pe*nt+me*nt*nt*.5,Ue=z+Re*nt+Pe*nt*nt*.5,e!==1?(q=Ue-2*re+2*ee,ye=H-k):(q=Ue-re-$+ee,ye=H-k),H=k+ye}return{atime:X,em:W,argpm:$,inclm:ce,xli:z,mm:q,xni:Q,nodem:re,dndt:ye,nm:H}}var Ef;(function(i){i[i.None=0]="None",i[i.MeanEccentricityOutOfRange=1]="MeanEccentricityOutOfRange",i[i.MeanMotionBelowZero=2]="MeanMotionBelowZero",i[i.PerturbedEccentricityOutOfRange=3]="PerturbedEccentricityOutOfRange",i[i.SemiLatusRectumBelowZero=4]="SemiLatusRectumBelowZero",i[i.Decayed=6]="Decayed"})(Ef||(Ef={}));function nU(i,e){var t,n,s,a,r,l,c,f,d,g,v,y,S,A,M,b,C,w,R,U,O,I,P,N,L,k,X,W=15e-13;i.t=e,i.error=Ef.None;var $=i.mo+i.mdot*i.t,ce=i.argpo+i.argpdot*i.t,z=i.nodeo+i.nodedot*i.t;d=ce,O=$;var q=i.t*i.t;if(P=z+i.nodecf*q,C=1-i.cc1*i.t,w=i.bstar*i.cc4*i.t,R=i.t2cof*q,i.isimp!==1){c=i.omgcof*i.t;var Q=1+i.eta*Math.cos($);l=i.xmcof*(Q*Q*Q-i.delmo),b=c+l,O=$+b,d=ce-b,y=q*i.t,S=y*i.t,C=C-i.d2*q-i.d3*y-i.d4*S,w+=i.bstar*i.cc5*(Math.sin(O)-i.sinmao),R=R+i.t3cof*y+S*(i.t4cof+i.t*i.t5cof)}I=i.no;var re=i.ecco;if(U=i.inclo,i.method==="d"){A=i.t;var H={irez:i.irez,d2201:i.d2201,d2211:i.d2211,d3210:i.d3210,d3222:i.d3222,d4410:i.d4410,d4422:i.d4422,d5220:i.d5220,d5232:i.d5232,d5421:i.d5421,d5433:i.d5433,dedt:i.dedt,del1:i.del1,del2:i.del2,del3:i.del3,didt:i.didt,dmdt:i.dmdt,dnodt:i.dnodt,domdt:i.domdt,argpo:i.argpo,argpdot:i.argpdot,t:i.t,tc:A,gsto:i.gsto,xfact:i.xfact,xlamo:i.xlamo,no:i.no,atime:i.atime,em:re,argpm:d,inclm:U,xli:i.xli,mm:O,xni:i.xni,nodem:P,nm:I},G=wH(H);re=G.em,d=G.argpm,U=G.inclm,O=G.mm,P=G.nodem,I=G.nm}if(I<=0)return i.error=Ef.MeanMotionBelowZero,null;var K=Math.pow(xu/I,bv)*C*C;if(I=xu/Math.pow(K,1.5),re-=w,re>=1||re<-.001)return i.error=Ef.MeanEccentricityOutOfRange,null;re<1e-6&&(re=1e-6),O+=i.no*R,L=O+d+P,P%=zi,d%=zi,L%=zi,O=(L-d-P)%zi;var se={am:K,em:re,im:U,Om:P,om:d,mm:O,nm:I},J=Math.sin(U),ne=Math.cos(U),ue=re;if(N=U,g=d,X=P,k=O,a=J,s=ne,i.method==="d"){var pe={inclo:i.inclo,init:"n",ep:ue,inclp:N,nodep:X,argpp:g,mp:k,opsmode:i.operationmode},ve=tU(i,pe);if(ue=ve.ep,X=ve.nodep,g=ve.argpp,k=ve.mp,N=ve.inclp,N<0&&(N=-N,X+=Il,g-=Il),ue<0||ue>1)return i.error=Ef.PerturbedEccentricityOutOfRange,null}i.method==="d"&&(a=Math.sin(N),s=Math.cos(N),i.aycof=-.5*yd*a,Math.abs(s+1)>15e-13?i.xlcof=-.25*yd*a*(3+5*s)/(1+s):i.xlcof=-.25*yd*a*(3+5*s)/W);var Ve=ue*Math.cos(g);b=1/(K*(1-ue*ue));var ze=ue*Math.sin(g)+b*i.aycof,Qe=k+g+X+b*i.xlcof*Ve,Ie=(Qe-X)%zi;f=Ie,M=9999.9;for(var rt=1;Math.abs(M)>=1e-12&&rt<=10;)n=Math.sin(f),t=Math.cos(f),M=1-t*Ve-n*ze,M=(Ie-ze*t+Ve*n-f)/M,Math.abs(M)>=.95&&(M>0?M=.95:M=-.95),f+=M,rt+=1;var Z=Ve*t+ze*n,Le=Ve*n-ze*t,Ue=Ve*Ve+ze*ze,Re=K*(1-Ue);if(Re<0)return i.error=Ef.SemiLatusRectumBelowZero,null;var me=K*(1-Z),Pe=Math.sqrt(K)*Le/me,Se=Math.sqrt(Re)/me,ye=Math.sqrt(1-Ue);b=Le/(1+ye);var nt=K/me*(n-ze-Ve*b),ee=K/me*(t-Ve+ze*b);v=Math.atan2(nt,ee);var V=(ee+ee)*nt,de=1-2*nt*nt;b=1/Re;var Be=.5*vd*b,be=Be*b;i.method==="d"&&(r=s*s,i.con41=3*r-1,i.x1mth2=1-r,i.x7thm1=7*r-1);var Me=me*(1-1.5*be*ye*i.con41)+.5*Be*i.x1mth2*de;if(Me<1)return i.error=Ef.Decayed,null;v-=.25*be*i.x7thm1*V;var $e=X+1.5*be*s*V,at=N+1.5*be*s*a*de,ut=Pe-I*Be*i.x1mth2*V/xu,Y=Se+I*Be*(i.x1mth2*de+1.5*i.con41)/xu,Oe=Math.sin(v),Ke=Math.cos(v),it=Math.sin($e),fe=Math.cos($e),Ae=Math.sin(at),st=Math.cos(at),he=-it*st,je=fe*st,He=he*Oe+fe*Ke,gt=je*Oe+it*Ke,et=Ae*Oe,Ge=he*Ke-fe*Oe,pt=je*Ke-it*Oe,vt=Ae*Ke,mt={x:Me*He*Qr,y:Me*gt*Qr,z:Me*et*Qr},At={x:(ut*He+Y*Ge)*V2,y:(ut*gt+Y*pt)*V2,z:(ut*et+Y*vt)*V2};return{position:mt,velocity:At,meanElements:se}}function RH(i,e){var t=e.opsmode,n=e.epoch,s=e.xbstar,a=e.xecco,r=e.xargpo,l=e.xinclo,c=e.xmo,f=e.xno,d=e.xnodeo,g,v,y,S,A,M,b,C,w,R,U,O,I,P,N,L,k,X,W,$,ce,z,q,Q,re,H,G,K,se,J,ne,ue,pe,ve,Ve,ze,Qe,Ie,rt,Z,Le,Ue,Re,me,Pe,Se,ye,nt,ee,V,de,Be,be,Me,$e,at,ut=15e-13,Y=i;Y.isimp=0,Y.method="n",Y.aycof=0,Y.con41=0,Y.cc1=0,Y.cc4=0,Y.cc5=0,Y.d2=0,Y.d3=0,Y.d4=0,Y.delmo=0,Y.eta=0,Y.argpdot=0,Y.omgcof=0,Y.sinmao=0,Y.t=0,Y.t2cof=0,Y.t3cof=0,Y.t4cof=0,Y.t5cof=0,Y.x1mth2=0,Y.x7thm1=0,Y.mdot=0,Y.nodedot=0,Y.xlcof=0,Y.xmcof=0,Y.nodecf=0,Y.irez=0,Y.d2201=0,Y.d2211=0,Y.d3210=0,Y.d3222=0,Y.d4410=0,Y.d4422=0,Y.d5220=0,Y.d5232=0,Y.d5421=0,Y.d5433=0,Y.dedt=0,Y.del1=0,Y.del2=0,Y.del3=0,Y.didt=0,Y.dmdt=0,Y.dnodt=0,Y.domdt=0,Y.e3=0,Y.ee2=0,Y.peo=0,Y.pgho=0,Y.pho=0,Y.pinco=0,Y.plo=0,Y.se2=0,Y.se3=0,Y.sgh2=0,Y.sgh3=0,Y.sgh4=0,Y.sh2=0,Y.sh3=0,Y.si2=0,Y.si3=0,Y.sl2=0,Y.sl3=0,Y.sl4=0,Y.gsto=0,Y.xfact=0,Y.xgh2=0,Y.xgh3=0,Y.xgh4=0,Y.xh2=0,Y.xh3=0,Y.xi2=0,Y.xi3=0,Y.xl2=0,Y.xl3=0,Y.xl4=0,Y.xlamo=0,Y.zmol=0,Y.zmos=0,Y.atime=0,Y.xli=0,Y.xni=0,Y.bstar=s,Y.ecco=a,Y.argpo=r,Y.inclo=l,Y.mo=c,Y.no=f,Y.nodeo=d,Y.operationmode=t;var Oe=78/Qr+1,Ke=42/Qr,it=Ke*Ke*Ke*Ke;Y.init="y",Y.t=0;var fe={ecco:Y.ecco,epoch:n,inclo:Y.inclo,no:Y.no,method:Y.method,opsmode:Y.operationmode},Ae=CH(fe),st=Ae.ao,he=Ae.con42,je=Ae.cosio,He=Ae.cosio2,gt=Ae.eccsq,et=Ae.omeosq,Ge=Ae.posq,pt=Ae.rp,vt=Ae.rteosq,mt=Ae.sinio;if(Y.no=Ae.no,Y.con41=Ae.con41,Y.gsto=Ae.gsto,Y.a=Math.pow(Y.no*xH,-2/3),Y.alta=Y.a*(1+Y.ecco)-1,Y.altp=Y.a*(1-Y.ecco)-1,Y.error=0,et>=0||Y.no>=0){if(Y.isimp=0,pt<220/Qr+1&&(Y.isimp=1),G=Oe,ce=it,X=(pt-1)*Qr,X<156){G=X-78,X<98&&(G=20);var At=(120-G)/Qr;ce=At*At*At*At,G=G/Qr+1}W=1/Ge,Se=1/(st-G),Y.eta=st*Y.ecco*Se,O=Y.eta*Y.eta,U=Y.ecco*Y.eta,$=Math.abs(1-O),M=ce*Math.pow(Se,4),b=M/Math.pow($,3.5),S=b*Y.no*(st*(1+1.5*O+U*(4+O))+.375*vd*Se/$*Y.con41*(8+3*O*(8+O))),Y.cc1=Y.bstar*S,A=0,Y.ecco>1e-4&&(A=-2*M*Se*yd*Y.no*mt/Y.ecco),Y.x1mth2=1-He,Y.cc4=2*Y.no*b*st*et*(Y.eta*(2+.5*O)+Y.ecco*(.5+2*O)-vd*Se/(st*$)*(-3*Y.con41*(1-2*U+O*(1.5-.5*U))+.75*Y.x1mth2*(2*O-U*(1+O))*Math.cos(2*Y.argpo))),Y.cc5=2*b*st*et*(1+2.75*(O+U)+U*O),C=He*He,Re=1.5*vd*W*Y.no,me=.5*Re*vd*W,Pe=-.46875*AH*W*W*Y.no,Y.mdot=Y.no+.5*Re*vt*Y.con41+.0625*me*vt*(13-78*He+137*C),Y.argpdot=-.5*Re*he+.0625*me*(7-114*He+395*C)+Pe*(3-36*He+49*C),nt=-Re*je,Y.nodedot=nt+(.5*me*(4-19*He)+2*Pe*(3-7*He))*je,ye=Y.argpdot+Y.nodedot,Y.omgcof=Y.bstar*A*Math.cos(Y.argpo),Y.xmcof=0,Y.ecco>1e-4&&(Y.xmcof=-bv*M*Y.bstar/U),Y.nodecf=3.5*et*nt*Y.cc1,Y.t2cof=1.5*Y.cc1,Math.abs(je+1)>15e-13?Y.xlcof=-.25*yd*mt*(3+5*je)/(1+je):Y.xlcof=-.25*yd*mt*(3+5*je)/ut,Y.aycof=-.5*yd*mt;var Vt=1+Y.eta*Math.cos(Y.mo);if(Y.delmo=Vt*Vt*Vt,Y.sinmao=Math.sin(Y.mo),Y.x7thm1=7*He-1,2*Il/Y.no>=225){Y.method="d",Y.isimp=1,Le=0,N=Y.inclo;var Pt={epoch:n,ep:Y.ecco,argpp:Y.argpo,tc:Le,inclp:Y.inclo,nodep:Y.nodeo,np:Y.no,e3:Y.e3,ee2:Y.ee2,peo:Y.peo,pgho:Y.pgho,pho:Y.pho,pinco:Y.pinco,plo:Y.plo,se2:Y.se2,se3:Y.se3,sgh2:Y.sgh2,sgh3:Y.sgh3,sgh4:Y.sgh4,sh2:Y.sh2,sh3:Y.sh3,si2:Y.si2,si3:Y.si3,sl2:Y.sl2,sl3:Y.sl3,sl4:Y.sl4,xgh2:Y.xgh2,xgh3:Y.xgh3,xgh4:Y.xgh4,xh2:Y.xh2,xh3:Y.xh3,xi2:Y.xi2,xi3:Y.xi3,xl2:Y.xl2,xl3:Y.xl3,xl4:Y.xl4,zmol:Y.zmol,zmos:Y.zmos},ot=TH(Pt);Y.e3=ot.e3,Y.ee2=ot.ee2,Y.peo=ot.peo,Y.pgho=ot.pgho,Y.pho=ot.pho,Y.pinco=ot.pinco,Y.plo=ot.plo,Y.se2=ot.se2,Y.se3=ot.se3,Y.sgh2=ot.sgh2,Y.sgh3=ot.sgh3,Y.sgh4=ot.sgh4,Y.sh2=ot.sh2,Y.sh3=ot.sh3,Y.si2=ot.si2,Y.si3=ot.si3,Y.sl2=ot.sl2,Y.sl3=ot.sl3,Y.sl4=ot.sl4,v=ot.sinim,g=ot.cosim,w=ot.em,R=ot.emsq,z=ot.s1,q=ot.s2,Q=ot.s3,re=ot.s4,H=ot.s5,K=ot.ss1,se=ot.ss2,J=ot.ss3,ne=ot.ss4,ue=ot.ss5,pe=ot.sz1,ve=ot.sz3,Ve=ot.sz11,ze=ot.sz13,Qe=ot.sz21,Ie=ot.sz23,rt=ot.sz31,Z=ot.sz33,Y.xgh2=ot.xgh2,Y.xgh3=ot.xgh3,Y.xgh4=ot.xgh4,Y.xh2=ot.xh2,Y.xh3=ot.xh3,Y.xi2=ot.xi2,Y.xi3=ot.xi3,Y.xl2=ot.xl2,Y.xl3=ot.xl3,Y.xl4=ot.xl4,Y.zmol=ot.zmol,Y.zmos=ot.zmos,k=ot.nm,ee=ot.z1,V=ot.z3,de=ot.z11,Be=ot.z13,be=ot.z21,Me=ot.z23,$e=ot.z31,at=ot.z33;var tn={inclo:N,init:Y.init,ep:Y.ecco,inclp:Y.inclo,nodep:Y.nodeo,argpp:Y.argpo,mp:Y.mo,opsmode:Y.operationmode},gn=tU(Y,tn);Y.ecco=gn.ep,Y.inclo=gn.inclp,Y.nodeo=gn.nodep,Y.argpo=gn.argpp,Y.mo=gn.mp,I=0,P=0,L=0;var zn={cosim:g,emsq:R,argpo:Y.argpo,s1:z,s2:q,s3:Q,s4:re,s5:H,sinim:v,ss1:K,ss2:se,ss3:J,ss4:ne,ss5:ue,sz1:pe,sz3:ve,sz11:Ve,sz13:ze,sz21:Qe,sz23:Ie,sz31:rt,sz33:Z,t:Y.t,tc:Le,gsto:Y.gsto,mo:Y.mo,mdot:Y.mdot,no:Y.no,nodeo:Y.nodeo,nodedot:Y.nodedot,xpidot:ye,z1:ee,z3:V,z11:de,z13:Be,z21:be,z23:Me,z31:$e,z33:at,ecco:Y.ecco,eccsq:gt,em:w,argpm:I,inclm:N,mm:L,nm:k,nodem:P,irez:Y.irez,atime:Y.atime,d2201:Y.d2201,d2211:Y.d2211,d3210:Y.d3210,d3222:Y.d3222,d4410:Y.d4410,d4422:Y.d4422,d5220:Y.d5220,d5232:Y.d5232,d5421:Y.d5421,d5433:Y.d5433,dedt:Y.dedt,didt:Y.didt,dmdt:Y.dmdt,dnodt:Y.dnodt,domdt:Y.domdt,del1:Y.del1,del2:Y.del2,del3:Y.del3,xfact:Y.xfact,xlamo:Y.xlamo,xli:Y.xli,xni:Y.xni},en=EH(zn);Y.irez=en.irez,Y.atime=en.atime,Y.d2201=en.d2201,Y.d2211=en.d2211,Y.d3210=en.d3210,Y.d3222=en.d3222,Y.d4410=en.d4410,Y.d4422=en.d4422,Y.d5220=en.d5220,Y.d5232=en.d5232,Y.d5421=en.d5421,Y.d5433=en.d5433,Y.dedt=en.dedt,Y.didt=en.didt,Y.dmdt=en.dmdt,Y.dnodt=en.dnodt,Y.domdt=en.domdt,Y.del1=en.del1,Y.del2=en.del2,Y.del3=en.del3,Y.xfact=en.xfact,Y.xlamo=en.xlamo,Y.xli=en.xli,Y.xni=en.xni}Y.isimp!==1&&(y=Y.cc1*Y.cc1,Y.d2=4*st*Se*y,Ue=Y.d2*Se*Y.cc1/3,Y.d3=(17*st+G)*Ue,Y.d4=.5*Ue*st*Se*(221*st+31*G)*Y.cc1,Y.t3cof=Y.d2+2*y,Y.t4cof=.25*(3*Y.d3+Y.cc1*(12*Y.d2+10*y)),Y.t5cof=.2*(3*Y.d4+12*Y.cc1*Y.d3+6*Y.d2*Y.d2+15*y*(2*Y.d2+y)))}nU(Y,0),Y.init="n"}function i0(i,e){var t="i",n=0,s=i.substring(2,7),a=parseInt(i.substring(18,20),10),r=parseFloat(i.substring(20,32)),l=parseFloat(i.substring(33,43)),c=parseFloat("".concat(i.substring(44,45),".").concat(i.substring(45,50),"E").concat(i.substring(50,52))),f=parseFloat("".concat(i.substring(53,54),".").concat(i.substring(54,59),"E").concat(i.substring(59,61))),d=parseFloat(e.substring(8,16))*Gg,g=parseFloat(e.substring(17,25))*Gg,v=parseFloat(".".concat(e.substring(26,33))),y=parseFloat(e.substring(34,42))*Gg,S=parseFloat(e.substring(43,51))*Gg,A=parseFloat(e.substring(52,63))/MH,M=a<57?a+2e3:a+1900,b=bH(M,r),C=b.mon,w=b.day,R=b.hr,U=b.minute,O=b.sec,I=e1(M,C,w,R,U,O),P={error:n,satnum:s,epochyr:a,epochdays:r,ndot:l,nddot:c,bstar:f,inclo:d,nodeo:g,ecco:v,argpo:y,mo:S,no:A,jdsatepoch:I};return RH(P,{opsmode:t,satn:P.satnum,epoch:P.jdsatepoch-24332815e-1,xbstar:P.bstar,xecco:P.ecco,xargpo:P.argpo,xinclo:P.inclo,xmo:P.mo,xno:P.no,xnodeo:P.nodeo}),P}function t1(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];var s=e1.apply(void 0,t),a=(s-i.jdsatepoch)*yH;return nU(i,a)}function ET(i,e){for(var t=6378.137,n=6356.7523142,s=Math.sqrt(i.x*i.x+i.y*i.y),a=(t-n)/t,r=2*a-a*a,l=Math.atan2(i.y,i.x)-e;l<-Il;)l+=zi;for(;l>Il;)l-=zi;for(var c=20,f=0,d=Math.atan2(i.z,Math.sqrt(i.x*i.x+i.y*i.y)),g;f++<c;)g=1/Math.sqrt(1-r*(Math.sin(d)*Math.sin(d))),d=Math.atan2(i.z+t*g*r*Math.sin(d),s);var v=s/Math.cos(d)-t*g;return{longitude:l,latitude:d,height:v}}var k2={exports:{}},Ew;function DH(){return Ew||(Ew=1,function(i,e){(function(){var t=Math.PI,n=Math.sin,s=Math.cos,a=Math.tan,r=Math.asin,l=Math.atan2,c=Math.acos,f=t/180,d=1e3*60*60*24,g=2440588,v=2451545;function y(G){return G.valueOf()/d-.5+g}function S(G){return new Date((G+.5-g)*d)}function A(G){return y(G)-v}var M=f*23.4397;function b(G,K){return l(n(G)*s(M)-a(K)*n(M),s(G))}function C(G,K){return r(n(K)*s(M)+s(K)*n(M)*n(G))}function w(G,K,se){return l(n(G),s(G)*n(K)-a(se)*s(K))}function R(G,K,se){return r(n(K)*n(se)+s(K)*s(se)*s(G))}function U(G,K){return f*(280.16+360.9856235*G)-K}function O(G){return G<0&&(G=0),2967e-7/Math.tan(G+.00312536/(G+.08901179))}function I(G){return f*(357.5291+.98560028*G)}function P(G){var K=f*(1.9148*n(G)+.02*n(2*G)+3e-4*n(3*G)),se=f*102.9372;return G+K+se+t}function N(G){var K=I(G),se=P(K);return{dec:C(se,0),ra:b(se,0)}}var L={};L.getPosition=function(G,K,se){var J=f*-se,ne=f*K,ue=A(G),pe=N(ue),ve=U(ue,J)-pe.ra;return{azimuth:w(ve,ne,pe.dec),altitude:R(ve,ne,pe.dec)}};var k=L.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];L.addTime=function(G,K,se){k.push([G,K,se])};var X=9e-4;function W(G,K){return Math.round(G-X-K/(2*t))}function $(G,K,se){return X+(G+K)/(2*t)+se}function ce(G,K,se){return v+G+.0053*n(K)-.0069*n(2*se)}function z(G,K,se){return c((n(G)-n(K)*n(se))/(s(K)*s(se)))}function q(G){return-2.076*Math.sqrt(G)/60}function Q(G,K,se,J,ne,ue,pe){var ve=z(G,se,J),Ve=$(ve,K,ne);return ce(Ve,ue,pe)}L.getTimes=function(G,K,se,J){J=J||0;var ne=f*-se,ue=f*K,pe=q(J),ve=A(G),Ve=W(ve,ne),ze=$(0,ne,Ve),Qe=I(ze),Ie=P(Qe),rt=C(Ie,0),Z=ce(ze,Qe,Ie),Le,Ue,Re,me,Pe,Se,ye={solarNoon:S(Z),nadir:S(Z-.5)};for(Le=0,Ue=k.length;Le<Ue;Le+=1)Re=k[Le],me=(Re[0]+pe)*f,Pe=Q(me,ne,ue,rt,Ve,Qe,Ie),Se=Z-(Pe-Z),ye[Re[1]]=S(Se),ye[Re[2]]=S(Pe);return ye};function re(G){var K=f*(218.316+13.176396*G),se=f*(134.963+13.064993*G),J=f*(93.272+13.22935*G),ne=K+f*6.289*n(se),ue=f*5.128*n(J),pe=385001-20905*s(se);return{ra:b(ne,ue),dec:C(ne,ue),dist:pe}}L.getMoonPosition=function(G,K,se){var J=f*-se,ne=f*K,ue=A(G),pe=re(ue),ve=U(ue,J)-pe.ra,Ve=R(ve,ne,pe.dec),ze=l(n(ve),a(ne)*s(pe.dec)-n(pe.dec)*s(ve));return Ve=Ve+O(Ve),{azimuth:w(ve,ne,pe.dec),altitude:Ve,distance:pe.dist,parallacticAngle:ze}},L.getMoonIllumination=function(G){var K=A(G||new Date),se=N(K),J=re(K),ne=149598e3,ue=c(n(se.dec)*n(J.dec)+s(se.dec)*s(J.dec)*s(se.ra-J.ra)),pe=l(ne*n(ue),J.dist-ne*s(ue)),ve=l(s(se.dec)*n(se.ra-J.ra),n(se.dec)*s(J.dec)-s(se.dec)*n(J.dec)*s(se.ra-J.ra));return{fraction:(1+s(pe))/2,phase:.5+.5*pe*(ve<0?-1:1)/Math.PI,angle:ve}};function H(G,K){return new Date(G.valueOf()+K*d/24)}L.getMoonTimes=function(G,K,se,J){var ne=new Date(G);J?ne.setUTCHours(0,0,0,0):ne.setHours(0,0,0,0);for(var ue=.133*f,pe=L.getMoonPosition(ne,K,se).altitude-ue,ve,Ve,ze,Qe,Ie,rt,Z,Le,Ue,Re,me,Pe,Se,ye=1;ye<=24&&(ve=L.getMoonPosition(H(ne,ye),K,se).altitude-ue,Ve=L.getMoonPosition(H(ne,ye+1),K,se).altitude-ue,Ie=(pe+Ve)/2-ve,rt=(Ve-pe)/2,Z=-rt/(2*Ie),Le=(Ie*Z+rt)*Z+ve,Ue=rt*rt-4*Ie*ve,Re=0,Ue>=0&&(Se=Math.sqrt(Ue)/(Math.abs(Ie)*2),me=Z-Se,Pe=Z+Se,Math.abs(me)<=1&&Re++,Math.abs(Pe)<=1&&Re++,me<-1&&(me=Pe)),Re===1?pe<0?ze=ye+me:Qe=ye+me:Re===2&&(ze=ye+(Le<0?Pe:me),Qe=ye+(Le<0?me:Pe)),!(ze&&Qe));ye+=2)pe=Ve;var nt={};return ze&&(nt.rise=H(ne,ze)),Qe&&(nt.set=H(ne,Qe)),!ze&&!Qe&&(nt[Le>0?"alwaysUp":"alwaysDown"]=!0),nt},i.exports=L})()}(k2)),k2.exports}var BH=DH();const kM=Zx(BH);async function s0(){const i=await fetch("https://iss-tle.powertubeee.workers.dev/");if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);const t=(await i.text()).trim().split(`
`);return[t[0],t[1]]}function iU(){const[i,e]=ge.useState(null);return ge.useEffect(()=>{let t=null,n=null;async function s(){const[r,l]=await s0();n=i0(r,l)}function a(){if(!n)return;const r=new Date,l=t1(n,r);if(!l.position)return;const c=PS(r),f=ET(l.position,c),d=f.latitude*180/Math.PI,g=f.longitude*180/Math.PI,v=f.height,S=kM.getPosition(r,d,g).altitude>0;e({lat:d,lon:g,alt:v,vel:Math.sqrt(Math.pow(l.velocity.x,2)+Math.pow(l.velocity.y,2)+Math.pow(l.velocity.z,2))*3.6,visibility:S?"sunlit":"eclipse"})}return s().then(()=>{t=setInterval(a,1e3)}),()=>clearInterval(t)},[]),i}const UH=6371,Io=1;function Ix(i,e,t){const n=i*Math.PI/180,s=-e*Math.PI/180,a=t*Math.cos(n)*Math.cos(s),r=t*Math.sin(n),l=t*Math.cos(n)*Math.sin(s);return[a,r,l]}function IS(i=1){const e=Date.now()/1e3,t=86164;return e*i%t/t*2*Math.PI}function LH(i,e=1){if(!(i&&!isNaN(i.lat)&&!isNaN(i.lon)&&!isNaN(i.alt)))return[0,0,0];const n=Ix(i.lat,i.lon,e+i.alt/6371*e+.125),s=IS(),a=new le(...n);return a.applyAxisAngle(new le(0,1,0),s),[a.x,a.y,a.z]}function OH({durationMin:i=90,steps:e=120,earthRadiusUnits:t=1}){const n=ge.useRef(),s=ge.useRef(),[a,r]=ge.useState(null),l=ge.useRef(null),[c,f]=ge.useState(null),d=.5;ge.useEffect(()=>{let y=!0;return s0().then(([S,A])=>{y&&f(i0(S,A))}).catch(()=>{f(null)}),()=>{y=!1}},[]);const g=()=>{if(!c)return null;const y=new Date,S=i*60/e,A=[];for(let M=0;M<=e;M++){const b=new Date(y.getTime()+M*S*1e3),C=t1(c,b);if(!C.position)A.push(0,0,0);else{const w=PS(b),{latitude:R,longitude:U,height:O}=ET(C.position,w),[I,P,N]=Ix(R*180/Math.PI,U*180/Math.PI,t+O/UH*t);A.push(I,P,N)}}return new Float32Array(A)};ge.useEffect(()=>{if(!c)return;const y=()=>{const A=g();A&&r(A)};y();const S=setInterval(y,5e3);return()=>clearInterval(S)},[c,i,e,t]),ge.useEffect(()=>{if(!a)return;let y=s.current;if(y||(y=new $t,s.current=y),y.getAttribute("position")){const M=y.getAttribute("position");M.array=a,M.count=a.length/3,M.needsUpdate=!0}else y.setAttribute("position",new Dt(a,3));const S=a.length/3;let A=l.current;if(!A){A=new Float32Array(S*3);for(let M=0;M<S;M++)A[M*3]=.2,A[M*3+1]=.2,A[M*3+2]=.2;l.current=A}if(y.getAttribute("color")){const M=y.getAttribute("color");M.array=A,M.needsUpdate=!0}else y.setAttribute("color",new Dt(A,3));y.setDrawRange(0,S)},[a]);const v=ge.useMemo(()=>new ma({vertexColors:!0,linewidth:.5}),[]);return Oc(({clock:y})=>{if(!s.current||!l.current)return;const S=s.current,A=l.current,M=S.getAttribute("position").count,b=y.getElapsedTime()*d%1;for(let C=0;C<M;C++){const w=C/(M-1);let R=Math.abs(w-b);R>.5&&(R=1-R);const O=Math.max(0,1-R/.1),I=new St(.1,.1,.1),P=I.r*(1-O)+O*1.5,N=I.g*(1-O)+O*1.5,L=I.b*(1-O)+O*1.5;A[C*3]=P,A[C*3+1]=N,A[C*3+2]=L}S.getAttribute("color").needsUpdate=!0,n.current&&(n.current.rotation.y=IS())}),s.current?oe.jsx("primitive",{object:new Uc(s.current,v),ref:n,scale:[1.125,1.125,1.125]}):null}const sU=ge.createContext(),NH=({children:i})=>{const[e,t]=ge.useState("earth"),[n,s]=ge.useState(0),[a,r]=ge.useState(!1),[l,c]=ge.useState(!1),[f,d]=ge.useState(!1),[g,v]=ge.useState(null),y=()=>s(.5),S=()=>s(-.5),A=()=>r(w=>!w),M=()=>c(!0),b=w=>v(w),C=()=>v(null);return oe.jsx(sU.Provider,{value:{focusTarget:e,setFocusTarget:t,zoomDelta:n,setZoomDelta:s,zoomIn:y,zoomOut:S,showGridLines:a,toggleGridLines:A,recenterCamera:M,recenterCameraRequested:l,setRecenterCameraRequested:c,thermalView:f,setThermalView:d,centerPanelCity:g,openCenterPanelWithCity:b,closeCenterPanel:C},children:i})},Bl=()=>{const i=ge.useContext(sU);if(!i)throw new Error("useSceneControls must be used within SceneControlsProvider");return i};function PH(i,e,t){return new ls({uniforms:{colorMap:{value:i},nightMap:{value:e},sunDirectionWorld:{value:t}},vertexShader:`
      varying vec3 vNormalWorld;
      varying vec2 vUv;

      void main() {
        vec4 worldNormal = modelMatrix * vec4(normal, 0.0);
        vNormalWorld = normalize(worldNormal.xyz);
        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }
    `,fragmentShader:`
      uniform sampler2D nightMap;
      uniform vec3 sunDirectionWorld;
      
      varying vec3 vNormalWorld;
      varying vec2 vUv;

      void main() {
        vec3 normal = normalize(vNormalWorld);
        vec3 sunDir = normalize(sunDirectionWorld);
        
        float nightIntensity = max(0.0, -dot(normal, sunDir));
        nightIntensity = smoothstep(0.001, 0.9, nightIntensity);
        
        vec4 nightColor = texture2D(nightMap, vUv);
        nightColor.rgb = pow(nightColor.rgb * 1.9, vec3(2.2));
        nightColor.a = nightIntensity;
        
        gl_FragColor = nightColor;
      }
    `,transparent:!0,side:ao,depthWrite:!1})}function IH({rimHex:i=16777215,facingHex:e=16777215}={}){return{uniforms:{color1:{value:new St(i)},color2:{value:new St(e)},fresnelBias:{value:.1},fresnelScale:{value:1},fresnelPower:{value:4}},vertexShader:`
      uniform float fresnelBias;
      uniform float fresnelScale;
      uniform float fresnelPower;

      varying float vReflectionFactor;

      void main() {
        vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
        vec4 worldPosition = modelMatrix * vec4(position, 1.0);

        vec3 worldNormal = normalize(mat3(modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz) * normal);
        vec3 I = worldPosition.xyz - cameraPosition;

        vReflectionFactor = fresnelBias + fresnelScale * pow(1.0 + dot(normalize(I), worldNormal), fresnelPower);

        gl_Position = projectionMatrix * mvPosition;
      }
    `,fragmentShader:`
      uniform vec3 color1;
      uniform vec3 color2;
      varying float vReflectionFactor;

      void main() {
        float f = clamp(vReflectionFactor, 0.0, 1.0);
        gl_FragColor = vec4(mix(color2, color1, vec3(f)), f);
      }
    `,transparent:!0,blending:Y_}}function FH({sunDirection:i,...e}){const t=ge.useRef(),n=ge.useRef(),[s,a,r,l]=Jf(Qv,["import.meta.env.BASE_URL + textures/earth/earthmap2k.jpg","import.meta.env.BASE_URL + textures/earth/earthnm2k.png","import.meta.env.BASE_URL + textures/earth/earthlights2k.jpg","import.meta.env.BASE_URL + textures/earth/earthhiresclouds4K.png"]),c=ge.useMemo(()=>PH(s,r,i),[s,r,i]);return Oc((f,d)=>{n.current&&(n.current.rotation.y+=d*.01)}),oe.jsxs("group",{ref:t,...e,children:[" // Group for the Earth, clouds and night material // Earth mesh",oe.jsxs("mesh",{castShadow:!0,receiveShadow:!0,children:[oe.jsx("sphereGeometry",{args:[1,92,92]})," // Earth geometry with 64 segments",oe.jsx("meshStandardMaterial",{map:s,normalMap:a,bumpScale:.01,roughness:.4,metalness:.1})]}),"// Night material sphere with a slight z-index shift to avoid z-fighting",oe.jsxs("mesh",{children:[oe.jsx("sphereGeometry",{args:[1.004,64,64]})," // Sphere geometry for the Night material, z-index slightly shifted to avoid z-fighting",oe.jsx("primitive",{object:c,attach:"material"})," // Apply the Night material (imported) to the sphere geometry"]}),"// Clouds mesh with a slight z-index shift to avoid z-fighting",oe.jsxs("mesh",{ref:n,castShadow:!0,receiveShadow:!0,children:[oe.jsx("sphereGeometry",{args:[1.0001,256,256]})," // Clouds geometry with 256 segments",oe.jsx("meshStandardMaterial",{map:l,transparent:!0,opacity:.5,depthWrite:!1,side:ao})]}),"// Add a fresnel shader to the Earth and clouds to simulate reflections on the surface",oe.jsxs("mesh",{children:[oe.jsx("icosahedronGeometry",{args:[1.001,32]}),oe.jsx("shaderMaterial",{...IH({rimHex:36294,facingHex:0})})]})]})}function Tv(){return Tv=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Tv.apply(null,arguments)}const zH=parseInt(jf.replace(/\D+/g,""));function Cw(i,e){if(e===SB)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===wx||e===Vb){let t=i.getIndex();if(t===null){const r=[],l=i.getAttribute("position");if(l!==void 0){for(let c=0;c<l.count;c++)r.push(c);i.setIndex(r),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,s=[];if(t)if(e===wx)for(let r=1;r<=n;r++)s.push(t.getX(0)),s.push(t.getX(r)),s.push(t.getX(r+1));else for(let r=0;r<n;r++)r%2===0?(s.push(t.getX(r)),s.push(t.getX(r+1)),s.push(t.getX(r+2))):(s.push(t.getX(r+2)),s.push(t.getX(r+1)),s.push(t.getX(r)));s.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=i.clone();return a.setIndex(s),a.clearGroups(),a}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}var GH=Object.defineProperty,HH=(i,e,t)=>e in i?GH(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,VH=(i,e,t)=>(HH(i,e+"",t),t);class kH{constructor(){VH(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const s=n.slice(0);for(let a=0,r=s.length;a<r;a++)s[a].call(this,e);e.target=null}}}var XH=Object.defineProperty,jH=(i,e,t)=>e in i?XH(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ht=(i,e,t)=>(jH(i,typeof e!="symbol"?e+"":e,t),t);const __=new Vd,ww=new gu,YH=Math.cos(70*(Math.PI/180)),Rw=(i,e)=>(i%e+e)%e;let WH=class extends kH{constructor(e,t){super(),Ht(this,"object"),Ht(this,"domElement"),Ht(this,"enabled",!0),Ht(this,"target",new le),Ht(this,"minDistance",0),Ht(this,"maxDistance",1/0),Ht(this,"minZoom",0),Ht(this,"maxZoom",1/0),Ht(this,"minPolarAngle",0),Ht(this,"maxPolarAngle",Math.PI),Ht(this,"minAzimuthAngle",-1/0),Ht(this,"maxAzimuthAngle",1/0),Ht(this,"enableDamping",!1),Ht(this,"dampingFactor",.05),Ht(this,"enableZoom",!0),Ht(this,"zoomSpeed",1),Ht(this,"enableRotate",!0),Ht(this,"rotateSpeed",1),Ht(this,"enablePan",!0),Ht(this,"panSpeed",1),Ht(this,"screenSpacePanning",!0),Ht(this,"keyPanSpeed",7),Ht(this,"zoomToCursor",!1),Ht(this,"autoRotate",!1),Ht(this,"autoRotateSpeed",2),Ht(this,"reverseOrbit",!1),Ht(this,"reverseHorizontalOrbit",!1),Ht(this,"reverseVerticalOrbit",!1),Ht(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ht(this,"mouseButtons",{LEFT:ad.ROTATE,MIDDLE:ad.DOLLY,RIGHT:ad.PAN}),Ht(this,"touches",{ONE:rd.ROTATE,TWO:rd.DOLLY_PAN}),Ht(this,"target0"),Ht(this,"position0"),Ht(this,"zoom0"),Ht(this,"_domElementKeyEvents",null),Ht(this,"getPolarAngle"),Ht(this,"getAzimuthalAngle"),Ht(this,"setPolarAngle"),Ht(this,"setAzimuthalAngle"),Ht(this,"getDistance"),Ht(this,"getZoomScale"),Ht(this,"listenToKeyEvents"),Ht(this,"stopListenToKeyEvents"),Ht(this,"saveState"),Ht(this,"reset"),Ht(this,"update"),Ht(this,"connect"),Ht(this,"dispose"),Ht(this,"dollyIn"),Ht(this,"dollyOut"),Ht(this,"getScale"),Ht(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=fe=>{let Ae=Rw(fe,2*Math.PI),st=d.phi;st<0&&(st+=2*Math.PI),Ae<0&&(Ae+=2*Math.PI);let he=Math.abs(Ae-st);2*Math.PI-he<he&&(Ae<st?Ae+=2*Math.PI:st+=2*Math.PI),g.phi=Ae-st,n.update()},this.setAzimuthalAngle=fe=>{let Ae=Rw(fe,2*Math.PI),st=d.theta;st<0&&(st+=2*Math.PI),Ae<0&&(Ae+=2*Math.PI);let he=Math.abs(Ae-st);2*Math.PI-he<he&&(Ae<st?Ae+=2*Math.PI:st+=2*Math.PI),g.theta=Ae-st,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=fe=>{fe.addEventListener("keydown",Me),this._domElementKeyEvents=fe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Me),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(s),n.update(),c=l.NONE},this.update=(()=>{const fe=new le,Ae=new le(0,1,0),st=new Rs().setFromUnitVectors(e.up,Ae),he=st.clone().invert(),je=new le,He=new Rs,gt=2*Math.PI;return function(){const Ge=n.object.position;st.setFromUnitVectors(e.up,Ae),he.copy(st).invert(),fe.copy(Ge).sub(n.target),fe.applyQuaternion(st),d.setFromVector3(fe),n.autoRotate&&c===l.NONE&&$(X()),n.enableDamping?(d.theta+=g.theta*n.dampingFactor,d.phi+=g.phi*n.dampingFactor):(d.theta+=g.theta,d.phi+=g.phi);let pt=n.minAzimuthAngle,vt=n.maxAzimuthAngle;isFinite(pt)&&isFinite(vt)&&(pt<-Math.PI?pt+=gt:pt>Math.PI&&(pt-=gt),vt<-Math.PI?vt+=gt:vt>Math.PI&&(vt-=gt),pt<=vt?d.theta=Math.max(pt,Math.min(vt,d.theta)):d.theta=d.theta>(pt+vt)/2?Math.max(pt,d.theta):Math.min(vt,d.theta)),d.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,d.phi)),d.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(y,n.dampingFactor):n.target.add(y),n.zoomToCursor&&N||n.object.isOrthographicCamera?d.radius=se(d.radius):d.radius=se(d.radius*v),fe.setFromSpherical(d),fe.applyQuaternion(he),Ge.copy(n.target).add(fe),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(g.theta*=1-n.dampingFactor,g.phi*=1-n.dampingFactor,y.multiplyScalar(1-n.dampingFactor)):(g.set(0,0,0),y.set(0,0,0));let mt=!1;if(n.zoomToCursor&&N){let At=null;if(n.object instanceof Ji&&n.object.isPerspectiveCamera){const Vt=fe.length();At=se(Vt*v);const Pt=Vt-At;n.object.position.addScaledVector(I,Pt),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const Vt=new le(P.x,P.y,0);Vt.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix(),mt=!0;const Pt=new le(P.x,P.y,0);Pt.unproject(n.object),n.object.position.sub(Pt).add(Vt),n.object.updateMatrixWorld(),At=fe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;At!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(At).add(n.object.position):(__.origin.copy(n.object.position),__.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(__.direction))<YH?e.lookAt(n.target):(ww.setFromNormalAndCoplanarPoint(n.object.up,n.target),__.intersectPlane(ww,n.target))))}else n.object instanceof Au&&n.object.isOrthographicCamera&&(mt=v!==1,mt&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/v)),n.object.updateProjectionMatrix()));return v=1,N=!1,mt||je.distanceToSquared(n.object.position)>f||8*(1-He.dot(n.object.quaternion))>f?(n.dispatchEvent(s),je.copy(n.object.position),He.copy(n.object.quaternion),mt=!1,!0):!1}})(),this.connect=fe=>{n.domElement=fe,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",ut),n.domElement.addEventListener("pointerdown",nt),n.domElement.addEventListener("pointercancel",V),n.domElement.addEventListener("wheel",be)},this.dispose=()=>{var fe,Ae,st,he,je,He;n.domElement&&(n.domElement.style.touchAction="auto"),(fe=n.domElement)==null||fe.removeEventListener("contextmenu",ut),(Ae=n.domElement)==null||Ae.removeEventListener("pointerdown",nt),(st=n.domElement)==null||st.removeEventListener("pointercancel",V),(he=n.domElement)==null||he.removeEventListener("wheel",be),(je=n.domElement)==null||je.ownerDocument.removeEventListener("pointermove",ee),(He=n.domElement)==null||He.ownerDocument.removeEventListener("pointerup",V),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Me)};const n=this,s={type:"change"},a={type:"start"},r={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let c=l.NONE;const f=1e-6,d=new LM,g=new LM;let v=1;const y=new le,S=new tt,A=new tt,M=new tt,b=new tt,C=new tt,w=new tt,R=new tt,U=new tt,O=new tt,I=new le,P=new tt;let N=!1;const L=[],k={};function X(){return 2*Math.PI/60/60*n.autoRotateSpeed}function W(){return Math.pow(.95,n.zoomSpeed)}function $(fe){n.reverseOrbit||n.reverseHorizontalOrbit?g.theta+=fe:g.theta-=fe}function ce(fe){n.reverseOrbit||n.reverseVerticalOrbit?g.phi+=fe:g.phi-=fe}const z=(()=>{const fe=new le;return function(st,he){fe.setFromMatrixColumn(he,0),fe.multiplyScalar(-st),y.add(fe)}})(),q=(()=>{const fe=new le;return function(st,he){n.screenSpacePanning===!0?fe.setFromMatrixColumn(he,1):(fe.setFromMatrixColumn(he,0),fe.crossVectors(n.object.up,fe)),fe.multiplyScalar(st),y.add(fe)}})(),Q=(()=>{const fe=new le;return function(st,he){const je=n.domElement;if(je&&n.object instanceof Ji&&n.object.isPerspectiveCamera){const He=n.object.position;fe.copy(He).sub(n.target);let gt=fe.length();gt*=Math.tan(n.object.fov/2*Math.PI/180),z(2*st*gt/je.clientHeight,n.object.matrix),q(2*he*gt/je.clientHeight,n.object.matrix)}else je&&n.object instanceof Au&&n.object.isOrthographicCamera?(z(st*(n.object.right-n.object.left)/n.object.zoom/je.clientWidth,n.object.matrix),q(he*(n.object.top-n.object.bottom)/n.object.zoom/je.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function re(fe){n.object instanceof Ji&&n.object.isPerspectiveCamera||n.object instanceof Au&&n.object.isOrthographicCamera?v=fe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function H(fe){re(v/fe)}function G(fe){re(v*fe)}function K(fe){if(!n.zoomToCursor||!n.domElement)return;N=!0;const Ae=n.domElement.getBoundingClientRect(),st=fe.clientX-Ae.left,he=fe.clientY-Ae.top,je=Ae.width,He=Ae.height;P.x=st/je*2-1,P.y=-(he/He)*2+1,I.set(P.x,P.y,1).unproject(n.object).sub(n.object.position).normalize()}function se(fe){return Math.max(n.minDistance,Math.min(n.maxDistance,fe))}function J(fe){S.set(fe.clientX,fe.clientY)}function ne(fe){K(fe),R.set(fe.clientX,fe.clientY)}function ue(fe){b.set(fe.clientX,fe.clientY)}function pe(fe){A.set(fe.clientX,fe.clientY),M.subVectors(A,S).multiplyScalar(n.rotateSpeed);const Ae=n.domElement;Ae&&($(2*Math.PI*M.x/Ae.clientHeight),ce(2*Math.PI*M.y/Ae.clientHeight)),S.copy(A),n.update()}function ve(fe){U.set(fe.clientX,fe.clientY),O.subVectors(U,R),O.y>0?H(W()):O.y<0&&G(W()),R.copy(U),n.update()}function Ve(fe){C.set(fe.clientX,fe.clientY),w.subVectors(C,b).multiplyScalar(n.panSpeed),Q(w.x,w.y),b.copy(C),n.update()}function ze(fe){K(fe),fe.deltaY<0?G(W()):fe.deltaY>0&&H(W()),n.update()}function Qe(fe){let Ae=!1;switch(fe.code){case n.keys.UP:Q(0,n.keyPanSpeed),Ae=!0;break;case n.keys.BOTTOM:Q(0,-n.keyPanSpeed),Ae=!0;break;case n.keys.LEFT:Q(n.keyPanSpeed,0),Ae=!0;break;case n.keys.RIGHT:Q(-n.keyPanSpeed,0),Ae=!0;break}Ae&&(fe.preventDefault(),n.update())}function Ie(){if(L.length==1)S.set(L[0].pageX,L[0].pageY);else{const fe=.5*(L[0].pageX+L[1].pageX),Ae=.5*(L[0].pageY+L[1].pageY);S.set(fe,Ae)}}function rt(){if(L.length==1)b.set(L[0].pageX,L[0].pageY);else{const fe=.5*(L[0].pageX+L[1].pageX),Ae=.5*(L[0].pageY+L[1].pageY);b.set(fe,Ae)}}function Z(){const fe=L[0].pageX-L[1].pageX,Ae=L[0].pageY-L[1].pageY,st=Math.sqrt(fe*fe+Ae*Ae);R.set(0,st)}function Le(){n.enableZoom&&Z(),n.enablePan&&rt()}function Ue(){n.enableZoom&&Z(),n.enableRotate&&Ie()}function Re(fe){if(L.length==1)A.set(fe.pageX,fe.pageY);else{const st=it(fe),he=.5*(fe.pageX+st.x),je=.5*(fe.pageY+st.y);A.set(he,je)}M.subVectors(A,S).multiplyScalar(n.rotateSpeed);const Ae=n.domElement;Ae&&($(2*Math.PI*M.x/Ae.clientHeight),ce(2*Math.PI*M.y/Ae.clientHeight)),S.copy(A)}function me(fe){if(L.length==1)C.set(fe.pageX,fe.pageY);else{const Ae=it(fe),st=.5*(fe.pageX+Ae.x),he=.5*(fe.pageY+Ae.y);C.set(st,he)}w.subVectors(C,b).multiplyScalar(n.panSpeed),Q(w.x,w.y),b.copy(C)}function Pe(fe){const Ae=it(fe),st=fe.pageX-Ae.x,he=fe.pageY-Ae.y,je=Math.sqrt(st*st+he*he);U.set(0,je),O.set(0,Math.pow(U.y/R.y,n.zoomSpeed)),H(O.y),R.copy(U)}function Se(fe){n.enableZoom&&Pe(fe),n.enablePan&&me(fe)}function ye(fe){n.enableZoom&&Pe(fe),n.enableRotate&&Re(fe)}function nt(fe){var Ae,st;n.enabled!==!1&&(L.length===0&&((Ae=n.domElement)==null||Ae.ownerDocument.addEventListener("pointermove",ee),(st=n.domElement)==null||st.ownerDocument.addEventListener("pointerup",V)),Y(fe),fe.pointerType==="touch"?$e(fe):de(fe))}function ee(fe){n.enabled!==!1&&(fe.pointerType==="touch"?at(fe):Be(fe))}function V(fe){var Ae,st,he;Oe(fe),L.length===0&&((Ae=n.domElement)==null||Ae.releasePointerCapture(fe.pointerId),(st=n.domElement)==null||st.ownerDocument.removeEventListener("pointermove",ee),(he=n.domElement)==null||he.ownerDocument.removeEventListener("pointerup",V)),n.dispatchEvent(r),c=l.NONE}function de(fe){let Ae;switch(fe.button){case 0:Ae=n.mouseButtons.LEFT;break;case 1:Ae=n.mouseButtons.MIDDLE;break;case 2:Ae=n.mouseButtons.RIGHT;break;default:Ae=-1}switch(Ae){case ad.DOLLY:if(n.enableZoom===!1)return;ne(fe),c=l.DOLLY;break;case ad.ROTATE:if(fe.ctrlKey||fe.metaKey||fe.shiftKey){if(n.enablePan===!1)return;ue(fe),c=l.PAN}else{if(n.enableRotate===!1)return;J(fe),c=l.ROTATE}break;case ad.PAN:if(fe.ctrlKey||fe.metaKey||fe.shiftKey){if(n.enableRotate===!1)return;J(fe),c=l.ROTATE}else{if(n.enablePan===!1)return;ue(fe),c=l.PAN}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(a)}function Be(fe){if(n.enabled!==!1)switch(c){case l.ROTATE:if(n.enableRotate===!1)return;pe(fe);break;case l.DOLLY:if(n.enableZoom===!1)return;ve(fe);break;case l.PAN:if(n.enablePan===!1)return;Ve(fe);break}}function be(fe){n.enabled===!1||n.enableZoom===!1||c!==l.NONE&&c!==l.ROTATE||(fe.preventDefault(),n.dispatchEvent(a),ze(fe),n.dispatchEvent(r))}function Me(fe){n.enabled===!1||n.enablePan===!1||Qe(fe)}function $e(fe){switch(Ke(fe),L.length){case 1:switch(n.touches.ONE){case rd.ROTATE:if(n.enableRotate===!1)return;Ie(),c=l.TOUCH_ROTATE;break;case rd.PAN:if(n.enablePan===!1)return;rt(),c=l.TOUCH_PAN;break;default:c=l.NONE}break;case 2:switch(n.touches.TWO){case rd.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Le(),c=l.TOUCH_DOLLY_PAN;break;case rd.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;Ue(),c=l.TOUCH_DOLLY_ROTATE;break;default:c=l.NONE}break;default:c=l.NONE}c!==l.NONE&&n.dispatchEvent(a)}function at(fe){switch(Ke(fe),c){case l.TOUCH_ROTATE:if(n.enableRotate===!1)return;Re(fe),n.update();break;case l.TOUCH_PAN:if(n.enablePan===!1)return;me(fe),n.update();break;case l.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Se(fe),n.update();break;case l.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;ye(fe),n.update();break;default:c=l.NONE}}function ut(fe){n.enabled!==!1&&fe.preventDefault()}function Y(fe){L.push(fe)}function Oe(fe){delete k[fe.pointerId];for(let Ae=0;Ae<L.length;Ae++)if(L[Ae].pointerId==fe.pointerId){L.splice(Ae,1);return}}function Ke(fe){let Ae=k[fe.pointerId];Ae===void 0&&(Ae=new tt,k[fe.pointerId]=Ae),Ae.set(fe.pageX,fe.pageY)}function it(fe){const Ae=fe.pointerId===L[0].pointerId?L[1]:L[0];return k[Ae.pointerId]}this.dollyIn=(fe=W())=>{G(fe),n.update()},this.dollyOut=(fe=W())=>{H(fe),n.update()},this.getScale=()=>v,this.setScale=fe=>{re(fe),n.update()},this.getZoomScale=()=>W(),t!==void 0&&this.connect(t),this.update()}};function Fx(i){if(typeof TextDecoder<"u")return new TextDecoder().decode(i);let e="";for(let t=0,n=i.length;t<n;t++)e+=String.fromCharCode(i[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const _d="srgb",Mu="srgb-linear",Dw=3001,qH=3e3;class CT extends Ia{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new $H(t)}),this.register(function(t){return new e7(t)}),this.register(function(t){return new c7(t)}),this.register(function(t){return new u7(t)}),this.register(function(t){return new f7(t)}),this.register(function(t){return new n7(t)}),this.register(function(t){return new i7(t)}),this.register(function(t){return new s7(t)}),this.register(function(t){return new a7(t)}),this.register(function(t){return new QH(t)}),this.register(function(t){return new r7(t)}),this.register(function(t){return new t7(t)}),this.register(function(t){return new l7(t)}),this.register(function(t){return new o7(t)}),this.register(function(t){return new JH(t)}),this.register(function(t){return new h7(t)}),this.register(function(t){return new d7(t)})}load(e,t,n,s){const a=this;let r;if(this.resourcePath!=="")r=this.resourcePath;else if(this.path!==""){const f=Of.extractUrlBase(e);r=Of.resolveURL(f,this.path)}else r=Of.extractUrlBase(e);this.manager.itemStart(e);const l=function(f){s?s(f):console.error(f),a.manager.itemError(e),a.manager.itemEnd(e)},c=new oo(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(f){try{a.parse(f,r,function(d){t(d),a.manager.itemEnd(e)},l)}catch(d){l(d)}},n,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,s){let a;const r={},l={};if(typeof e=="string")a=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Fx(new Uint8Array(e.slice(0,4)))===aU){try{r[Cn.KHR_BINARY_GLTF]=new p7(e)}catch(d){s&&s(d);return}a=JSON.parse(r[Cn.KHR_BINARY_GLTF].content)}else a=JSON.parse(Fx(new Uint8Array(e)));else a=e;if(a.asset===void 0||a.asset.version[0]<2){s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new C7(a,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let f=0;f<this.pluginCallbacks.length;f++){const d=this.pluginCallbacks[f](c);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),l[d.name]=d,r[d.name]=!0}if(a.extensionsUsed)for(let f=0;f<a.extensionsUsed.length;++f){const d=a.extensionsUsed[f],g=a.extensionsRequired||[];switch(d){case Cn.KHR_MATERIALS_UNLIT:r[d]=new ZH;break;case Cn.KHR_DRACO_MESH_COMPRESSION:r[d]=new m7(a,this.dracoLoader);break;case Cn.KHR_TEXTURE_TRANSFORM:r[d]=new g7;break;case Cn.KHR_MESH_QUANTIZATION:r[d]=new v7;break;default:g.indexOf(d)>=0&&l[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(r),c.setPlugins(l),c.parse(n,s)}parseAsync(e,t){const n=this;return new Promise(function(s,a){n.parse(e,t,s,a)})}}function KH(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const Cn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class JH{constructor(e){this.parser=e,this.name=Cn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,s=t.length;n<s;n++){const a=t[n];a.extensions&&a.extensions[this.name]&&a.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,a.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let s=t.cache.get(n);if(s)return s;const a=t.json,c=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e];let f;const d=new St(16777215);c.color!==void 0&&d.setRGB(c.color[0],c.color[1],c.color[2],Mu);const g=c.range!==void 0?c.range:0;switch(c.type){case"directional":f=new mT(d),f.target.position.set(0,0,-1),f.add(f.target);break;case"point":f=new pT(d),f.distance=g;break;case"spot":f=new dT(d),f.distance=g,c.spot=c.spot||{},c.spot.innerConeAngle=c.spot.innerConeAngle!==void 0?c.spot.innerConeAngle:0,c.spot.outerConeAngle=c.spot.outerConeAngle!==void 0?c.spot.outerConeAngle:Math.PI/4,f.angle=c.spot.outerConeAngle,f.penumbra=1-c.spot.innerConeAngle/c.spot.outerConeAngle,f.target.position.set(0,0,-1),f.add(f.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+c.type)}return f.position.set(0,0,0),f.decay=2,pu(f,c),c.intensity!==void 0&&(f.intensity=c.intensity),f.name=t.createUniqueName(c.name||"light_"+e),s=Promise.resolve(f),t.cache.add(n,s),s}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,a=n.json.nodes[e],l=(a.extensions&&a.extensions[this.name]||{}).light;return l===void 0?null:this._loadLight(l).then(function(c){return n._getNodeRef(t.cache,l,c)})}}class ZH{constructor(){this.name=Cn.KHR_MATERIALS_UNLIT}getMaterialType(){return La}extendParams(e,t,n){const s=[];e.color=new St(1,1,1),e.opacity=1;const a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){const r=a.baseColorFactor;e.color.setRGB(r[0],r[1],r[2],Mu),e.opacity=r[3]}a.baseColorTexture!==void 0&&s.push(n.assignTexture(e,"map",a.baseColorTexture,_d))}return Promise.all(s)}}class QH{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=s.extensions[this.name].emissiveStrength;return a!==void 0&&(t.emissiveIntensity=a),Promise.resolve()}}class $H{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:jo}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],r=s.extensions[this.name];if(r.clearcoatFactor!==void 0&&(t.clearcoat=r.clearcoatFactor),r.clearcoatTexture!==void 0&&a.push(n.assignTexture(t,"clearcoatMap",r.clearcoatTexture)),r.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=r.clearcoatRoughnessFactor),r.clearcoatRoughnessTexture!==void 0&&a.push(n.assignTexture(t,"clearcoatRoughnessMap",r.clearcoatRoughnessTexture)),r.clearcoatNormalTexture!==void 0&&(a.push(n.assignTexture(t,"clearcoatNormalMap",r.clearcoatNormalTexture)),r.clearcoatNormalTexture.scale!==void 0)){const l=r.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new tt(l,l)}return Promise.all(a)}}class e7{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:jo}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=s.extensions[this.name];return t.dispersion=a.dispersion!==void 0?a.dispersion:0,Promise.resolve()}}class t7{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:jo}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],r=s.extensions[this.name];return r.iridescenceFactor!==void 0&&(t.iridescence=r.iridescenceFactor),r.iridescenceTexture!==void 0&&a.push(n.assignTexture(t,"iridescenceMap",r.iridescenceTexture)),r.iridescenceIor!==void 0&&(t.iridescenceIOR=r.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),r.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=r.iridescenceThicknessMinimum),r.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=r.iridescenceThicknessMaximum),r.iridescenceThicknessTexture!==void 0&&a.push(n.assignTexture(t,"iridescenceThicknessMap",r.iridescenceThicknessTexture)),Promise.all(a)}}class n7{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:jo}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[];t.sheenColor=new St(0,0,0),t.sheenRoughness=0,t.sheen=1;const r=s.extensions[this.name];if(r.sheenColorFactor!==void 0){const l=r.sheenColorFactor;t.sheenColor.setRGB(l[0],l[1],l[2],Mu)}return r.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=r.sheenRoughnessFactor),r.sheenColorTexture!==void 0&&a.push(n.assignTexture(t,"sheenColorMap",r.sheenColorTexture,_d)),r.sheenRoughnessTexture!==void 0&&a.push(n.assignTexture(t,"sheenRoughnessMap",r.sheenRoughnessTexture)),Promise.all(a)}}class i7{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:jo}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],r=s.extensions[this.name];return r.transmissionFactor!==void 0&&(t.transmission=r.transmissionFactor),r.transmissionTexture!==void 0&&a.push(n.assignTexture(t,"transmissionMap",r.transmissionTexture)),Promise.all(a)}}class s7{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:jo}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],r=s.extensions[this.name];t.thickness=r.thicknessFactor!==void 0?r.thicknessFactor:0,r.thicknessTexture!==void 0&&a.push(n.assignTexture(t,"thicknessMap",r.thicknessTexture)),t.attenuationDistance=r.attenuationDistance||1/0;const l=r.attenuationColor||[1,1,1];return t.attenuationColor=new St().setRGB(l[0],l[1],l[2],Mu),Promise.all(a)}}class a7{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:jo}extendMaterialParams(e,t){const s=this.parser.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=s.extensions[this.name];return t.ior=a.ior!==void 0?a.ior:1.5,Promise.resolve()}}class r7{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:jo}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],r=s.extensions[this.name];t.specularIntensity=r.specularFactor!==void 0?r.specularFactor:1,r.specularTexture!==void 0&&a.push(n.assignTexture(t,"specularIntensityMap",r.specularTexture));const l=r.specularColorFactor||[1,1,1];return t.specularColor=new St().setRGB(l[0],l[1],l[2],Mu),r.specularColorTexture!==void 0&&a.push(n.assignTexture(t,"specularColorMap",r.specularColorTexture,_d)),Promise.all(a)}}class o7{constructor(e){this.parser=e,this.name=Cn.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:jo}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],r=s.extensions[this.name];return t.bumpScale=r.bumpFactor!==void 0?r.bumpFactor:1,r.bumpTexture!==void 0&&a.push(n.assignTexture(t,"bumpMap",r.bumpTexture)),Promise.all(a)}}class l7{constructor(e){this.parser=e,this.name=Cn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:jo}extendMaterialParams(e,t){const n=this.parser,s=n.json.materials[e];if(!s.extensions||!s.extensions[this.name])return Promise.resolve();const a=[],r=s.extensions[this.name];return r.anisotropyStrength!==void 0&&(t.anisotropy=r.anisotropyStrength),r.anisotropyRotation!==void 0&&(t.anisotropyRotation=r.anisotropyRotation),r.anisotropyTexture!==void 0&&a.push(n.assignTexture(t,"anisotropyMap",r.anisotropyTexture)),Promise.all(a)}}class c7{constructor(e){this.parser=e,this.name=Cn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,s=n.textures[e];if(!s.extensions||!s.extensions[this.name])return null;const a=s.extensions[this.name],r=t.options.ktx2Loader;if(!r){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,a.source,r)}}class u7{constructor(e){this.parser=e,this.name=Cn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,a=s.textures[e];if(!a.extensions||!a.extensions[t])return null;const r=a.extensions[t],l=s.images[r.source];let c=n.textureLoader;if(l.uri){const f=n.options.manager.getHandler(l.uri);f!==null&&(c=f)}return this.detectSupport().then(function(f){if(f)return n.loadTextureImage(e,r.source,c);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class f7{constructor(e){this.parser=e,this.name=Cn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,s=n.json,a=s.textures[e];if(!a.extensions||!a.extensions[t])return null;const r=a.extensions[t],l=s.images[r.source];let c=n.textureLoader;if(l.uri){const f=n.options.manager.getHandler(l.uri);f!==null&&(c=f)}return this.detectSupport().then(function(f){if(f)return n.loadTextureImage(e,r.source,c);if(s.extensionsRequired&&s.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class h7{constructor(e){this.name=Cn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const s=n.extensions[this.name],a=this.parser.getDependency("buffer",s.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return a.then(function(l){const c=s.byteOffset||0,f=s.byteLength||0,d=s.count,g=s.byteStride,v=new Uint8Array(l,c,f);return r.decodeGltfBufferAsync?r.decodeGltfBufferAsync(d,g,v,s.mode,s.filter).then(function(y){return y.buffer}):r.ready.then(function(){const y=new ArrayBuffer(d*g);return r.decodeGltfBuffer(new Uint8Array(y),d,g,v,s.mode,s.filter),y})})}else return null}}class d7{constructor(e){this.name=Cn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const s=t.meshes[n.mesh];for(const f of s.primitives)if(f.mode!==Fo.TRIANGLES&&f.mode!==Fo.TRIANGLE_STRIP&&f.mode!==Fo.TRIANGLE_FAN&&f.mode!==void 0)return null;const r=n.extensions[this.name].attributes,l=[],c={};for(const f in r)l.push(this.parser.getDependency("accessor",r[f]).then(d=>(c[f]=d,c[f])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(f=>{const d=f.pop(),g=d.isGroup?d.children:[d],v=f[0].count,y=[];for(const S of g){const A=new Ft,M=new le,b=new Rs,C=new le(1,1,1),w=new Qb(S.geometry,S.material,v);for(let R=0;R<v;R++)c.TRANSLATION&&M.fromBufferAttribute(c.TRANSLATION,R),c.ROTATION&&b.fromBufferAttribute(c.ROTATION,R),c.SCALE&&C.fromBufferAttribute(c.SCALE,R),w.setMatrixAt(R,A.compose(M,b,C));for(const R in c)if(R==="_COLOR_0"){const U=c[R];w.instanceColor=new Gf(U.array,U.itemSize,U.normalized)}else R!=="TRANSLATION"&&R!=="ROTATION"&&R!=="SCALE"&&S.geometry.setAttribute(R,c[R]);In.prototype.copy.call(w,S),this.parser.assignFinalMaterial(w),y.push(w)}return d.isGroup?(d.clear(),d.add(...y),d):y[0]}))}}const aU="glTF",Bg=12,Bw={JSON:1313821514,BIN:5130562};class p7{constructor(e){this.name=Cn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Bg);if(this.header={magic:Fx(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==aU)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-Bg,s=new DataView(e,Bg);let a=0;for(;a<n;){const r=s.getUint32(a,!0);a+=4;const l=s.getUint32(a,!0);if(a+=4,l===Bw.JSON){const c=new Uint8Array(e,Bg+a,r);this.content=Fx(c)}else if(l===Bw.BIN){const c=Bg+a;this.body=e.slice(c,c+r)}a+=r}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class m7{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Cn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,s=this.dracoLoader,a=e.extensions[this.name].bufferView,r=e.extensions[this.name].attributes,l={},c={},f={};for(const d in r){const g=XM[d]||d.toLowerCase();l[g]=r[d]}for(const d in e.attributes){const g=XM[d]||d.toLowerCase();if(r[d]!==void 0){const v=n.accessors[e.attributes[d]],y=bm[v.componentType];f[g]=y.name,c[g]=v.normalized===!0}}return t.getDependency("bufferView",a).then(function(d){return new Promise(function(g,v){s.decodeDracoFile(d,function(y){for(const S in y.attributes){const A=y.attributes[S],M=c[S];M!==void 0&&(A.normalized=M)}g(y)},l,f,Mu,v)})})}}class g7{constructor(){this.name=Cn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class v7{constructor(){this.name=Cn.KHR_MESH_QUANTIZATION}}class rU extends e0{constructor(e,t,n,s){super(e,t,n,s)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,s=this.valueSize,a=e*s*3+s;for(let r=0;r!==s;r++)t[r]=n[a+r];return t}interpolate_(e,t,n,s){const a=this.resultBuffer,r=this.sampleValues,l=this.valueSize,c=l*2,f=l*3,d=s-t,g=(n-t)/d,v=g*g,y=v*g,S=e*f,A=S-f,M=-2*y+3*v,b=y-v,C=1-M,w=b-v+g;for(let R=0;R!==l;R++){const U=r[A+R+l],O=r[A+R+c]*d,I=r[S+R+l],P=r[S+R]*d;a[R]=C*U+w*O+M*I+b*P}return a}}const y7=new Rs;class _7 extends rU{interpolate_(e,t,n,s){const a=super.interpolate_(e,t,n,s);return y7.fromArray(a).normalize().toArray(a),a}}const Fo={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},bm={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Uw={9728:Hi,9729:ti,9984:tS,9985:Sm,9986:hd,9987:to},Lw={33071:eo,33648:Dm,10497:Ff},X2={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},XM={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...zH>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Mf={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},x7={CUBICSPLINE:void 0,LINEAR:Om,STEP:Lm},j2={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function S7(i){return i.DefaultMaterial===void 0&&(i.DefaultMaterial=new Zv({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ao})),i.DefaultMaterial}function ed(i,e,t){for(const n in t.extensions)i[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function pu(i,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function A7(i,e,t){let n=!1,s=!1,a=!1;for(let f=0,d=e.length;f<d;f++){const g=e[f];if(g.POSITION!==void 0&&(n=!0),g.NORMAL!==void 0&&(s=!0),g.COLOR_0!==void 0&&(a=!0),n&&s&&a)break}if(!n&&!s&&!a)return Promise.resolve(i);const r=[],l=[],c=[];for(let f=0,d=e.length;f<d;f++){const g=e[f];if(n){const v=g.POSITION!==void 0?t.getDependency("accessor",g.POSITION):i.attributes.position;r.push(v)}if(s){const v=g.NORMAL!==void 0?t.getDependency("accessor",g.NORMAL):i.attributes.normal;l.push(v)}if(a){const v=g.COLOR_0!==void 0?t.getDependency("accessor",g.COLOR_0):i.attributes.color;c.push(v)}}return Promise.all([Promise.all(r),Promise.all(l),Promise.all(c)]).then(function(f){const d=f[0],g=f[1],v=f[2];return n&&(i.morphAttributes.position=d),s&&(i.morphAttributes.normal=g),a&&(i.morphAttributes.color=v),i.morphTargetsRelative=!0,i})}function M7(i,e){if(i.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,s=t.length;n<s;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function b7(i){let e;const t=i.extensions&&i.extensions[Cn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+Y2(t.attributes):e=i.indices+":"+Y2(i.attributes)+":"+i.mode,i.targets!==void 0)for(let n=0,s=i.targets.length;n<s;n++)e+=":"+Y2(i.targets[n]);return e}function Y2(i){let e="";const t=Object.keys(i).sort();for(let n=0,s=t.length;n<s;n++)e+=t[n]+":"+i[t[n]]+";";return e}function jM(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function T7(i){return i.search(/\.jpe?g($|\?)/i)>0||i.search(/^data\:image\/jpeg/)===0?"image/jpeg":i.search(/\.webp($|\?)/i)>0||i.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const E7=new Ft;class C7{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new KH,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,s=!1,a=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,s=navigator.userAgent.indexOf("Firefox")>-1,a=s?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||s&&a<98?this.textureLoader=new Qv(this.options.manager):this.textureLoader=new y4(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new oo(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,s=this.json,a=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(r){return r._markDefs&&r._markDefs()}),Promise.all(this._invokeAll(function(r){return r.beforeRoot&&r.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(r){const l={scene:r[0][s.scene||0],scenes:r[0],animations:r[1],cameras:r[2],asset:s.asset,parser:n,userData:{}};return ed(a,l,s),pu(l,s),Promise.all(n._invokeAll(function(c){return c.afterRoot&&c.afterRoot(l)})).then(function(){for(const c of l.scenes)c.updateMatrixWorld();e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let s=0,a=t.length;s<a;s++){const r=t[s].joints;for(let l=0,c=r.length;l<c;l++)e[r[l]].isBone=!0}for(let s=0,a=e.length;s<a;s++){const r=e[s];r.mesh!==void 0&&(this._addNodeRef(this.meshCache,r.mesh),r.skin!==void 0&&(n[r.mesh].isSkinnedMesh=!0)),r.camera!==void 0&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const s=n.clone(),a=(r,l)=>{const c=this.associations.get(r);c!=null&&this.associations.set(l,c);for(const[f,d]of r.children.entries())a(d,l.children[f])};return a(n,s),s.name+="_instance_"+e.uses[t]++,s}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const s=e(t[n]);if(s)return s}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let s=0;s<t.length;s++){const a=e(t[s]);a&&n.push(a)}return n}getDependency(e,t){const n=e+":"+t;let s=this.cache.get(n);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this._invokeOne(function(a){return a.loadNode&&a.loadNode(t)});break;case"mesh":s=this._invokeOne(function(a){return a.loadMesh&&a.loadMesh(t)});break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this._invokeOne(function(a){return a.loadBufferView&&a.loadBufferView(t)});break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this._invokeOne(function(a){return a.loadMaterial&&a.loadMaterial(t)});break;case"texture":s=this._invokeOne(function(a){return a.loadTexture&&a.loadTexture(t)});break;case"skin":s=this.loadSkin(t);break;case"animation":s=this._invokeOne(function(a){return a.loadAnimation&&a.loadAnimation(t)});break;case"camera":s=this.loadCamera(t);break;default:if(s=this._invokeOne(function(a){return a!=this&&a.getDependency&&a.getDependency(e,t)}),!s)throw new Error("Unknown type: "+e);break}this.cache.add(n,s)}return s}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,s=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(s.map(function(a,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Cn.KHR_BINARY_GLTF].body);const s=this.options;return new Promise(function(a,r){n.load(Of.resolveURL(t.uri,s.path),a,void 0,function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteLength||0,a=t.byteOffset||0;return n.slice(a,a+s)})}loadAccessor(e){const t=this,n=this.json,s=this.json.accessors[e];if(s.bufferView===void 0&&s.sparse===void 0){const r=X2[s.type],l=bm[s.componentType],c=s.normalized===!0,f=new l(s.count*r);return Promise.resolve(new Fn(f,r,c))}const a=[];return s.bufferView!==void 0?a.push(this.getDependency("bufferView",s.bufferView)):a.push(null),s.sparse!==void 0&&(a.push(this.getDependency("bufferView",s.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",s.sparse.values.bufferView))),Promise.all(a).then(function(r){const l=r[0],c=X2[s.type],f=bm[s.componentType],d=f.BYTES_PER_ELEMENT,g=d*c,v=s.byteOffset||0,y=s.bufferView!==void 0?n.bufferViews[s.bufferView].byteStride:void 0,S=s.normalized===!0;let A,M;if(y&&y!==g){const b=Math.floor(v/y),C="InterleavedBuffer:"+s.bufferView+":"+s.componentType+":"+b+":"+s.count;let w=t.cache.get(C);w||(A=new f(l,b*y,s.count*y/d),w=new Xv(A,y/d),t.cache.add(C,w)),M=new zf(w,c,v%y/d,S)}else l===null?A=new f(s.count*c):A=new f(l,v,s.count*c),M=new Fn(A,c,S);if(s.sparse!==void 0){const b=X2.SCALAR,C=bm[s.sparse.indices.componentType],w=s.sparse.indices.byteOffset||0,R=s.sparse.values.byteOffset||0,U=new C(r[1],w,s.sparse.count*b),O=new f(r[2],R,s.sparse.count*c);l!==null&&(M=new Fn(M.array.slice(),M.itemSize,M.normalized));for(let I=0,P=U.length;I<P;I++){const N=U[I];if(M.setX(N,O[I*c]),c>=2&&M.setY(N,O[I*c+1]),c>=3&&M.setZ(N,O[I*c+2]),c>=4&&M.setW(N,O[I*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return M})}loadTexture(e){const t=this.json,n=this.options,a=t.textures[e].source,r=t.images[a];let l=this.textureLoader;if(r.uri){const c=n.manager.getHandler(r.uri);c!==null&&(l=c)}return this.loadTextureImage(e,a,l)}loadTextureImage(e,t,n){const s=this,a=this.json,r=a.textures[e],l=a.images[t],c=(l.uri||l.bufferView)+":"+r.sampler;if(this.textureCache[c])return this.textureCache[c];const f=this.loadImageSource(t,n).then(function(d){d.flipY=!1,d.name=r.name||l.name||"",d.name===""&&typeof l.uri=="string"&&l.uri.startsWith("data:image/")===!1&&(d.name=l.uri);const v=(a.samplers||{})[r.sampler]||{};return d.magFilter=Uw[v.magFilter]||ti,d.minFilter=Uw[v.minFilter]||to,d.wrapS=Lw[v.wrapS]||Ff,d.wrapT=Lw[v.wrapT]||Ff,s.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[c]=f,f}loadImageSource(e,t){const n=this,s=this.json,a=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(g=>g.clone());const r=s.images[e],l=self.URL||self.webkitURL;let c=r.uri||"",f=!1;if(r.bufferView!==void 0)c=n.getDependency("bufferView",r.bufferView).then(function(g){f=!0;const v=new Blob([g],{type:r.mimeType});return c=l.createObjectURL(v),c});else if(r.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(c).then(function(g){return new Promise(function(v,y){let S=v;t.isImageBitmapLoader===!0&&(S=function(A){const M=new Ai(A);M.needsUpdate=!0,v(M)}),t.load(Of.resolveURL(g,a.path),S,void 0,y)})}).then(function(g){return f===!0&&l.revokeObjectURL(c),pu(g,r),g.userData.mimeType=r.mimeType||T7(r.uri),g}).catch(function(g){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),g});return this.sourceCache[e]=d,d}assignTexture(e,t,n,s){const a=this;return this.getDependency("texture",n.index).then(function(r){if(!r)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(r=r.clone(),r.channel=n.texCoord),a.extensions[Cn.KHR_TEXTURE_TRANSFORM]){const l=n.extensions!==void 0?n.extensions[Cn.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const c=a.associations.get(r);r=a.extensions[Cn.KHR_TEXTURE_TRANSFORM].extendTexture(r,l),a.associations.set(r,c)}}return s!==void 0&&(typeof s=="number"&&(s=s===Dw?_d:Mu),"colorSpace"in r?r.colorSpace=s:r.encoding=s===_d?Dw:qH),e[t]=r,r})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const s=t.attributes.tangent===void 0,a=t.attributes.color!==void 0,r=t.attributes.normal===void 0;if(e.isPoints){const l="PointsMaterial:"+n.uuid;let c=this.cache.get(l);c||(c=new gS,ys.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,c.sizeAttenuation=!1,this.cache.add(l,c)),n=c}else if(e.isLine){const l="LineBasicMaterial:"+n.uuid;let c=this.cache.get(l);c||(c=new ma,ys.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,this.cache.add(l,c)),n=c}if(s||a||r){let l="ClonedMaterial:"+n.uuid+":";s&&(l+="derivative-tangents:"),a&&(l+="vertex-colors:"),r&&(l+="flat-shading:");let c=this.cache.get(l);c||(c=n.clone(),a&&(c.vertexColors=!0),r&&(c.flatShading=!0),s&&(c.normalScale&&(c.normalScale.y*=-1),c.clearcoatNormalScale&&(c.clearcoatNormalScale.y*=-1)),this.cache.add(l,c),this.associations.set(c,this.associations.get(n))),n=c}e.material=n}getMaterialType(){return Zv}loadMaterial(e){const t=this,n=this.json,s=this.extensions,a=n.materials[e];let r;const l={},c=a.extensions||{},f=[];if(c[Cn.KHR_MATERIALS_UNLIT]){const g=s[Cn.KHR_MATERIALS_UNLIT];r=g.getMaterialType(),f.push(g.extendParams(l,a,t))}else{const g=a.pbrMetallicRoughness||{};if(l.color=new St(1,1,1),l.opacity=1,Array.isArray(g.baseColorFactor)){const v=g.baseColorFactor;l.color.setRGB(v[0],v[1],v[2],Mu),l.opacity=v[3]}g.baseColorTexture!==void 0&&f.push(t.assignTexture(l,"map",g.baseColorTexture,_d)),l.metalness=g.metallicFactor!==void 0?g.metallicFactor:1,l.roughness=g.roughnessFactor!==void 0?g.roughnessFactor:1,g.metallicRoughnessTexture!==void 0&&(f.push(t.assignTexture(l,"metalnessMap",g.metallicRoughnessTexture)),f.push(t.assignTexture(l,"roughnessMap",g.metallicRoughnessTexture))),r=this._invokeOne(function(v){return v.getMaterialType&&v.getMaterialType(e)}),f.push(Promise.all(this._invokeAll(function(v){return v.extendMaterialParams&&v.extendMaterialParams(e,l)})))}a.doubleSided===!0&&(l.side=ha);const d=a.alphaMode||j2.OPAQUE;if(d===j2.BLEND?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,d===j2.MASK&&(l.alphaTest=a.alphaCutoff!==void 0?a.alphaCutoff:.5)),a.normalTexture!==void 0&&r!==La&&(f.push(t.assignTexture(l,"normalMap",a.normalTexture)),l.normalScale=new tt(1,1),a.normalTexture.scale!==void 0)){const g=a.normalTexture.scale;l.normalScale.set(g,g)}if(a.occlusionTexture!==void 0&&r!==La&&(f.push(t.assignTexture(l,"aoMap",a.occlusionTexture)),a.occlusionTexture.strength!==void 0&&(l.aoMapIntensity=a.occlusionTexture.strength)),a.emissiveFactor!==void 0&&r!==La){const g=a.emissiveFactor;l.emissive=new St().setRGB(g[0],g[1],g[2],Mu)}return a.emissiveTexture!==void 0&&r!==La&&f.push(t.assignTexture(l,"emissiveMap",a.emissiveTexture,_d)),Promise.all(f).then(function(){const g=new r(l);return a.name&&(g.name=a.name),pu(g,a),t.associations.set(g,{materials:e}),a.extensions&&ed(s,g,a),g})}createUniqueName(e){const t=Xn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,s=this.primitiveCache;function a(l){return n[Cn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(c){return Ow(c,l,t)})}const r=[];for(let l=0,c=e.length;l<c;l++){const f=e[l],d=b7(f),g=s[d];if(g)r.push(g.promise);else{let v;f.extensions&&f.extensions[Cn.KHR_DRACO_MESH_COMPRESSION]?v=a(f):v=Ow(new $t,f,t),s[d]={primitive:f,promise:v},r.push(v)}}return Promise.all(r)}loadMesh(e){const t=this,n=this.json,s=this.extensions,a=n.meshes[e],r=a.primitives,l=[];for(let c=0,f=r.length;c<f;c++){const d=r[c].material===void 0?S7(this.cache):this.getDependency("material",r[c].material);l.push(d)}return l.push(t.loadGeometries(r)),Promise.all(l).then(function(c){const f=c.slice(0,c.length-1),d=c[c.length-1],g=[];for(let y=0,S=d.length;y<S;y++){const A=d[y],M=r[y];let b;const C=f[y];if(M.mode===Fo.TRIANGLES||M.mode===Fo.TRIANGLE_STRIP||M.mode===Fo.TRIANGLE_FAN||M.mode===void 0)b=a.isSkinnedMesh===!0?new Zb(A,C):new Di(A,C),b.isSkinnedMesh===!0&&b.normalizeSkinWeights(),M.mode===Fo.TRIANGLE_STRIP?b.geometry=Cw(b.geometry,Vb):M.mode===Fo.TRIANGLE_FAN&&(b.geometry=Cw(b.geometry,wx));else if(M.mode===Fo.LINES)b=new Fl(A,C);else if(M.mode===Fo.LINE_STRIP)b=new Uc(A,C);else if(M.mode===Fo.LINE_LOOP)b=new $b(A,C);else if(M.mode===Fo.POINTS)b=new eT(A,C);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+M.mode);Object.keys(b.geometry.morphAttributes).length>0&&M7(b,a),b.name=t.createUniqueName(a.name||"mesh_"+e),pu(b,a),M.extensions&&ed(s,b,M),t.assignFinalMaterial(b),g.push(b)}for(let y=0,S=g.length;y<S;y++)t.associations.set(g[y],{meshes:e,primitives:y});if(g.length===1)return a.extensions&&ed(s,g[0],a),g[0];const v=new Tc;a.extensions&&ed(s,v,a),t.associations.set(v,{meshes:e});for(let y=0,S=g.length;y<S;y++)v.add(g[y]);return v})}loadCamera(e){let t;const n=this.json.cameras[e],s=n[n.type];if(!s){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new Ji(ko.radToDeg(s.yfov),s.aspectRatio||1,s.znear||1,s.zfar||2e6):n.type==="orthographic"&&(t=new Au(-s.xmag,s.xmag,s.ymag,-s.ymag,s.znear,s.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),pu(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let s=0,a=t.joints.length;s<a;s++)n.push(this._loadNodeShallow(t.joints[s]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(s){const a=s.pop(),r=s,l=[],c=[];for(let f=0,d=r.length;f<d;f++){const g=r[f];if(g){l.push(g);const v=new Ft;a!==null&&v.fromArray(a.array,f*16),c.push(v)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[f])}return new jv(l,c)})}loadAnimation(e){const t=this.json,n=this,s=t.animations[e],a=s.name?s.name:"animation_"+e,r=[],l=[],c=[],f=[],d=[];for(let g=0,v=s.channels.length;g<v;g++){const y=s.channels[g],S=s.samplers[y.sampler],A=y.target,M=A.node,b=s.parameters!==void 0?s.parameters[S.input]:S.input,C=s.parameters!==void 0?s.parameters[S.output]:S.output;A.node!==void 0&&(r.push(this.getDependency("node",M)),l.push(this.getDependency("accessor",b)),c.push(this.getDependency("accessor",C)),f.push(S),d.push(A))}return Promise.all([Promise.all(r),Promise.all(l),Promise.all(c),Promise.all(f),Promise.all(d)]).then(function(g){const v=g[0],y=g[1],S=g[2],A=g[3],M=g[4],b=[];for(let C=0,w=v.length;C<w;C++){const R=v[C],U=y[C],O=S[C],I=A[C],P=M[C];if(R===void 0)continue;R.updateMatrix&&R.updateMatrix();const N=n._createAnimationTracks(R,U,O,I,P);if(N)for(let L=0;L<N.length;L++)b.push(N[L])}return new zm(a,void 0,b)})}createNodeMesh(e){const t=this.json,n=this,s=t.nodes[e];return s.mesh===void 0?null:n.getDependency("mesh",s.mesh).then(function(a){const r=n._getNodeRef(n.meshCache,s.mesh,a);return s.weights!==void 0&&r.traverse(function(l){if(l.isMesh)for(let c=0,f=s.weights.length;c<f;c++)l.morphTargetInfluences[c]=s.weights[c]}),r})}loadNode(e){const t=this.json,n=this,s=t.nodes[e],a=n._loadNodeShallow(e),r=[],l=s.children||[];for(let f=0,d=l.length;f<d;f++)r.push(n.getDependency("node",l[f]));const c=s.skin===void 0?Promise.resolve(null):n.getDependency("skin",s.skin);return Promise.all([a,Promise.all(r),c]).then(function(f){const d=f[0],g=f[1],v=f[2];v!==null&&d.traverse(function(y){y.isSkinnedMesh&&y.bind(v,E7)});for(let y=0,S=g.length;y<S;y++)d.add(g[y]);return d})}_loadNodeShallow(e){const t=this.json,n=this.extensions,s=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const a=t.nodes[e],r=a.name?s.createUniqueName(a.name):"",l=[],c=s._invokeOne(function(f){return f.createNodeMesh&&f.createNodeMesh(e)});return c&&l.push(c),a.camera!==void 0&&l.push(s.getDependency("camera",a.camera).then(function(f){return s._getNodeRef(s.cameraCache,a.camera,f)})),s._invokeAll(function(f){return f.createNodeAttachment&&f.createNodeAttachment(e)}).forEach(function(f){l.push(f)}),this.nodeCache[e]=Promise.all(l).then(function(f){let d;if(a.isBone===!0?d=new pS:f.length>1?d=new Tc:f.length===1?d=f[0]:d=new In,d!==f[0])for(let g=0,v=f.length;g<v;g++)d.add(f[g]);if(a.name&&(d.userData.name=a.name,d.name=r),pu(d,a),a.extensions&&ed(n,d,a),a.matrix!==void 0){const g=new Ft;g.fromArray(a.matrix),d.applyMatrix4(g)}else a.translation!==void 0&&d.position.fromArray(a.translation),a.rotation!==void 0&&d.quaternion.fromArray(a.rotation),a.scale!==void 0&&d.scale.fromArray(a.scale);return s.associations.has(d)||s.associations.set(d,{}),s.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],s=this,a=new Tc;n.name&&(a.name=s.createUniqueName(n.name)),pu(a,n),n.extensions&&ed(t,a,n);const r=n.nodes||[],l=[];for(let c=0,f=r.length;c<f;c++)l.push(s.getDependency("node",r[c]));return Promise.all(l).then(function(c){for(let d=0,g=c.length;d<g;d++)a.add(c[d]);const f=d=>{const g=new Map;for(const[v,y]of s.associations)(v instanceof ys||v instanceof Ai)&&g.set(v,y);return d.traverse(v=>{const y=s.associations.get(v);y!=null&&g.set(v,y)}),g};return s.associations=f(a),a})}_createAnimationTracks(e,t,n,s,a){const r=[],l=e.name?e.name:e.uuid,c=[];Mf[a.path]===Mf.weights?e.traverse(function(v){v.morphTargetInfluences&&c.push(v.name?v.name:v.uuid)}):c.push(l);let f;switch(Mf[a.path]){case Mf.weights:f=Id;break;case Mf.rotation:f=Fd;break;case Mf.position:case Mf.scale:f=zd;break;default:switch(n.itemSize){case 1:f=Id;break;case 2:case 3:default:f=zd;break}break}const d=s.interpolation!==void 0?x7[s.interpolation]:Om,g=this._getArrayFromAccessor(n);for(let v=0,y=c.length;v<y;v++){const S=new f(c[v]+"."+Mf[a.path],t.array,g,d);s.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(S),r.push(S)}return r}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=jM(t.constructor),s=new Float32Array(t.length);for(let a=0,r=t.length;a<r;a++)s[a]=t[a]*n;t=s}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const s=this instanceof Fd?_7:rU;return new s(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function w7(i,e,t){const n=e.attributes,s=new Ds;if(n.POSITION!==void 0){const l=t.json.accessors[n.POSITION],c=l.min,f=l.max;if(c!==void 0&&f!==void 0){if(s.set(new le(c[0],c[1],c[2]),new le(f[0],f[1],f[2])),l.normalized){const d=jM(bm[l.componentType]);s.min.multiplyScalar(d),s.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const a=e.targets;if(a!==void 0){const l=new le,c=new le;for(let f=0,d=a.length;f<d;f++){const g=a[f];if(g.POSITION!==void 0){const v=t.json.accessors[g.POSITION],y=v.min,S=v.max;if(y!==void 0&&S!==void 0){if(c.setX(Math.max(Math.abs(y[0]),Math.abs(S[0]))),c.setY(Math.max(Math.abs(y[1]),Math.abs(S[1]))),c.setZ(Math.max(Math.abs(y[2]),Math.abs(S[2]))),v.normalized){const A=jM(bm[v.componentType]);c.multiplyScalar(A)}l.max(c)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(l)}i.boundingBox=s;const r=new zs;s.getCenter(r.center),r.radius=s.min.distanceTo(s.max)/2,i.boundingSphere=r}function Ow(i,e,t){const n=e.attributes,s=[];function a(r,l){return t.getDependency("accessor",r).then(function(c){i.setAttribute(l,c)})}for(const r in n){const l=XM[r]||r.toLowerCase();l in i.attributes||s.push(a(n[r],l))}if(e.indices!==void 0&&!i.index){const r=t.getDependency("accessor",e.indices).then(function(l){i.setIndex(l)});s.push(r)}return pu(i,e),w7(i,e,t),Promise.all(s).then(function(){return e.targets!==void 0?A7(i,e.targets,t):i})}const W2=new WeakMap;class R7 extends Ia{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,s){const a=new oo(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,r=>{const l={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(r,l).then(t).catch(s)},n,s)}decodeDracoFile(e,t,n,s){const a={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,a).then(t)}decodeGeometry(e,t){for(const c in t.attributeTypes){const f=t.attributeTypes[c];f.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[c]=f.name)}const n=JSON.stringify(t);if(W2.has(e)){const c=W2.get(e);if(c.key===n)return c.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s;const a=this.workerNextTaskID++,r=e.byteLength,l=this._getWorker(a,r).then(c=>(s=c,new Promise((f,d)=>{s._callbacks[a]={resolve:f,reject:d},s.postMessage({type:"decode",id:a,taskConfig:t,buffer:e},[e])}))).then(c=>this._createGeometry(c.geometry));return l.catch(()=>!0).then(()=>{s&&a&&this._releaseTask(s,a)}),W2.set(e,{key:n,promise:l}),l}_createGeometry(e){const t=new $t;e.index&&t.setIndex(new Fn(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const s=e.attributes[n],a=s.name,r=s.array,l=s.itemSize;t.setAttribute(a,new Fn(r,l))}return t}_loadLibrary(e,t){const n=new oo(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((s,a)=>{n.load(e,s,void 0,a)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const s=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const a=D7.toString(),r=["/* draco decoder */",s,"","/* worker */",a.substring(a.indexOf("{")+1,a.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(a){const r=a.data;switch(r.type){case"decode":s._callbacks[r.id].resolve(r);break;case"error":s._callbacks[r.id].reject(r);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+r.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,a){return s._taskLoad>a._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function D7(){let i,e;onmessage=function(r){const l=r.data;switch(l.type){case"init":i=l.decoderConfig,e=new Promise(function(d){i.onModuleLoaded=function(g){d({draco:g})},DracoDecoderModule(i)});break;case"decode":const c=l.buffer,f=l.taskConfig;e.then(d=>{const g=d.draco,v=new g.Decoder,y=new g.DecoderBuffer;y.Init(new Int8Array(c),c.byteLength);try{const S=t(g,v,y,f),A=S.attributes.map(M=>M.array.buffer);S.index&&A.push(S.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:S},A)}catch(S){console.error(S),self.postMessage({type:"error",id:l.id,error:S.message})}finally{g.destroy(y),g.destroy(v)}});break}};function t(r,l,c,f){const d=f.attributeIDs,g=f.attributeTypes;let v,y;const S=l.GetEncodedGeometryType(c);if(S===r.TRIANGULAR_MESH)v=new r.Mesh,y=l.DecodeBufferToMesh(c,v);else if(S===r.POINT_CLOUD)v=new r.PointCloud,y=l.DecodeBufferToPointCloud(c,v);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!y.ok()||v.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+y.error_msg());const A={index:null,attributes:[]};for(const M in d){const b=self[g[M]];let C,w;if(f.useUniqueIDs)w=d[M],C=l.GetAttributeByUniqueId(v,w);else{if(w=l.GetAttributeId(v,r[d[M]]),w===-1)continue;C=l.GetAttribute(v,w)}A.attributes.push(s(r,l,v,M,b,C))}return S===r.TRIANGULAR_MESH&&(A.index=n(r,l,v)),r.destroy(v),A}function n(r,l,c){const d=c.num_faces()*3,g=d*4,v=r._malloc(g);l.GetTrianglesUInt32Array(c,g,v);const y=new Uint32Array(r.HEAPF32.buffer,v,d).slice();return r._free(v),{array:y,itemSize:1}}function s(r,l,c,f,d,g){const v=g.num_components(),S=c.num_points()*v,A=S*d.BYTES_PER_ELEMENT,M=a(r,d),b=r._malloc(A);l.GetAttributeDataArrayForAllPoints(c,g,M,A,b);const C=new d(r.HEAPF32.buffer,b,S).slice();return r._free(b),{name:f,array:C,itemSize:v}}function a(r,l){switch(l){case Float32Array:return r.DT_FLOAT32;case Int8Array:return r.DT_INT8;case Int16Array:return r.DT_INT16;case Int32Array:return r.DT_INT32;case Uint8Array:return r.DT_UINT8;case Uint16Array:return r.DT_UINT16;case Uint32Array:return r.DT_UINT32}}}let x_;const q2=()=>{if(x_)return x_;const i="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let s=i;WebAssembly.validate(t)&&(s=e);let a;const r=WebAssembly.instantiate(l(s),{}).then(g=>{a=g.instance,a.exports.__wasm_call_ctors()});function l(g){const v=new Uint8Array(g.length);for(let S=0;S<g.length;++S){const A=g.charCodeAt(S);v[S]=A>96?A-71:A>64?A-65:A>47?A+4:A>46?63:62}let y=0;for(let S=0;S<g.length;++S)v[y++]=v[S]<60?n[v[S]]:(v[S]-60)*64+v[++S];return v.buffer.slice(0,y)}function c(g,v,y,S,A,M){const b=a.exports.sbrk,C=y+3&-4,w=b(C*S),R=b(A.length),U=new Uint8Array(a.exports.memory.buffer);U.set(A,R);const O=g(w,y,S,R,A.length);if(O===0&&M&&M(w,C,S),v.set(U.subarray(w,w+y*S)),b(w-b(0)),O!==0)throw new Error(`Malformed buffer data: ${O}`)}const f={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return x_={ready:r,supported:!0,decodeVertexBuffer(g,v,y,S,A){c(a.exports.meshopt_decodeVertexBuffer,g,v,y,S,a.exports[f[A]])},decodeIndexBuffer(g,v,y,S){c(a.exports.meshopt_decodeIndexBuffer,g,v,y,S)},decodeIndexSequence(g,v,y,S){c(a.exports.meshopt_decodeIndexSequence,g,v,y,S)},decodeGltfBuffer(g,v,y,S,A,M){c(a.exports[d[A]],g,v,y,S,a.exports[f[M]])}},x_},YM=ge.forwardRef(function({children:e,follow:t=!0,lockX:n=!1,lockY:s=!1,lockZ:a=!1,...r},l){const c=ge.useRef(null),f=ge.useRef(null),d=new Rs;return Oc(({camera:g})=>{if(!t||!f.current)return;const v=c.current.rotation.clone();f.current.updateMatrix(),f.current.updateWorldMatrix(!1,!1),f.current.getWorldQuaternion(d),g.getWorldQuaternion(c.current.quaternion).premultiply(d.invert()),n&&(c.current.rotation.x=v.x),s&&(c.current.rotation.y=v.y),a&&(c.current.rotation.z=v.z)}),ge.useImperativeHandle(l,()=>f.current,[]),ge.createElement("group",Tv({ref:f},r),ge.createElement("group",{ref:c},e))});function B7(){var i=Object.create(null);function e(s,a){var r=s.id,l=s.name,c=s.dependencies;c===void 0&&(c=[]);var f=s.init;f===void 0&&(f=function(){});var d=s.getTransferables;if(d===void 0&&(d=null),!i[r])try{c=c.map(function(v){return v&&v.isWorkerModule&&(e(v,function(y){if(y instanceof Error)throw y}),v=i[v.id].value),v}),f=n("<"+l+">.init",f),d&&(d=n("<"+l+">.getTransferables",d));var g=null;typeof f=="function"?g=f.apply(void 0,c):console.error("worker module init function failed to rehydrate"),i[r]={id:r,value:g,getTransferables:d},a(g)}catch(v){v&&v.noLog||console.error(v),a(v)}}function t(s,a){var r,l=s.id,c=s.args;(!i[l]||typeof i[l].value!="function")&&a(new Error("Worker module "+l+": not found or its 'init' did not return a function"));try{var f=(r=i[l]).value.apply(r,c);f&&typeof f.then=="function"?f.then(d,function(g){return a(g instanceof Error?g:new Error(""+g))}):d(f)}catch(g){a(g)}function d(g){try{var v=i[l].getTransferables&&i[l].getTransferables(g);(!v||!Array.isArray(v)||!v.length)&&(v=void 0),a(g,v)}catch(y){console.error(y),a(y)}}}function n(s,a){var r=void 0;self.troikaDefine=function(c){return r=c};var l=URL.createObjectURL(new Blob(["/** "+s.replace(/\*/g,"")+` **/

troikaDefine(
`+a+`
)`],{type:"application/javascript"}));try{importScripts(l)}catch(c){console.error(c)}return URL.revokeObjectURL(l),delete self.troikaDefine,r}self.addEventListener("message",function(s){var a=s.data,r=a.messageId,l=a.action,c=a.data;try{l==="registerModule"&&e(c,function(f){f instanceof Error?postMessage({messageId:r,success:!1,error:f.message}):postMessage({messageId:r,success:!0,result:{isCallable:typeof f=="function"}})}),l==="callModule"&&t(c,function(f,d){f instanceof Error?postMessage({messageId:r,success:!1,error:f.message}):postMessage({messageId:r,success:!0,result:f},d||void 0)})}catch(f){postMessage({messageId:r,success:!1,error:f.stack})}})}function U7(i){var e=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then(function(s){if(typeof s=="function")return s.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=i.dependencies,n=i.init;t=Array.isArray(t)?t.map(function(a){return a&&(a=a.onMainThread||a,a._getInitResult&&(a=a._getInitResult())),a}):[];var s=Promise.all(t).then(function(a){return n.apply(null,a)});return e._getInitResult=function(){return s},s},e}var oU=function(){var i=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),i=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return oU=function(){return i},i},L7=0,O7=0,K2=!1,tv=Object.create(null),nv=Object.create(null),WM=Object.create(null);function a0(i){if((!i||typeof i.init!="function")&&!K2)throw new Error("requires `options.init` function");var e=i.dependencies,t=i.init,n=i.getTransferables,s=i.workerId,a=U7(i);s==null&&(s="#default");var r="workerModule"+ ++L7,l=i.name||r,c=null;e=e&&e.map(function(d){return typeof d=="function"&&!d.workerModuleData&&(K2=!0,d=a0({workerId:s,name:"<"+l+"> function dependency: "+d.name,init:`function(){return (
`+P_(d)+`
)}`}),K2=!1),d&&d.workerModuleData&&(d=d.workerModuleData),d});function f(){for(var d=[],g=arguments.length;g--;)d[g]=arguments[g];if(!oU())return a.apply(void 0,d);if(!c){c=Nw(s,"registerModule",f.workerModuleData);var v=function(){c=null,nv[s].delete(v)};(nv[s]||(nv[s]=new Set)).add(v)}return c.then(function(y){var S=y.isCallable;if(S)return Nw(s,"callModule",{id:r,args:d});throw new Error("Worker module function was called but `init` did not return a callable function")})}return f.workerModuleData={isWorkerModule:!0,id:r,name:l,dependencies:e,init:P_(t),getTransferables:n&&P_(n)},f.onMainThread=a,f}function N7(i){nv[i]&&nv[i].forEach(function(e){e()}),tv[i]&&(tv[i].terminate(),delete tv[i])}function P_(i){var e=i.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function P7(i){var e=tv[i];if(!e){var t=P_(B7);e=tv[i]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+i.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(n){var s=n.data,a=s.messageId,r=WM[a];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete WM[a],r(s)}}return e}function Nw(i,e,t){return new Promise(function(n,s){var a=++O7;WM[a]=function(r){r.success?n(r.result):s(new Error("Error in worker "+e+" call: "+r.error))},P7(i).postMessage({messageId:a,action:e,data:t})})}function lU(){var i=function(e){function t(re,H,G,K,se,J,ne,ue){var pe=1-ne;ue.x=pe*pe*re+2*pe*ne*G+ne*ne*se,ue.y=pe*pe*H+2*pe*ne*K+ne*ne*J}function n(re,H,G,K,se,J,ne,ue,pe,ve){var Ve=1-pe;ve.x=Ve*Ve*Ve*re+3*Ve*Ve*pe*G+3*Ve*pe*pe*se+pe*pe*pe*ne,ve.y=Ve*Ve*Ve*H+3*Ve*Ve*pe*K+3*Ve*pe*pe*J+pe*pe*pe*ue}function s(re,H){for(var G=/([MLQCZ])([^MLQCZ]*)/g,K,se,J,ne,ue;K=G.exec(re);){var pe=K[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(ve){return parseFloat(ve)});switch(K[1]){case"M":ne=se=pe[0],ue=J=pe[1];break;case"L":(pe[0]!==ne||pe[1]!==ue)&&H("L",ne,ue,ne=pe[0],ue=pe[1]);break;case"Q":{H("Q",ne,ue,ne=pe[2],ue=pe[3],pe[0],pe[1]);break}case"C":{H("C",ne,ue,ne=pe[4],ue=pe[5],pe[0],pe[1],pe[2],pe[3]);break}case"Z":(ne!==se||ue!==J)&&H("L",ne,ue,se,J);break}}}function a(re,H,G){G===void 0&&(G=16);var K={x:0,y:0};s(re,function(se,J,ne,ue,pe,ve,Ve,ze,Qe){switch(se){case"L":H(J,ne,ue,pe);break;case"Q":{for(var Ie=J,rt=ne,Z=1;Z<G;Z++)t(J,ne,ve,Ve,ue,pe,Z/(G-1),K),H(Ie,rt,K.x,K.y),Ie=K.x,rt=K.y;break}case"C":{for(var Le=J,Ue=ne,Re=1;Re<G;Re++)n(J,ne,ve,Ve,ze,Qe,ue,pe,Re/(G-1),K),H(Le,Ue,K.x,K.y),Le=K.x,Ue=K.y;break}}})}var r="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",l="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",c=new WeakMap,f={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function d(re,H){var G=re.getContext?re.getContext("webgl",f):re,K=c.get(G);if(!K){let Le=function(ye){var nt=J[ye];if(!nt&&(nt=J[ye]=G.getExtension(ye),!nt))throw new Error(ye+" not supported");return nt},Ue=function(ye,nt){var ee=G.createShader(nt);return G.shaderSource(ee,ye),G.compileShader(ee),ee},Re=function(ye,nt,ee,V){if(!ne[ye]){var de={},Be={},be=G.createProgram();G.attachShader(be,Ue(nt,G.VERTEX_SHADER)),G.attachShader(be,Ue(ee,G.FRAGMENT_SHADER)),G.linkProgram(be),ne[ye]={program:be,transaction:function($e){G.useProgram(be),$e({setUniform:function(ut,Y){for(var Oe=[],Ke=arguments.length-2;Ke-- >0;)Oe[Ke]=arguments[Ke+2];var it=Be[Y]||(Be[Y]=G.getUniformLocation(be,Y));G["uniform"+ut].apply(G,[it].concat(Oe))},setAttribute:function(ut,Y,Oe,Ke,it){var fe=de[ut];fe||(fe=de[ut]={buf:G.createBuffer(),loc:G.getAttribLocation(be,ut),data:null}),G.bindBuffer(G.ARRAY_BUFFER,fe.buf),G.vertexAttribPointer(fe.loc,Y,G.FLOAT,!1,0,0),G.enableVertexAttribArray(fe.loc),se?G.vertexAttribDivisor(fe.loc,Ke):Le("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(fe.loc,Ke),it!==fe.data&&(G.bufferData(G.ARRAY_BUFFER,it,Oe),fe.data=it)}})}}}ne[ye].transaction(V)},me=function(ye,nt){pe++;try{G.activeTexture(G.TEXTURE0+pe);var ee=ue[ye];ee||(ee=ue[ye]=G.createTexture(),G.bindTexture(G.TEXTURE_2D,ee),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MIN_FILTER,G.NEAREST),G.texParameteri(G.TEXTURE_2D,G.TEXTURE_MAG_FILTER,G.NEAREST)),G.bindTexture(G.TEXTURE_2D,ee),nt(ee,pe)}finally{pe--}},Pe=function(ye,nt,ee){var V=G.createFramebuffer();ve.push(V),G.bindFramebuffer(G.FRAMEBUFFER,V),G.activeTexture(G.TEXTURE0+nt),G.bindTexture(G.TEXTURE_2D,ye),G.framebufferTexture2D(G.FRAMEBUFFER,G.COLOR_ATTACHMENT0,G.TEXTURE_2D,ye,0);try{ee(V)}finally{G.deleteFramebuffer(V),G.bindFramebuffer(G.FRAMEBUFFER,ve[--ve.length-1]||null)}},Se=function(){J={},ne={},ue={},pe=-1,ve.length=0};var Ve=Le,ze=Ue,Qe=Re,Ie=me,rt=Pe,Z=Se,se=typeof WebGL2RenderingContext<"u"&&G instanceof WebGL2RenderingContext,J={},ne={},ue={},pe=-1,ve=[];G.canvas.addEventListener("webglcontextlost",function(ye){Se(),ye.preventDefault()},!1),c.set(G,K={gl:G,isWebGL2:se,getExtension:Le,withProgram:Re,withTexture:me,withTextureFramebuffer:Pe,handleContextLoss:Se})}H(K)}function g(re,H,G,K,se,J,ne,ue){ne===void 0&&(ne=15),ue===void 0&&(ue=null),d(re,function(pe){var ve=pe.gl,Ve=pe.withProgram,ze=pe.withTexture;ze("copy",function(Qe,Ie){ve.texImage2D(ve.TEXTURE_2D,0,ve.RGBA,se,J,0,ve.RGBA,ve.UNSIGNED_BYTE,H),Ve("copy",r,l,function(rt){var Z=rt.setUniform,Le=rt.setAttribute;Le("aUV",2,ve.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),Z("1i","image",Ie),ve.bindFramebuffer(ve.FRAMEBUFFER,ue||null),ve.disable(ve.BLEND),ve.colorMask(ne&8,ne&4,ne&2,ne&1),ve.viewport(G,K,se,J),ve.scissor(G,K,se,J),ve.drawArrays(ve.TRIANGLES,0,3)})})})}function v(re,H,G){var K=re.width,se=re.height;d(re,function(J){var ne=J.gl,ue=new Uint8Array(K*se*4);ne.readPixels(0,0,K,se,ne.RGBA,ne.UNSIGNED_BYTE,ue),re.width=H,re.height=G,g(ne,ue,0,0,K,se)})}var y=Object.freeze({__proto__:null,withWebGLContext:d,renderImageData:g,resizeWebGLCanvasWithoutClearing:v});function S(re,H,G,K,se,J){J===void 0&&(J=1);var ne=new Uint8Array(re*H),ue=K[2]-K[0],pe=K[3]-K[1],ve=[];a(G,function(Le,Ue,Re,me){ve.push({x1:Le,y1:Ue,x2:Re,y2:me,minX:Math.min(Le,Re),minY:Math.min(Ue,me),maxX:Math.max(Le,Re),maxY:Math.max(Ue,me)})}),ve.sort(function(Le,Ue){return Le.maxX-Ue.maxX});for(var Ve=0;Ve<re;Ve++)for(var ze=0;ze<H;ze++){var Qe=rt(K[0]+ue*(Ve+.5)/re,K[1]+pe*(ze+.5)/H),Ie=Math.pow(1-Math.abs(Qe)/se,J)/2;Qe<0&&(Ie=1-Ie),Ie=Math.max(0,Math.min(255,Math.round(Ie*255))),ne[ze*re+Ve]=Ie}return ne;function rt(Le,Ue){for(var Re=1/0,me=1/0,Pe=ve.length;Pe--;){var Se=ve[Pe];if(Se.maxX+me<=Le)break;if(Le+me>Se.minX&&Ue-me<Se.maxY&&Ue+me>Se.minY){var ye=b(Le,Ue,Se.x1,Se.y1,Se.x2,Se.y2);ye<Re&&(Re=ye,me=Math.sqrt(Re))}}return Z(Le,Ue)&&(me=-me),me}function Z(Le,Ue){for(var Re=0,me=ve.length;me--;){var Pe=ve[me];if(Pe.maxX<=Le)break;var Se=Pe.y1>Ue!=Pe.y2>Ue&&Le<(Pe.x2-Pe.x1)*(Ue-Pe.y1)/(Pe.y2-Pe.y1)+Pe.x1;Se&&(Re+=Pe.y1<Pe.y2?1:-1)}return Re!==0}}function A(re,H,G,K,se,J,ne,ue,pe,ve){J===void 0&&(J=1),ue===void 0&&(ue=0),pe===void 0&&(pe=0),ve===void 0&&(ve=0),M(re,H,G,K,se,J,ne,null,ue,pe,ve)}function M(re,H,G,K,se,J,ne,ue,pe,ve,Ve){J===void 0&&(J=1),pe===void 0&&(pe=0),ve===void 0&&(ve=0),Ve===void 0&&(Ve=0);for(var ze=S(re,H,G,K,se,J),Qe=new Uint8Array(ze.length*4),Ie=0;Ie<ze.length;Ie++)Qe[Ie*4+Ve]=ze[Ie];g(ne,Qe,pe,ve,re,H,1<<3-Ve,ue)}function b(re,H,G,K,se,J){var ne=se-G,ue=J-K,pe=ne*ne+ue*ue,ve=pe?Math.max(0,Math.min(1,((re-G)*ne+(H-K)*ue)/pe)):0,Ve=re-(G+ve*ne),ze=H-(K+ve*ue);return Ve*Ve+ze*ze}var C=Object.freeze({__proto__:null,generate:S,generateIntoCanvas:A,generateIntoFramebuffer:M}),w="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",R="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",U="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",O=new Float32Array([0,0,2,0,0,2]),I=null,P=!1,N={},L=new WeakMap;function k(re){if(!P&&!ce(re))throw new Error("WebGL generation not supported")}function X(re,H,G,K,se,J,ne){if(J===void 0&&(J=1),ne===void 0&&(ne=null),!ne&&(ne=I,!ne)){var ue=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!ue)throw new Error("OffscreenCanvas or DOM canvas not supported");ne=I=ue.getContext("webgl",{depth:!1})}k(ne);var pe=new Uint8Array(re*H*4);d(ne,function(Qe){var Ie=Qe.gl,rt=Qe.withTexture,Z=Qe.withTextureFramebuffer;rt("readable",function(Le,Ue){Ie.texImage2D(Ie.TEXTURE_2D,0,Ie.RGBA,re,H,0,Ie.RGBA,Ie.UNSIGNED_BYTE,null),Z(Le,Ue,function(Re){$(re,H,G,K,se,J,Ie,Re,0,0,0),Ie.readPixels(0,0,re,H,Ie.RGBA,Ie.UNSIGNED_BYTE,pe)})})});for(var ve=new Uint8Array(re*H),Ve=0,ze=0;Ve<pe.length;Ve+=4)ve[ze++]=pe[Ve];return ve}function W(re,H,G,K,se,J,ne,ue,pe,ve){J===void 0&&(J=1),ue===void 0&&(ue=0),pe===void 0&&(pe=0),ve===void 0&&(ve=0),$(re,H,G,K,se,J,ne,null,ue,pe,ve)}function $(re,H,G,K,se,J,ne,ue,pe,ve,Ve){J===void 0&&(J=1),pe===void 0&&(pe=0),ve===void 0&&(ve=0),Ve===void 0&&(Ve=0),k(ne);var ze=[];a(G,function(Qe,Ie,rt,Z){ze.push(Qe,Ie,rt,Z)}),ze=new Float32Array(ze),d(ne,function(Qe){var Ie=Qe.gl,rt=Qe.isWebGL2,Z=Qe.getExtension,Le=Qe.withProgram,Ue=Qe.withTexture,Re=Qe.withTextureFramebuffer,me=Qe.handleContextLoss;if(Ue("rawDistances",function(Pe,Se){(re!==Pe._lastWidth||H!==Pe._lastHeight)&&Ie.texImage2D(Ie.TEXTURE_2D,0,Ie.RGBA,Pe._lastWidth=re,Pe._lastHeight=H,0,Ie.RGBA,Ie.UNSIGNED_BYTE,null),Le("main",w,R,function(ye){var nt=ye.setAttribute,ee=ye.setUniform,V=!rt&&Z("ANGLE_instanced_arrays"),de=!rt&&Z("EXT_blend_minmax");nt("aUV",2,Ie.STATIC_DRAW,0,O),nt("aLineSegment",4,Ie.DYNAMIC_DRAW,1,ze),ee.apply(void 0,["4f","uGlyphBounds"].concat(K)),ee("1f","uMaxDistance",se),ee("1f","uExponent",J),Re(Pe,Se,function(Be){Ie.enable(Ie.BLEND),Ie.colorMask(!0,!0,!0,!0),Ie.viewport(0,0,re,H),Ie.scissor(0,0,re,H),Ie.blendFunc(Ie.ONE,Ie.ONE),Ie.blendEquationSeparate(Ie.FUNC_ADD,rt?Ie.MAX:de.MAX_EXT),Ie.clear(Ie.COLOR_BUFFER_BIT),rt?Ie.drawArraysInstanced(Ie.TRIANGLES,0,3,ze.length/4):V.drawArraysInstancedANGLE(Ie.TRIANGLES,0,3,ze.length/4)})}),Le("post",r,U,function(ye){ye.setAttribute("aUV",2,Ie.STATIC_DRAW,0,O),ye.setUniform("1i","tex",Se),Ie.bindFramebuffer(Ie.FRAMEBUFFER,ue),Ie.disable(Ie.BLEND),Ie.colorMask(Ve===0,Ve===1,Ve===2,Ve===3),Ie.viewport(pe,ve,re,H),Ie.scissor(pe,ve,re,H),Ie.drawArrays(Ie.TRIANGLES,0,3)})}),Ie.isContextLost())throw me(),new Error("webgl context lost")})}function ce(re){var H=!re||re===I?N:re.canvas||re,G=L.get(H);if(G===void 0){P=!0;var K=null;try{var se=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],J=X(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,re);G=J&&se.length===J.length&&J.every(function(ne,ue){return ne===se[ue]}),G||(K="bad trial run results",console.info(se,J))}catch(ne){G=!1,K=ne.message}K&&console.warn("WebGL SDF generation not supported:",K),P=!1,L.set(H,G)}return G}var z=Object.freeze({__proto__:null,generate:X,generateIntoCanvas:W,generateIntoFramebuffer:$,isSupported:ce});function q(re,H,G,K,se,J){se===void 0&&(se=Math.max(K[2]-K[0],K[3]-K[1])/2),J===void 0&&(J=1);try{return X.apply(z,arguments)}catch(ne){return console.info("WebGL SDF generation failed, falling back to JS",ne),S.apply(C,arguments)}}function Q(re,H,G,K,se,J,ne,ue,pe,ve){se===void 0&&(se=Math.max(K[2]-K[0],K[3]-K[1])/2),J===void 0&&(J=1),ue===void 0&&(ue=0),pe===void 0&&(pe=0),ve===void 0&&(ve=0);try{return W.apply(z,arguments)}catch(Ve){return console.info("WebGL SDF generation failed, falling back to JS",Ve),A.apply(C,arguments)}}return e.forEachPathCommand=s,e.generate=q,e.generateIntoCanvas=Q,e.javascript=C,e.pathToLineSegments=a,e.webgl=z,e.webglUtils=y,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return i}function I7(){var i=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},s={};n.L=1,s[1]="L",Object.keys(t).forEach(function(me,Pe){n[me]=1<<Pe+1,s[n[me]]=me}),Object.freeze(n);var a=n.LRI|n.RLI|n.FSI,r=n.L|n.R|n.AL,l=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,c=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,f=n.S|n.WS|n.B|a|n.PDI|c,d=null;function g(){if(!d){d=new Map;var me=function(Se){if(t.hasOwnProperty(Se)){var ye=0;t[Se].split(",").forEach(function(nt){var ee=nt.split("+"),V=ee[0],de=ee[1];V=parseInt(V,36),de=de?parseInt(de,36):0,d.set(ye+=V,n[Se]);for(var Be=0;Be<de;Be++)d.set(++ye,n[Se])})}};for(var Pe in t)me(Pe)}}function v(me){return g(),d.get(me.codePointAt(0))||n.L}function y(me){return s[v(me)]}var S={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function A(me,Pe){var Se=36,ye=0,nt=new Map,ee=Pe&&new Map,V;return me.split(",").forEach(function de(Be){if(Be.indexOf("+")!==-1)for(var be=+Be;be--;)de(V);else{V=Be;var Me=Be.split(">"),$e=Me[0],at=Me[1];$e=String.fromCodePoint(ye+=parseInt($e,Se)),at=String.fromCodePoint(ye+=parseInt(at,Se)),nt.set($e,at),Pe&&ee.set(at,$e)}}),{map:nt,reverseMap:ee}}var M,b,C;function w(){if(!M){var me=A(S.pairs,!0),Pe=me.map,Se=me.reverseMap;M=Pe,b=Se,C=A(S.canonical,!1).map}}function R(me){return w(),M.get(me)||null}function U(me){return w(),b.get(me)||null}function O(me){return w(),C.get(me)||null}var I=n.L,P=n.R,N=n.EN,L=n.ES,k=n.ET,X=n.AN,W=n.CS,$=n.B,ce=n.S,z=n.ON,q=n.BN,Q=n.NSM,re=n.AL,H=n.LRO,G=n.RLO,K=n.LRE,se=n.RLE,J=n.PDF,ne=n.LRI,ue=n.RLI,pe=n.FSI,ve=n.PDI;function Ve(me,Pe){for(var Se=125,ye=new Uint32Array(me.length),nt=0;nt<me.length;nt++)ye[nt]=v(me[nt]);var ee=new Map;function V(Bs,ya){var es=ye[Bs];ye[Bs]=ya,ee.set(es,ee.get(es)-1),es&l&&ee.set(l,ee.get(l)-1),ee.set(ya,(ee.get(ya)||0)+1),ya&l&&ee.set(l,(ee.get(l)||0)+1)}for(var de=new Uint8Array(me.length),Be=new Map,be=[],Me=null,$e=0;$e<me.length;$e++)Me||be.push(Me={start:$e,end:me.length-1,level:Pe==="rtl"?1:Pe==="ltr"?0:eh($e,!1)}),ye[$e]&$&&(Me.end=$e,Me=null);for(var at=se|K|G|H|a|ve|J|$,ut=function(Bs){return Bs+(Bs&1?1:2)},Y=function(Bs){return Bs+(Bs&1?2:1)},Oe=0;Oe<be.length;Oe++){Me=be[Oe];var Ke=[{_level:Me.level,_override:0,_isolate:0}],it=void 0,fe=0,Ae=0,st=0;ee.clear();for(var he=Me.start;he<=Me.end;he++){var je=ye[he];if(it=Ke[Ke.length-1],ee.set(je,(ee.get(je)||0)+1),je&l&&ee.set(l,(ee.get(l)||0)+1),je&at)if(je&(se|K)){de[he]=it._level;var He=(je===se?Y:ut)(it._level);He<=Se&&!fe&&!Ae?Ke.push({_level:He,_override:0,_isolate:0}):fe||Ae++}else if(je&(G|H)){de[he]=it._level;var gt=(je===G?Y:ut)(it._level);gt<=Se&&!fe&&!Ae?Ke.push({_level:gt,_override:je&G?P:I,_isolate:0}):fe||Ae++}else if(je&a){je&pe&&(je=eh(he+1,!0)===1?ue:ne),de[he]=it._level,it._override&&V(he,it._override);var et=(je===ue?Y:ut)(it._level);et<=Se&&fe===0&&Ae===0?(st++,Ke.push({_level:et,_override:0,_isolate:1,_isolInitIndex:he})):fe++}else if(je&ve){if(fe>0)fe--;else if(st>0){for(Ae=0;!Ke[Ke.length-1]._isolate;)Ke.pop();var Ge=Ke[Ke.length-1]._isolInitIndex;Ge!=null&&(Be.set(Ge,he),Be.set(he,Ge)),Ke.pop(),st--}it=Ke[Ke.length-1],de[he]=it._level,it._override&&V(he,it._override)}else je&J?(fe===0&&(Ae>0?Ae--:!it._isolate&&Ke.length>1&&(Ke.pop(),it=Ke[Ke.length-1])),de[he]=it._level):je&$&&(de[he]=Me.level);else de[he]=it._level,it._override&&je!==q&&V(he,it._override)}for(var pt=[],vt=null,mt=Me.start;mt<=Me.end;mt++){var At=ye[mt];if(!(At&c)){var Vt=de[mt],Pt=At&a,ot=At===ve;vt&&Vt===vt._level?(vt._end=mt,vt._endsWithIsolInit=Pt):pt.push(vt={_start:mt,_end:mt,_level:Vt,_startsWithPDI:ot,_endsWithIsolInit:Pt})}}for(var tn=[],gn=0;gn<pt.length;gn++){var zn=pt[gn];if(!zn._startsWithPDI||zn._startsWithPDI&&!Be.has(zn._start)){for(var en=[vt=zn],ci=void 0;vt&&vt._endsWithIsolInit&&(ci=Be.get(vt._end))!=null;)for(var jn=gn+1;jn<pt.length;jn++)if(pt[jn]._start===ci){en.push(vt=pt[jn]);break}for(var Bn=[],Kt=0;Kt<en.length;Kt++)for(var ui=en[Kt],bn=ui._start;bn<=ui._end;bn++)Bn.push(bn);for(var Ti=de[Bn[0]],cs=Me.level,Gn=Bn[0]-1;Gn>=0;Gn--)if(!(ye[Gn]&c)){cs=de[Gn];break}var ni=Bn[Bn.length-1],gi=de[ni],_n=Me.level;if(!(ye[ni]&a)){for(var te=ni+1;te<=Me.end;te++)if(!(ye[te]&c)){_n=de[te];break}}tn.push({_seqIndices:Bn,_sosType:Math.max(cs,Ti)%2?P:I,_eosType:Math.max(_n,gi)%2?P:I})}}for(var Ee=0;Ee<tn.length;Ee++){var Ye=tn[Ee],Te=Ye._seqIndices,De=Ye._sosType,ht=Ye._eosType,yt=de[Te[0]]&1?P:I;if(ee.get(Q))for(var Mt=0;Mt<Te.length;Mt++){var bt=Te[Mt];if(ye[bt]&Q){for(var Bt=De,Rt=Mt-1;Rt>=0;Rt--)if(!(ye[Te[Rt]]&c)){Bt=ye[Te[Rt]];break}V(bt,Bt&(a|ve)?z:Bt)}}if(ee.get(N))for(var wt=0;wt<Te.length;wt++){var Yt=Te[wt];if(ye[Yt]&N)for(var fn=wt-1;fn>=-1;fn--){var Rn=fn===-1?De:ye[Te[fn]];if(Rn&r){Rn===re&&V(Yt,X);break}}}if(ee.get(re))for(var Xt=0;Xt<Te.length;Xt++){var nn=Te[Xt];ye[nn]&re&&V(nn,P)}if(ee.get(L)||ee.get(W))for(var Ut=1;Ut<Te.length-1;Ut++){var Un=Te[Ut];if(ye[Un]&(L|W)){for(var Jt=0,ii=0,_s=Ut-1;_s>=0&&(Jt=ye[Te[_s]],!!(Jt&c));_s--);for(var Tn=Ut+1;Tn<Te.length&&(ii=ye[Te[Tn]],!!(ii&c));Tn++);Jt===ii&&(ye[Un]===L?Jt===N:Jt&(N|X))&&V(Un,Jt)}}if(ee.get(N))for(var Ei=0;Ei<Te.length;Ei++){var Hn=Te[Ei];if(ye[Hn]&N){for(var Mi=Ei-1;Mi>=0&&ye[Te[Mi]]&(k|c);Mi--)V(Te[Mi],N);for(Ei++;Ei<Te.length&&ye[Te[Ei]]&(k|c|N);Ei++)ye[Te[Ei]]!==N&&V(Te[Ei],N)}}if(ee.get(k)||ee.get(L)||ee.get(W))for(var $n=0;$n<Te.length;$n++){var Ci=Te[$n];if(ye[Ci]&(k|L|W)){V(Ci,z);for(var vi=$n-1;vi>=0&&ye[Te[vi]]&c;vi--)V(Te[vi],z);for(var Bi=$n+1;Bi<Te.length&&ye[Te[Bi]]&c;Bi++)V(Te[Bi],z)}}if(ee.get(N))for(var ks=0,fo=De;ks<Te.length;ks++){var Gl=Te[ks],Hl=ye[Gl];Hl&N?fo===I&&V(Gl,I):Hl&r&&(fo=Hl)}if(ee.get(l)){var Wo=P|N|X,$f=Wo|I,ho=[];{for(var Or=[],Nr=0;Nr<Te.length;Nr++)if(ye[Te[Nr]]&l){var ga=me[Te[Nr]],po=void 0;if(R(ga)!==null)if(Or.length<63)Or.push({char:ga,seqIndex:Nr});else break;else if((po=U(ga))!==null)for(var qo=Or.length-1;qo>=0;qo--){var Ko=Or[qo].char;if(Ko===po||Ko===U(O(ga))||R(O(Ko))===ga){ho.push([Or[qo].seqIndex,Nr]),Or.length=qo;break}}}ho.sort(function(Bs,ya){return Bs[0]-ya[0]})}for(var Nc=0;Nc<ho.length;Nc++){for(var Jo=ho[Nc],$s=Jo[0],Zo=Jo[1],Qo=!1,Vi=0,Pc=$s+1;Pc<Zo;Pc++){var Ic=Te[Pc];if(ye[Ic]&$f){Qo=!0;var Du=ye[Ic]&Wo?P:I;if(Du===yt){Vi=Du;break}}}if(Qo&&!Vi){Vi=De;for(var lr=$s-1;lr>=0;lr--){var $o=Te[lr];if(ye[$o]&$f){var Vl=ye[$o]&Wo?P:I;Vl!==yt?Vi=Vl:Vi=yt;break}}}if(Vi){if(ye[Te[$s]]=ye[Te[Zo]]=Vi,Vi!==yt){for(var ki=$s+1;ki<Te.length;ki++)if(!(ye[Te[ki]]&c)){v(me[Te[ki]])&Q&&(ye[Te[ki]]=Vi);break}}if(Vi!==yt){for(var va=Zo+1;va<Te.length;va++)if(!(ye[Te[va]]&c)){v(me[Te[va]])&Q&&(ye[Te[va]]=Vi);break}}}}for(var ea=0;ea<Te.length;ea++)if(ye[Te[ea]]&l){for(var el=ea,Bu=ea,Fa=De,cr=ea-1;cr>=0;cr--)if(ye[Te[cr]]&c)el=cr;else{Fa=ye[Te[cr]]&Wo?P:I;break}for(var tl=ht,ur=ea+1;ur<Te.length;ur++)if(ye[Te[ur]]&(l|c))Bu=ur;else{tl=ye[Te[ur]]&Wo?P:I;break}for(var Fc=el;Fc<=Bu;Fc++)ye[Te[Fc]]=Fa===tl?Fa:yt;ea=Bu}}}for(var Xs=Me.start;Xs<=Me.end;Xs++){var c0=de[Xs],Ui=ye[Xs];if(c0&1?Ui&(I|N|X)&&de[Xs]++:Ui&P?de[Xs]++:Ui&(X|N)&&(de[Xs]+=2),Ui&c&&(de[Xs]=Xs===0?Me.level:de[Xs-1]),Xs===Me.end||v(me[Xs])&(ce|$))for(var nl=Xs;nl>=0&&v(me[nl])&f;nl--)de[nl]=Me.level}}return{levels:de,paragraphs:be};function eh(Bs,ya){for(var es=Bs;es<me.length;es++){var za=ye[es];if(za&(P|re))return 1;if(za&($|I)||ya&&za===ve)return 0;if(za&a){var th=Wd(es);es=th===-1?me.length:th}}return 0}function Wd(Bs){for(var ya=1,es=Bs+1;es<me.length;es++){var za=ye[es];if(za&$)break;if(za&ve){if(--ya===0)return es}else za&a&&ya++}return-1}}var ze="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Qe;function Ie(){if(!Qe){var me=A(ze,!0),Pe=me.map,Se=me.reverseMap;Se.forEach(function(ye,nt){Pe.set(nt,ye)}),Qe=Pe}}function rt(me){return Ie(),Qe.get(me)||null}function Z(me,Pe,Se,ye){var nt=me.length;Se=Math.max(0,Se==null?0:+Se),ye=Math.min(nt-1,ye==null?nt-1:+ye);for(var ee=new Map,V=Se;V<=ye;V++)if(Pe[V]&1){var de=rt(me[V]);de!==null&&ee.set(V,de)}return ee}function Le(me,Pe,Se,ye){var nt=me.length;Se=Math.max(0,Se==null?0:+Se),ye=Math.min(nt-1,ye==null?nt-1:+ye);var ee=[];return Pe.paragraphs.forEach(function(V){var de=Math.max(Se,V.start),Be=Math.min(ye,V.end);if(de<Be){for(var be=Pe.levels.slice(de,Be+1),Me=Be;Me>=de&&v(me[Me])&f;Me--)be[Me]=V.level;for(var $e=V.level,at=1/0,ut=0;ut<be.length;ut++){var Y=be[ut];Y>$e&&($e=Y),Y<at&&(at=Y|1)}for(var Oe=$e;Oe>=at;Oe--)for(var Ke=0;Ke<be.length;Ke++)if(be[Ke]>=Oe){for(var it=Ke;Ke+1<be.length&&be[Ke+1]>=Oe;)Ke++;Ke>it&&ee.push([it+de,Ke+de])}}}),ee}function Ue(me,Pe,Se,ye){var nt=Re(me,Pe,Se,ye),ee=[].concat(me);return nt.forEach(function(V,de){ee[de]=(Pe.levels[V]&1?rt(me[V]):null)||me[V]}),ee.join("")}function Re(me,Pe,Se,ye){for(var nt=Le(me,Pe,Se,ye),ee=[],V=0;V<me.length;V++)ee[V]=V;return nt.forEach(function(de){for(var Be=de[0],be=de[1],Me=ee.slice(Be,be+1),$e=Me.length;$e--;)ee[be-$e]=Me[$e]}),ee}return e.closingToOpeningBracket=U,e.getBidiCharType=v,e.getBidiCharTypeName=y,e.getCanonicalBracket=O,e.getEmbeddingLevels=Ve,e.getMirroredCharacter=rt,e.getMirroredCharactersMap=Z,e.getReorderSegments=Le,e.getReorderedIndices=Re,e.getReorderedString=Ue,e.openingToClosingBracket=R,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return i}const cU=/\bvoid\s+main\s*\(\s*\)\s*{/g;function qM(i){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(n,s){let a=pn[s];return a?qM(a):n}return i.replace(e,t)}const ua=[];for(let i=0;i<256;i++)ua[i]=(i<16?"0":"")+i.toString(16);function F7(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(ua[i&255]+ua[i>>8&255]+ua[i>>16&255]+ua[i>>24&255]+"-"+ua[e&255]+ua[e>>8&255]+"-"+ua[e>>16&15|64]+ua[e>>24&255]+"-"+ua[t&63|128]+ua[t>>8&255]+"-"+ua[t>>16&255]+ua[t>>24&255]+ua[n&255]+ua[n>>8&255]+ua[n>>16&255]+ua[n>>24&255]).toUpperCase()}const td=Object.assign||function(){let i=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let n=arguments[e];if(n)for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},z7=Date.now(),Pw=new WeakMap,Iw=new Map;let G7=1e10;function KM(i,e){const t=X7(e);let n=Pw.get(i);if(n||Pw.set(i,n=Object.create(null)),n[t])return new n[t];const s=`_onBeforeCompile${t}`,a=function(f,d){i.onBeforeCompile.call(this,f,d);const g=this.customProgramCacheKey()+"|"+f.vertexShader+"|"+f.fragmentShader;let v=Iw[g];if(!v){const y=H7(this,f,e,t);v=Iw[g]=y}f.vertexShader=v.vertexShader,f.fragmentShader=v.fragmentShader,td(f.uniforms,this.uniforms),e.timeUniform&&(f.uniforms[e.timeUniform]={get value(){return Date.now()-z7}}),this[s]&&this[s](f)},r=function(){return l(e.chained?i:i.clone())},l=function(f){const d=Object.create(f,c);return Object.defineProperty(d,"baseMaterial",{value:i}),Object.defineProperty(d,"id",{value:G7++}),d.uuid=F7(),d.uniforms=td({},f.uniforms,e.uniforms),d.defines=td({},f.defines,e.defines),d.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",d.extensions=td({},f.extensions,e.extensions),d._listeners=void 0,d},c={constructor:{value:r},isDerivedMaterial:{value:!0},type:{get:()=>i.type,set:f=>{i.type=f}},isDerivedFrom:{writable:!0,configurable:!0,value:function(f){const d=this.baseMaterial;return f===d||d.isDerivedMaterial&&d.isDerivedFrom(f)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return i.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return a},set(f){this[s]=f}},copy:{writable:!0,configurable:!0,value:function(f){return i.copy.call(this,f),!i.isShaderMaterial&&!i.isDerivedMaterial&&(td(this.extensions,f.extensions),td(this.defines,f.defines),td(this.uniforms,Kb.clone(f.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const f=new i.constructor;return l(f).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let f=this._depthMaterial;return f||(f=this._depthMaterial=KM(i.isDerivedMaterial?i.getDepthMaterial():new BS({depthPacking:kb}),e),f.defines.IS_DEPTH_MATERIAL="",f.uniforms=this.uniforms),f}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let f=this._distanceMaterial;return f||(f=this._distanceMaterial=KM(i.isDerivedMaterial?i.getDistanceMaterial():new US,e),f.defines.IS_DISTANCE_MATERIAL="",f.uniforms=this.uniforms),f}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:f,_distanceMaterial:d}=this;f&&f.dispose(),d&&d.dispose(),i.dispose.call(this)}}};return n[t]=r,new r}function H7(i,{vertexShader:e,fragmentShader:t},n,s){let{vertexDefs:a,vertexMainIntro:r,vertexMainOutro:l,vertexTransform:c,fragmentDefs:f,fragmentMainIntro:d,fragmentMainOutro:g,fragmentColorTransform:v,customRewriter:y,timeUniform:S}=n;if(a=a||"",r=r||"",l=l||"",f=f||"",d=d||"",g=g||"",(c||y)&&(e=qM(e)),(v||y)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=qM(t)),y){let A=y({vertexShader:e,fragmentShader:t});e=A.vertexShader,t=A.fragmentShader}if(v){let A=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,M=>(A.push(M),"")),g=`${v}
${A.join(`
`)}
${g}`}if(S){const A=`
uniform float ${S};
`;a=A+a,f=A+f}return c&&(e=`vec3 troika_position_${s};
vec3 troika_normal_${s};
vec2 troika_uv_${s};
${e}
`,a=`${a}
void troikaVertexTransform${s}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${c}
}
`,r=`
troika_position_${s} = vec3(position);
troika_normal_${s} = vec3(normal);
troika_uv_${s} = vec2(uv);
troikaVertexTransform${s}(troika_position_${s}, troika_normal_${s}, troika_uv_${s});
${r}
`,e=e.replace(/\b(position|normal|uv)\b/g,(A,M,b,C)=>/\battribute\s+vec[23]\s+$/.test(C.substr(0,b))?M:`troika_${M}_${s}`),i.map&&i.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${s}`))),e=Fw(e,s,a,r,l),t=Fw(t,s,f,d,g),{vertexShader:e,fragmentShader:t}}function Fw(i,e,t,n,s){return(n||s||t)&&(i=i.replace(cU,`
${t}
void troikaOrigMain${e}() {`),i+=`
void main() {
  ${n}
  troikaOrigMain${e}();
  ${s}
}`),i}function V7(i,e){return i==="uniforms"?void 0:typeof e=="function"?e.toString():e}let k7=0;const zw=new Map;function X7(i){const e=JSON.stringify(i,V7);let t=zw.get(e);return t==null&&zw.set(e,t=++k7),t}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function j7(){return typeof window>"u"&&(self.window=self),function(i){var e={parse:function(s){var a=e._bin,r=new Uint8Array(s);if(a.readASCII(r,0,4)=="ttcf"){var l=4;a.readUshort(r,l),l+=2,a.readUshort(r,l),l+=2;var c=a.readUint(r,l);l+=4;for(var f=[],d=0;d<c;d++){var g=a.readUint(r,l);l+=4,f.push(e._readFont(r,g))}return f}return[e._readFont(r,0)]},_readFont:function(s,a){var r=e._bin,l=a;r.readFixed(s,a),a+=4;var c=r.readUshort(s,a);a+=2,r.readUshort(s,a),a+=2,r.readUshort(s,a),a+=2,r.readUshort(s,a),a+=2;for(var f=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],d={_data:s,_offset:l},g={},v=0;v<c;v++){var y=r.readASCII(s,a,4);a+=4,r.readUint(s,a),a+=4;var S=r.readUint(s,a);a+=4;var A=r.readUint(s,a);a+=4,g[y]={offset:S,length:A}}for(v=0;v<f.length;v++){var M=f[v];g[M]&&(d[M.trim()]=e[M.trim()].parse(s,g[M].offset,g[M].length,d))}return d},_tabOffset:function(s,a,r){for(var l=e._bin,c=l.readUshort(s,r+4),f=r+12,d=0;d<c;d++){var g=l.readASCII(s,f,4);f+=4,l.readUint(s,f),f+=4;var v=l.readUint(s,f);if(f+=4,l.readUint(s,f),f+=4,g==a)return v}return 0}};e._bin={readFixed:function(s,a){return(s[a]<<8|s[a+1])+(s[a+2]<<8|s[a+3])/65540},readF2dot14:function(s,a){return e._bin.readShort(s,a)/16384},readInt:function(s,a){return e._bin._view(s).getInt32(a)},readInt8:function(s,a){return e._bin._view(s).getInt8(a)},readShort:function(s,a){return e._bin._view(s).getInt16(a)},readUshort:function(s,a){return e._bin._view(s).getUint16(a)},readUshorts:function(s,a,r){for(var l=[],c=0;c<r;c++)l.push(e._bin.readUshort(s,a+2*c));return l},readUint:function(s,a){return e._bin._view(s).getUint32(a)},readUint64:function(s,a){return 4294967296*e._bin.readUint(s,a)+e._bin.readUint(s,a+4)},readASCII:function(s,a,r){for(var l="",c=0;c<r;c++)l+=String.fromCharCode(s[a+c]);return l},readUnicode:function(s,a,r){for(var l="",c=0;c<r;c++){var f=s[a++]<<8|s[a++];l+=String.fromCharCode(f)}return l},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(s,a,r){var l=e._bin._tdec;return l&&a==0&&r==s.length?l.decode(s):e._bin.readASCII(s,a,r)},readBytes:function(s,a,r){for(var l=[],c=0;c<r;c++)l.push(s[a+c]);return l},readASCIIArray:function(s,a,r){for(var l=[],c=0;c<r;c++)l.push(String.fromCharCode(s[a+c]));return l},_view:function(s){return s._dataView||(s._dataView=s.buffer?new DataView(s.buffer,s.byteOffset,s.byteLength):new DataView(new Uint8Array(s).buffer))}},e._lctf={},e._lctf.parse=function(s,a,r,l,c){var f=e._bin,d={},g=a;f.readFixed(s,a),a+=4;var v=f.readUshort(s,a);a+=2;var y=f.readUshort(s,a);a+=2;var S=f.readUshort(s,a);return a+=2,d.scriptList=e._lctf.readScriptList(s,g+v),d.featureList=e._lctf.readFeatureList(s,g+y),d.lookupList=e._lctf.readLookupList(s,g+S,c),d},e._lctf.readLookupList=function(s,a,r){var l=e._bin,c=a,f=[],d=l.readUshort(s,a);a+=2;for(var g=0;g<d;g++){var v=l.readUshort(s,a);a+=2;var y=e._lctf.readLookupTable(s,c+v,r);f.push(y)}return f},e._lctf.readLookupTable=function(s,a,r){var l=e._bin,c=a,f={tabs:[]};f.ltype=l.readUshort(s,a),a+=2,f.flag=l.readUshort(s,a),a+=2;var d=l.readUshort(s,a);a+=2;for(var g=f.ltype,v=0;v<d;v++){var y=l.readUshort(s,a);a+=2;var S=r(s,g,c+y,f);f.tabs.push(S)}return f},e._lctf.numOfOnes=function(s){for(var a=0,r=0;r<32;r++)(s>>>r&1)!=0&&a++;return a},e._lctf.readClassDef=function(s,a){var r=e._bin,l=[],c=r.readUshort(s,a);if(a+=2,c==1){var f=r.readUshort(s,a);a+=2;var d=r.readUshort(s,a);a+=2;for(var g=0;g<d;g++)l.push(f+g),l.push(f+g),l.push(r.readUshort(s,a)),a+=2}if(c==2){var v=r.readUshort(s,a);for(a+=2,g=0;g<v;g++)l.push(r.readUshort(s,a)),a+=2,l.push(r.readUshort(s,a)),a+=2,l.push(r.readUshort(s,a)),a+=2}return l},e._lctf.getInterval=function(s,a){for(var r=0;r<s.length;r+=3){var l=s[r],c=s[r+1];if(s[r+2],l<=a&&a<=c)return r}return-1},e._lctf.readCoverage=function(s,a){var r=e._bin,l={};l.fmt=r.readUshort(s,a),a+=2;var c=r.readUshort(s,a);return a+=2,l.fmt==1&&(l.tab=r.readUshorts(s,a,c)),l.fmt==2&&(l.tab=r.readUshorts(s,a,3*c)),l},e._lctf.coverageIndex=function(s,a){var r=s.tab;if(s.fmt==1)return r.indexOf(a);if(s.fmt==2){var l=e._lctf.getInterval(r,a);if(l!=-1)return r[l+2]+(a-r[l])}return-1},e._lctf.readFeatureList=function(s,a){var r=e._bin,l=a,c=[],f=r.readUshort(s,a);a+=2;for(var d=0;d<f;d++){var g=r.readASCII(s,a,4);a+=4;var v=r.readUshort(s,a);a+=2;var y=e._lctf.readFeatureTable(s,l+v);y.tag=g.trim(),c.push(y)}return c},e._lctf.readFeatureTable=function(s,a){var r=e._bin,l=a,c={},f=r.readUshort(s,a);a+=2,f>0&&(c.featureParams=l+f);var d=r.readUshort(s,a);a+=2,c.tab=[];for(var g=0;g<d;g++)c.tab.push(r.readUshort(s,a+2*g));return c},e._lctf.readScriptList=function(s,a){var r=e._bin,l=a,c={},f=r.readUshort(s,a);a+=2;for(var d=0;d<f;d++){var g=r.readASCII(s,a,4);a+=4;var v=r.readUshort(s,a);a+=2,c[g.trim()]=e._lctf.readScriptTable(s,l+v)}return c},e._lctf.readScriptTable=function(s,a){var r=e._bin,l=a,c={},f=r.readUshort(s,a);a+=2,f>0&&(c.default=e._lctf.readLangSysTable(s,l+f));var d=r.readUshort(s,a);a+=2;for(var g=0;g<d;g++){var v=r.readASCII(s,a,4);a+=4;var y=r.readUshort(s,a);a+=2,c[v.trim()]=e._lctf.readLangSysTable(s,l+y)}return c},e._lctf.readLangSysTable=function(s,a){var r=e._bin,l={};r.readUshort(s,a),a+=2,l.reqFeature=r.readUshort(s,a),a+=2;var c=r.readUshort(s,a);return a+=2,l.features=r.readUshorts(s,a,c),l},e.CFF={},e.CFF.parse=function(s,a,r){var l=e._bin;(s=new Uint8Array(s.buffer,a,r))[a=0],s[++a],s[++a],s[++a],a++;var c=[];a=e.CFF.readIndex(s,a,c);for(var f=[],d=0;d<c.length-1;d++)f.push(l.readASCII(s,a+c[d],c[d+1]-c[d]));a+=c[c.length-1];var g=[];a=e.CFF.readIndex(s,a,g);var v=[];for(d=0;d<g.length-1;d++)v.push(e.CFF.readDict(s,a+g[d],a+g[d+1]));a+=g[g.length-1];var y=v[0],S=[];a=e.CFF.readIndex(s,a,S);var A=[];for(d=0;d<S.length-1;d++)A.push(l.readASCII(s,a+S[d],S[d+1]-S[d]));if(a+=S[S.length-1],e.CFF.readSubrs(s,a,y),y.CharStrings){a=y.CharStrings,S=[],a=e.CFF.readIndex(s,a,S);var M=[];for(d=0;d<S.length-1;d++)M.push(l.readBytes(s,a+S[d],S[d+1]-S[d]));y.CharStrings=M}if(y.ROS){a=y.FDArray;var b=[];for(a=e.CFF.readIndex(s,a,b),y.FDArray=[],d=0;d<b.length-1;d++){var C=e.CFF.readDict(s,a+b[d],a+b[d+1]);e.CFF._readFDict(s,C,A),y.FDArray.push(C)}a+=b[b.length-1],a=y.FDSelect,y.FDSelect=[];var w=s[a];if(a++,w!=3)throw w;var R=l.readUshort(s,a);for(a+=2,d=0;d<R+1;d++)y.FDSelect.push(l.readUshort(s,a),s[a+2]),a+=3}return y.Encoding&&(y.Encoding=e.CFF.readEncoding(s,y.Encoding,y.CharStrings.length)),y.charset&&(y.charset=e.CFF.readCharset(s,y.charset,y.CharStrings.length)),e.CFF._readFDict(s,y,A),y},e.CFF._readFDict=function(s,a,r){var l;for(var c in a.Private&&(l=a.Private[1],a.Private=e.CFF.readDict(s,l,l+a.Private[0]),a.Private.Subrs&&e.CFF.readSubrs(s,l+a.Private.Subrs,a.Private)),a)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(c)!=-1&&(a[c]=r[a[c]-426+35])},e.CFF.readSubrs=function(s,a,r){var l=e._bin,c=[];a=e.CFF.readIndex(s,a,c);var f,d=c.length;f=d<1240?107:d<33900?1131:32768,r.Bias=f,r.Subrs=[];for(var g=0;g<c.length-1;g++)r.Subrs.push(l.readBytes(s,a+c[g],c[g+1]-c[g]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(s,a){for(var r=0;r<s.charset.length;r++)if(s.charset[r]==a)return r;return-1},e.CFF.glyphBySE=function(s,a){return a<0||a>255?-1:e.CFF.glyphByUnicode(s,e.CFF.tableSE[a])},e.CFF.readEncoding=function(s,a,r){e._bin;var l=[".notdef"],c=s[a];if(a++,c!=0)throw"error: unknown encoding format: "+c;var f=s[a];a++;for(var d=0;d<f;d++)l.push(s[a+d]);return l},e.CFF.readCharset=function(s,a,r){var l=e._bin,c=[".notdef"],f=s[a];if(a++,f==0)for(var d=0;d<r;d++){var g=l.readUshort(s,a);a+=2,c.push(g)}else{if(f!=1&&f!=2)throw"error: format: "+f;for(;c.length<r;){g=l.readUshort(s,a),a+=2;var v=0;for(f==1?(v=s[a],a++):(v=l.readUshort(s,a),a+=2),d=0;d<=v;d++)c.push(g),g++}}return c},e.CFF.readIndex=function(s,a,r){var l=e._bin,c=l.readUshort(s,a)+1,f=s[a+=2];if(a++,f==1)for(var d=0;d<c;d++)r.push(s[a+d]);else if(f==2)for(d=0;d<c;d++)r.push(l.readUshort(s,a+2*d));else if(f==3)for(d=0;d<c;d++)r.push(16777215&l.readUint(s,a+3*d-1));else if(c!=1)throw"unsupported offset size: "+f+", count: "+c;return(a+=c*f)-1},e.CFF.getCharString=function(s,a,r){var l=e._bin,c=s[a],f=s[a+1];s[a+2],s[a+3],s[a+4];var d=1,g=null,v=null;c<=20&&(g=c,d=1),c==12&&(g=100*c+f,d=2),21<=c&&c<=27&&(g=c,d=1),c==28&&(v=l.readShort(s,a+1),d=3),29<=c&&c<=31&&(g=c,d=1),32<=c&&c<=246&&(v=c-139,d=1),247<=c&&c<=250&&(v=256*(c-247)+f+108,d=2),251<=c&&c<=254&&(v=256*-(c-251)-f-108,d=2),c==255&&(v=l.readInt(s,a+1)/65535,d=5),r.val=v??"o"+g,r.size=d},e.CFF.readCharString=function(s,a,r){for(var l=a+r,c=e._bin,f=[];a<l;){var d=s[a],g=s[a+1];s[a+2],s[a+3],s[a+4];var v=1,y=null,S=null;d<=20&&(y=d,v=1),d==12&&(y=100*d+g,v=2),d!=19&&d!=20||(y=d,v=2),21<=d&&d<=27&&(y=d,v=1),d==28&&(S=c.readShort(s,a+1),v=3),29<=d&&d<=31&&(y=d,v=1),32<=d&&d<=246&&(S=d-139,v=1),247<=d&&d<=250&&(S=256*(d-247)+g+108,v=2),251<=d&&d<=254&&(S=256*-(d-251)-g-108,v=2),d==255&&(S=c.readInt(s,a+1)/65535,v=5),f.push(S??"o"+y),a+=v}return f},e.CFF.readDict=function(s,a,r){for(var l=e._bin,c={},f=[];a<r;){var d=s[a],g=s[a+1];s[a+2],s[a+3],s[a+4];var v=1,y=null,S=null;if(d==28&&(S=l.readShort(s,a+1),v=3),d==29&&(S=l.readInt(s,a+1),v=5),32<=d&&d<=246&&(S=d-139,v=1),247<=d&&d<=250&&(S=256*(d-247)+g+108,v=2),251<=d&&d<=254&&(S=256*-(d-251)-g-108,v=2),d==255)throw S=l.readInt(s,a+1)/65535,v=5,"unknown number";if(d==30){var A=[];for(v=1;;){var M=s[a+v];v++;var b=M>>4,C=15&M;if(b!=15&&A.push(b),C!=15&&A.push(C),C==15)break}for(var w="",R=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],U=0;U<A.length;U++)w+=R[A[U]];S=parseFloat(w)}d<=21&&(y=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][d],v=1,d==12&&(y=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][g],v=2)),y!=null?(c[y]=f.length==1?f[0]:f,f=[]):f.push(S),a+=v}return c},e.cmap={},e.cmap.parse=function(s,a,r){s=new Uint8Array(s.buffer,a,r),a=0;var l=e._bin,c={};l.readUshort(s,a),a+=2;var f=l.readUshort(s,a);a+=2;var d=[];c.tables=[];for(var g=0;g<f;g++){var v=l.readUshort(s,a);a+=2;var y=l.readUshort(s,a);a+=2;var S=l.readUint(s,a);a+=4;var A="p"+v+"e"+y,M=d.indexOf(S);if(M==-1){var b;M=c.tables.length,d.push(S);var C=l.readUshort(s,S);C==0?b=e.cmap.parse0(s,S):C==4?b=e.cmap.parse4(s,S):C==6?b=e.cmap.parse6(s,S):C==12?b=e.cmap.parse12(s,S):console.debug("unknown format: "+C,v,y,S),c.tables.push(b)}if(c[A]!=null)throw"multiple tables for one platform+encoding";c[A]=M}return c},e.cmap.parse0=function(s,a){var r=e._bin,l={};l.format=r.readUshort(s,a),a+=2;var c=r.readUshort(s,a);a+=2,r.readUshort(s,a),a+=2,l.map=[];for(var f=0;f<c-6;f++)l.map.push(s[a+f]);return l},e.cmap.parse4=function(s,a){var r=e._bin,l=a,c={};c.format=r.readUshort(s,a),a+=2;var f=r.readUshort(s,a);a+=2,r.readUshort(s,a),a+=2;var d=r.readUshort(s,a);a+=2;var g=d/2;c.searchRange=r.readUshort(s,a),a+=2,c.entrySelector=r.readUshort(s,a),a+=2,c.rangeShift=r.readUshort(s,a),a+=2,c.endCount=r.readUshorts(s,a,g),a+=2*g,a+=2,c.startCount=r.readUshorts(s,a,g),a+=2*g,c.idDelta=[];for(var v=0;v<g;v++)c.idDelta.push(r.readShort(s,a)),a+=2;for(c.idRangeOffset=r.readUshorts(s,a,g),a+=2*g,c.glyphIdArray=[];a<l+f;)c.glyphIdArray.push(r.readUshort(s,a)),a+=2;return c},e.cmap.parse6=function(s,a){var r=e._bin,l={};l.format=r.readUshort(s,a),a+=2,r.readUshort(s,a),a+=2,r.readUshort(s,a),a+=2,l.firstCode=r.readUshort(s,a),a+=2;var c=r.readUshort(s,a);a+=2,l.glyphIdArray=[];for(var f=0;f<c;f++)l.glyphIdArray.push(r.readUshort(s,a)),a+=2;return l},e.cmap.parse12=function(s,a){var r=e._bin,l={};l.format=r.readUshort(s,a),a+=2,a+=2,r.readUint(s,a),a+=4,r.readUint(s,a),a+=4;var c=r.readUint(s,a);a+=4,l.groups=[];for(var f=0;f<c;f++){var d=a+12*f,g=r.readUint(s,d+0),v=r.readUint(s,d+4),y=r.readUint(s,d+8);l.groups.push([g,v,y])}return l},e.glyf={},e.glyf.parse=function(s,a,r,l){for(var c=[],f=0;f<l.maxp.numGlyphs;f++)c.push(null);return c},e.glyf._parseGlyf=function(s,a){var r=e._bin,l=s._data,c=e._tabOffset(l,"glyf",s._offset)+s.loca[a];if(s.loca[a]==s.loca[a+1])return null;var f={};if(f.noc=r.readShort(l,c),c+=2,f.xMin=r.readShort(l,c),c+=2,f.yMin=r.readShort(l,c),c+=2,f.xMax=r.readShort(l,c),c+=2,f.yMax=r.readShort(l,c),c+=2,f.xMin>=f.xMax||f.yMin>=f.yMax)return null;if(f.noc>0){f.endPts=[];for(var d=0;d<f.noc;d++)f.endPts.push(r.readUshort(l,c)),c+=2;var g=r.readUshort(l,c);if(c+=2,l.length-c<g)return null;f.instructions=r.readBytes(l,c,g),c+=g;var v=f.endPts[f.noc-1]+1;for(f.flags=[],d=0;d<v;d++){var y=l[c];if(c++,f.flags.push(y),(8&y)!=0){var S=l[c];c++;for(var A=0;A<S;A++)f.flags.push(y),d++}}for(f.xs=[],d=0;d<v;d++){var M=(2&f.flags[d])!=0,b=(16&f.flags[d])!=0;M?(f.xs.push(b?l[c]:-l[c]),c++):b?f.xs.push(0):(f.xs.push(r.readShort(l,c)),c+=2)}for(f.ys=[],d=0;d<v;d++)M=(4&f.flags[d])!=0,b=(32&f.flags[d])!=0,M?(f.ys.push(b?l[c]:-l[c]),c++):b?f.ys.push(0):(f.ys.push(r.readShort(l,c)),c+=2);var C=0,w=0;for(d=0;d<v;d++)C+=f.xs[d],w+=f.ys[d],f.xs[d]=C,f.ys[d]=w}else{var R;f.parts=[];do{R=r.readUshort(l,c),c+=2;var U={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(f.parts.push(U),U.glyphIndex=r.readUshort(l,c),c+=2,1&R){var O=r.readShort(l,c);c+=2;var I=r.readShort(l,c);c+=2}else O=r.readInt8(l,c),c++,I=r.readInt8(l,c),c++;2&R?(U.m.tx=O,U.m.ty=I):(U.p1=O,U.p2=I),8&R?(U.m.a=U.m.d=r.readF2dot14(l,c),c+=2):64&R?(U.m.a=r.readF2dot14(l,c),c+=2,U.m.d=r.readF2dot14(l,c),c+=2):128&R&&(U.m.a=r.readF2dot14(l,c),c+=2,U.m.b=r.readF2dot14(l,c),c+=2,U.m.c=r.readF2dot14(l,c),c+=2,U.m.d=r.readF2dot14(l,c),c+=2)}while(32&R);if(256&R){var P=r.readUshort(l,c);for(c+=2,f.instr=[],d=0;d<P;d++)f.instr.push(l[c]),c++}}return f},e.GDEF={},e.GDEF.parse=function(s,a,r,l){var c=a;a+=4;var f=e._bin.readUshort(s,a);return{glyphClassDef:f===0?null:e._lctf.readClassDef(s,c+f)}},e.GPOS={},e.GPOS.parse=function(s,a,r,l){return e._lctf.parse(s,a,r,l,e.GPOS.subt)},e.GPOS.subt=function(s,a,r,l){var c=e._bin,f=r,d={};if(d.fmt=c.readUshort(s,r),r+=2,a==1||a==2||a==3||a==7||a==8&&d.fmt<=2){var g=c.readUshort(s,r);r+=2,d.coverage=e._lctf.readCoverage(s,g+f)}if(a==1&&d.fmt==1){var v=c.readUshort(s,r);r+=2,v!=0&&(d.pos=e.GPOS.readValueRecord(s,r,v))}else if(a==2&&d.fmt>=1&&d.fmt<=2){v=c.readUshort(s,r),r+=2;var y=c.readUshort(s,r);r+=2;var S=e._lctf.numOfOnes(v),A=e._lctf.numOfOnes(y);if(d.fmt==1){d.pairsets=[];var M=c.readUshort(s,r);r+=2;for(var b=0;b<M;b++){var C=f+c.readUshort(s,r);r+=2;var w=c.readUshort(s,C);C+=2;for(var R=[],U=0;U<w;U++){var O=c.readUshort(s,C);C+=2,v!=0&&(X=e.GPOS.readValueRecord(s,C,v),C+=2*S),y!=0&&(W=e.GPOS.readValueRecord(s,C,y),C+=2*A),R.push({gid2:O,val1:X,val2:W})}d.pairsets.push(R)}}if(d.fmt==2){var I=c.readUshort(s,r);r+=2;var P=c.readUshort(s,r);r+=2;var N=c.readUshort(s,r);r+=2;var L=c.readUshort(s,r);for(r+=2,d.classDef1=e._lctf.readClassDef(s,f+I),d.classDef2=e._lctf.readClassDef(s,f+P),d.matrix=[],b=0;b<N;b++){var k=[];for(U=0;U<L;U++){var X=null,W=null;v!=0&&(X=e.GPOS.readValueRecord(s,r,v),r+=2*S),y!=0&&(W=e.GPOS.readValueRecord(s,r,y),r+=2*A),k.push({val1:X,val2:W})}d.matrix.push(k)}}}else if(a==4&&d.fmt==1)d.markCoverage=e._lctf.readCoverage(s,c.readUshort(s,r)+f),d.baseCoverage=e._lctf.readCoverage(s,c.readUshort(s,r+2)+f),d.markClassCount=c.readUshort(s,r+4),d.markArray=e.GPOS.readMarkArray(s,c.readUshort(s,r+6)+f),d.baseArray=e.GPOS.readBaseArray(s,c.readUshort(s,r+8)+f,d.markClassCount);else if(a==6&&d.fmt==1)d.mark1Coverage=e._lctf.readCoverage(s,c.readUshort(s,r)+f),d.mark2Coverage=e._lctf.readCoverage(s,c.readUshort(s,r+2)+f),d.markClassCount=c.readUshort(s,r+4),d.mark1Array=e.GPOS.readMarkArray(s,c.readUshort(s,r+6)+f),d.mark2Array=e.GPOS.readBaseArray(s,c.readUshort(s,r+8)+f,d.markClassCount);else{if(a==9&&d.fmt==1){var $=c.readUshort(s,r);r+=2;var ce=c.readUint(s,r);if(r+=4,l.ltype==9)l.ltype=$;else if(l.ltype!=$)throw"invalid extension substitution";return e.GPOS.subt(s,l.ltype,f+ce)}console.debug("unsupported GPOS table LookupType",a,"format",d.fmt)}return d},e.GPOS.readValueRecord=function(s,a,r){var l=e._bin,c=[];return c.push(1&r?l.readShort(s,a):0),a+=1&r?2:0,c.push(2&r?l.readShort(s,a):0),a+=2&r?2:0,c.push(4&r?l.readShort(s,a):0),a+=4&r?2:0,c.push(8&r?l.readShort(s,a):0),a+=8&r?2:0,c},e.GPOS.readBaseArray=function(s,a,r){var l=e._bin,c=[],f=a,d=l.readUshort(s,a);a+=2;for(var g=0;g<d;g++){for(var v=[],y=0;y<r;y++)v.push(e.GPOS.readAnchorRecord(s,f+l.readUshort(s,a))),a+=2;c.push(v)}return c},e.GPOS.readMarkArray=function(s,a){var r=e._bin,l=[],c=a,f=r.readUshort(s,a);a+=2;for(var d=0;d<f;d++){var g=e.GPOS.readAnchorRecord(s,r.readUshort(s,a+2)+c);g.markClass=r.readUshort(s,a),l.push(g),a+=4}return l},e.GPOS.readAnchorRecord=function(s,a){var r=e._bin,l={};return l.fmt=r.readUshort(s,a),l.x=r.readShort(s,a+2),l.y=r.readShort(s,a+4),l},e.GSUB={},e.GSUB.parse=function(s,a,r,l){return e._lctf.parse(s,a,r,l,e.GSUB.subt)},e.GSUB.subt=function(s,a,r,l){var c=e._bin,f=r,d={};if(d.fmt=c.readUshort(s,r),r+=2,a!=1&&a!=2&&a!=4&&a!=5&&a!=6)return null;if(a==1||a==2||a==4||a==5&&d.fmt<=2||a==6&&d.fmt<=2){var g=c.readUshort(s,r);r+=2,d.coverage=e._lctf.readCoverage(s,f+g)}if(a==1&&d.fmt>=1&&d.fmt<=2){if(d.fmt==1)d.delta=c.readShort(s,r),r+=2;else if(d.fmt==2){var v=c.readUshort(s,r);r+=2,d.newg=c.readUshorts(s,r,v),r+=2*d.newg.length}}else if(a==2&&d.fmt==1){v=c.readUshort(s,r),r+=2,d.seqs=[];for(var y=0;y<v;y++){var S=c.readUshort(s,r)+f;r+=2;var A=c.readUshort(s,S);d.seqs.push(c.readUshorts(s,S+2,A))}}else if(a==4)for(d.vals=[],v=c.readUshort(s,r),r+=2,y=0;y<v;y++){var M=c.readUshort(s,r);r+=2,d.vals.push(e.GSUB.readLigatureSet(s,f+M))}else if(a==5&&d.fmt==2){if(d.fmt==2){var b=c.readUshort(s,r);r+=2,d.cDef=e._lctf.readClassDef(s,f+b),d.scset=[];var C=c.readUshort(s,r);for(r+=2,y=0;y<C;y++){var w=c.readUshort(s,r);r+=2,d.scset.push(w==0?null:e.GSUB.readSubClassSet(s,f+w))}}}else if(a==6&&d.fmt==3){if(d.fmt==3){for(y=0;y<3;y++){v=c.readUshort(s,r),r+=2;for(var R=[],U=0;U<v;U++)R.push(e._lctf.readCoverage(s,f+c.readUshort(s,r+2*U)));r+=2*v,y==0&&(d.backCvg=R),y==1&&(d.inptCvg=R),y==2&&(d.ahedCvg=R)}v=c.readUshort(s,r),r+=2,d.lookupRec=e.GSUB.readSubstLookupRecords(s,r,v)}}else{if(a==7&&d.fmt==1){var O=c.readUshort(s,r);r+=2;var I=c.readUint(s,r);if(r+=4,l.ltype==9)l.ltype=O;else if(l.ltype!=O)throw"invalid extension substitution";return e.GSUB.subt(s,l.ltype,f+I)}console.debug("unsupported GSUB table LookupType",a,"format",d.fmt)}return d},e.GSUB.readSubClassSet=function(s,a){var r=e._bin.readUshort,l=a,c=[],f=r(s,a);a+=2;for(var d=0;d<f;d++){var g=r(s,a);a+=2,c.push(e.GSUB.readSubClassRule(s,l+g))}return c},e.GSUB.readSubClassRule=function(s,a){var r=e._bin.readUshort,l={},c=r(s,a),f=r(s,a+=2);a+=2,l.input=[];for(var d=0;d<c-1;d++)l.input.push(r(s,a)),a+=2;return l.substLookupRecords=e.GSUB.readSubstLookupRecords(s,a,f),l},e.GSUB.readSubstLookupRecords=function(s,a,r){for(var l=e._bin.readUshort,c=[],f=0;f<r;f++)c.push(l(s,a),l(s,a+2)),a+=4;return c},e.GSUB.readChainSubClassSet=function(s,a){var r=e._bin,l=a,c=[],f=r.readUshort(s,a);a+=2;for(var d=0;d<f;d++){var g=r.readUshort(s,a);a+=2,c.push(e.GSUB.readChainSubClassRule(s,l+g))}return c},e.GSUB.readChainSubClassRule=function(s,a){for(var r=e._bin,l={},c=["backtrack","input","lookahead"],f=0;f<c.length;f++){var d=r.readUshort(s,a);a+=2,f==1&&d--,l[c[f]]=r.readUshorts(s,a,d),a+=2*l[c[f]].length}return d=r.readUshort(s,a),a+=2,l.subst=r.readUshorts(s,a,2*d),a+=2*l.subst.length,l},e.GSUB.readLigatureSet=function(s,a){var r=e._bin,l=a,c=[],f=r.readUshort(s,a);a+=2;for(var d=0;d<f;d++){var g=r.readUshort(s,a);a+=2,c.push(e.GSUB.readLigature(s,l+g))}return c},e.GSUB.readLigature=function(s,a){var r=e._bin,l={chain:[]};l.nglyph=r.readUshort(s,a),a+=2;var c=r.readUshort(s,a);a+=2;for(var f=0;f<c-1;f++)l.chain.push(r.readUshort(s,a)),a+=2;return l},e.head={},e.head.parse=function(s,a,r){var l=e._bin,c={};return l.readFixed(s,a),a+=4,c.fontRevision=l.readFixed(s,a),a+=4,l.readUint(s,a),a+=4,l.readUint(s,a),a+=4,c.flags=l.readUshort(s,a),a+=2,c.unitsPerEm=l.readUshort(s,a),a+=2,c.created=l.readUint64(s,a),a+=8,c.modified=l.readUint64(s,a),a+=8,c.xMin=l.readShort(s,a),a+=2,c.yMin=l.readShort(s,a),a+=2,c.xMax=l.readShort(s,a),a+=2,c.yMax=l.readShort(s,a),a+=2,c.macStyle=l.readUshort(s,a),a+=2,c.lowestRecPPEM=l.readUshort(s,a),a+=2,c.fontDirectionHint=l.readShort(s,a),a+=2,c.indexToLocFormat=l.readShort(s,a),a+=2,c.glyphDataFormat=l.readShort(s,a),a+=2,c},e.hhea={},e.hhea.parse=function(s,a,r){var l=e._bin,c={};return l.readFixed(s,a),a+=4,c.ascender=l.readShort(s,a),a+=2,c.descender=l.readShort(s,a),a+=2,c.lineGap=l.readShort(s,a),a+=2,c.advanceWidthMax=l.readUshort(s,a),a+=2,c.minLeftSideBearing=l.readShort(s,a),a+=2,c.minRightSideBearing=l.readShort(s,a),a+=2,c.xMaxExtent=l.readShort(s,a),a+=2,c.caretSlopeRise=l.readShort(s,a),a+=2,c.caretSlopeRun=l.readShort(s,a),a+=2,c.caretOffset=l.readShort(s,a),a+=2,a+=8,c.metricDataFormat=l.readShort(s,a),a+=2,c.numberOfHMetrics=l.readUshort(s,a),a+=2,c},e.hmtx={},e.hmtx.parse=function(s,a,r,l){for(var c=e._bin,f={aWidth:[],lsBearing:[]},d=0,g=0,v=0;v<l.maxp.numGlyphs;v++)v<l.hhea.numberOfHMetrics&&(d=c.readUshort(s,a),a+=2,g=c.readShort(s,a),a+=2),f.aWidth.push(d),f.lsBearing.push(g);return f},e.kern={},e.kern.parse=function(s,a,r,l){var c=e._bin,f=c.readUshort(s,a);if(a+=2,f==1)return e.kern.parseV1(s,a-2,r,l);var d=c.readUshort(s,a);a+=2;for(var g={glyph1:[],rval:[]},v=0;v<d;v++){a+=2,r=c.readUshort(s,a),a+=2;var y=c.readUshort(s,a);a+=2;var S=y>>>8;if((S&=15)!=0)throw"unknown kern table format: "+S;a=e.kern.readFormat0(s,a,g)}return g},e.kern.parseV1=function(s,a,r,l){var c=e._bin;c.readFixed(s,a),a+=4;var f=c.readUint(s,a);a+=4;for(var d={glyph1:[],rval:[]},g=0;g<f;g++){c.readUint(s,a),a+=4;var v=c.readUshort(s,a);a+=2,c.readUshort(s,a),a+=2;var y=v>>>8;if((y&=15)!=0)throw"unknown kern table format: "+y;a=e.kern.readFormat0(s,a,d)}return d},e.kern.readFormat0=function(s,a,r){var l=e._bin,c=-1,f=l.readUshort(s,a);a+=2,l.readUshort(s,a),a+=2,l.readUshort(s,a),a+=2,l.readUshort(s,a),a+=2;for(var d=0;d<f;d++){var g=l.readUshort(s,a);a+=2;var v=l.readUshort(s,a);a+=2;var y=l.readShort(s,a);a+=2,g!=c&&(r.glyph1.push(g),r.rval.push({glyph2:[],vals:[]}));var S=r.rval[r.rval.length-1];S.glyph2.push(v),S.vals.push(y),c=g}return a},e.loca={},e.loca.parse=function(s,a,r,l){var c=e._bin,f=[],d=l.head.indexToLocFormat,g=l.maxp.numGlyphs+1;if(d==0)for(var v=0;v<g;v++)f.push(c.readUshort(s,a+(v<<1))<<1);if(d==1)for(v=0;v<g;v++)f.push(c.readUint(s,a+(v<<2)));return f},e.maxp={},e.maxp.parse=function(s,a,r){var l=e._bin,c={},f=l.readUint(s,a);return a+=4,c.numGlyphs=l.readUshort(s,a),a+=2,f==65536&&(c.maxPoints=l.readUshort(s,a),a+=2,c.maxContours=l.readUshort(s,a),a+=2,c.maxCompositePoints=l.readUshort(s,a),a+=2,c.maxCompositeContours=l.readUshort(s,a),a+=2,c.maxZones=l.readUshort(s,a),a+=2,c.maxTwilightPoints=l.readUshort(s,a),a+=2,c.maxStorage=l.readUshort(s,a),a+=2,c.maxFunctionDefs=l.readUshort(s,a),a+=2,c.maxInstructionDefs=l.readUshort(s,a),a+=2,c.maxStackElements=l.readUshort(s,a),a+=2,c.maxSizeOfInstructions=l.readUshort(s,a),a+=2,c.maxComponentElements=l.readUshort(s,a),a+=2,c.maxComponentDepth=l.readUshort(s,a),a+=2),c},e.name={},e.name.parse=function(s,a,r){var l=e._bin,c={};l.readUshort(s,a),a+=2;var f=l.readUshort(s,a);a+=2,l.readUshort(s,a);for(var d,g=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],v=a+=2,y=0;y<f;y++){var S=l.readUshort(s,a);a+=2;var A=l.readUshort(s,a);a+=2;var M=l.readUshort(s,a);a+=2;var b=l.readUshort(s,a);a+=2;var C=l.readUshort(s,a);a+=2;var w=l.readUshort(s,a);a+=2;var R,U=g[b],O=v+12*f+w;if(S==0)R=l.readUnicode(s,O,C/2);else if(S==3&&A==0)R=l.readUnicode(s,O,C/2);else if(A==0)R=l.readASCII(s,O,C);else if(A==1)R=l.readUnicode(s,O,C/2);else if(A==3)R=l.readUnicode(s,O,C/2);else{if(S!=1)throw"unknown encoding "+A+", platformID: "+S;R=l.readASCII(s,O,C),console.debug("reading unknown MAC encoding "+A+" as ASCII")}var I="p"+S+","+M.toString(16);c[I]==null&&(c[I]={}),c[I][U!==void 0?U:b]=R,c[I]._lang=M}for(var P in c)if(c[P].postScriptName!=null&&c[P]._lang==1033)return c[P];for(var P in c)if(c[P].postScriptName!=null&&c[P]._lang==0)return c[P];for(var P in c)if(c[P].postScriptName!=null&&c[P]._lang==3084)return c[P];for(var P in c)if(c[P].postScriptName!=null)return c[P];for(var P in c){d=P;break}return console.debug("returning name table with languageID "+c[d]._lang),c[d]},e["OS/2"]={},e["OS/2"].parse=function(s,a,r){var l=e._bin.readUshort(s,a);a+=2;var c={};if(l==0)e["OS/2"].version0(s,a,c);else if(l==1)e["OS/2"].version1(s,a,c);else if(l==2||l==3||l==4)e["OS/2"].version2(s,a,c);else{if(l!=5)throw"unknown OS/2 table version: "+l;e["OS/2"].version5(s,a,c)}return c},e["OS/2"].version0=function(s,a,r){var l=e._bin;return r.xAvgCharWidth=l.readShort(s,a),a+=2,r.usWeightClass=l.readUshort(s,a),a+=2,r.usWidthClass=l.readUshort(s,a),a+=2,r.fsType=l.readUshort(s,a),a+=2,r.ySubscriptXSize=l.readShort(s,a),a+=2,r.ySubscriptYSize=l.readShort(s,a),a+=2,r.ySubscriptXOffset=l.readShort(s,a),a+=2,r.ySubscriptYOffset=l.readShort(s,a),a+=2,r.ySuperscriptXSize=l.readShort(s,a),a+=2,r.ySuperscriptYSize=l.readShort(s,a),a+=2,r.ySuperscriptXOffset=l.readShort(s,a),a+=2,r.ySuperscriptYOffset=l.readShort(s,a),a+=2,r.yStrikeoutSize=l.readShort(s,a),a+=2,r.yStrikeoutPosition=l.readShort(s,a),a+=2,r.sFamilyClass=l.readShort(s,a),a+=2,r.panose=l.readBytes(s,a,10),a+=10,r.ulUnicodeRange1=l.readUint(s,a),a+=4,r.ulUnicodeRange2=l.readUint(s,a),a+=4,r.ulUnicodeRange3=l.readUint(s,a),a+=4,r.ulUnicodeRange4=l.readUint(s,a),a+=4,r.achVendID=[l.readInt8(s,a),l.readInt8(s,a+1),l.readInt8(s,a+2),l.readInt8(s,a+3)],a+=4,r.fsSelection=l.readUshort(s,a),a+=2,r.usFirstCharIndex=l.readUshort(s,a),a+=2,r.usLastCharIndex=l.readUshort(s,a),a+=2,r.sTypoAscender=l.readShort(s,a),a+=2,r.sTypoDescender=l.readShort(s,a),a+=2,r.sTypoLineGap=l.readShort(s,a),a+=2,r.usWinAscent=l.readUshort(s,a),a+=2,r.usWinDescent=l.readUshort(s,a),a+=2},e["OS/2"].version1=function(s,a,r){var l=e._bin;return a=e["OS/2"].version0(s,a,r),r.ulCodePageRange1=l.readUint(s,a),a+=4,r.ulCodePageRange2=l.readUint(s,a),a+=4},e["OS/2"].version2=function(s,a,r){var l=e._bin;return a=e["OS/2"].version1(s,a,r),r.sxHeight=l.readShort(s,a),a+=2,r.sCapHeight=l.readShort(s,a),a+=2,r.usDefault=l.readUshort(s,a),a+=2,r.usBreak=l.readUshort(s,a),a+=2,r.usMaxContext=l.readUshort(s,a),a+=2},e["OS/2"].version5=function(s,a,r){var l=e._bin;return a=e["OS/2"].version2(s,a,r),r.usLowerOpticalPointSize=l.readUshort(s,a),a+=2,r.usUpperOpticalPointSize=l.readUshort(s,a),a+=2},e.post={},e.post.parse=function(s,a,r){var l=e._bin,c={};return c.version=l.readFixed(s,a),a+=4,c.italicAngle=l.readFixed(s,a),a+=4,c.underlinePosition=l.readShort(s,a),a+=2,c.underlineThickness=l.readShort(s,a),a+=2,c},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(s,a){var r=s.cmap,l=-1;if(r.p0e4!=null?l=r.p0e4:r.p3e1!=null?l=r.p3e1:r.p1e0!=null?l=r.p1e0:r.p0e3!=null&&(l=r.p0e3),l==-1)throw"no familiar platform and encoding!";var c=r.tables[l];if(c.format==0)return a>=c.map.length?0:c.map[a];if(c.format==4){for(var f=-1,d=0;d<c.endCount.length;d++)if(a<=c.endCount[d]){f=d;break}return f==-1||c.startCount[f]>a?0:65535&(c.idRangeOffset[f]!=0?c.glyphIdArray[a-c.startCount[f]+(c.idRangeOffset[f]>>1)-(c.idRangeOffset.length-f)]:a+c.idDelta[f])}if(c.format==12){if(a>c.groups[c.groups.length-1][1])return 0;for(d=0;d<c.groups.length;d++){var g=c.groups[d];if(g[0]<=a&&a<=g[1])return g[2]+(a-g[0])}return 0}throw"unknown cmap table format "+c.format},e.U.glyphToPath=function(s,a){var r={cmds:[],crds:[]};if(s.SVG&&s.SVG.entries[a]){var l=s.SVG.entries[a];return l==null?r:(typeof l=="string"&&(l=e.SVG.toPath(l),s.SVG.entries[a]=l),l)}if(s.CFF){var c={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:s.CFF.Private?s.CFF.Private.defaultWidthX:0,open:!1},f=s.CFF,d=s.CFF.Private;if(f.ROS){for(var g=0;f.FDSelect[g+2]<=a;)g+=2;d=f.FDArray[f.FDSelect[g+1]].Private}e.U._drawCFF(s.CFF.CharStrings[a],c,f,d,r)}else s.glyf&&e.U._drawGlyf(a,s,r);return r},e.U._drawGlyf=function(s,a,r){var l=a.glyf[s];l==null&&(l=a.glyf[s]=e.glyf._parseGlyf(a,s)),l!=null&&(l.noc>-1?e.U._simpleGlyph(l,r):e.U._compoGlyph(l,a,r))},e.U._simpleGlyph=function(s,a){for(var r=0;r<s.noc;r++){for(var l=r==0?0:s.endPts[r-1]+1,c=s.endPts[r],f=l;f<=c;f++){var d=f==l?c:f-1,g=f==c?l:f+1,v=1&s.flags[f],y=1&s.flags[d],S=1&s.flags[g],A=s.xs[f],M=s.ys[f];if(f==l)if(v){if(!y){e.U.P.moveTo(a,A,M);continue}e.U.P.moveTo(a,s.xs[d],s.ys[d])}else y?e.U.P.moveTo(a,s.xs[d],s.ys[d]):e.U.P.moveTo(a,(s.xs[d]+A)/2,(s.ys[d]+M)/2);v?y&&e.U.P.lineTo(a,A,M):S?e.U.P.qcurveTo(a,A,M,s.xs[g],s.ys[g]):e.U.P.qcurveTo(a,A,M,(A+s.xs[g])/2,(M+s.ys[g])/2)}e.U.P.closePath(a)}},e.U._compoGlyph=function(s,a,r){for(var l=0;l<s.parts.length;l++){var c={cmds:[],crds:[]},f=s.parts[l];e.U._drawGlyf(f.glyphIndex,a,c);for(var d=f.m,g=0;g<c.crds.length;g+=2){var v=c.crds[g],y=c.crds[g+1];r.crds.push(v*d.a+y*d.b+d.tx),r.crds.push(v*d.c+y*d.d+d.ty)}for(g=0;g<c.cmds.length;g++)r.cmds.push(c.cmds[g])}},e.U._getGlyphClass=function(s,a){var r=e._lctf.getInterval(a,s);return r==-1?0:a[r+2]},e.U._applySubs=function(s,a,r,l){for(var c=s.length-a-1,f=0;f<r.tabs.length;f++)if(r.tabs[f]!=null){var d,g=r.tabs[f];if(!g.coverage||(d=e._lctf.coverageIndex(g.coverage,s[a]))!=-1){if(r.ltype==1)s[a],g.fmt==1?s[a]=s[a]+g.delta:s[a]=g.newg[d];else if(r.ltype==4)for(var v=g.vals[d],y=0;y<v.length;y++){var S=v[y],A=S.chain.length;if(!(A>c)){for(var M=!0,b=0,C=0;C<A;C++){for(;s[a+b+(1+C)]==-1;)b++;S.chain[C]!=s[a+b+(1+C)]&&(M=!1)}if(M){for(s[a]=S.nglyph,C=0;C<A+b;C++)s[a+C+1]=-1;break}}}else if(r.ltype==5&&g.fmt==2)for(var w=e._lctf.getInterval(g.cDef,s[a]),R=g.cDef[w+2],U=g.scset[R],O=0;O<U.length;O++){var I=U[O],P=I.input;if(!(P.length>c)){for(M=!0,C=0;C<P.length;C++){var N=e._lctf.getInterval(g.cDef,s[a+1+C]);if(w==-1&&g.cDef[N+2]!=P[C]){M=!1;break}}if(M){var L=I.substLookupRecords;for(y=0;y<L.length;y+=2)L[y],L[y+1]}}}else if(r.ltype==6&&g.fmt==3){if(!e.U._glsCovered(s,g.backCvg,a-g.backCvg.length)||!e.U._glsCovered(s,g.inptCvg,a)||!e.U._glsCovered(s,g.ahedCvg,a+g.inptCvg.length))continue;var k=g.lookupRec;for(O=0;O<k.length;O+=2){w=k[O];var X=l[k[O+1]];e.U._applySubs(s,a+w,X,l)}}}}},e.U._glsCovered=function(s,a,r){for(var l=0;l<a.length;l++)if(e._lctf.coverageIndex(a[l],s[r+l])==-1)return!1;return!0},e.U.glyphsToPath=function(s,a,r){for(var l={cmds:[],crds:[]},c=0,f=0;f<a.length;f++){var d=a[f];if(d!=-1){for(var g=f<a.length-1&&a[f+1]!=-1?a[f+1]:0,v=e.U.glyphToPath(s,d),y=0;y<v.crds.length;y+=2)l.crds.push(v.crds[y]+c),l.crds.push(v.crds[y+1]);for(r&&l.cmds.push(r),y=0;y<v.cmds.length;y++)l.cmds.push(v.cmds[y]);r&&l.cmds.push("X"),c+=s.hmtx.aWidth[d],f<a.length-1&&(c+=e.U.getPairAdjustment(s,d,g))}}return l},e.U.P={},e.U.P.moveTo=function(s,a,r){s.cmds.push("M"),s.crds.push(a,r)},e.U.P.lineTo=function(s,a,r){s.cmds.push("L"),s.crds.push(a,r)},e.U.P.curveTo=function(s,a,r,l,c,f,d){s.cmds.push("C"),s.crds.push(a,r,l,c,f,d)},e.U.P.qcurveTo=function(s,a,r,l,c){s.cmds.push("Q"),s.crds.push(a,r,l,c)},e.U.P.closePath=function(s){s.cmds.push("Z")},e.U._drawCFF=function(s,a,r,l,c){for(var f=a.stack,d=a.nStems,g=a.haveWidth,v=a.width,y=a.open,S=0,A=a.x,M=a.y,b=0,C=0,w=0,R=0,U=0,O=0,I=0,P=0,N=0,L=0,k={val:0,size:0};S<s.length;){e.CFF.getCharString(s,S,k);var X=k.val;if(S+=k.size,X=="o1"||X=="o18")f.length%2!=0&&!g&&(v=f.shift()+l.nominalWidthX),d+=f.length>>1,f.length=0,g=!0;else if(X=="o3"||X=="o23")f.length%2!=0&&!g&&(v=f.shift()+l.nominalWidthX),d+=f.length>>1,f.length=0,g=!0;else if(X=="o4")f.length>1&&!g&&(v=f.shift()+l.nominalWidthX,g=!0),y&&e.U.P.closePath(c),M+=f.pop(),e.U.P.moveTo(c,A,M),y=!0;else if(X=="o5")for(;f.length>0;)A+=f.shift(),M+=f.shift(),e.U.P.lineTo(c,A,M);else if(X=="o6"||X=="o7")for(var W=f.length,$=X=="o6",ce=0;ce<W;ce++){var z=f.shift();$?A+=z:M+=z,$=!$,e.U.P.lineTo(c,A,M)}else if(X=="o8"||X=="o24"){W=f.length;for(var q=0;q+6<=W;)b=A+f.shift(),C=M+f.shift(),w=b+f.shift(),R=C+f.shift(),A=w+f.shift(),M=R+f.shift(),e.U.P.curveTo(c,b,C,w,R,A,M),q+=6;X=="o24"&&(A+=f.shift(),M+=f.shift(),e.U.P.lineTo(c,A,M))}else{if(X=="o11")break;if(X=="o1234"||X=="o1235"||X=="o1236"||X=="o1237")X=="o1234"&&(C=M,w=(b=A+f.shift())+f.shift(),L=R=C+f.shift(),O=R,P=M,A=(I=(U=(N=w+f.shift())+f.shift())+f.shift())+f.shift(),e.U.P.curveTo(c,b,C,w,R,N,L),e.U.P.curveTo(c,U,O,I,P,A,M)),X=="o1235"&&(b=A+f.shift(),C=M+f.shift(),w=b+f.shift(),R=C+f.shift(),N=w+f.shift(),L=R+f.shift(),U=N+f.shift(),O=L+f.shift(),I=U+f.shift(),P=O+f.shift(),A=I+f.shift(),M=P+f.shift(),f.shift(),e.U.P.curveTo(c,b,C,w,R,N,L),e.U.P.curveTo(c,U,O,I,P,A,M)),X=="o1236"&&(b=A+f.shift(),C=M+f.shift(),w=b+f.shift(),L=R=C+f.shift(),O=R,I=(U=(N=w+f.shift())+f.shift())+f.shift(),P=O+f.shift(),A=I+f.shift(),e.U.P.curveTo(c,b,C,w,R,N,L),e.U.P.curveTo(c,U,O,I,P,A,M)),X=="o1237"&&(b=A+f.shift(),C=M+f.shift(),w=b+f.shift(),R=C+f.shift(),N=w+f.shift(),L=R+f.shift(),U=N+f.shift(),O=L+f.shift(),I=U+f.shift(),P=O+f.shift(),Math.abs(I-A)>Math.abs(P-M)?A=I+f.shift():M=P+f.shift(),e.U.P.curveTo(c,b,C,w,R,N,L),e.U.P.curveTo(c,U,O,I,P,A,M));else if(X=="o14"){if(f.length>0&&!g&&(v=f.shift()+r.nominalWidthX,g=!0),f.length==4){var Q=f.shift(),re=f.shift(),H=f.shift(),G=f.shift(),K=e.CFF.glyphBySE(r,H),se=e.CFF.glyphBySE(r,G);e.U._drawCFF(r.CharStrings[K],a,r,l,c),a.x=Q,a.y=re,e.U._drawCFF(r.CharStrings[se],a,r,l,c)}y&&(e.U.P.closePath(c),y=!1)}else if(X=="o19"||X=="o20")f.length%2!=0&&!g&&(v=f.shift()+l.nominalWidthX),d+=f.length>>1,f.length=0,g=!0,S+=d+7>>3;else if(X=="o21")f.length>2&&!g&&(v=f.shift()+l.nominalWidthX,g=!0),M+=f.pop(),A+=f.pop(),y&&e.U.P.closePath(c),e.U.P.moveTo(c,A,M),y=!0;else if(X=="o22")f.length>1&&!g&&(v=f.shift()+l.nominalWidthX,g=!0),A+=f.pop(),y&&e.U.P.closePath(c),e.U.P.moveTo(c,A,M),y=!0;else if(X=="o25"){for(;f.length>6;)A+=f.shift(),M+=f.shift(),e.U.P.lineTo(c,A,M);b=A+f.shift(),C=M+f.shift(),w=b+f.shift(),R=C+f.shift(),A=w+f.shift(),M=R+f.shift(),e.U.P.curveTo(c,b,C,w,R,A,M)}else if(X=="o26")for(f.length%2&&(A+=f.shift());f.length>0;)b=A,C=M+f.shift(),A=w=b+f.shift(),M=(R=C+f.shift())+f.shift(),e.U.P.curveTo(c,b,C,w,R,A,M);else if(X=="o27")for(f.length%2&&(M+=f.shift());f.length>0;)C=M,w=(b=A+f.shift())+f.shift(),R=C+f.shift(),A=w+f.shift(),M=R,e.U.P.curveTo(c,b,C,w,R,A,M);else if(X=="o10"||X=="o29"){var J=X=="o10"?l:r;if(f.length==0)console.debug("error: empty stack");else{var ne=f.pop(),ue=J.Subrs[ne+J.Bias];a.x=A,a.y=M,a.nStems=d,a.haveWidth=g,a.width=v,a.open=y,e.U._drawCFF(ue,a,r,l,c),A=a.x,M=a.y,d=a.nStems,g=a.haveWidth,v=a.width,y=a.open}}else if(X=="o30"||X=="o31"){var pe=f.length,ve=(q=0,X=="o31");for(q+=pe-(W=-3&pe);q<W;)ve?(C=M,w=(b=A+f.shift())+f.shift(),M=(R=C+f.shift())+f.shift(),W-q==5?(A=w+f.shift(),q++):A=w,ve=!1):(b=A,C=M+f.shift(),w=b+f.shift(),R=C+f.shift(),A=w+f.shift(),W-q==5?(M=R+f.shift(),q++):M=R,ve=!0),e.U.P.curveTo(c,b,C,w,R,A,M),q+=4}else{if((X+"").charAt(0)=="o")throw console.debug("Unknown operation: "+X,s),X;f.push(X)}}}a.x=A,a.y=M,a.nStems=d,a.haveWidth=g,a.width=v,a.open=y};var t=e,n={Typr:t};return i.Typr=t,i.default=n,Object.defineProperty(i,"__esModule",{value:!0}),i}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Y7(){return function(i){var e=Uint8Array,t=Uint16Array,n=Uint32Array,s=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),r=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(X,W){for(var $=new t(31),ce=0;ce<31;++ce)$[ce]=W+=1<<X[ce-1];var z=new n($[30]);for(ce=1;ce<30;++ce)for(var q=$[ce];q<$[ce+1];++q)z[q]=q-$[ce]<<5|ce;return[$,z]},c=l(s,2),f=c[0],d=c[1];f[28]=258,d[258]=28;for(var g=l(a,0)[0],v=new t(32768),y=0;y<32768;++y){var S=(43690&y)>>>1|(21845&y)<<1;S=(61680&(S=(52428&S)>>>2|(13107&S)<<2))>>>4|(3855&S)<<4,v[y]=((65280&S)>>>8|(255&S)<<8)>>>1}var A=function(X,W,$){for(var ce=X.length,z=0,q=new t(W);z<ce;++z)++q[X[z]-1];var Q,re=new t(W);for(z=0;z<W;++z)re[z]=re[z-1]+q[z-1]<<1;{Q=new t(1<<W);var H=15-W;for(z=0;z<ce;++z)if(X[z])for(var G=z<<4|X[z],K=W-X[z],se=re[X[z]-1]++<<K,J=se|(1<<K)-1;se<=J;++se)Q[v[se]>>>H]=G}return Q},M=new e(288);for(y=0;y<144;++y)M[y]=8;for(y=144;y<256;++y)M[y]=9;for(y=256;y<280;++y)M[y]=7;for(y=280;y<288;++y)M[y]=8;var b=new e(32);for(y=0;y<32;++y)b[y]=5;var C=A(M,9),w=A(b,5),R=function(X){for(var W=X[0],$=1;$<X.length;++$)X[$]>W&&(W=X[$]);return W},U=function(X,W,$){var ce=W/8|0;return(X[ce]|X[ce+1]<<8)>>(7&W)&$},O=function(X,W){var $=W/8|0;return(X[$]|X[$+1]<<8|X[$+2]<<16)>>(7&W)},I=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],P=function(X,W,$){var ce=new Error(W||I[X]);if(ce.code=X,Error.captureStackTrace&&Error.captureStackTrace(ce,P),!$)throw ce;return ce},N=function(X,W,$){var ce=X.length;if(!ce||$&&!$.l&&ce<5)return W||new e(0);var z=!W||$,q=!$||$.i;$||($={}),W||(W=new e(3*ce));var Q,re=function(it){var fe=W.length;if(it>fe){var Ae=new e(Math.max(2*fe,it));Ae.set(W),W=Ae}},H=$.f||0,G=$.p||0,K=$.b||0,se=$.l,J=$.d,ne=$.m,ue=$.n,pe=8*ce;do{if(!se){$.f=H=U(X,G,1);var ve=U(X,G+1,3);if(G+=3,!ve){var Ve=X[(Se=((Q=G)/8|0)+(7&Q&&1)+4)-4]|X[Se-3]<<8,ze=Se+Ve;if(ze>ce){q&&P(0);break}z&&re(K+Ve),W.set(X.subarray(Se,ze),K),$.b=K+=Ve,$.p=G=8*ze;continue}if(ve==1)se=C,J=w,ne=9,ue=5;else if(ve==2){var Qe=U(X,G,31)+257,Ie=U(X,G+10,15)+4,rt=Qe+U(X,G+5,31)+1;G+=14;for(var Z=new e(rt),Le=new e(19),Ue=0;Ue<Ie;++Ue)Le[r[Ue]]=U(X,G+3*Ue,7);G+=3*Ie;var Re=R(Le),me=(1<<Re)-1,Pe=A(Le,Re);for(Ue=0;Ue<rt;){var Se,ye=Pe[U(X,G,me)];if(G+=15&ye,(Se=ye>>>4)<16)Z[Ue++]=Se;else{var nt=0,ee=0;for(Se==16?(ee=3+U(X,G,3),G+=2,nt=Z[Ue-1]):Se==17?(ee=3+U(X,G,7),G+=3):Se==18&&(ee=11+U(X,G,127),G+=7);ee--;)Z[Ue++]=nt}}var V=Z.subarray(0,Qe),de=Z.subarray(Qe);ne=R(V),ue=R(de),se=A(V,ne),J=A(de,ue)}else P(1);if(G>pe){q&&P(0);break}}z&&re(K+131072);for(var Be=(1<<ne)-1,be=(1<<ue)-1,Me=G;;Me=G){var $e=(nt=se[O(X,G)&Be])>>>4;if((G+=15&nt)>pe){q&&P(0);break}if(nt||P(2),$e<256)W[K++]=$e;else{if($e==256){Me=G,se=null;break}var at=$e-254;if($e>264){var ut=s[Ue=$e-257];at=U(X,G,(1<<ut)-1)+f[Ue],G+=ut}var Y=J[O(X,G)&be],Oe=Y>>>4;if(Y||P(3),G+=15&Y,de=g[Oe],Oe>3&&(ut=a[Oe],de+=O(X,G)&(1<<ut)-1,G+=ut),G>pe){q&&P(0);break}z&&re(K+131072);for(var Ke=K+at;K<Ke;K+=4)W[K]=W[K-de],W[K+1]=W[K+1-de],W[K+2]=W[K+2-de],W[K+3]=W[K+3-de];K=Ke}}$.l=se,$.p=Me,$.b=K,se&&(H=1,$.m=ne,$.d=J,$.n=ue)}while(!H);return K==W.length?W:function(it,fe,Ae){(Ae==null||Ae>it.length)&&(Ae=it.length);var st=new(it instanceof t?t:it instanceof n?n:e)(Ae-fe);return st.set(it.subarray(fe,Ae)),st}(W,0,K)},L=new e(0),k=typeof TextDecoder<"u"&&new TextDecoder;try{k.decode(L,{stream:!0})}catch{}return i.convert_streams=function(X){var W=new DataView(X),$=0;function ce(){var Qe=W.getUint16($);return $+=2,Qe}function z(){var Qe=W.getUint32($);return $+=4,Qe}function q(Qe){Ve.setUint16(ze,Qe),ze+=2}function Q(Qe){Ve.setUint32(ze,Qe),ze+=4}for(var re={signature:z(),flavor:z(),length:z(),numTables:ce(),reserved:ce(),totalSfntSize:z(),majorVersion:ce(),minorVersion:ce(),metaOffset:z(),metaLength:z(),metaOrigLength:z(),privOffset:z(),privLength:z()},H=0;Math.pow(2,H)<=re.numTables;)H++;H--;for(var G=16*Math.pow(2,H),K=16*re.numTables-G,se=12,J=[],ne=0;ne<re.numTables;ne++)J.push({tag:z(),offset:z(),compLength:z(),origLength:z(),origChecksum:z()}),se+=16;var ue,pe=new Uint8Array(12+16*J.length+J.reduce(function(Qe,Ie){return Qe+Ie.origLength+4},0)),ve=pe.buffer,Ve=new DataView(ve),ze=0;return Q(re.flavor),q(re.numTables),q(G),q(H),q(K),J.forEach(function(Qe){Q(Qe.tag),Q(Qe.origChecksum),Q(se),Q(Qe.origLength),Qe.outOffset=se,(se+=Qe.origLength)%4!=0&&(se+=4-se%4)}),J.forEach(function(Qe){var Ie,rt=X.slice(Qe.offset,Qe.offset+Qe.compLength);if(Qe.compLength!=Qe.origLength){var Z=new Uint8Array(Qe.origLength);Ie=new Uint8Array(rt,2),N(Ie,Z)}else Z=new Uint8Array(rt);pe.set(Z,Qe.outOffset);var Le=0;(se=Qe.outOffset+Qe.origLength)%4!=0&&(Le=4-se%4),pe.set(new Uint8Array(Le).buffer,Qe.outOffset+Qe.origLength),ue=se+Le}),ve.slice(0,ue)},Object.defineProperty(i,"__esModule",{value:!0}),i}({}).convert_streams}function W7(i,e){const t={M:2,L:2,Q:4,C:6,Z:0},n={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},s=1,a=2,r=4,l=8,c=16,f=32;let d;function g(I){if(!d){const P={R:a,L:s,D:r,C:c,U:f,T:l};d=new Map;for(let N in n){let L=0;n[N].split(",").forEach(k=>{let[X,W]=k.split("+");X=parseInt(X,36),W=W?parseInt(W,36):0,d.set(L+=X,P[N]);for(let $=W;$--;)d.set(++L,P[N])})}}return d.get(I)||f}const v=1,y=2,S=3,A=4,M=[null,"isol","init","fina","medi"];function b(I){const P=new Uint8Array(I.length);let N=f,L=v,k=-1;for(let X=0;X<I.length;X++){const W=I.codePointAt(X);let $=g(W)|0,ce=v;$&l||(N&(s|r|c)?$&(a|r|c)?(ce=S,(L===v||L===S)&&P[k]++):$&(s|f)&&(L===y||L===A)&&P[k]--:N&(a|f)&&(L===y||L===A)&&P[k]--,L=P[X]=ce,N=$,k=X,W>65535&&X++)}return P}function C(I,P){const N=[];for(let k=0;k<P.length;k++){const X=P.codePointAt(k);X>65535&&k++,N.push(i.U.codeToGlyph(I,X))}const L=I.GSUB;if(L){const{lookupList:k,featureList:X}=L;let W;const $=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,ce=[];X.forEach(z=>{if($.test(z.tag))for(let q=0;q<z.tab.length;q++){if(ce[z.tab[q]])continue;ce[z.tab[q]]=!0;const Q=k[z.tab[q]],re=/^(isol|init|fina|medi)$/.test(z.tag);re&&!W&&(W=b(P));for(let H=0;H<N.length;H++)(!W||!re||M[W[H]]===z.tag)&&i.U._applySubs(N,H,Q,k)}})}return N}function w(I,P){const N=new Int16Array(P.length*3);let L=0;for(;L<P.length;L++){const $=P[L];if($===-1)continue;N[L*3+2]=I.hmtx.aWidth[$];const ce=I.GPOS;if(ce){const z=ce.lookupList;for(let q=0;q<z.length;q++){const Q=z[q];for(let re=0;re<Q.tabs.length;re++){const H=Q.tabs[re];if(Q.ltype===1){if(i._lctf.coverageIndex(H.coverage,$)!==-1&&H.pos){W(H.pos,L);break}}else if(Q.ltype===2){let G=null,K=k();if(K!==-1){const se=i._lctf.coverageIndex(H.coverage,P[K]);if(se!==-1){if(H.fmt===1){const J=H.pairsets[se];for(let ne=0;ne<J.length;ne++)J[ne].gid2===$&&(G=J[ne])}else if(H.fmt===2){const J=i.U._getGlyphClass(P[K],H.classDef1),ne=i.U._getGlyphClass($,H.classDef2);G=H.matrix[J][ne]}if(G){G.val1&&W(G.val1,K),G.val2&&W(G.val2,L);break}}}}else if(Q.ltype===4){const G=i._lctf.coverageIndex(H.markCoverage,$);if(G!==-1){const K=k(X),se=K===-1?-1:i._lctf.coverageIndex(H.baseCoverage,P[K]);if(se!==-1){const J=H.markArray[G],ne=H.baseArray[se][J.markClass];N[L*3]=ne.x-J.x+N[K*3]-N[K*3+2],N[L*3+1]=ne.y-J.y+N[K*3+1];break}}}else if(Q.ltype===6){const G=i._lctf.coverageIndex(H.mark1Coverage,$);if(G!==-1){const K=k();if(K!==-1){const se=P[K];if(R(I,se)===3){const J=i._lctf.coverageIndex(H.mark2Coverage,se);if(J!==-1){const ne=H.mark1Array[G],ue=H.mark2Array[J][ne.markClass];N[L*3]=ue.x-ne.x+N[K*3]-N[K*3+2],N[L*3+1]=ue.y-ne.y+N[K*3+1];break}}}}}}}}else if(I.kern&&!I.cff){const z=k();if(z!==-1){const q=I.kern.glyph1.indexOf(P[z]);if(q!==-1){const Q=I.kern.rval[q].glyph2.indexOf($);Q!==-1&&(N[z*3+2]+=I.kern.rval[q].vals[Q])}}}}return N;function k($){for(let ce=L-1;ce>=0;ce--)if(P[ce]!==-1&&(!$||$(P[ce])))return ce;return-1}function X($){return R(I,$)===1}function W($,ce){for(let z=0;z<3;z++)N[ce*3+z]+=$[z]||0}}function R(I,P){const N=I.GDEF&&I.GDEF.glyphClassDef;return N?i.U._getGlyphClass(P,N):0}function U(...I){for(let P=0;P<I.length;P++)if(typeof I[P]=="number")return I[P]}function O(I){const P=Object.create(null),N=I["OS/2"],L=I.hhea,k=I.head.unitsPerEm,X=U(N&&N.sTypoAscender,L&&L.ascender,k),W={unitsPerEm:k,ascender:X,descender:U(N&&N.sTypoDescender,L&&L.descender,0),capHeight:U(N&&N.sCapHeight,X),xHeight:U(N&&N.sxHeight,X),lineGap:U(N&&N.sTypoLineGap,L&&L.lineGap),supportsCodePoint($){return i.U.codeToGlyph(I,$)>0},forEachGlyph($,ce,z,q){let Q=0;const re=1/W.unitsPerEm*ce,H=C(I,$);let G=0;const K=w(I,H);return H.forEach((se,J)=>{if(se!==-1){let ne=P[se];if(!ne){const{cmds:ue,crds:pe}=i.U.glyphToPath(I,se);let ve="",Ve=0;for(let Z=0,Le=ue.length;Z<Le;Z++){const Ue=t[ue[Z]];ve+=ue[Z];for(let Re=1;Re<=Ue;Re++)ve+=(Re>1?",":"")+pe[Ve++]}let ze,Qe,Ie,rt;if(pe.length){ze=Qe=1/0,Ie=rt=-1/0;for(let Z=0,Le=pe.length;Z<Le;Z+=2){let Ue=pe[Z],Re=pe[Z+1];Ue<ze&&(ze=Ue),Re<Qe&&(Qe=Re),Ue>Ie&&(Ie=Ue),Re>rt&&(rt=Re)}}else ze=Ie=Qe=rt=0;ne=P[se]={index:se,advanceWidth:I.hmtx.aWidth[se],xMin:ze,yMin:Qe,xMax:Ie,yMax:rt,path:ve}}q.call(null,ne,Q+K[J*3]*re,K[J*3+1]*re,G),Q+=K[J*3+2]*re,z&&(Q+=z*ce)}G+=$.codePointAt(G)>65535?2:1}),Q}};return W}return function(P){const N=new Uint8Array(P,0,4),L=i._bin.readASCII(N,0,4);if(L==="wOFF")P=e(P);else if(L==="wOF2")throw new Error("woff2 fonts not supported");return O(i.parse(P)[0])}}const q7=a0({name:"Typr Font Parser",dependencies:[j7,Y7,W7],init(i,e,t){const n=i(),s=e();return t(n,s)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function K7(){return function(i){var e=function(){this.buckets=new Map};e.prototype.add=function(w){var R=w>>5;this.buckets.set(R,(this.buckets.get(R)||0)|1<<(31&w))},e.prototype.has=function(w){var R=this.buckets.get(w>>5);return R!==void 0&&(R&1<<(31&w))!=0},e.prototype.serialize=function(){var w=[];return this.buckets.forEach(function(R,U){w.push((+U).toString(36)+":"+R.toString(36))}),w.join(",")},e.prototype.deserialize=function(w){var R=this;this.buckets.clear(),w.split(",").forEach(function(U){var O=U.split(":");R.buckets.set(parseInt(O[0],36),parseInt(O[1],36))})};var t=Math.pow(2,8),n=t-1,s=~n;function a(w){var R=function(O){return O&s}(w).toString(16),U=function(O){return(O&s)+t-1}(w).toString(16);return"codepoint-index/plane"+(w>>16)+"/"+R+"-"+U+".json"}function r(w,R){var U=w&n,O=R.codePointAt(U/6|0);return((O=(O||48)-48)&1<<U%6)!=0}function l(w,R){var U;(U=w,U.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(O){return O.split("-").map(function(I){return parseInt(I.trim(),16)})})).forEach(function(O){var I=O[0],P=O[1];P===void 0&&(P=I),R(I,P)})}function c(w,R){l(w,function(U,O){for(var I=U;I<=O;I++)R(I)})}var f={},d={},g=new WeakMap,v="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function y(w){var R=g.get(w);return R||(R=new e,c(w.ranges,function(U){return R.add(U)}),g.set(w,R)),R}var S,A=new Map;function M(w,R,U){return w[R]?R:w[U]?U:function(O){for(var I in O)return I}(w)}function b(w,R){var U=R;if(!w.includes(U)){U=1/0;for(var O=0;O<w.length;O++)Math.abs(w[O]-R)<Math.abs(U-R)&&(U=w[O])}return U}function C(w){return S||(S=new Set,c("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(R){S.add(R)})),S.has(w)}return i.CodePointSet=e,i.clearCache=function(){f={},d={}},i.getFontsForString=function(w,R){R===void 0&&(R={});var U,O=R.lang;O===void 0&&(O=new RegExp("\\p{Script=Hangul}","u").test(U=w)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(U)?"ja":"en");var I=R.category;I===void 0&&(I="sans-serif");var P=R.style;P===void 0&&(P="normal");var N=R.weight;N===void 0&&(N=400);var L=(R.dataUrl||v).replace(/\/$/g,""),k=new Map,X=new Uint8Array(w.length),W={},$={},ce=new Array(w.length),z=new Map,q=!1;function Q(G){var K=A.get(G);return K||(K=fetch(L+"/"+G).then(function(se){if(!se.ok)throw new Error(se.statusText);return se.json().then(function(J){if(!Array.isArray(J)||J[0]!==1)throw new Error("Incorrect schema version; need 1, got "+J[0]);return J[1]})}).catch(function(se){if(L!==v)return q||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+L+'", trying default CDN. '+se.message),q=!0),L=v,A.delete(G),Q(G);throw se}),A.set(G,K)),K}for(var re=function(G){var K=w.codePointAt(G),se=a(K);ce[G]=se,f[se]||z.has(se)||z.set(se,Q(se).then(function(J){f[se]=J})),K>65535&&(G++,H=G)},H=0;H<w.length;H++)re(H);return Promise.all(z.values()).then(function(){z.clear();for(var G=function(se){var J=w.codePointAt(se),ne=null,ue=f[ce[se]],pe=void 0;for(var ve in ue){var Ve=$[ve];if(Ve===void 0&&(Ve=$[ve]=new RegExp(ve).test(O||"en")),Ve){for(var ze in pe=ve,ue[ve])if(r(J,ue[ve][ze])){ne=ze;break}break}}if(!ne){e:for(var Qe in ue)if(Qe!==pe){for(var Ie in ue[Qe])if(r(J,ue[Qe][Ie])){ne=Ie;break e}}}ne||(console.debug("No font coverage for U+"+J.toString(16)),ne="latin"),ce[se]=ne,d[ne]||z.has(ne)||z.set(ne,Q("font-meta/"+ne+".json").then(function(rt){d[ne]=rt})),J>65535&&(se++,K=se)},K=0;K<w.length;K++)G(K);return Promise.all(z.values())}).then(function(){for(var G,K=null,se=0;se<w.length;se++){var J=w.codePointAt(se);if(K&&(C(J)||y(K).has(J)))X[se]=X[se-1];else{K=d[ce[se]];var ne=W[K.id];if(!ne){var ue=K.typeforms,pe=M(ue,I,"sans-serif"),ve=M(ue[pe],P,"normal"),Ve=b((G=ue[pe])===null||G===void 0?void 0:G[ve],N);ne=W[K.id]=L+"/font-files/"+K.id+"/"+pe+"."+ve+"."+Ve+".woff"}var ze=k.get(ne);ze==null&&(ze=k.size,k.set(ne,ze)),X[se]=ze}J>65535&&(se++,X[se]=X[se-1])}return{fontUrls:Array.from(k.keys()),chars:X}})},Object.defineProperty(i,"__esModule",{value:!0}),i}({})}function J7(i,e){const t=Object.create(null),n=Object.create(null);function s(r,l){const c=f=>{console.error(`Failure loading font ${r}`,f)};try{const f=new XMLHttpRequest;f.open("get",r,!0),f.responseType="arraybuffer",f.onload=function(){if(f.status>=400)c(new Error(f.statusText));else if(f.status>0)try{const d=i(f.response);d.src=r,l(d)}catch(d){c(d)}},f.onerror=c,f.send()}catch(f){c(f)}}function a(r,l){let c=t[r];c?l(c):n[r]?n[r].push(l):(n[r]=[l],s(r,f=>{f.src=r,t[r]=f,n[r].forEach(d=>d(f)),delete n[r]}))}return function(r,l,{lang:c,fonts:f=[],style:d="normal",weight:g="normal",unicodeFontsURL:v}={}){const y=new Uint8Array(r.length),S=[];r.length||C();const A=new Map,M=[];if(d!=="italic"&&(d="normal"),typeof g!="number"&&(g=g==="bold"?700:400),f&&!Array.isArray(f)&&(f=[f]),f=f.slice().filter(R=>!R.lang||R.lang.test(c)).reverse(),f.length){let I=0;(function P(N=0){for(let L=N,k=r.length;L<k;L++){const X=r.codePointAt(L);if(I===1&&S[y[L-1]].supportsCodePoint(X)||L>0&&/\s/.test(r[L]))y[L]=y[L-1],I===2&&(M[M.length-1][1]=L);else for(let W=y[L],$=f.length;W<=$;W++)if(W===$){const ce=I===2?M[M.length-1]:M[M.length]=[L,L];ce[1]=L,I=2}else{y[L]=W;const{src:ce,unicodeRange:z}=f[W];if(!z||w(X,z)){const q=t[ce];if(!q){a(ce,()=>{P(L)});return}if(q.supportsCodePoint(X)){let Q=A.get(q);typeof Q!="number"&&(Q=S.length,S.push(q),A.set(q,Q)),y[L]=Q,I=1;break}}}X>65535&&L+1<k&&(y[L+1]=y[L],L++,I===2&&(M[M.length-1][1]=L))}b()})()}else M.push([0,r.length-1]),b();function b(){if(M.length){const R=M.map(U=>r.substring(U[0],U[1]+1)).join(`
`);e.getFontsForString(R,{lang:c||void 0,style:d,weight:g,dataUrl:v}).then(({fontUrls:U,chars:O})=>{const I=S.length;let P=0;M.forEach(L=>{for(let k=0,X=L[1]-L[0];k<=X;k++)y[L[0]+k]=O[P++]+I;P++});let N=0;U.forEach((L,k)=>{a(L,X=>{S[k+I]=X,++N===U.length&&C()})})})}else C()}function C(){l({chars:y,fonts:S})}function w(R,U){for(let O=0;O<U.length;O++){const[I,P=I]=U[O];if(I<=R&&R<=P)return!0}return!1}}}const Z7=a0({name:"FontResolver",dependencies:[J7,q7,K7],init(i,e,t){return i(e,t())}});function Q7(i,e){const n=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s="[^\\S\\u00A0]",a=new RegExp(`${s}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function r({text:S,lang:A,fonts:M,style:b,weight:C,preResolvedFonts:w,unicodeFontsURL:R},U){const O=({chars:I,fonts:P})=>{let N,L;const k=[];for(let X=0;X<I.length;X++)I[X]!==L?(L=I[X],k.push(N={start:X,end:X,fontObj:P[I[X]]})):N.end=X;U(k)};w?O(w):i(S,O,{lang:A,fonts:M,style:b,weight:C,unicodeFontsURL:R})}function l({text:S="",font:A,lang:M,sdfGlyphSize:b=64,fontSize:C=400,fontWeight:w=1,fontStyle:R="normal",letterSpacing:U=0,lineHeight:O="normal",maxWidth:I=1/0,direction:P,textAlign:N="left",textIndent:L=0,whiteSpace:k="normal",overflowWrap:X="normal",anchorX:W=0,anchorY:$=0,metricsOnly:ce=!1,unicodeFontsURL:z,preResolvedFonts:q=null,includeCaretPositions:Q=!1,chunkedBoundsSize:re=8192,colorRanges:H=null},G){const K=g(),se={fontLoad:0,typesetting:0};S.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),S=S.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),C=+C,U=+U,I=+I,O=O||"normal",L=+L,r({text:S,lang:M,style:R,weight:w,fonts:typeof A=="string"?[{src:A}]:A,unicodeFontsURL:z,preResolvedFonts:q},J=>{se.fontLoad=g()-K;const ne=isFinite(I);let ue=null,pe=null,ve=null,Ve=null,ze=null,Qe=null,Ie=null,rt=null,Z=0,Le=0,Ue=k!=="nowrap";const Re=new Map,me=g();let Pe=L,Se=0,ye=new v;const nt=[ye];J.forEach(be=>{const{fontObj:Me}=be,{ascender:$e,descender:at,unitsPerEm:ut,lineGap:Y,capHeight:Oe,xHeight:Ke}=Me;let it=Re.get(Me);if(!it){const je=C/ut,He=O==="normal"?($e-at+Y)*je:O*C,gt=(He-($e-at)*je)/2,et=Math.min(He,($e-at)*je),Ge=($e+at)/2*je+et/2;it={index:Re.size,src:Me.src,fontObj:Me,fontSizeMult:je,unitsPerEm:ut,ascender:$e*je,descender:at*je,capHeight:Oe*je,xHeight:Ke*je,lineHeight:He,baseline:-gt-$e*je,caretTop:Ge,caretBottom:Ge-et},Re.set(Me,it)}const{fontSizeMult:fe}=it,Ae=S.slice(be.start,be.end+1);let st,he;Me.forEachGlyph(Ae,C,U,(je,He,gt,et)=>{He+=Se,et+=be.start,st=He,he=je;const Ge=S.charAt(et),pt=je.advanceWidth*fe,vt=ye.count;let mt;if("isEmpty"in je||(je.isWhitespace=!!Ge&&new RegExp(s).test(Ge),je.canBreakAfter=!!Ge&&a.test(Ge),je.isEmpty=je.xMin===je.xMax||je.yMin===je.yMax||n.test(Ge)),!je.isWhitespace&&!je.isEmpty&&Le++,Ue&&ne&&!je.isWhitespace&&He+pt+Pe>I&&vt){if(ye.glyphAt(vt-1).glyphObj.canBreakAfter)mt=new v,Pe=-He;else for(let Vt=vt;Vt--;)if(Vt===0&&X==="break-word"){mt=new v,Pe=-He;break}else if(ye.glyphAt(Vt).glyphObj.canBreakAfter){mt=ye.splitAt(Vt+1);const Pt=mt.glyphAt(0).x;Pe-=Pt;for(let ot=mt.count;ot--;)mt.glyphAt(ot).x-=Pt;break}mt&&(ye.isSoftWrapped=!0,ye=mt,nt.push(ye),Z=I)}let At=ye.glyphAt(ye.count);At.glyphObj=je,At.x=He+Pe,At.y=gt,At.width=pt,At.charIndex=et,At.fontData=it,Ge===`
`&&(ye=new v,nt.push(ye),Pe=-(He+pt+U*C)+L)}),Se=st+he.advanceWidth*fe+U*C});let ee=0;nt.forEach(be=>{let Me=!0;for(let $e=be.count;$e--;){const at=be.glyphAt($e);Me&&!at.glyphObj.isWhitespace&&(be.width=at.x+at.width,be.width>Z&&(Z=be.width),Me=!1);let{lineHeight:ut,capHeight:Y,xHeight:Oe,baseline:Ke}=at.fontData;ut>be.lineHeight&&(be.lineHeight=ut);const it=Ke-be.baseline;it<0&&(be.baseline+=it,be.cap+=it,be.ex+=it),be.cap=Math.max(be.cap,be.baseline+Y),be.ex=Math.max(be.ex,be.baseline+Oe)}be.baseline-=ee,be.cap-=ee,be.ex-=ee,ee+=be.lineHeight});let V=0,de=0;if(W&&(typeof W=="number"?V=-W:typeof W=="string"&&(V=-Z*(W==="left"?0:W==="center"?.5:W==="right"?1:f(W)))),$&&(typeof $=="number"?de=-$:typeof $=="string"&&(de=$==="top"?0:$==="top-baseline"?-nt[0].baseline:$==="top-cap"?-nt[0].cap:$==="top-ex"?-nt[0].ex:$==="middle"?ee/2:$==="bottom"?ee:$==="bottom-baseline"?-nt[nt.length-1].baseline:f($)*ee)),!ce){const be=e.getEmbeddingLevels(S,P);ue=new Uint16Array(Le),pe=new Uint8Array(Le),ve=new Float32Array(Le*2),Ve={},Ie=[1/0,1/0,-1/0,-1/0],rt=[],Q&&(Qe=new Float32Array(S.length*4)),H&&(ze=new Uint8Array(Le*3));let Me=0,$e=-1,at=-1,ut,Y;if(nt.forEach((Oe,Ke)=>{let{count:it,width:fe}=Oe;if(it>0){let Ae=0;for(let et=it;et--&&Oe.glyphAt(et).glyphObj.isWhitespace;)Ae++;let st=0,he=0;if(N==="center")st=(Z-fe)/2;else if(N==="right")st=Z-fe;else if(N==="justify"&&Oe.isSoftWrapped){let et=0;for(let Ge=it-Ae;Ge--;)Oe.glyphAt(Ge).glyphObj.isWhitespace&&et++;he=(Z-fe)/et}if(he||st){let et=0;for(let Ge=0;Ge<it;Ge++){let pt=Oe.glyphAt(Ge);const vt=pt.glyphObj;pt.x+=st+et,he!==0&&vt.isWhitespace&&Ge<it-Ae&&(et+=he,pt.width+=he)}}const je=e.getReorderSegments(S,be,Oe.glyphAt(0).charIndex,Oe.glyphAt(Oe.count-1).charIndex);for(let et=0;et<je.length;et++){const[Ge,pt]=je[et];let vt=1/0,mt=-1/0;for(let At=0;At<it;At++)if(Oe.glyphAt(At).charIndex>=Ge){let Vt=At,Pt=At;for(;Pt<it;Pt++){let ot=Oe.glyphAt(Pt);if(ot.charIndex>pt)break;Pt<it-Ae&&(vt=Math.min(vt,ot.x),mt=Math.max(mt,ot.x+ot.width))}for(let ot=Vt;ot<Pt;ot++){const tn=Oe.glyphAt(ot);tn.x=mt-(tn.x+tn.width-vt)}break}}let He;const gt=et=>He=et;for(let et=0;et<it;et++){const Ge=Oe.glyphAt(et);He=Ge.glyphObj;const pt=He.index,vt=be.levels[Ge.charIndex]&1;if(vt){const mt=e.getMirroredCharacter(S[Ge.charIndex]);mt&&Ge.fontData.fontObj.forEachGlyph(mt,0,0,gt)}if(Q){const{charIndex:mt,fontData:At}=Ge,Vt=Ge.x+V,Pt=Ge.x+Ge.width+V;Qe[mt*4]=vt?Pt:Vt,Qe[mt*4+1]=vt?Vt:Pt,Qe[mt*4+2]=Oe.baseline+At.caretBottom+de,Qe[mt*4+3]=Oe.baseline+At.caretTop+de;const ot=mt-$e;ot>1&&d(Qe,$e,ot),$e=mt}if(H){const{charIndex:mt}=Ge;for(;mt>at;)at++,H.hasOwnProperty(at)&&(Y=H[at])}if(!He.isWhitespace&&!He.isEmpty){const mt=Me++,{fontSizeMult:At,src:Vt,index:Pt}=Ge.fontData,ot=Ve[Vt]||(Ve[Vt]={});ot[pt]||(ot[pt]={path:He.path,pathBounds:[He.xMin,He.yMin,He.xMax,He.yMax]});const tn=Ge.x+V,gn=Ge.y+Oe.baseline+de;ve[mt*2]=tn,ve[mt*2+1]=gn;const zn=tn+He.xMin*At,en=gn+He.yMin*At,ci=tn+He.xMax*At,jn=gn+He.yMax*At;zn<Ie[0]&&(Ie[0]=zn),en<Ie[1]&&(Ie[1]=en),ci>Ie[2]&&(Ie[2]=ci),jn>Ie[3]&&(Ie[3]=jn),mt%re===0&&(ut={start:mt,end:mt,rect:[1/0,1/0,-1/0,-1/0]},rt.push(ut)),ut.end++;const Bn=ut.rect;if(zn<Bn[0]&&(Bn[0]=zn),en<Bn[1]&&(Bn[1]=en),ci>Bn[2]&&(Bn[2]=ci),jn>Bn[3]&&(Bn[3]=jn),ue[mt]=pt,pe[mt]=Pt,H){const Kt=mt*3;ze[Kt]=Y>>16&255,ze[Kt+1]=Y>>8&255,ze[Kt+2]=Y&255}}}}}),Qe){const Oe=S.length-$e;Oe>1&&d(Qe,$e,Oe)}}const Be=[];Re.forEach(({index:be,src:Me,unitsPerEm:$e,ascender:at,descender:ut,lineHeight:Y,capHeight:Oe,xHeight:Ke})=>{Be[be]={src:Me,unitsPerEm:$e,ascender:at,descender:ut,lineHeight:Y,capHeight:Oe,xHeight:Ke}}),se.typesetting=g()-me,G({glyphIds:ue,glyphFontIndices:pe,glyphPositions:ve,glyphData:Ve,fontData:Be,caretPositions:Qe,glyphColors:ze,chunkedBounds:rt,fontSize:C,topBaseline:de+nt[0].baseline,blockBounds:[V,de-ee,V+Z,de],visibleBounds:Ie,timings:se})})}function c(S,A){l({...S,metricsOnly:!0},M=>{const[b,C,w,R]=M.blockBounds;A({width:w-b,height:R-C})})}function f(S){let A=S.match(/^([\d.]+)%$/),M=A?parseFloat(A[1]):NaN;return isNaN(M)?0:M/100}function d(S,A,M){const b=S[A*4],C=S[A*4+1],w=S[A*4+2],R=S[A*4+3],U=(C-b)/M;for(let O=0;O<M;O++){const I=(A+O)*4;S[I]=b+U*O,S[I+1]=b+U*(O+1),S[I+2]=w,S[I+3]=R}}function g(){return(self.performance||Date).now()}function v(){this.data=[]}const y=["glyphObj","x","y","width","charIndex","fontData"];return v.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/y.length)},glyphAt(S){let A=v.flyweight;return A.data=this.data,A.index=S,A},splitAt(S){let A=new v;return A.data=this.data.splice(S*y.length),A}},v.flyweight=y.reduce((S,A,M,b)=>(Object.defineProperty(S,A,{get(){return this.data[this.index*y.length+M]},set(C){this.data[this.index*y.length+M]=C}}),S),{data:null,index:0}),{typeset:l,measure:c}}const Td=()=>(self.performance||Date).now(),FS=lU();let Gw;function $7(i,e,t,n,s,a,r,l,c,f,d=!0){return d?tV(i,e,t,n,s,a,r,l,c,f).then(null,g=>(Gw||(console.warn("WebGL SDF generation failed, falling back to JS",g),Gw=!0),Vw(i,e,t,n,s,a,r,l,c,f))):Vw(i,e,t,n,s,a,r,l,c,f)}const I_=[],eV=5;let JM=0;function uU(){const i=Td();for(;I_.length&&Td()-i<eV;)I_.shift()();JM=I_.length?setTimeout(uU,0):0}const tV=(...i)=>new Promise((e,t)=>{I_.push(()=>{const n=Td();try{FS.webgl.generateIntoCanvas(...i),e({timing:Td()-n})}catch(s){t(s)}}),JM||(JM=setTimeout(uU,0))}),nV=4,iV=2e3,Hw={};let sV=0;function Vw(i,e,t,n,s,a,r,l,c,f){const d="TroikaTextSDFGenerator_JS_"+sV++%nV;let g=Hw[d];return g||(g=Hw[d]={workerModule:a0({name:d,workerId:d,dependencies:[lU,Td],init(v,y){const S=v().javascript.generate;return function(...A){const M=y();return{textureData:S(...A),timing:y()-M}}},getTransferables(v){return[v.textureData.buffer]}}),requests:0,idleTimer:null}),g.requests++,clearTimeout(g.idleTimer),g.workerModule(i,e,t,n,s,a).then(({textureData:v,timing:y})=>{const S=Td(),A=new Uint8Array(v.length*4);for(let M=0;M<v.length;M++)A[M*4+f]=v[M];return FS.webglUtils.renderImageData(r,A,l,c,i,e,1<<3-f),y+=Td()-S,--g.requests===0&&(g.idleTimer=setTimeout(()=>{N7(d)},iV)),{timing:y}})}function aV(i){i._warm||(FS.webgl.isSupported(i),i._warm=!0)}const rV=FS.webglUtils.resizeWebGLCanvasWithoutClearing,Hg={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},oV=new St;function um(){return(self.performance||Date).now()}const kw=Object.create(null);function fU(i,e){i=uV({},i);const t=um(),n=[];if(i.font&&n.push({label:"user",src:fV(i.font)}),i.font=n,i.text=""+i.text,i.sdfGlyphSize=i.sdfGlyphSize||Hg.sdfGlyphSize,i.unicodeFontsURL=i.unicodeFontsURL||Hg.unicodeFontsURL,i.colorRanges!=null){let v={};for(let y in i.colorRanges)if(i.colorRanges.hasOwnProperty(y)){let S=i.colorRanges[y];typeof S!="number"&&(S=oV.set(S).getHex()),v[y]=S}i.colorRanges=v}Object.freeze(i);const{textureWidth:s,sdfExponent:a}=Hg,{sdfGlyphSize:r}=i,l=s/r*4;let c=kw[r];if(!c){const v=document.createElement("canvas");v.width=s,v.height=r*256/l,c=kw[r]={glyphCount:0,sdfGlyphSize:r,sdfCanvas:v,sdfTexture:new Ai(v,void 0,void 0,void 0,ti,ti),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,lV(c)}const{sdfTexture:f,sdfCanvas:d}=c;pU(i).then(v=>{const{glyphIds:y,glyphFontIndices:S,fontData:A,glyphPositions:M,fontSize:b,timings:C}=v,w=[],R=new Float32Array(y.length*4);let U=0,O=0;const I=um(),P=A.map(W=>{let $=c.glyphsByFont.get(W.src);return $||c.glyphsByFont.set(W.src,$=new Map),$});y.forEach((W,$)=>{const ce=S[$],{src:z,unitsPerEm:q}=A[ce];let Q=P[ce].get(W);if(!Q){const{path:se,pathBounds:J}=v.glyphData[z][W],ne=Math.max(J[2]-J[0],J[3]-J[1])/r*(Hg.sdfMargin*r+.5),ue=c.glyphCount++,pe=[J[0]-ne,J[1]-ne,J[2]+ne,J[3]+ne];P[ce].set(W,Q={path:se,atlasIndex:ue,sdfViewBox:pe}),w.push(Q)}const{sdfViewBox:re}=Q,H=M[O++],G=M[O++],K=b/q;R[U++]=H+re[0]*K,R[U++]=G+re[1]*K,R[U++]=H+re[2]*K,R[U++]=G+re[3]*K,y[$]=Q.atlasIndex}),C.quads=(C.quads||0)+(um()-I);const N=um();C.sdf={};const L=d.height,k=Math.ceil(c.glyphCount/l),X=Math.pow(2,Math.ceil(Math.log2(k*r)));X>L&&(console.info(`Increasing SDF texture size ${L}->${X}`),rV(d,s,X),f.dispose()),Promise.all(w.map(W=>hU(W,c,i.gpuAccelerateSDF).then(({timing:$})=>{C.sdf[W.atlasIndex]=$}))).then(()=>{w.length&&!c.contextLost&&(dU(c),f.needsUpdate=!0),C.sdfTotal=um()-N,C.total=um()-t,e(Object.freeze({parameters:i,sdfTexture:f,sdfGlyphSize:r,sdfExponent:a,glyphBounds:R,glyphAtlasIndices:y,glyphColors:v.glyphColors,caretPositions:v.caretPositions,chunkedBounds:v.chunkedBounds,ascender:v.ascender,descender:v.descender,lineHeight:v.lineHeight,capHeight:v.capHeight,xHeight:v.xHeight,topBaseline:v.topBaseline,blockBounds:v.blockBounds,visibleBounds:v.visibleBounds,timings:v.timings}))})}),Promise.resolve().then(()=>{c.contextLost||aV(d)})}function hU({path:i,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:n,sdfCanvas:s,contextLost:a},r){if(a)return Promise.resolve({timing:-1});const{textureWidth:l,sdfExponent:c}=Hg,f=Math.max(t[2]-t[0],t[3]-t[1]),d=Math.floor(e/4),g=d%(l/n)*n,v=Math.floor(d/(l/n))*n,y=e%4;return $7(n,n,i,t,f,c,s,g,v,y,r)}function lV(i){const e=i.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),i.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),i.contextLost=!1;const n=[];i.glyphsByFont.forEach(s=>{s.forEach(a=>{n.push(hU(a,i,!0))})}),Promise.all(n).then(()=>{dU(i),i.sdfTexture.needsUpdate=!0})})}function cV({font:i,characters:e,sdfGlyphSize:t},n){let s=Array.isArray(e)?e.join(`
`):""+e;fU({font:i,sdfGlyphSize:t,text:s},n)}function uV(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}let S_;function fV(i){return S_||(S_=typeof document>"u"?{}:document.createElement("a")),S_.href=i,S_.href}function dU(i){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=i,{width:n,height:s}=e,a=i.sdfCanvas.getContext("webgl");let r=t.image.data;(!r||r.length!==n*s*4)&&(r=new Uint8Array(n*s*4),t.image={width:n,height:s,data:r},t.flipY=!1,t.isDataTexture=!0),a.readPixels(0,0,n,s,a.RGBA,a.UNSIGNED_BYTE,r)}}const hV=a0({name:"Typesetter",dependencies:[Q7,Z7,I7],init(i,e,t){return i(e,t())}}),pU=a0({name:"Typesetter",dependencies:[hV],init(i){return function(e){return new Promise(t=>{i.typeset(e,t)})}},getTransferables(i){const e=[];for(let t in i)i[t]&&i[t].buffer&&e.push(i[t].buffer);return e}});pU.onMainThread;const Xw={};function dV(i){let e=Xw[i];return e||(e=Xw[i]=new Ru(1,1,i,i).translate(.5,.5,0)),e}const pV="aTroikaGlyphBounds",jw="aTroikaGlyphIndex",mV="aTroikaGlyphColor";class gV extends gT{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new zs,this.boundingBox=new Ds}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=dV(e);["position","normal","uv"].forEach(n=>{this.attributes[n]=t.attributes[n].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,s,a){this.updateAttributeData(pV,e,4),this.updateAttributeData(jw,t,1),this.updateAttributeData(mV,a,3),this._blockBounds=n,this._chunkedBounds=s,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:s,floor:a,min:r,max:l,sin:c,cos:f}=Math,d=s/2,g=s*2,v=Math.abs(t),y=e[0]/v,S=e[2]/v,A=a((y+d)/g)!==a((S+d)/g)?-v:r(c(y)*v,c(S)*v),M=a((y-d)/g)!==a((S-d)/g)?v:l(c(y)*v,c(S)*v),b=a((y+s)/g)!==a((S+s)/g)?v*2:l(v-f(y)*v,v-f(S)*v);n.min.set(A,e[1],t<0?-b:0),n.max.set(M,e[3],t<0?0:b)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(jw).count,n=this._chunkedBounds;if(n)for(let s=n.length;s--;){t=n[s].end;let a=n[s].rect;if(a[1]<e.w&&a[3]>e.y&&a[0]<e.z&&a[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,n){const s=this.getAttribute(e);t?s&&s.array.length===t.length?(s.array.set(t),s.needsUpdate=!0):(this.setAttribute(e,new Gf(t,n)),delete this._maxInstanceCount,this.dispose()):s&&this.deleteAttribute(e)}}const vV=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,yV=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,_V=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,xV=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function SV(i){const e=KM(i,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new tt},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new wn(0,0,0,0)},uTroikaClipRect:{value:new wn(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new tt},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new St},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new cn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:vV,vertexTransform:yV,fragmentDefs:_V,fragmentColorTransform:xV,customRewriter({vertexShader:t,fragmentShader:n}){let s=/\buniform\s+vec3\s+diffuse\b/;return s.test(n)&&(n=n.replace(s,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),s.test(t)||(t=t.replace(cU,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:n}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const wT=new La({color:16777215,side:ha,transparent:!0}),Yw=8421504,Ww=new Ft,A_=new le,J2=new le,Ug=[],AV=new le,Z2="+x+y";function qw(i){return Array.isArray(i)?i[0]:i}let mU=()=>{const i=new Di(new Ru(1,1),wT);return mU=()=>i,i},gU=()=>{const i=new Di(new Ru(1,1,32,1),wT);return gU=()=>i,i};const MV={type:"syncstart"},bV={type:"synccomplete"},vU=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],TV=vU.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let yU=class extends Di{constructor(){const e=new gV;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Yw,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Z2,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(MV),fU({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{n.forEach(s=>s&&s())})),this.dispatchEvent(bV),e&&e()})))}onBeforeRender(e,t,n,s,a,r){this.sync(),a.isTroikaTextMaterial&&this._prepareForRender(a)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return SV(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=wT.clone());if((!e||!e.isDerivedFrom(t))&&(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function n(){t.removeEventListener("dispose",n),e.dispose()})),this.hasOutline()){let n=e._outlineMtl;return n||(n=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),n.isTextOutlineMaterial=!0,n.depthWrite=!1,n.map=null,e.addEventListener("dispose",function s(){e.removeEventListener("dispose",s),n.dispose()})),[n,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return qw(this.material).getDepthMaterial()}set customDepthMaterial(e){}get customDistanceMaterial(){return qw(this.material).getDistanceMaterial()}set customDistanceMaterial(e){}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,s=this.textRenderInfo;if(s){const{sdfTexture:l,blockBounds:c}=s;n.uTroikaSDFTexture.value=l,n.uTroikaSDFTextureSize.value.set(l.image.width,l.image.height),n.uTroikaSDFGlyphSize.value=s.sdfGlyphSize,n.uTroikaSDFExponent.value=s.sdfExponent,n.uTroikaTotalBounds.value.fromArray(c),n.uTroikaUseGlyphColors.value=!t&&!!s.glyphColors;let f=0,d=0,g=0,v,y,S,A=0,M=0;if(t){let{outlineWidth:C,outlineOffsetX:w,outlineOffsetY:R,outlineBlur:U,outlineOpacity:O}=this;f=this._parsePercent(C)||0,d=Math.max(0,this._parsePercent(U)||0),v=O,A=this._parsePercent(w)||0,M=this._parsePercent(R)||0}else g=Math.max(0,this._parsePercent(this.strokeWidth)||0),g&&(S=this.strokeColor,n.uTroikaStrokeColor.value.set(S??Yw),y=this.strokeOpacity,y==null&&(y=1)),v=this.fillOpacity;n.uTroikaEdgeOffset.value=f,n.uTroikaPositionOffset.value.set(A,M),n.uTroikaBlurRadius.value=d,n.uTroikaStrokeWidth.value=g,n.uTroikaStrokeOpacity.value=y,n.uTroikaFillOpacity.value=v??1,n.uTroikaCurveRadius.value=this.curveRadius||0;let b=this.clipRect;if(b&&Array.isArray(b)&&b.length===4)n.uTroikaClipRect.value.fromArray(b);else{const C=(this.fontSize||.1)*100;n.uTroikaClipRect.value.set(c[0]-C,c[1]-C,c[2]+C,c[3]+C)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const a=t?this.outlineColor||0:this.color;if(a==null)delete e.color;else{const l=e.hasOwnProperty("color")?e.color:e.color=new St;(a!==l._input||typeof a=="object")&&l.set(l._input=a)}let r=this.orientation||Z2;if(r!==e._orientation){let l=n.uTroikaOrient.value;r=r.replace(/[^-+xyz]/g,"");let c=r!==Z2&&r.match(/^([-+])([xyz])([-+])([xyz])$/);if(c){let[,f,d,g,v]=c;A_.set(0,0,0)[d]=f==="-"?1:-1,J2.set(0,0,0)[v]=g==="-"?-1:1,Ww.lookAt(AV,A_.cross(J2),J2),l.setFromMatrix4(Ww)}else l.identity();e._orientation=r}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new tt){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new tt){return A_.copy(e),this.localPositionToTextCoords(this.worldToLocal(A_),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:s}=this;if(n){const a=n.blockBounds,r=s?gU():mU(),l=r.geometry,{position:c,uv:f}=l.attributes;for(let d=0;d<f.count;d++){let g=a[0]+f.getX(d)*(a[2]-a[0]);const v=a[1]+f.getY(d)*(a[3]-a[1]);let y=0;s&&(y=s-Math.cos(g/s)*s,g=Math.sin(g/s)*s),c.setXYZ(d,g,v,y)}l.boundingSphere=this.geometry.boundingSphere,l.boundingBox=this.geometry.boundingBox,r.matrixWorld=this.matrixWorld,r.material.side=this.material.side,Ug.length=0,r.raycast(e,Ug);for(let d=0;d<Ug.length;d++)Ug[d].object=this,t.push(Ug[d])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,TV.forEach(n=>{this[n]=e[n]}),this}clone(){return new this.constructor().copy(this)}};vU.forEach(i=>{const e="_private_"+i;Object.defineProperty(yU.prototype,i,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});new Ds;new St;const ZM=ge.forwardRef(({sdfGlyphSize:i=64,anchorX:e="center",anchorY:t="middle",font:n,fontSize:s=1,children:a,characters:r,onSync:l,...c},f)=>{const d=Er(({invalidate:S})=>S),[g]=ge.useState(()=>new yU),[v,y]=ge.useMemo(()=>{const S=[];let A="";return ge.Children.forEach(a,M=>{typeof M=="string"||typeof M=="number"?A+=M:S.push(M)}),[S,A]},[a]);return O4(()=>new Promise(S=>cV({font:n,characters:r},S)),["troika-text",n,r]),ge.useLayoutEffect(()=>void g.sync(()=>{d(),l&&l(g)})),ge.useEffect(()=>()=>g.dispose(),[g]),ge.createElement("primitive",Tv({object:g,ref:f,font:n,text:y,anchorX:e,anchorY:t,fontSize:s,sdfGlyphSize:i},c),v)});let M_=null,_U="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function xU(i=!0,e=!0,t){return n=>{t&&t(n),i&&(M_||(M_=new R7),M_.setDecoderPath(typeof i=="string"?i:_U),n.setDRACOLoader(M_)),e&&n.setMeshoptDecoder(typeof q2=="function"?q2():q2)}}const zS=(i,e,t,n)=>Jf(CT,i,xU(e,t,n));zS.preload=(i,e,t,n)=>Jf.preload(CT,i,xU(e,t,n));zS.clear=i=>Jf.clear(CT,i);zS.setDecoderPath=i=>{_U=i};const EV=ge.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:s=!0,keyEvents:a=!1,onChange:r,onStart:l,onEnd:c,...f},d)=>{const g=Er(O=>O.invalidate),v=Er(O=>O.camera),y=Er(O=>O.gl),S=Er(O=>O.events),A=Er(O=>O.setEvents),M=Er(O=>O.set),b=Er(O=>O.get),C=Er(O=>O.performance),w=e||v,R=n||S.connected||y.domElement,U=ge.useMemo(()=>new WH(w),[w]);return Oc(()=>{U.enabled&&U.update()},-1),ge.useEffect(()=>(a&&U.connect(a===!0?R:a),U.connect(R),()=>void U.dispose()),[a,R,t,U,g]),ge.useEffect(()=>{const O=N=>{g(),t&&C.regress(),r&&r(N)},I=N=>{l&&l(N)},P=N=>{c&&c(N)};return U.addEventListener("change",O),U.addEventListener("start",I),U.addEventListener("end",P),()=>{U.removeEventListener("start",I),U.removeEventListener("end",P),U.removeEventListener("change",O)}},[r,l,c,U,g,A]),ge.useEffect(()=>{if(i){const O=b().controls;return M({controls:U}),()=>M({controls:O})}},[i,U]),ge.createElement("primitive",Tv({ref:d,object:U,enableDamping:s},f))});function CV(i=new Date){const[e,t]=ge.useState(null),[n,s]=ge.useState(!0),[a,r]=ge.useState(null);return ge.useEffect(()=>{(async()=>{try{s(!0);const c=await s0();t(c),r(null)}catch(c){r(c.message),console.error("Error fetching TLE:",c)}finally{s(!1)}})()},[]),ge.useMemo(()=>{if(!e)return null;const[l,c]=e,f=i0(l,c),d=t1(f,i),{position:g,velocity:v}=d;if(!g||!v)return null;const y=new le(g.x,g.y,g.z).normalize().negate(),S=new le(v.x,v.y,v.z).normalize().negate(),A=new le().crossVectors(S,y).normalize(),M=new Ft().makeBasis(A,S,y);return new Rs().setFromRotationMatrix(M)},[e,i])}function wV(i,e){const t=new le().subVectors(i,e).normalize();return new ls({uniforms:{sunDir:{value:t}},vertexShader:`
      varying vec3 vNormal;
      void main() {
        vNormal = normalize(normalMatrix * normal);
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
      }
    `,fragmentShader:`
      varying vec3 vNormal;
      uniform vec3 sunDir;

      vec3 thermalColor(float intensity) {
        return mix(vec3(0.0, 0.3, 1.0), vec3(1.0, 0.1, 0.0), intensity); // blue  red
      }

      void main() {
        float dotVal = max(dot(vNormal, sunDir), 0.0);
        vec3 color = thermalColor(dotVal);
        gl_FragColor = vec4(color, 1.0);
      }
    `,transparent:!0})}function RV({position:i=[0,0,0],focusTarget:e}){const{scene:t}=zS("import.meta.env.BASE_URL + models/iss.glb"),n=ge.useRef(),s=ge.useRef(),a=ge.useRef(),r=CV(new Date),{thermalView:l}=Bl(),c=e==="iss"?.004:.02,f=ge.useMemo(()=>t.clone(!0),[t]);return ge.useEffect(()=>{t.traverse(d=>{d.isMesh&&(d.castShadow=!0,d.material.metalness=1,d.material.roughness=.4,d.material.envMapIntensity=1.5,d.material.transparent=!0,d.material.opacity=0,d.material.needsUpdate=!0)}),f.traverse(d=>{d.isMesh&&(d.material=new La({color:"white",transparent:!0,opacity:1,depthWrite:!1}))})},[t,f]),Oc(()=>{if(!n.current||!s.current)return;const d=new le(c,c,c),g=new le(...i);n.current.scale.lerp(d,.1),n.current.position.lerp(g,.05),s.current.scale.copy(n.current.scale).multiplyScalar(1.05),s.current.position.copy(n.current.position),r&&n.current&&n.current.quaternion.slerp(r,.1),n.current.traverse(v=>{if(v.isMesh){const y=e==="iss"?1:0;v.material.opacity+=(y-v.material.opacity)*.1}}),s.current.traverse(v=>{if(v.isMesh){const y=e==="earth"?1:0;v.material.opacity+=(y-v.material.opacity)*.1}}),s.current.quaternion.copy(n.current.quaternion),a.current&&(a.current.position.set(5,5,5),a.current.target.position.set(...n.current?.position||[0,0,0]))}),ge.useEffect(()=>{if(!t)return;const d=new le(5500,2300,0);t.traverse(g=>{if(g.isMesh)if(g.userData.originalMaterial||(g.userData.originalMaterial=g.material.clone()),l&&e==="iss"){const y=new le;g.getWorldPosition(y),g.material=wV(d,y)}else g.material=g.userData.originalMaterial,g.material.opacity=0,g.material.transparent=!0})},[l,t,e]),oe.jsxs(oe.Fragment,{children:[oe.jsx("primitive",{ref:n,object:t}),oe.jsx("primitive",{ref:s,object:f})]})}function DV({focusTarget:i,issPosition:e}){const{camera:t,scene:n}=Er(),s=ge.useRef(),{zoomDelta:a,setZoomDelta:r,recenterCameraRequested:l,setRecenterCameraRequested:c}=Bl(),f=ge.useRef({active:!1,start:0,duration:2,fromPos:new le,toPos:new le,fromTarget:new le,toTarget:new le}),d={earth:{min:1.5,max:5},iss:{min:.05,max:.15}};function g(y){const S=new Ds().setFromObject(y),A=new le,M=new le;return S.getSize(A),S.getCenter(M),{size:A,center:M}}function v(y,S=2){if(!s.current)return;const{size:A,center:M}=g(y);f.current.fromPos.copy(t.position),f.current.fromTarget.copy(s.current.target);const b=new le;t.getWorldDirection(b).negate();let C=i==="iss"?2.5:i==="earth"?.5:1;const w=A.length()*C,{min:R,max:U}=d[i]||{min:1,max:100},O=ko.clamp(w,R,U);f.current.toPos.copy(M).add(b.multiplyScalar(O)),f.current.toTarget.copy(M),f.current.start=performance.now(),f.current.duration=S*1e3,f.current.active=!0,s.current.minDistance=0,s.current.maxDistance=1/0}return ge.useEffect(()=>{if(!n||!s.current)return;const y=n.getObjectByName(i==="earth"?"Earth":"ISS");y&&v(y)},[i]),ge.useEffect(()=>{if(l){const y=n.getObjectByName(i==="earth"?"Earth":"ISS");y&&v(y),c(!1)}},[l]),Oc(()=>{const y=f.current;if(y.active&&s.current){const S=performance.now(),A=ko.clamp((S-y.start)/y.duration,0,1),M=ko.smoothstep(A,0,1);if(t.position.lerpVectors(y.fromPos,y.toPos,M),s.current.target.lerpVectors(y.fromTarget,y.toTarget,M),s.current.update(),A>=1){y.active=!1;const{min:b,max:C}=d[i]||{};s.current.minDistance=b,s.current.maxDistance=C}}if(!f.current.active&&i==="iss"&&e&&n.getObjectByName("ISS")){const S=n.getObjectByName("ISS"),{center:A}=g(S),M=t.position.clone().sub(s.current.target),b=A.clone().add(M);t.position.lerp(b,.1),s.current.target.lerp(A,.1),s.current.update()}}),ge.useEffect(()=>{if(!s.current||a===0)return;const y=new le;t.getWorldDirection(y),t.position.add(y.multiplyScalar(a)),s.current.update(),r(0)},[a]),oe.jsx(EV,{ref:s,enableDamping:!0,dampingFactor:.1,enableZoom:!0,enableRotate:!0,enablePan:!1})}/**
 * postprocessing v6.37.4 build Sat Jun 07 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rschen
 * @license Zlib
 */var Q2=1/1e3,BV=1e3,UV=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(i){typeof document<"u"&&document.hidden!==void 0&&(i?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=i)}get delta(){return this._delta*Q2}get fixedDelta(){return this._fixedDelta*Q2}set fixedDelta(i){this._fixedDelta=i*BV}get elapsed(){return this._elapsed*Q2}update(i){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(i!==void 0?i:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(i){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},LV=(()=>{const i=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),t=new $t;return t.setAttribute("position",new Fn(i,3)),t.setAttribute("uv",new Fn(e,2)),t})(),or=class QM{static get fullscreenGeometry(){return LV}constructor(e="Pass",t=new yv,n=new Vv){this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Di(QM.fullscreenGeometry,e),t.frustumCulled=!1,this.scene===null&&(this.scene=new yv),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Yf){}render(e,t,n,s,a){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof os||t instanceof ys||t instanceof Ai||t instanceof QM)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},OV=class extends or{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(i,e,t,n,s){const a=i.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},NV=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,RT="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",SU=class extends ls{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new rn(null),opacity:new rn(1)},blending:da,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:NV,vertexShader:RT})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}getOpacity(i){return this.uniforms.opacity.value}setOpacity(i){this.uniforms.opacity.value=i}},AU=class extends or{constructor(i,e=!0){super("CopyPass"),this.fullscreenMaterial=new SU,this.needsSwap=!1,this.renderTarget=i,i===void 0&&(this.renderTarget=new os(1,1,{minFilter:ti,magFilter:ti,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(i){this.autoResize=i}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(i){this.autoResize=i}render(i,e,t,n,s){this.fullscreenMaterial.inputBuffer=e.texture,i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,e){this.autoResize&&this.renderTarget.setSize(i,e)}initialize(i,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==Gs?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":i!==null&&i.outputColorSpace===Zn&&(this.renderTarget.texture.colorSpace=Zn))}},Kw=new St,MU=class extends or{constructor(i=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=i,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(i,e,t){this.color=i,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(i){this.overrideClearColor=i}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(i){this.overrideClearAlpha=i}render(i,e,t,n,s){const a=this.overrideClearColor,r=this.overrideClearAlpha,l=i.getClearAlpha(),c=a!==null,f=r>=0;c?(i.getClearColor(Kw),i.setClearColor(a,f?r:l)):f&&i.setClearAlpha(r),i.setRenderTarget(this.renderToScreen?null:e),i.clear(this.color,this.depth,this.stencil),c?i.setClearColor(Kw,l):f&&i.setClearAlpha(l)}},PV=class extends or{constructor(i,e){super("MaskPass",i,e),this.needsSwap=!1,this.clearPass=new MU(!1,!1,!0),this.inverse=!1}set mainScene(i){this.scene=i}set mainCamera(i){this.camera=i}get inverted(){return this.inverse}set inverted(i){this.inverse=i}get clear(){return this.clearPass.enabled}set clear(i){this.clearPass.enabled=i}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(i){this.inverted=i}render(i,e,t,n,s){const a=i.getContext(),r=i.state.buffers,l=this.scene,c=this.camera,f=this.clearPass,d=this.inverted?0:1,g=1-d;r.color.setMask(!1),r.depth.setMask(!1),r.color.setLocked(!0),r.depth.setLocked(!0),r.stencil.setTest(!0),r.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),r.stencil.setFunc(a.ALWAYS,d,4294967295),r.stencil.setClear(g),r.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?f.render(i,null):(f.render(i,e),f.render(i,t))),this.renderToScreen?(i.setRenderTarget(null),i.render(l,c)):(i.setRenderTarget(e),i.render(l,c),i.setRenderTarget(t),i.render(l,c)),r.color.setLocked(!1),r.depth.setLocked(!1),r.stencil.setLocked(!1),r.stencil.setFunc(a.EQUAL,1,4294967295),r.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),r.stencil.setLocked(!0)}},IV=class{constructor(i=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:n=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,s,n),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new AU,this.depthTexture=null,this.passes=[],this.timer=new UV,this.autoRenderToScreen=!0,this.setRenderer(i)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(i){const e=this.inputBuffer,t=this.multisampling;t>0&&i>0?(this.inputBuffer.samples=i,this.outputBuffer.samples=i,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==i&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,i),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(i){if(this.renderer=i,i!==null){const e=i.getSize(new tt),t=i.getContext().getContextAttributes().alpha,n=this.inputBuffer.texture.type;n===Gs&&i.outputColorSpace===Zn&&(this.inputBuffer.texture.colorSpace=Zn,this.outputBuffer.texture.colorSpace=Zn,this.inputBuffer.dispose(),this.outputBuffer.dispose()),i.autoClear=!1,this.setSize(e.width,e.height);for(const s of this.passes)s.initialize(i,t,n)}}replaceRenderer(i,e=!0){const t=this.renderer,n=t.domElement.parentNode;return this.setRenderer(i),e&&n!==null&&(n.removeChild(t.domElement),n.appendChild(i.domElement)),t}createDepthTexture(){const i=this.depthTexture=new yS;return this.inputBuffer.depthTexture=i,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(i.format=Nd,i.type=Od):i.type=Bc,i}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const i of this.passes)i.setDepthTexture(null)}}createBuffer(i,e,t,n){const s=this.renderer,a=s===null?new tt:s.getDrawingBufferSize(new tt),r={minFilter:ti,magFilter:ti,stencilBuffer:e,depthBuffer:i,type:t},l=new os(a.width,a.height,r);return n>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=n),t===Gs&&s!==null&&s.outputColorSpace===Zn&&(l.texture.colorSpace=Zn),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(i){for(const e of this.passes)e.mainScene=i}setMainCamera(i){for(const e of this.passes)e.mainCamera=i}addPass(i,e){const t=this.passes,n=this.renderer,s=n.getDrawingBufferSize(new tt),a=n.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;if(i.setRenderer(n),i.setSize(s.width,s.height),i.initialize(n,a,r),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),i.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,i):t.push(i),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),i.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(i of t)i.setDepthTexture(l)}else i.setDepthTexture(this.depthTexture)}removePass(i){const e=this.passes,t=e.indexOf(i);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const a=(l,c)=>l||c.needsDepthTexture;e.reduce(a,!1)||(i.getDepthTexture()===this.depthTexture&&i.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(i.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const i=this.passes;this.deleteDepthTexture(),i.length>0&&(this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!1),this.passes=[])}render(i){const e=this.renderer,t=this.copyPass;let n=this.inputBuffer,s=this.outputBuffer,a=!1,r,l,c;i===void 0&&(this.timer.update(),i=this.timer.getDelta());for(const f of this.passes)f.enabled&&(f.render(e,n,s,i,a),f.needsSwap&&(a&&(t.renderToScreen=f.renderToScreen,r=e.getContext(),l=e.state.buffers.stencil,l.setFunc(r.NOTEQUAL,1,4294967295),t.render(e,n,s,i,a),l.setFunc(r.EQUAL,1,4294967295)),c=n,n=s,s=c),f instanceof PV?a=!0:f instanceof OV&&(a=!1))}setSize(i,e,t){const n=this.renderer,s=n.getSize(new tt);(i===void 0||e===void 0)&&(i=s.width,e=s.height),(s.width!==i||s.height!==e)&&n.setSize(i,e,t);const a=n.getDrawingBufferSize(new tt);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);for(const r of this.passes)r.setSize(a.width,a.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const i of this.passes)i.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),or.fullscreenGeometry.dispose()}},Ed={NONE:0,DEPTH:1,CONVOLUTION:2},Jn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},FV=class{constructor(){this.shaderParts=new Map([[Jn.FRAGMENT_HEAD,null],[Jn.FRAGMENT_MAIN_UV,null],[Jn.FRAGMENT_MAIN_IMAGE,null],[Jn.VERTEX_HEAD,null],[Jn.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Ed.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Pl}},$2=!1,Jw=class{constructor(i=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(i),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case ha:t=this.materialsFlatShadedDoubleSide;break;case vs:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case ha:t=this.materialsDoubleSide;break;case vs:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(i){if(!(i instanceof ls))return i.clone();const e=i.uniforms,t=new Map;for(const s in e){const a=e[s].value;a.isRenderTargetTexture&&(e[s].value=null,t.set(s,a))}const n=i.clone();for(const s of t)e[s[0]].value=s[1],n.uniforms[s[0]].value=s[1];return n}setMaterial(i){if(this.disposeMaterials(),this.material=i,i!==null){const e=this.materials=[this.cloneMaterial(i),this.cloneMaterial(i),this.cloneMaterial(i)];for(const t of e)t.uniforms=Object.assign({},i.uniforms),t.side=ao;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.side=vs,n}),this.materialsDoubleSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.side=ha,n}),this.materialsFlatShaded=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n.side=vs,n}),this.materialsFlatShadedDoubleSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},i.uniforms),n.flatShading=!0,n.side=ha,n})}}render(i,e,t){const n=i.shadowMap.enabled;if(i.shadowMap.enabled=!1,$2){const s=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),i.render(e,t);for(const a of s)a[0].material=a[1];this.meshCount!==s.size&&s.clear()}else{const s=e.overrideMaterial;e.overrideMaterial=this.material,i.render(e,t),e.overrideMaterial=s}i.shadowMap.enabled=n}disposeMaterials(){if(this.material!==null){const i=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of i)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return $2}static set workaroundEnabled(i){$2=i}},bf=-1,Oa=class extends uo{constructor(i,e=bf,t=bf,n=1){super(),this.resizable=i,this.baseSize=new tt(1,1),this.preferredSize=new tt(e,t),this.target=this.preferredSize,this.s=n,this.effectiveSize=new tt,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const i=this.baseSize,e=this.preferredSize,t=this.effectiveSize,n=this.scale;e.width!==bf?t.width=e.width:e.height!==bf?t.width=Math.round(e.height*(i.width/Math.max(i.height,1))):t.width=Math.round(i.width*n),e.height!==bf?t.height=e.height:e.width!==bf?t.height=Math.round(e.width/Math.max(i.width/Math.max(i.height,1),1)):t.height=Math.round(i.height*n)}get width(){return this.effectiveSize.width}set width(i){this.preferredWidth=i}get height(){return this.effectiveSize.height}set height(i){this.preferredHeight=i}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(i){this.s!==i&&(this.s=i,this.preferredSize.setScalar(bf),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(i){this.scale=i}get baseWidth(){return this.baseSize.width}set baseWidth(i){this.baseSize.width!==i&&(this.baseSize.width=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(i){this.baseWidth=i}get baseHeight(){return this.baseSize.height}set baseHeight(i){this.baseSize.height!==i&&(this.baseSize.height=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(i){this.baseHeight=i}setBaseSize(i,e){(this.baseSize.width!==i||this.baseSize.height!==e)&&(this.baseSize.set(i,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(i){this.preferredSize.width!==i&&(this.preferredSize.width=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(i){this.preferredWidth=i}get preferredHeight(){return this.preferredSize.height}set preferredHeight(i){this.preferredSize.height!==i&&(this.preferredSize.height=i,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(i){this.preferredHeight=i}setPreferredSize(i,e){(this.preferredSize.width!==i||this.preferredSize.height!==e)&&(this.preferredSize.set(i,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(i){this.s=i.scale,this.baseSize.set(i.baseWidth,i.baseHeight),this.preferredSize.set(i.preferredWidth,i.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return bf}},Mn={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},zV="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",GV="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",HV="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",VV="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",kV="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",XV="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",jV="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",YV="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",WV="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",qV="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",KV="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",JV="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",ZV="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",QV="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",$V="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",ek="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",tk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",nk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",ik="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",sk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",ak="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",rk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",ok="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",lk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",ck="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",uk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",fk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",hk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",dk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",pk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",mk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",gk="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",vk=new Map([[Mn.ADD,zV],[Mn.ALPHA,GV],[Mn.AVERAGE,HV],[Mn.COLOR,VV],[Mn.COLOR_BURN,kV],[Mn.COLOR_DODGE,XV],[Mn.DARKEN,jV],[Mn.DIFFERENCE,YV],[Mn.DIVIDE,WV],[Mn.DST,null],[Mn.EXCLUSION,qV],[Mn.HARD_LIGHT,KV],[Mn.HARD_MIX,JV],[Mn.HUE,ZV],[Mn.INVERT,QV],[Mn.INVERT_RGB,$V],[Mn.LIGHTEN,ek],[Mn.LINEAR_BURN,tk],[Mn.LINEAR_DODGE,nk],[Mn.LINEAR_LIGHT,ik],[Mn.LUMINOSITY,sk],[Mn.MULTIPLY,ak],[Mn.NEGATION,rk],[Mn.NORMAL,ok],[Mn.OVERLAY,lk],[Mn.PIN_LIGHT,ck],[Mn.REFLECT,uk],[Mn.SATURATION,fk],[Mn.SCREEN,hk],[Mn.SOFT_LIGHT,dk],[Mn.SRC,pk],[Mn.SUBTRACT,mk],[Mn.VIVID_LIGHT,gk]]),yk=class extends uo{constructor(i,e=1){super(),this._blendFunction=i,this.opacity=new rn(e)}getOpacity(){return this.opacity.value}setOpacity(i){this.opacity.value=i}get blendFunction(){return this._blendFunction}set blendFunction(i){this._blendFunction=i,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(i){this.blendFunction=i}getShaderCode(){return vk.get(this.blendFunction)}},Hm=class extends uo{constructor(i,e,{attributes:t=Ed.NONE,blendFunction:n=Mn.NORMAL,defines:s=new Map,uniforms:a=new Map,extensions:r=null,vertexShader:l=null}={}){super(),this.name=i,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=l,this.defines=s,this.uniforms=a,this.extensions=r,this.blendMode=new yk(n),this.blendMode.addEventListener("change",c=>this.setChanged()),this._inputColorSpace=Pl,this._outputColorSpace=Ul}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(i){this._inputColorSpace=i,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(i){this._outputColorSpace=i,this.setChanged()}set mainScene(i){}set mainCamera(i){}getName(){return this.name}setRenderer(i){this.renderer=i}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(i){this.attributes=i,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(i){this.fragmentShader=i,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(i){this.vertexShader=i,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(i,e=Yf){}update(i,e,t){}setSize(i,e){}initialize(i,e,t){}dispose(){for(const i of Object.keys(this)){const e=this[i];(e instanceof os||e instanceof ys||e instanceof Ai||e instanceof or)&&this[i].dispose()}}},DT={MEDIUM:2,LARGE:3},_k=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,xk="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Sk=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],Ak=class extends ls{constructor(i=new wn){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new rn(null),texelSize:new rn(new wn),scale:new rn(1),kernel:new rn(0)},blending:da,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:_k,vertexShader:xk}),this.setTexelSize(i.x,i.y),this.kernelSize=DT.MEDIUM}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.inputBuffer=i}get kernelSequence(){return Sk[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(i){this.uniforms.scale.value=i}getScale(){return this.uniforms.scale.value}setScale(i){this.uniforms.scale.value=i}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(i){this.uniforms.kernel.value=i}setKernel(i){this.kernel=i}setTexelSize(i,e){this.uniforms.texelSize.value.set(i,e,i*.5,e*.5)}setSize(i,e){const t=1/i,n=1/e;this.uniforms.texelSize.value.set(t,n,t*.5,n*.5)}},Mk=class extends or{constructor({kernelSize:i=DT.MEDIUM,resolutionScale:e=.5,width:t=Oa.AUTO_SIZE,height:n=Oa.AUTO_SIZE,resolutionX:s=t,resolutionY:a=n}={}){super("KawaseBlurPass"),this.renderTargetA=new os(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const r=this.resolution=new Oa(this,s,a,e);r.addEventListener("change",l=>this.setSize(r.baseWidth,r.baseHeight)),this._blurMaterial=new Ak,this._blurMaterial.kernelSize=i,this.copyMaterial=new SU}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(i){this._blurMaterial=i}get dithering(){return this.copyMaterial.dithering}set dithering(i){this.copyMaterial.dithering=i}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(i){this.blurMaterial.kernelSize=i}get width(){return this.resolution.width}set width(i){this.resolution.preferredWidth=i}get height(){return this.resolution.height}set height(i){this.resolution.preferredHeight=i}get scale(){return this.blurMaterial.scale}set scale(i){this.blurMaterial.scale=i}getScale(){return this.blurMaterial.scale}setScale(i){this.blurMaterial.scale=i}getKernelSize(){return this.kernelSize}setKernelSize(i){this.kernelSize=i}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}render(i,e,t,n,s){const a=this.scene,r=this.camera,l=this.renderTargetA,c=this.renderTargetB,f=this.blurMaterial,d=f.kernelSequence;let g=e;this.fullscreenMaterial=f;for(let v=0,y=d.length;v<y;++v){const S=(v&1)===0?l:c;f.kernel=d[v],f.inputBuffer=g.texture,i.setRenderTarget(S),i.render(a,r),g=S}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=g.texture,i.setRenderTarget(this.renderToScreen?null:t),i.render(a,r)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e);const n=t.width,s=t.height;this.renderTargetA.setSize(n,s),this.renderTargetB.setSize(n,s),this.blurMaterial.setSize(i,e)}initialize(i,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==Gs?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):i!==null&&i.outputColorSpace===Zn&&(this.renderTargetA.texture.colorSpace=Zn,this.renderTargetB.texture.colorSpace=Zn))}static get AUTO_SIZE(){return Oa.AUTO_SIZE}},bk=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,Tk=class extends ls{constructor(i=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:jf.replace(/\D+/g,"")},uniforms:{inputBuffer:new rn(null),threshold:new rn(0),smoothing:new rn(1),range:new rn(null)},blending:da,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:bk,vertexShader:RT}),this.colorOutput=i,this.luminanceRange=e}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}get threshold(){return this.uniforms.threshold.value}set threshold(i){this.smoothing>0||i>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=i}getThreshold(){return this.threshold}setThreshold(i){this.threshold=i}get smoothing(){return this.uniforms.smoothing.value}set smoothing(i){this.threshold>0||i>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=i}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(i){this.smoothing=i}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(i){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(i){i?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(i){return this.colorOutput}setColorOutputEnabled(i){this.colorOutput=i}get useRange(){return this.luminanceRange!==null}set useRange(i){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(i){i!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=i,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(i){this.luminanceRange=i}},bU=class extends or{constructor({renderTarget:i,luminanceRange:e,colorOutput:t,resolutionScale:n=1,width:s=Oa.AUTO_SIZE,height:a=Oa.AUTO_SIZE,resolutionX:r=s,resolutionY:l=a}={}){super("LuminancePass"),this.fullscreenMaterial=new Tk(t,e),this.needsSwap=!1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new os(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const c=this.resolution=new Oa(this,r,l,n);c.addEventListener("change",f=>this.setSize(c.baseWidth,c.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(i,e,t,n,s){const a=this.fullscreenMaterial;a.inputBuffer=e.texture,i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e),this.renderTarget.setSize(t.width,t.height)}initialize(i,e,t){t!==void 0&&t!==Gs&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Ek=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,Ck="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",wk=class extends ls{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new rn(null),texelSize:new rn(new tt)},blending:da,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Ek,vertexShader:Ck})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setSize(i,e){this.uniforms.texelSize.value.set(1/i,1/e)}},Rk=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,Dk="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",Bk=class extends ls{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new rn(null),supportBuffer:new rn(null),texelSize:new rn(new tt),radius:new rn(.85)},blending:da,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Rk,vertexShader:Dk})}set inputBuffer(i){this.uniforms.inputBuffer.value=i}set supportBuffer(i){this.uniforms.supportBuffer.value=i}get radius(){return this.uniforms.radius.value}set radius(i){this.uniforms.radius.value=i}setSize(i,e){this.uniforms.texelSize.value.set(1/i,1/e)}},Uk=class extends or{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new os(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new wk,this.upsamplingMaterial=new Bk,this.resolution=new tt}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(i){if(this.levels!==i){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<i;++t){const n=e.clone();n.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(n)}this.upsamplingMipmaps.push(e);for(let t=1,n=i-1;t<n;++t){const s=e.clone();s.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(s)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(i){this.upsamplingMaterial.radius=i}render(i,e,t,n,s){const{scene:a,camera:r}=this,{downsamplingMaterial:l,upsamplingMaterial:c}=this,{downsamplingMipmaps:f,upsamplingMipmaps:d}=this;let g=e;this.fullscreenMaterial=l;for(let v=0,y=f.length;v<y;++v){const S=f[v];l.setSize(g.width,g.height),l.inputBuffer=g.texture,i.setRenderTarget(S),i.render(a,r),g=S}this.fullscreenMaterial=c;for(let v=d.length-1;v>=0;--v){const y=d[v];c.setSize(g.width,g.height),c.inputBuffer=g.texture,c.supportBuffer=f[v].texture,i.setRenderTarget(y),i.render(a,r),g=y}}setSize(i,e){const t=this.resolution;t.set(i,e);let n=t.width,s=t.height;for(let a=0,r=this.downsamplingMipmaps.length;a<r;++a)n=Math.round(n*.5),s=Math.round(s*.5),this.downsamplingMipmaps[a].setSize(n,s),a<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[a].setSize(n,s)}initialize(i,e,t){if(t!==void 0){const n=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const s of n)s.texture.type=t;if(t!==Gs)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(i!==null&&i.outputColorSpace===Zn)for(const s of n)s.texture.colorSpace=Zn}}dispose(){super.dispose();for(const i of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))i.dispose()}},Lk=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,Ok=class extends Hm{constructor({blendFunction:i=Mn.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:n=!1,intensity:s=1,radius:a=.85,levels:r=8,kernelSize:l=DT.LARGE,resolutionScale:c=.5,width:f=Oa.AUTO_SIZE,height:d=Oa.AUTO_SIZE,resolutionX:g=f,resolutionY:v=d}={}){super("BloomEffect",Lk,{blendFunction:i,uniforms:new Map([["map",new rn(null)],["intensity",new rn(s)]])}),this.renderTarget=new os(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Mk({kernelSize:l}),this.luminancePass=new bU({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new Uk,this.mipmapBlurPass.enabled=n,this.mipmapBlurPass.radius=a,this.mipmapBlurPass.levels=r,this.uniforms.get("map").value=n?this.mipmapBlurPass.texture:this.renderTarget.texture;const y=this.resolution=new Oa(this,g,v,c);y.addEventListener("change",S=>this.setSize(y.baseWidth,y.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(i){this.resolution.preferredWidth=i}get height(){return this.resolution.height}set height(i){this.resolution.preferredHeight=i}get dithering(){return this.blurPass.dithering}set dithering(i){this.blurPass.dithering=i}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(i){this.blurPass.kernelSize=i}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(i){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(i){this.uniforms.get("intensity").value=i}getIntensity(){return this.intensity}setIntensity(i){this.intensity=i}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}update(i,e,t){const n=this.renderTarget,s=this.luminancePass;s.enabled?(s.render(i,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(i,s.renderTarget):this.blurPass.render(i,s.renderTarget,n)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(i,e):this.blurPass.render(i,e,n)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(i,e),this.mipmapBlurPass.setSize(i,e)}initialize(i,e,t){this.blurPass.initialize(i,e,t),this.luminancePass.initialize(i,e,t),this.mipmapBlurPass.initialize(i,e,t),t!==void 0&&(this.renderTarget.texture.type=t,i!==null&&i.outputColorSpace===Zn&&(this.renderTarget.texture.colorSpace=Zn))}},TU=class extends or{constructor(i,e,t=null){super("RenderPass",i,e),this.needsSwap=!1,this.clearPass=new MU,this.overrideMaterialManager=t===null?null:new Jw(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(i){this.scene=i}set mainCamera(i){this.camera=i}get renderToScreen(){return super.renderToScreen}set renderToScreen(i){super.renderToScreen=i,this.clearPass.renderToScreen=i}get overrideMaterial(){const i=this.overrideMaterialManager;return i!==null?i.material:null}set overrideMaterial(i){const e=this.overrideMaterialManager;i!==null?e!==null?e.setMaterial(i):this.overrideMaterialManager=new Jw(i):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(i){this.overrideMaterial=i}get clear(){return this.clearPass.enabled}set clear(i){this.clearPass.enabled=i}getSelection(){return this.selection}setSelection(i){this.selection=i}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(i){this.ignoreBackground=i}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(i){this.skipShadowMapUpdate=i}getClearPass(){return this.clearPass}render(i,e,t,n,s){const a=this.scene,r=this.camera,l=this.selection,c=r.layers.mask,f=a.background,d=i.shadowMap.autoUpdate,g=this.renderToScreen?null:e;l!==null&&r.layers.set(l.getLayer()),this.skipShadowMapUpdate&&(i.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(i,e),i.setRenderTarget(g),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(i,a,r):i.render(a,r),r.layers.mask=c,a.background=f,i.shadowMap.autoUpdate=d}},Jr={LINEAR:0,REINHARD:1,REINHARD2:2,REINHARD2_ADAPTIVE:3,OPTIMIZED_CINEON:5,CINEON:5,ACES_FILMIC:6,AGX:7,NEUTRAL:8},Lg={DEFAULT:0,ESKIL:1},Nk=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,Pk=class extends Hm{constructor({blendFunction:i=Mn.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",Nk,{blendFunction:i}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(i){this.premultiply!==i&&(i?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(i){this.premultiply=i}},Ik=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,Fk="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",zk=class extends ls{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new rn(null),normalBuffer:new rn(null),texelSize:new rn(new tt)},blending:da,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Ik,vertexShader:Fk})}set depthBuffer(i){this.uniforms.depthBuffer.value=i}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,e=Yf){this.depthBuffer=i,this.depthPacking=e}set normalBuffer(i){this.uniforms.normalBuffer.value=i,i!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(i){this.normalBuffer=i}setTexelSize(i,e){this.uniforms.texelSize.value.set(i,e)}setSize(i,e){this.uniforms.texelSize.value.set(1/i,1/e)}},Gk=class extends or{constructor({normalBuffer:i=null,resolutionScale:e=.5,width:t=Oa.AUTO_SIZE,height:n=Oa.AUTO_SIZE,resolutionX:s=t,resolutionY:a=n}={}){super("DepthDownsamplingPass");const r=new zk;r.normalBuffer=i,this.fullscreenMaterial=r,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new os(1,1,{minFilter:Hi,magFilter:Hi,depthBuffer:!1,type:Zs}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const l=this.resolution=new Oa(this,s,a,e);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(i,e=Yf){this.fullscreenMaterial.depthBuffer=i,this.fullscreenMaterial.depthPacking=e}render(i,e,t,n,s){i.setRenderTarget(this.renderToScreen?null:this.renderTarget),i.render(this.scene,this.camera)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(i,e)}initialize(i,e,t){const n=i.getContext();if(!(n.getExtension("EXT_color_buffer_float")||n.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},Hk=`#include <packing>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
uniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));
#if __VERSION__ < 300
float l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#else
float l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#endif
l0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}`,Vk=class extends ls{constructor(){super({name:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new rn(null),luminanceBuffer1:new rn(null),minLuminance:new rn(.01),deltaTime:new rn(0),tau:new rn(1)},extensions:{shaderTextureLOD:!0},blending:da,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Hk,vertexShader:RT})}set luminanceBuffer0(i){this.uniforms.luminanceBuffer0.value=i}setLuminanceBuffer0(i){this.uniforms.luminanceBuffer0.value=i}set luminanceBuffer1(i){this.uniforms.luminanceBuffer1.value=i}setLuminanceBuffer1(i){this.uniforms.luminanceBuffer1.value=i}set mipLevel1x1(i){this.defines.MIP_LEVEL_1X1=i.toFixed(1),this.needsUpdate=!0}setMipLevel1x1(i){this.mipLevel1x1=i}set deltaTime(i){this.uniforms.deltaTime.value=i}setDeltaTime(i){this.uniforms.deltaTime.value=i}get minLuminance(){return this.uniforms.minLuminance.value}set minLuminance(i){this.uniforms.minLuminance.value=i}getMinLuminance(){return this.uniforms.minLuminance.value}setMinLuminance(i){this.uniforms.minLuminance.value=i}get adaptationRate(){return this.uniforms.tau.value}set adaptationRate(i){this.uniforms.tau.value=i}getAdaptationRate(){return this.uniforms.tau.value}setAdaptationRate(i){this.uniforms.tau.value=i}},kk=class extends or{constructor(i,{minLuminance:e=.01,adaptationRate:t=1}={}){super("AdaptiveLuminancePass"),this.fullscreenMaterial=new Vk,this.needsSwap=!1,this.renderTargetPrevious=new os(1,1,{minFilter:Hi,magFilter:Hi,depthBuffer:!1}),this.renderTargetPrevious.texture.name="Luminance.Previous";const n=this.fullscreenMaterial;n.luminanceBuffer0=this.renderTargetPrevious.texture,n.luminanceBuffer1=i,n.minLuminance=e,n.adaptationRate=t,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.copyPass=new AU(this.renderTargetPrevious,!1)}get texture(){return this.renderTargetAdapted.texture}getTexture(){return this.renderTargetAdapted.texture}set mipLevel1x1(i){this.fullscreenMaterial.mipLevel1x1=i}get adaptationRate(){return this.fullscreenMaterial.adaptationRate}set adaptationRate(i){this.fullscreenMaterial.adaptationRate=i}render(i,e,t,n,s){this.fullscreenMaterial.deltaTime=n,i.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),i.render(this.scene,this.camera),this.copyPass.render(i,this.renderTargetAdapted)}},Xk=`#include <tonemapping_pars_fragment>
uniform float whitePoint;
#if TONE_MAPPING_MODE == 2 || TONE_MAPPING_MODE == 3
uniform float middleGrey;
#if TONE_MAPPING_MODE == 3
uniform lowp sampler2D luminanceBuffer;
#else
uniform float averageLuminance;
#endif
vec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);
#if TONE_MAPPING_MODE == 3
float lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));
#else
float lumAvg=averageLuminance;
#endif
float lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}
#elif TONE_MAPPING_MODE == 4
#define A 0.15
#define B 0.50
#define C 0.10
#define D 0.20
#define E 0.02
#define F 0.30
vec3 Uncharted2Helper(const in vec3 x){return((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}vec3 Uncharted2ToneMapping(vec3 color){color*=toneMappingExposure;return clamp(Uncharted2Helper(color)/Uncharted2Helper(vec3(whitePoint)),0.0,1.0);}
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#if TONE_MAPPING_MODE == 2 || TONE_MAPPING_MODE == 3
outputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);
#elif TONE_MAPPING_MODE == 4
outputColor=vec4(Uncharted2ToneMapping(inputColor.rgb),inputColor.a);
#else
outputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);
#endif
}`,jk=class extends Hm{constructor({blendFunction:i=Mn.SRC,adaptive:e=!1,mode:t=e?Jr.REINHARD2_ADAPTIVE:Jr.AGX,resolution:n=256,maxLuminance:s=4,whitePoint:a=s,middleGrey:r=.6,minLuminance:l=.01,averageLuminance:c=1,adaptationRate:f=1}={}){super("ToneMappingEffect",Xk,{blendFunction:i,uniforms:new Map([["luminanceBuffer",new rn(null)],["maxLuminance",new rn(s)],["whitePoint",new rn(a)],["middleGrey",new rn(r)],["averageLuminance",new rn(c)]])}),this.renderTargetLuminance=new os(1,1,{minFilter:to,depthBuffer:!1}),this.renderTargetLuminance.texture.generateMipmaps=!0,this.renderTargetLuminance.texture.name="Luminance",this.luminancePass=new bU({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new kk(this.luminancePass.texture,{minLuminance:l,adaptationRate:f}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.resolution=n,this.mode=t}get mode(){return Number(this.defines.get("TONE_MAPPING_MODE"))}set mode(i){if(this.mode===i)return;const t=jf.replace(/\D+/g,"")>=168?"CineonToneMapping(texel)":"OptimizedCineonToneMapping(texel)";switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",i.toFixed(0)),i){case Jr.LINEAR:this.defines.set("toneMapping(texel)","LinearToneMapping(texel)");break;case Jr.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case Jr.CINEON:case Jr.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)",t);break;case Jr.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;case Jr.AGX:this.defines.set("toneMapping(texel)","AgXToneMapping(texel)");break;case Jr.NEUTRAL:this.defines.set("toneMapping(texel)","NeutralToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel");break}this.adaptiveLuminancePass.enabled=i===Jr.REINHARD2_ADAPTIVE,this.setChanged()}getMode(){return this.mode}setMode(i){this.mode=i}get whitePoint(){return this.uniforms.get("whitePoint").value}set whitePoint(i){this.uniforms.get("whitePoint").value=i}get middleGrey(){return this.uniforms.get("middleGrey").value}set middleGrey(i){this.uniforms.get("middleGrey").value=i}get averageLuminance(){return this.uniforms.get("averageLuminance").value}set averageLuminance(i){this.uniforms.get("averageLuminance").value=i}get adaptiveLuminanceMaterial(){return this.adaptiveLuminancePass.fullscreenMaterial}getAdaptiveLuminanceMaterial(){return this.adaptiveLuminanceMaterial}get resolution(){return this.luminancePass.resolution.width}set resolution(i){const e=Math.max(0,Math.ceil(Math.log2(i))),t=Math.pow(2,e);this.luminancePass.resolution.setPreferredSize(t,t),this.adaptiveLuminanceMaterial.mipLevel1x1=e}getResolution(){return this.resolution}setResolution(i){this.resolution=i}get adaptive(){return this.mode===Jr.REINHARD2_ADAPTIVE}set adaptive(i){this.mode=i?Jr.REINHARD2_ADAPTIVE:Jr.REINHARD2}get adaptationRate(){return this.adaptiveLuminanceMaterial.adaptationRate}set adaptationRate(i){this.adaptiveLuminanceMaterial.adaptationRate=i}get distinction(){return console.warn(this.name,"distinction was removed."),1}set distinction(i){console.warn(this.name,"distinction was removed.")}update(i,e,t){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(i,e),this.adaptiveLuminancePass.render(i,null,null,t))}initialize(i,e,t){this.adaptiveLuminancePass.initialize(i,e,t)}},Yk=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,Wk=class extends Hm{constructor({blendFunction:i,eskil:e=!1,technique:t=e?Lg.ESKIL:Lg.DEFAULT,offset:n=.5,darkness:s=.5}={}){super("VignetteEffect",Yk,{blendFunction:i,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new rn(n)],["darkness",new rn(s)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(i){this.technique!==i&&(this.defines.set("VIGNETTE_TECHNIQUE",i.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Lg.ESKIL}set eskil(i){this.technique=i?Lg.ESKIL:Lg.DEFAULT}getTechnique(){return this.technique}setTechnique(i){this.technique=i}get offset(){return this.uniforms.get("offset").value}set offset(i){this.uniforms.get("offset").value=i}getOffset(){return this.offset}setOffset(i){this.offset=i}get darkness(){return this.uniforms.get("darkness").value}set darkness(i){this.uniforms.get("darkness").value=i}getDarkness(){return this.darkness}setDarkness(i){this.darkness=i}},qk=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Kk="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Jk=class extends ls{constructor(i,e,t,n,s=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:jf.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new rn(null),depthBuffer:new rn(null),resolution:new rn(new tt),texelSize:new rn(new tt),cameraNear:new rn(.3),cameraFar:new rn(1e3),aspect:new rn(1),time:new rn(0)},blending:da,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:s}),i&&this.setShaderParts(i),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(n)}set inputBuffer(i){this.uniforms.inputBuffer.value=i}setInputBuffer(i){this.uniforms.inputBuffer.value=i}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(i){this.uniforms.depthBuffer.value=i}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(i){this.defines.DEPTH_PACKING=i.toFixed(0),this.needsUpdate=!0}setDepthBuffer(i,e=Yf){this.depthBuffer=i,this.depthPacking=e}setShaderData(i){this.setShaderParts(i.shaderParts),this.setDefines(i.defines),this.setUniforms(i.uniforms),this.setExtensions(i.extensions)}setShaderParts(i){return this.fragmentShader=qk.replace(Jn.FRAGMENT_HEAD,i.get(Jn.FRAGMENT_HEAD)||"").replace(Jn.FRAGMENT_MAIN_UV,i.get(Jn.FRAGMENT_MAIN_UV)||"").replace(Jn.FRAGMENT_MAIN_IMAGE,i.get(Jn.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Kk.replace(Jn.VERTEX_HEAD,i.get(Jn.VERTEX_HEAD)||"").replace(Jn.VERTEX_MAIN_SUPPORT,i.get(Jn.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(i){for(const e of i.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(i){for(const e of i.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(i){this.extensions={};for(const e of i)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(i){this.encodeOutput!==i&&(i?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(i){return this.encodeOutput}setOutputEncodingEnabled(i){this.encodeOutput=i}get time(){return this.uniforms.time.value}set time(i){this.uniforms.time.value=i}setDeltaTime(i){this.uniforms.time.value+=i}adoptCameraSettings(i){this.copyCameraSettings(i)}copyCameraSettings(i){i&&(this.uniforms.cameraNear.value=i.near,this.uniforms.cameraFar.value=i.far,i instanceof Ji?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(i,e){const t=this.uniforms;t.resolution.value.set(i,e),t.texelSize.value.set(1/i,1/e),t.aspect.value=i/e}static get Section(){return Jn}};function Zw(i,e,t){for(const n of e){const s="$1"+i+n.charAt(0).toUpperCase()+n.slice(1),a=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(const r of t.entries())r[1]!==null&&t.set(r[0],r[1].replace(a,s))}}function Zk(i,e,t){let n=e.getFragmentShader(),s=e.getVertexShader();const a=n!==void 0&&/mainImage/.test(n),r=n!==void 0&&/mainUv/.test(n);if(t.attributes|=e.getAttributes(),n===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(r&&(t.attributes&Ed.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!a&&!r)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const l=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,c=t.shaderParts;let f=c.get(Jn.FRAGMENT_HEAD)||"",d=c.get(Jn.FRAGMENT_MAIN_UV)||"",g=c.get(Jn.FRAGMENT_MAIN_IMAGE)||"",v=c.get(Jn.VERTEX_HEAD)||"",y=c.get(Jn.VERTEX_MAIN_SUPPORT)||"";const S=new Set,A=new Set;if(r&&(d+=`	${i}MainUv(UV);
`,t.uvTransformation=!0),s!==null&&/mainSupport/.test(s)){const C=/mainSupport *\([\w\s]*?uv\s*?\)/.test(s);y+=`	${i}MainSupport(`,y+=C?`vUv);
`:`);
`;for(const w of s.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const R of w[1].split(/\s*,\s*/))t.varyings.add(R),S.add(R),A.add(R);for(const w of s.matchAll(l))A.add(w[1])}for(const C of n.matchAll(l))A.add(C[1]);for(const C of e.defines.keys())A.add(C.replace(/\([\w\s,]*\)/g,""));for(const C of e.uniforms.keys())A.add(C);A.delete("while"),A.delete("for"),A.delete("if"),e.uniforms.forEach((C,w)=>t.uniforms.set(i+w.charAt(0).toUpperCase()+w.slice(1),C)),e.defines.forEach((C,w)=>t.defines.set(i+w.charAt(0).toUpperCase()+w.slice(1),C));const M=new Map([["fragment",n],["vertex",s]]);Zw(i,A,t.defines),Zw(i,A,M),n=M.get("fragment"),s=M.get("vertex");const b=e.blendMode;if(t.blendModes.set(b.blendFunction,b),a){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(g+=e.inputColorSpace===Zn?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==Ul?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const C=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;g+=`${i}MainImage(color0, UV, `,(t.attributes&Ed.DEPTH)!==0&&C.test(n)&&(g+="depth, ",t.readDepth=!0),g+=`color1);
	`;const w=i+"BlendOpacity";t.uniforms.set(w,b.opacity),g+=`color0 = blend${b.blendFunction}(color0, color1, ${w});

	`,f+=`uniform float ${w};

`}if(f+=n+`
`,s!==null&&(v+=s+`
`),c.set(Jn.FRAGMENT_HEAD,f),c.set(Jn.FRAGMENT_MAIN_UV,d),c.set(Jn.FRAGMENT_MAIN_IMAGE,g),c.set(Jn.VERTEX_HEAD,v),c.set(Jn.VERTEX_MAIN_SUPPORT,y),e.extensions!==null)for(const C of e.extensions)t.extensions.add(C)}}var Qk=class extends or{constructor(i,...e){super("EffectPass"),this.fullscreenMaterial=new Jk(null,null,null,i),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(i){for(const e of this.effects)e.mainScene=i}set mainCamera(i){this.fullscreenMaterial.copyCameraSettings(i);for(const e of this.effects)e.mainCamera=i}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(i){this.fullscreenMaterial.encodeOutput=i}get dithering(){return this.fullscreenMaterial.dithering}set dithering(i){const e=this.fullscreenMaterial;e.dithering=i,e.needsUpdate=!0}setEffects(i){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=i.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const i=new FV;let e=0;for(const r of this.effects)if(r.blendMode.blendFunction===Mn.DST)i.attributes|=r.getAttributes()&Ed.DEPTH;else{if((i.attributes&r.getAttributes()&Ed.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${r.name})`);Zk("e"+e++,r,i)}let t=i.shaderParts.get(Jn.FRAGMENT_HEAD),n=i.shaderParts.get(Jn.FRAGMENT_MAIN_IMAGE),s=i.shaderParts.get(Jn.FRAGMENT_MAIN_UV);const a=/\bblend\b/g;for(const r of i.blendModes.values())t+=r.getShaderCode().replace(a,`blend${r.blendFunction}`)+`
`;(i.attributes&Ed.DEPTH)!==0?(i.readDepth&&(n=`float depth = readDepth(UV);

	`+n),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,i.colorSpace===Zn&&(n+=`color0 = sRGBToLinear(color0);
	`),i.uvTransformation?(s=`vec2 transformedUv = vUv;
`+s,i.defines.set("UV","transformedUv")):i.defines.set("UV","vUv"),i.shaderParts.set(Jn.FRAGMENT_HEAD,t),i.shaderParts.set(Jn.FRAGMENT_MAIN_IMAGE,n),i.shaderParts.set(Jn.FRAGMENT_MAIN_UV,s);for(const[r,l]of i.shaderParts)l!==null&&i.shaderParts.set(r,l.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(i)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(i,e=Yf){this.fullscreenMaterial.depthBuffer=i,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(i,e)}render(i,e,t,n,s){for(const a of this.effects)a.update(i,e,n);if(!this.skipRendering||this.renderToScreen){const a=this.fullscreenMaterial;a.inputBuffer=e.texture,a.time+=n*this.timeScale,i.setRenderTarget(this.renderToScreen?null:t),i.render(this.scene,this.camera)}}setSize(i,e){this.fullscreenMaterial.setSize(i,e);for(const t of this.effects)t.setSize(i,e)}initialize(i,e,t){this.renderer=i;for(const n of this.effects)n.initialize(i,e,t);this.updateMaterial(),t!==void 0&&t!==Gs&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const i of this.effects)i.removeEventListener("change",this.listener),i.dispose()}handleEvent(i){switch(i.type){case"change":this.recompile();break}}},$k=class extends or{constructor(i,e,{renderTarget:t,resolutionScale:n=1,width:s=Oa.AUTO_SIZE,height:a=Oa.AUTO_SIZE,resolutionX:r=s,resolutionY:l=a}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new TU(i,e,new oT);const c=this.renderPass;c.ignoreBackground=!0,c.skipShadowMapUpdate=!0;const f=c.getClearPass();f.overrideClearColor=new St(7829503),f.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new os(1,1,{minFilter:Hi,magFilter:Hi}),this.renderTarget.texture.name="NormalPass.Target");const d=this.resolution=new Oa(this,r,l,n);d.addEventListener("change",g=>this.setSize(d.baseWidth,d.baseHeight))}set mainScene(i){this.renderPass.mainScene=i}set mainCamera(i){this.renderPass.mainCamera=i}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(i){this.resolution.scale=i}render(i,e,t,n,s){const a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(i,a,a)}setSize(i,e){const t=this.resolution;t.setBaseSize(i,e),this.renderTarget.setSize(t.width,t.height)}};function iv(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}new tt;new tt;function EU(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}var Lo=function i(e,t,n){var s=this;EU(this,i),iv(this,"dot2",function(a,r){return s.x*a+s.y*r}),iv(this,"dot3",function(a,r,l){return s.x*a+s.y*r+s.z*l}),this.x=e,this.y=t,this.z=n},eX=[new Lo(1,1,0),new Lo(-1,1,0),new Lo(1,-1,0),new Lo(-1,-1,0),new Lo(1,0,1),new Lo(-1,0,1),new Lo(1,0,-1),new Lo(-1,0,-1),new Lo(0,1,1),new Lo(0,-1,1),new Lo(0,1,-1),new Lo(0,-1,-1)],Qw=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],$w=new Array(512),eR=new Array(512),tX=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;t&1?n=Qw[t]^e&255:n=Qw[t]^e>>8&255,$w[t]=$w[t+256]=n,eR[t]=eR[t+256]=eX[n%12]}};tX(0);function nX(i){if(typeof i=="number")i=Math.abs(i);else if(typeof i=="string"){var e=i;i=0;for(var t=0;t<e.length;t++)i=(i+(t+1)*(e.charCodeAt(t)%96))%2147483647}return i===0&&(i=311),i}function tR(i){var e=nX(i);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var iX=function i(e){var t=this;EU(this,i),iv(this,"seed",0),iv(this,"init",function(n){t.seed=n,t.value=tR(n)}),iv(this,"value",tR(this.seed)),this.init(e)};new iX(Math.random());const sX=ge.createContext(null),nR=i=>(i.getAttributes()&2)===2,aX=ge.memo(ge.forwardRef(({children:i,camera:e,scene:t,resolutionScale:n,enabled:s=!0,renderPriority:a=1,autoClear:r=!0,depthBuffer:l,enableNormalPass:c,stencilBuffer:f,multisampling:d=8,frameBufferType:g=Ll},v)=>{const{gl:y,scene:S,camera:A,size:M}=Er(),b=t||S,C=e||A,[w,R,U]=ge.useMemo(()=>{const P=new IV(y,{depthBuffer:l,stencilBuffer:f,multisampling:d,frameBufferType:g});P.addPass(new TU(b,C));let N=null,L=null;return c&&(L=new $k(b,C),L.enabled=!1,P.addPass(L),n!==void 0&&(N=new Gk({normalBuffer:L.texture,resolutionScale:n}),N.enabled=!1,P.addPass(N))),[P,L,N]},[C,y,l,f,d,g,b,c,n]);ge.useEffect(()=>w?.setSize(M.width,M.height),[w,M]),Oc((P,N)=>{if(s){const L=y.autoClear;y.autoClear=r,f&&!r&&y.clearStencil(),w.render(N),y.autoClear=L}},s?a:0);const O=ge.useRef(null);ge.useLayoutEffect(()=>{const P=[],N=O.current.__r3f;if(N&&w){const L=N.children;for(let k=0;k<L.length;k++){const X=L[k].object;if(X instanceof Hm){const W=[X];if(!nR(X)){let ce=null;for(;(ce=L[k+1]?.object)instanceof Hm&&!nR(ce);)W.push(ce),k++}const $=new Qk(C,...W);P.push($)}else X instanceof or&&P.push(X)}for(const k of P)w?.addPass(k);R&&(R.enabled=!0),U&&(U.enabled=!0)}return()=>{for(const L of P)w?.removePass(L);R&&(R.enabled=!1),U&&(U.enabled=!1)}},[w,i,C,R,U]),ge.useEffect(()=>{const P=y.toneMapping;return y.toneMapping=Nl,()=>{y.toneMapping=P}},[y]);const I=ge.useMemo(()=>({composer:w,normalPass:R,downSamplingPass:U,resolutionScale:n,camera:C,scene:b}),[w,R,U,n,C,b]);return ge.useImperativeHandle(v,()=>w,[w]),oe.jsx(sX.Provider,{value:I,children:oe.jsx("group",{ref:O,children:i})})}));let rX=0;const iR=new WeakMap,GS=(i,e)=>function({blendFunction:t=e?.blendFunction,opacity:n=e?.opacity,...s}){let a=iR.get(i);if(!a){const c=`@react-three/postprocessing/${i.name}-${rX++}`;q4({[c]:i}),iR.set(i,a=c)}const r=Er(c=>c.camera),l=j_.useMemo(()=>[...e?.args??[],...s.args??[{...e,...s}]],[JSON.stringify(s)]);return oe.jsx(a,{camera:r,"blendMode-blendFunction":t,"blendMode-opacity-value":n,...s,args:l})},oX=GS(Ok,{blendFunction:0}),lX=GS(Pk,{blendFunction:5}),sR=GS(jk),cX=GS(Wk);function uX(){return oe.jsxs(aX,{multisampling:8,children:[oe.jsx(oX,{luminanceThreshold:.1,luminanceSmoothing:3,intensity:2,radius:.1}),oe.jsx(lX,{opacity:.3,premultiply:!0}),oe.jsx(sR,{mode:sR.ACESFilmicToneMapping}),oe.jsx(cX,{eskil:!1,offset:.2,darkness:.5})]})}const fX=ge.forwardRef(({position:i=[0,0,0],scale:e=[100,100,100],inclination:t=23.5},n)=>{const s=ge.useRef(),a=ge.useRef(),r=Jf(Qv,"import.meta.env.BASE_URL + textures/lensflare/lensflare7.png");return ge.useImperativeHandle(n,()=>({get position(){return s.current?.position}})),oe.jsxs("group",{ref:s,position:i,rotation:[ko.degToRad(t),0,0],children:[oe.jsxs("sprite",{scale:e,children:[" // Sprite to render the sun texture",oe.jsx("spriteMaterial",{map:r,color:new St("#ffffaa"),emissive:new St("#ffff00"),emissiveIntensity:5,depthWrite:!1,transparent:!0})]}),oe.jsx("directionalLight",{ref:a,intensity:3,color:"#ffffff",castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,position:[5,5,5]})]})}),hX=new Qv;function dX({hasFog:i,color:e,opacity:t,path:n,pos:s,size:a}){const r=new dS({color:e,fog:i,map:hX.load(n),transparent:!0,opacity:t});r.color.offsetHSL(0,0,Math.random()*.2-.1);const l=new Jb(r);return l.position.set(s.x,-s.y,s.z),a+=Math.random()-.5,l.scale.set(a,a,a),l.material.rotation=0,l}function pX({hasFog:i=!0,hue:e=.65,numSprites:t=8,opacity:n=.2,path:s="import.meta.env.BASE_URL + 'textures/others/rad-grad.png",radius:a=10,sat:r=.5,size:l=24,z:c=0}={}){const f=new Tc;for(let d=0;d<t;d+=1){let g=d/t*Math.PI*2;const v=new le(Math.cos(g)*Math.random()*a,Math.sin(g)*Math.random()*a,c+Math.random());let y=new St().setHSL(e,1,r);const S=dX({hasFog:i,color:y,opacity:n,path:s,pos:v,size:l});f.add(S)}return f}function mX(){const i=ge.useMemo(()=>pX({numSprites:8,radius:10,z:0,size:16,opacity:.009,path:"import.meta.env.BASE_URL + 'textures/others/rad-grad.png"}),[]);return oe.jsx("primitive",{object:i})}class gX extends f4{constructor(e){super(e),this.type=Ll}parse(e){const r=function(P,N){switch(P){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(N||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(N||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(N||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(N||""))}},d=`
`,g=function(P,N,L){N=N||1024;let X=P.pos,W=-1,$=0,ce="",z=String.fromCharCode.apply(null,new Uint16Array(P.subarray(X,X+128)));for(;0>(W=z.indexOf(d))&&$<N&&X<P.byteLength;)ce+=z,$+=z.length,X+=128,z+=String.fromCharCode.apply(null,new Uint16Array(P.subarray(X,X+128)));return-1<W?(P.pos+=$+W+1,ce+z.slice(0,W)):!1},v=function(P){const N=/^#\?(\S+)/,L=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,k=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,X=/^\s*FORMAT=(\S+)\s*$/,W=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,$={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ce,z;for((P.pos>=P.byteLength||!(ce=g(P)))&&r(1,"no header found"),(z=ce.match(N))||r(3,"bad initial token"),$.valid|=1,$.programtype=z[1],$.string+=ce+`
`;ce=g(P),ce!==!1;){if($.string+=ce+`
`,ce.charAt(0)==="#"){$.comments+=ce+`
`;continue}if((z=ce.match(L))&&($.gamma=parseFloat(z[1])),(z=ce.match(k))&&($.exposure=parseFloat(z[1])),(z=ce.match(X))&&($.valid|=2,$.format=z[1]),(z=ce.match(W))&&($.valid|=4,$.height=parseInt(z[1],10),$.width=parseInt(z[2],10)),$.valid&2&&$.valid&4)break}return $.valid&2||r(3,"missing format specifier"),$.valid&4||r(3,"missing image size specifier"),$},y=function(P,N,L){const k=N;if(k<8||k>32767||P[0]!==2||P[1]!==2||P[2]&128)return new Uint8Array(P);k!==(P[2]<<8|P[3])&&r(3,"wrong scanline width");const X=new Uint8Array(4*N*L);X.length||r(4,"unable to allocate buffer space");let W=0,$=0;const ce=4*k,z=new Uint8Array(4),q=new Uint8Array(ce);let Q=L;for(;Q>0&&$<P.byteLength;){$+4>P.byteLength&&r(1),z[0]=P[$++],z[1]=P[$++],z[2]=P[$++],z[3]=P[$++],(z[0]!=2||z[1]!=2||(z[2]<<8|z[3])!=k)&&r(3,"bad rgbe scanline format");let re=0,H;for(;re<ce&&$<P.byteLength;){H=P[$++];const K=H>128;if(K&&(H-=128),(H===0||re+H>ce)&&r(3,"bad scanline data"),K){const se=P[$++];for(let J=0;J<H;J++)q[re++]=se}else q.set(P.subarray($,$+H),re),re+=H,$+=H}const G=k;for(let K=0;K<G;K++){let se=0;X[W]=q[K+se],se+=k,X[W+1]=q[K+se],se+=k,X[W+2]=q[K+se],se+=k,X[W+3]=q[K+se],W+=4}Q--}return X},S=function(P,N,L,k){const X=P[N+3],W=Math.pow(2,X-128)/255;L[k+0]=P[N+0]*W,L[k+1]=P[N+1]*W,L[k+2]=P[N+2]*W,L[k+3]=1},A=function(P,N,L,k){const X=P[N+3],W=Math.pow(2,X-128)/255;L[k+0]=Ig.toHalfFloat(Math.min(P[N+0]*W,65504)),L[k+1]=Ig.toHalfFloat(Math.min(P[N+1]*W,65504)),L[k+2]=Ig.toHalfFloat(Math.min(P[N+2]*W,65504)),L[k+3]=Ig.toHalfFloat(1)},M=new Uint8Array(e);M.pos=0;const b=v(M),C=b.width,w=b.height,R=y(M.subarray(M.pos),C,w);let U,O,I;switch(this.type){case Zs:I=R.length/4;const P=new Float32Array(I*4);for(let L=0;L<I;L++)S(R,L*4,P,L*4);U=P,O=Zs;break;case Ll:I=R.length/4;const N=new Uint16Array(I*4);for(let L=0;L<I;L++)A(R,L*4,N,L*4);U=N,O=Ll;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:C,height:w,data:U,header:b.string,gamma:b.gamma,exposure:b.exposure,type:O}}setDataType(e){return this.type=e,this}load(e,t,n,s){function a(r,l){switch(r.type){case Zs:case Ll:r.colorSpace=Pl,r.minFilter=ti,r.magFilter=ti,r.generateMipmaps=!1,r.flipY=!0;break}t&&t(r,l)}return super.load(e,a,n,s)}}function vX({hdriURL:i="import.meta.env.BASE_URL + textures/hdri/hdri_1.hdr",speed:e=.001}){const t=ge.useRef(),{camera:n}=Er(),s=Jf(gX,i);return ge.useMemo(()=>(s.mapping=Rm,s.magFilter=ti,s.minFilter=vB,new La({map:s,side:vs,depthWrite:!1})),[s]),Oc((a,r)=>{t.current&&(t.current.position.copy(n.position),t.current.rotation.y+=r*e)}),oe.jsxs("mesh",{ref:t,scale:100,children:[oe.jsx("sphereGeometry",{args:[1,60,40]}),oe.jsx("meshBasicMaterial",{map:s,side:vs,depthWrite:!1})]})}function yX(i,e,t,n=8){const s=new Lf,a=-i/2,r=-e/2;return s.moveTo(a+t,r),s.lineTo(a+i-t,r),s.quadraticCurveTo(a+i,r,a+i,r+t),s.lineTo(a+i,r+e-t),s.quadraticCurveTo(a+i,r+e,a+i-t,r+e),s.lineTo(a+t,r+e),s.quadraticCurveTo(a,r+e,a,r+e-t),s.lineTo(a,r+t),s.quadraticCurveTo(a,r,a+t,r),new Kv(s,32)}const aR=[{name:"Paris",lat:48.8566,lon:2.3522,flag:"fr",flagUrl:"https://flagcdn.com/w40/fr.png"},{name:"Berlin",lat:52.52,lon:13.405,flag:"de",flagUrl:"https://flagcdn.com/w40/de.png"},{name:"Madrid",lat:40.4168,lon:-3.7038,flag:"es",flagUrl:"https://flagcdn.com/w40/es.png"},{name:"Rome",lat:41.9028,lon:12.4964,flag:"it",flagUrl:"https://flagcdn.com/w40/it.png"},{name:"Budapest",lat:47.4979,lon:19.0402,flag:"hu",flagUrl:"https://flagcdn.com/w40/hu.png"},{name:"Istanbul",lat:41.0082,lon:28.9784,flag:"tr",flagUrl:"https://flagcdn.com/w40/tr.png"},{name:"Moscow",lat:55.7558,lon:37.6173,flag:"ru",flagUrl:"https://flagcdn.com/w40/ru.png"},{name:"Dublin",lat:53.3498,lon:-6.2603,flag:"ie",flagUrl:"https://flagcdn.com/w40/ie.png"},{name:"Oslo",lat:59.9139,lon:10.7522,flag:"no",flagUrl:"https://flagcdn.com/w40/no.png"},{name:"Helsinki",lat:60.1695,lon:24.9354,flag:"fi",flagUrl:"https://flagcdn.com/w40/fi.png"},{name:"Kyiv",lat:50.4501,lon:30.5234,flag:"ua",flagUrl:"https://flagcdn.com/w40/ua.png"},{name:"Reykjavik",lat:64.1265,lon:-21.8174,flag:"is",flagUrl:"https://flagcdn.com/w40/is.png"},{name:"Athens",lat:37.9838,lon:23.7275,flag:"gr",flagUrl:"https://flagcdn.com/w40/gr.png"},{name:"Trshavn",lat:62.0079,lon:-6.79,flag:"fo",flagUrl:"https://flagcdn.com/w40/fo.png"},{name:"Jan Mayen",lat:70.9333,lon:-8.6667,flag:"sj",flagUrl:"https://flagcdn.com/w40/sj.png"},{name:"Dakar",lat:14.7167,lon:-17.4677,flag:"sn",flagUrl:"https://flagcdn.com/w40/sn.png"},{name:"Abidjan",lat:5.3453,lon:-4.0244,flag:"ci",flagUrl:"https://flagcdn.com/w40/ci.png"},{name:"Yaound",lat:3.848,lon:11.5021,flag:"cm",flagUrl:"https://flagcdn.com/w40/cm.png"},{name:"Kinshasa",lat:-4.4419,lon:15.2663,flag:"cd",flagUrl:"https://flagcdn.com/w40/cd.png"},{name:"Addis Ababa",lat:9.03,lon:38.74,flag:"et",flagUrl:"https://flagcdn.com/w40/et.png"},{name:"Nairobi",lat:-1.2921,lon:36.8219,flag:"ke",flagUrl:"https://flagcdn.com/w40/ke.png"},{name:"Harare",lat:-17.8252,lon:31.0335,flag:"zw",flagUrl:"https://flagcdn.com/w40/zw.png"},{name:"Johannesburg",lat:-26.2041,lon:28.0473,flag:"za",flagUrl:"https://flagcdn.com/w40/za.png"},{name:"Windhoek",lat:-22.5609,lon:17.0658,flag:"na",flagUrl:"https://flagcdn.com/w40/na.png"},{name:"Khartoum",lat:15.5007,lon:32.5599,flag:"sd",flagUrl:"https://flagcdn.com/w40/sd.png"},{name:"Tunis",lat:36.8065,lon:10.1815,flag:"tn",flagUrl:"https://flagcdn.com/w40/tn.png"},{name:"Casablanca",lat:33.5731,lon:-7.5898,flag:"ma",flagUrl:"https://flagcdn.com/w40/ma.png"},{name:"Cairo",lat:30.0444,lon:31.2357,flag:"eg",flagUrl:"https://flagcdn.com/w40/eg.png"},{name:"Conakry",lat:9.6412,lon:-13.5784,flag:"gn",flagUrl:"https://flagcdn.com/w40/gn.png"},{name:"Bamako",lat:12.6392,lon:-8.0029,flag:"ml",flagUrl:"https://flagcdn.com/w40/ml.png"},{name:"Moroni",lat:-11.6986,lon:43.2545,flag:"km",flagUrl:"https://flagcdn.com/w40/km.png"},{name:"Cape Town",lat:-33.9249,lon:18.4241,flag:"za",flagUrl:"https://flagcdn.com/w40/za.png"},{name:"Lubumbashi",lat:-11.687,lon:27.485,flag:"cd",flagUrl:"https://flagcdn.com/w40/cd.png"},{name:"Benghazi",lat:32.1167,lon:20.0667,flag:"ly",flagUrl:"https://flagcdn.com/w40/ly.png"},{name:"Abuja",lat:9.0579,lon:7.4951,flag:"ng",flagUrl:"https://flagcdn.com/w40/ng.png"},{name:"N'Djamena",lat:12.1348,lon:15.0557,flag:"td",flagUrl:"https://flagcdn.com/w40/td.png"},{name:"Juba",lat:4.8594,lon:31.5713,flag:"ss",flagUrl:"https://flagcdn.com/w40/ss.png"},{name:"Antananarivo",lat:-18.8792,lon:47.5079,flag:"mg",flagUrl:"https://flagcdn.com/w40/mg.png"},{name:"Port Louis",lat:-20.1609,lon:57.5012,flag:"mu",flagUrl:"https://flagcdn.com/w40/mu.png"},{name:"Beirut",lat:33.8938,lon:35.5018,flag:"lb",flagUrl:"https://flagcdn.com/w40/lb.png"},{name:"Jeddah",lat:21.4858,lon:39.1925,flag:"sa",flagUrl:"https://flagcdn.com/w40/sa.png"},{name:"Mumbai",lat:19.076,lon:72.8777,flag:"in",flagUrl:"https://flagcdn.com/w40/in.png"},{name:"Colombo",lat:6.9271,lon:79.8612,flag:"lk",flagUrl:"https://flagcdn.com/w40/lk.png"},{name:"Nagpur",lat:21.1458,lon:79.0882,flag:"in",flagUrl:"https://flagcdn.com/w40/in.png"},{name:"Kolkata",lat:22.5726,lon:88.3639,flag:"in",flagUrl:"https://flagcdn.com/w40/in.png"},{name:"Naypyidaw",lat:19.7633,lon:96.0785,flag:"mm",flagUrl:"https://flagcdn.com/w40/mm.png"},{name:"Hanoi",lat:21.0285,lon:105.8542,flag:"vn",flagUrl:"https://flagcdn.com/w40/vn.png"},{name:"Balikpapan",lat:-1.2692,lon:116.8253,flag:"id",flagUrl:"https://flagcdn.com/w40/id.png"},{name:"Makassar",lat:-5.1477,lon:119.4327,flag:"id",flagUrl:"https://flagcdn.com/w40/id.png"},{name:"Manado",lat:1.4748,lon:124.8421,flag:"id",flagUrl:"https://flagcdn.com/w40/id.png"},{name:"Dili",lat:-8.5569,lon:125.5603,flag:"tl",flagUrl:"https://flagcdn.com/w40/tl.png"},{name:"Denpasar",lat:-8.6705,lon:115.2126,flag:"id",flagUrl:"https://flagcdn.com/w40/id.png"},{name:"Phnom Penh",lat:11.5564,lon:104.9282,flag:"kh",flagUrl:"https://flagcdn.com/w40/kh.png"},{name:"Kuala Lumpur",lat:3.139,lon:101.6869,flag:"my",flagUrl:"https://flagcdn.com/w40/my.png"},{name:"Jakarta",lat:-6.2088,lon:106.8456,flag:"id",flagUrl:"https://flagcdn.com/w40/id.png"},{name:"Alice Springs",lat:-23.698,lon:133.8807,flag:"au",flagUrl:"https://flagcdn.com/w40/au.png"},{name:"Broome",lat:-17.9614,lon:122.2359,flag:"au",flagUrl:"https://flagcdn.com/w40/au.png"},{name:"Cairns",lat:-16.9186,lon:145.7781,flag:"au",flagUrl:"https://flagcdn.com/w40/au.png"},{name:"Dunedin",lat:-45.8742,lon:170.5036,flag:"nz",flagUrl:"https://flagcdn.com/w40/nz.png"},{name:"Wallis et Futuna",lat:-13.3,lon:-176.2,flag:"wf",flagUrl:"https://flagcdn.com/w40/wf.png"},{name:"Marshall Islands",lat:7.1315,lon:171.1845,flag:"mh",flagUrl:"https://flagcdn.com/w40/mh.png"},{name:"Northern Mariana Islands",lat:15.0979,lon:145.6739,flag:"mp",flagUrl:"https://flagcdn.com/w40/mp.png"},{name:"Kiribati",lat:1.8709,lon:-157.363,flag:"ki",flagUrl:"https://flagcdn.com/w40/ki.png"},{name:"Hanga Roa",lat:-27.1526,lon:-109.431,flag:"cl",flagUrl:"https://flagcdn.com/w40/cl.png"},{name:"Pitcairn",lat:-25.066,lon:-130.1,flag:"pn",flagUrl:"https://flagcdn.com/w40/pn.png"},{name:"Galpagos",lat:-.9538,lon:-90.9656,flag:"ec",flagUrl:"https://flagcdn.com/w40/ec.png"},{name:"Azores",lat:37.7412,lon:-25.6756,flag:"pt",flagUrl:"https://flagcdn.com/w40/pt.png"},{name:"Longyearbyen",lat:78.2232,lon:15.6469,flag:"sj",flagUrl:"https://flagcdn.com/w40/sj.png"},{name:"Davis Base",lat:-68.5766,lon:77.9674,flag:"aq",flagUrl:"https://flagcdn.com/w40/aq.png"},{name:"New York",lat:40.7128,lon:-74.006,flag:"us",flagUrl:"https://flagcdn.com/w40/us.png"},{name:"Los Angeles",lat:34.0522,lon:-118.2437,flag:"us",flagUrl:"https://flagcdn.com/w40/us.png"},{name:"Chicago",lat:41.8781,lon:-87.6298,flag:"us",flagUrl:"https://flagcdn.com/w40/us.png"},{name:"Houston",lat:29.7604,lon:-95.3698,flag:"us",flagUrl:"https://flagcdn.com/w40/us.png"},{name:"Vancouver",lat:49.2827,lon:-123.1207,flag:"ca",flagUrl:"https://flagcdn.com/w40/ca.png"},{name:"Montreal",lat:45.5017,lon:-73.5673,flag:"ca",flagUrl:"https://flagcdn.com/w40/ca.png"},{name:"Mexico",lat:19.4326,lon:-99.1332,flag:"mx",flagUrl:"https://flagcdn.com/w40/mx.png"},{name:"Guatemala",lat:14.6349,lon:-90.5069,flag:"gt",flagUrl:"https://flagcdn.com/w40/gt.png"},{name:"San Jos",lat:9.9281,lon:-84.0907,flag:"cr",flagUrl:"https://flagcdn.com/w40/cr.png"},{name:"Bogot",lat:4.711,lon:-74.0721,flag:"co",flagUrl:"https://flagcdn.com/w40/co.png"},{name:"Caracas",lat:10.4806,lon:-66.9036,flag:"ve",flagUrl:"https://flagcdn.com/w40/ve.png"},{name:"Lima",lat:-12.0464,lon:-77.0428,flag:"pe",flagUrl:"https://flagcdn.com/w40/pe.png"},{name:"La Paz",lat:-16.5,lon:-68.15,flag:"bo",flagUrl:"https://flagcdn.com/w40/bo.png"},{name:"Santiago",lat:-33.4489,lon:-70.6693,flag:"cl",flagUrl:"https://flagcdn.com/w40/cl.png"},{name:"Buenos Aires",lat:-34.6037,lon:-58.3816,flag:"ar",flagUrl:"https://flagcdn.com/w40/ar.png"},{name:"Rio de Janeiro",lat:-22.9068,lon:-43.1729,flag:"br",flagUrl:"https://flagcdn.com/w40/br.png"}],b_=Math.PI/180,rR=180/Math.PI;function _X(i,e,t,n){const a=(t-i)*b_,r=(n-e)*b_,l=Math.sin(a/2)**2+Math.cos(i*b_)*Math.cos(t*b_)*Math.sin(r/2)**2;return 6371*(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)))}function xX({city:i,radiusKm:e=500,hours:t=72,onPrediction:n}){return ge.useEffect(()=>{i&&s0().then(([s,a])=>{const r=i0(s,a),l=new Date,c=new Date(l.getTime()+t*60*60*1e3),f=10;let d=[],g=!1,v=null,y=null;for(let S=new Date(l);S<=c;S=new Date(S.getTime()+f*1e3)){const A=t1(r,S);if(!A.position)continue;const M=PS(S),{latitude:b,longitude:C}=ET(A.position,M),w=b*rR,R=C*rR;if(_X(i.lat,i.lon,w,R)<=e)g||(v=new Date(S),g=!0),y=new Date(S);else if(g){const O=(y-v)/6e4;d.push({city:i.name,lat:i.lat,lon:i.lon,start:v,end:y,duration:O,radius:e,found:!0}),g=!1,v=null,y=null}}d.length>0?n(d):n([{city:i.name,found:!1}])}).catch(()=>{n([{city:i.name,found:!1}])})},[i,e,t,n]),null}const ca={baseWidth:.06,baseHeight:.025,radius:.014,padding:.01,baseFontSize:.01,color:"#ffffff",hoverColor:"#ff6b6b",textColor:"#000000",fadeDistance:{near:1,full:2,far:3},minZoomDistance:2,maxZoomDistance:1,minScale:.5,maxScale:2};function SX({earthRadius:i}){const e=ge.useRef(),{camera:t}=Er(),[n,s]=ge.useState(null),[a,r]=ge.useState({}),[l,c]=ge.useState({}),f=ge.useRef(),[d,g]=ge.useState(null),{openCenterPanelWithCity:v,centerPanelCity:y}=Bl(),S=ge.useMemo(()=>yX(ca.baseWidth,ca.baseHeight,ca.radius),[]);return ge.useEffect(()=>{const A=()=>{const M={},b={},C=t.position.length(),{near:w,full:R,far:U}=ca.fadeDistance,O=ko.clamp((C-ca.maxZoomDistance)/(ca.minZoomDistance-ca.maxZoomDistance),0,1),I=ko.lerp(ca.minScale,ca.maxScale,O);[...aR].forEach(N=>{const L=new le(...Ix(N.lat,N.lon,i)),k=t.position.distanceTo(L);let X=0;k<=U?X=1:k<=R?X=1-(k-U)/(R-U):k<=w&&(X=(w-k)/(w-R));const W=t.position.clone().normalize(),$=L.clone().normalize(),ce=W.dot($);ce<0&&(X*=1+ce),M[N.name]=I,b[N.name]=ko.clamp(X,0,1)}),r(M),c(b),f.current=requestAnimationFrame(A)};return f.current=requestAnimationFrame(A),()=>cancelAnimationFrame(f.current)},[i,t]),oe.jsxs("group",{ref:e,layers:1,children:[aR.map(A=>{const M=a[A.name]??ca.minScale,b=l[A.name]??0;if(b<=0)return null;const w=A.name.length*ca.baseFontSize*.5+ca.padding*2,R=n===A.name,U=R?ca.hoverColor:ca.color;return oe.jsx(YM,{position:Ix(A.lat,A.lon,i),layers:1,children:oe.jsxs("group",{scale:[M,M,M],layers:1,children:[oe.jsx("mesh",{geometry:S,scale:[w/ca.baseWidth,1,1],onPointerOver:()=>{s(A.name),document.body.style.cursor="pointer"},onPointerOut:()=>{s(null),document.body.style.cursor="default"},onClick:()=>{console.log(` Calcul du prochain passage au-dessus de ${A.name}...`),s(null),v(A)},children:oe.jsx("meshBasicMaterial",{color:U,transparent:!0,opacity:.9*b,side:ha,depthTest:!0,depthWrite:!0})}),oe.jsx(ZM,{position:[0,0,.001],fontSize:ca.baseFontSize,color:R?"#fff":ca.textColor,anchorX:"center",anchorY:"middle",opacity:b,depthTest:!0,children:A.name})]})},A.name)}),y&&oe.jsx(xX,{city:y,onPrediction:g}),oe.jsx(AX,{prediction:d})]})}function AX({prediction:i}){return ge.useEffect(()=>{if(!i)return;const e=new CustomEvent("iss-pass-prediction",{detail:i});window.dispatchEvent(e)},[i]),null}function mu(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function CU(i,e){i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var so={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Vm={duration:.5,overwrite:!1,delay:0},BT,pa,Fi,Go=1e8,Si=1/Go,$M=Math.PI*2,MX=$M/4,bX=0,wU=Math.sqrt,TX=Math.cos,EX=Math.sin,Qs=function(e){return typeof e=="string"},rs=function(e){return typeof e=="function"},Tu=function(e){return typeof e=="number"},UT=function(e){return typeof e>"u"},Lc=function(e){return typeof e=="object"},Rr=function(e){return e!==!1},LT=function(){return typeof window<"u"},T_=function(e){return rs(e)||Qs(e)},RU=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Pa=Array.isArray,eb=/(?:-?\.?\d|\.)+/gi,DU=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,pm=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,eM=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,BU=/[+-]=-?[.\d]+/,UU=/[^,'"\[\]\s]+/gi,CX=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ki,Mc,tb,OT,lo={},zx={},LU,OU=function(e){return(zx=km(e,lo))&&Lr},NT=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Ev=function(e,t){return!t&&console.warn(e)},NU=function(e,t){return e&&(lo[e]=t)&&zx&&(zx[e]=t)||lo},Cv=function(){return 0},wX={suppressEvents:!0,isStart:!0,kill:!1},F_={suppressEvents:!0,kill:!1},RX={suppressEvents:!0},PT={},Nf=[],nb={},PU,Zr={},tM={},oR=30,z_=[],IT="",FT=function(e){var t=e[0],n,s;if(Lc(t)||rs(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(s=z_.length;s--&&!z_[s].targetTest(t););n=z_[s]}for(s=e.length;s--;)e[s]&&(e[s]._gsap||(e[s]._gsap=new rL(e[s],n)))||e.splice(s,1);return e},Cd=function(e){return e._gsap||FT(Ho(e))[0]._gsap},IU=function(e,t,n){return(n=e[t])&&rs(n)?e[t]():UT(n)&&e.getAttribute&&e.getAttribute(t)||n},Dr=function(e,t){return(e=e.split(",")).forEach(t)||e},gs=function(e){return Math.round(e*1e5)/1e5||0},ws=function(e){return Math.round(e*1e7)/1e7||0},Tm=function(e,t){var n=t.charAt(0),s=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+s:n==="-"?e-s:n==="*"?e*s:e/s},DX=function(e,t){for(var n=t.length,s=0;e.indexOf(t[s])<0&&++s<n;);return s<n},Gx=function(){var e=Nf.length,t=Nf.slice(0),n,s;for(nb={},Nf.length=0,n=0;n<e;n++)s=t[n],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},zT=function(e){return!!(e._initted||e._startAt||e.add)},FU=function(e,t,n,s){Nf.length&&!pa&&Gx(),e.render(t,n,!!(pa&&t<0&&zT(e))),Nf.length&&!pa&&Gx()},zU=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(UU).length<2?t:Qs(e)?e.trim():e},GU=function(e){return e},co=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},BX=function(e){return function(t,n){for(var s in n)s in t||s==="duration"&&e||s==="ease"||(t[s]=n[s])}},km=function(e,t){for(var n in t)e[n]=t[n];return e},lR=function i(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=Lc(t[n])?i(e[n]||(e[n]={}),t[n]):t[n]);return e},Hx=function(e,t){var n={},s;for(s in e)s in t||(n[s]=e[s]);return n},sv=function(e){var t=e.parent||Ki,n=e.keyframes?BX(Pa(e.keyframes)):co;if(Rr(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},UX=function(e,t){for(var n=e.length,s=n===t.length;s&&n--&&e[n]===t[n];);return n<0},HU=function(e,t,n,s,a){var r=e[s],l;if(a)for(l=t[a];r&&r[a]>l;)r=r._prev;return r?(t._next=r._next,r._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[s]=t,t._prev=r,t.parent=t._dp=e,t},HS=function(e,t,n,s){n===void 0&&(n="_first"),s===void 0&&(s="_last");var a=t._prev,r=t._next;a?a._next=r:e[n]===t&&(e[n]=r),r?r._prev=a:e[s]===t&&(e[s]=a),t._next=t._prev=t.parent=null},Hf=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},wd=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},LX=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},ib=function(e,t,n,s){return e._startAt&&(pa?e._startAt.revert(F_):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,s))},OX=function i(e){return!e||e._ts&&i(e.parent)},cR=function(e){return e._repeat?Xm(e._tTime,e=e.duration()+e._rDelay)*e:0},Xm=function(e,t){var n=Math.floor(e=ws(e/t));return e&&n===e?n-1:n},Vx=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},VS=function(e){return e._end=ws(e._start+(e._tDur/Math.abs(e._ts||e._rts||Si)||0))},kS=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=ws(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),VS(e),n._dirty||wd(n,e)),e},VU=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Vx(e.rawTime(),t),(!t._dur||n1(0,t.totalDuration(),n)-t._tTime>Si)&&t.render(n,!0)),wd(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-Si}},bc=function(e,t,n,s){return t.parent&&Hf(t),t._start=ws((Tu(n)?n:n||e!==Ki?No(e,n,t):e._time)+t._delay),t._end=ws(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),HU(e,t,"_first","_last",e._sort?"_start":0),sb(t)||(e._recent=t),s||VU(e,t),e._ts<0&&kS(e,e._tTime),e},kU=function(e,t){return(lo.ScrollTrigger||NT("scrollTrigger",t))&&lo.ScrollTrigger.create(t,e)},XU=function(e,t,n,s,a){if(HT(e,t,a),!e._initted)return 1;if(!n&&e._pt&&!pa&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&PU!==$r.frame)return Nf.push(e),e._lazy=[a,s],1},NX=function i(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||i(t))},sb=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},PX=function(e,t,n,s){var a=e.ratio,r=t<0||!t&&(!e._start&&NX(e)&&!(!e._initted&&sb(e))||(e._ts<0||e._dp._ts<0)&&!sb(e))?0:1,l=e._rDelay,c=0,f,d,g;if(l&&e._repeat&&(c=n1(0,e._tDur,t),d=Xm(c,l),e._yoyo&&d&1&&(r=1-r),d!==Xm(e._tTime,l)&&(a=1-r,e.vars.repeatRefresh&&e._initted&&e.invalidate())),r!==a||pa||s||e._zTime===Si||!t&&e._zTime){if(!e._initted&&XU(e,t,s,n,c))return;for(g=e._zTime,e._zTime=t||(n?Si:0),n||(n=t&&!g),e.ratio=r,e._from&&(r=1-r),e._time=0,e._tTime=c,f=e._pt;f;)f.r(r,f.d),f=f._next;t<0&&ib(e,t,n,!0),e._onUpdate&&!n&&no(e,"onUpdate"),c&&e._repeat&&!n&&e.parent&&no(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===r&&(r&&Hf(e,1),!n&&!pa&&(no(e,r?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},IX=function(e,t,n){var s;if(n>t)for(s=e._first;s&&s._start<=n;){if(s.data==="isPause"&&s._start>t)return s;s=s._next}else for(s=e._last;s&&s._start>=n;){if(s.data==="isPause"&&s._start<t)return s;s=s._prev}},jm=function(e,t,n,s){var a=e._repeat,r=ws(t)||0,l=e._tTime/e._tDur;return l&&!s&&(e._time*=r/e._dur),e._dur=r,e._tDur=a?a<0?1e10:ws(r*(a+1)+e._rDelay*a):r,l>0&&!s&&kS(e,e._tTime=e._tDur*l),e.parent&&VS(e),n||wd(e.parent,e),e},uR=function(e){return e instanceof ar?wd(e):jm(e,e._dur)},FX={_start:0,endTime:Cv,totalDuration:Cv},No=function i(e,t,n){var s=e.labels,a=e._recent||FX,r=e.duration()>=Go?a.endTime(!1):e._dur,l,c,f;return Qs(t)&&(isNaN(t)||t in s)?(c=t.charAt(0),f=t.substr(-1)==="%",l=t.indexOf("="),c==="<"||c===">"?(l>=0&&(t=t.replace(/=/,"")),(c==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(t.substr(1))||0)*(f?(l<0?a:n).totalDuration()/100:1)):l<0?(t in s||(s[t]=r),s[t]):(c=parseFloat(t.charAt(l-1)+t.substr(l+1)),f&&n&&(c=c/100*(Pa(n)?n[0]:n).totalDuration()),l>1?i(e,t.substr(0,l-1),n)+c:r+c)):t==null?r:+t},av=function(e,t,n){var s=Tu(t[1]),a=(s?2:1)+(e<2?0:1),r=t[a],l,c;if(s&&(r.duration=t[1]),r.parent=n,e){for(l=r,c=n;c&&!("immediateRender"in l);)l=c.vars.defaults||{},c=Rr(c.vars.inherit)&&c.parent;r.immediateRender=Rr(l.immediateRender),e<2?r.runBackwards=1:r.startAt=t[a-1]}return new Cs(t[0],r,t[a+1])},Zf=function(e,t){return e||e===0?t(e):t},n1=function(e,t,n){return n<e?e:n>t?t:n},Ba=function(e,t){return!Qs(e)||!(t=CX.exec(e))?"":t[1]},zX=function(e,t,n){return Zf(n,function(s){return n1(e,t,s)})},ab=[].slice,jU=function(e,t){return e&&Lc(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Lc(e[0]))&&!e.nodeType&&e!==Mc},GX=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(s){var a;return Qs(s)&&!t||jU(s,1)?(a=n).push.apply(a,Ho(s)):n.push(s)})||n},Ho=function(e,t,n){return Fi&&!t&&Fi.selector?Fi.selector(e):Qs(e)&&!n&&(tb||!Ym())?ab.call((t||OT).querySelectorAll(e),0):Pa(e)?GX(e,n):jU(e)?ab.call(e,0):e?[e]:[]},rb=function(e){return e=Ho(e)[0]||Ev("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Ho(t,n.querySelectorAll?n:n===e?Ev("Invalid scope")||OT.createElement("div"):e)}},YU=function(e){return e.sort(function(){return .5-Math.random()})},WU=function(e){if(rs(e))return e;var t=Lc(e)?e:{each:e},n=Rd(t.ease),s=t.from||0,a=parseFloat(t.base)||0,r={},l=s>0&&s<1,c=isNaN(s)||l,f=t.axis,d=s,g=s;return Qs(s)?d=g={center:.5,edges:.5,end:1}[s]||0:!l&&c&&(d=s[0],g=s[1]),function(v,y,S){var A=(S||t).length,M=r[A],b,C,w,R,U,O,I,P,N;if(!M){if(N=t.grid==="auto"?0:(t.grid||[1,Go])[1],!N){for(I=-Go;I<(I=S[N++].getBoundingClientRect().left)&&N<A;);N<A&&N--}for(M=r[A]=[],b=c?Math.min(N,A)*d-.5:s%N,C=N===Go?0:c?A*g/N-.5:s/N|0,I=0,P=Go,O=0;O<A;O++)w=O%N-b,R=C-(O/N|0),M[O]=U=f?Math.abs(f==="y"?R:w):wU(w*w+R*R),U>I&&(I=U),U<P&&(P=U);s==="random"&&YU(M),M.max=I-P,M.min=P,M.v=A=(parseFloat(t.amount)||parseFloat(t.each)*(N>A?A-1:f?f==="y"?A/N:N:Math.max(N,A/N))||0)*(s==="edges"?-1:1),M.b=A<0?a-A:a,M.u=Ba(t.amount||t.each)||0,n=n&&A<0?iL(n):n}return A=(M[v]-M.min)/M.max||0,ws(M.b+(n?n(A):A)*M.v)+M.u}},ob=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var s=ws(Math.round(parseFloat(n)/e)*e*t);return(s-s%1)/t+(Tu(n)?0:Ba(n))}},qU=function(e,t){var n=Pa(e),s,a;return!n&&Lc(e)&&(s=n=e.radius||Go,e.values?(e=Ho(e.values),(a=!Tu(e[0]))&&(s*=s)):e=ob(e.increment)),Zf(t,n?rs(e)?function(r){return a=e(r),Math.abs(a-r)<=s?a:r}:function(r){for(var l=parseFloat(a?r.x:r),c=parseFloat(a?r.y:0),f=Go,d=0,g=e.length,v,y;g--;)a?(v=e[g].x-l,y=e[g].y-c,v=v*v+y*y):v=Math.abs(e[g]-l),v<f&&(f=v,d=g);return d=!s||f<=s?e[d]:r,a||d===r||Tu(r)?d:d+Ba(r)}:ob(e))},KU=function(e,t,n,s){return Zf(Pa(e)?!t:n===!0?!!(n=0):!s,function(){return Pa(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(s=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*s)/s})},HX=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(s){return t.reduce(function(a,r){return r(a)},s)}},VX=function(e,t){return function(n){return e(parseFloat(n))+(t||Ba(n))}},kX=function(e,t,n){return ZU(e,t,0,1,n)},JU=function(e,t,n){return Zf(n,function(s){return e[~~t(s)]})},XX=function i(e,t,n){var s=t-e;return Pa(e)?JU(e,i(0,e.length),t):Zf(n,function(a){return(s+(a-e)%s)%s+e})},jX=function i(e,t,n){var s=t-e,a=s*2;return Pa(e)?JU(e,i(0,e.length-1),t):Zf(n,function(r){return r=(a+(r-e)%a)%a||0,e+(r>s?a-r:r)})},wv=function(e){for(var t=0,n="",s,a,r,l;~(s=e.indexOf("random(",t));)r=e.indexOf(")",s),l=e.charAt(s+7)==="[",a=e.substr(s+7,r-s-7).match(l?UU:eb),n+=e.substr(t,s-t)+KU(l?a:+a[0],l?0:+a[1],+a[2]||1e-5),t=r+1;return n+e.substr(t,e.length-t)},ZU=function(e,t,n,s,a){var r=t-e,l=s-n;return Zf(a,function(c){return n+((c-e)/r*l||0)})},YX=function i(e,t,n,s){var a=isNaN(e+t)?0:function(y){return(1-y)*e+y*t};if(!a){var r=Qs(e),l={},c,f,d,g,v;if(n===!0&&(s=1)&&(n=null),r)e={p:e},t={p:t};else if(Pa(e)&&!Pa(t)){for(d=[],g=e.length,v=g-2,f=1;f<g;f++)d.push(i(e[f-1],e[f]));g--,a=function(S){S*=g;var A=Math.min(v,~~S);return d[A](S-A)},n=t}else s||(e=km(Pa(e)?[]:{},e));if(!d){for(c in t)GT.call(l,e,c,"get",t[c]);a=function(S){return XT(S,l)||(r?e.p:e)}}}return Zf(n,a)},fR=function(e,t,n){var s=e.labels,a=Go,r,l,c;for(r in s)l=s[r]-t,l<0==!!n&&l&&a>(l=Math.abs(l))&&(c=r,a=l);return c},no=function(e,t,n){var s=e.vars,a=s[t],r=Fi,l=e._ctx,c,f,d;if(a)return c=s[t+"Params"],f=s.callbackScope||e,n&&Nf.length&&Gx(),l&&(Fi=l),d=c?a.apply(f,c):a.call(f),Fi=r,d},Vg=function(e){return Hf(e),e.scrollTrigger&&e.scrollTrigger.kill(!!pa),e.progress()<1&&no(e,"onInterrupt"),e},mm,QU=[],$U=function(e){if(e)if(e=!e.name&&e.default||e,LT()||e.headless){var t=e.name,n=rs(e),s=t&&!n&&e.init?function(){this._props=[]}:e,a={init:Cv,render:XT,add:GT,kill:lj,modifier:oj,rawVars:0},r={targetTest:0,get:0,getSetter:kT,aliases:{},register:0};if(Ym(),e!==s){if(Zr[t])return;co(s,co(Hx(e,a),r)),km(s.prototype,km(a,Hx(e,r))),Zr[s.prop=t]=s,e.targetTest&&(z_.push(s),PT[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}NU(t,s),e.register&&e.register(Lr,s,Br)}else QU.push(e)},xi=255,kg={aqua:[0,xi,xi],lime:[0,xi,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,xi],navy:[0,0,128],white:[xi,xi,xi],olive:[128,128,0],yellow:[xi,xi,0],orange:[xi,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[xi,0,0],pink:[xi,192,203],cyan:[0,xi,xi],transparent:[xi,xi,xi,0]},nM=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*xi+.5|0},eL=function(e,t,n){var s=e?Tu(e)?[e>>16,e>>8&xi,e&xi]:0:kg.black,a,r,l,c,f,d,g,v,y,S;if(!s){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),kg[e])s=kg[e];else if(e.charAt(0)==="#"){if(e.length<6&&(a=e.charAt(1),r=e.charAt(2),l=e.charAt(3),e="#"+a+a+r+r+l+l+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return s=parseInt(e.substr(1,6),16),[s>>16,s>>8&xi,s&xi,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),s=[e>>16,e>>8&xi,e&xi]}else if(e.substr(0,3)==="hsl"){if(s=S=e.match(eb),!t)c=+s[0]%360/360,f=+s[1]/100,d=+s[2]/100,r=d<=.5?d*(f+1):d+f-d*f,a=d*2-r,s.length>3&&(s[3]*=1),s[0]=nM(c+1/3,a,r),s[1]=nM(c,a,r),s[2]=nM(c-1/3,a,r);else if(~e.indexOf("="))return s=e.match(DU),n&&s.length<4&&(s[3]=1),s}else s=e.match(eb)||kg.transparent;s=s.map(Number)}return t&&!S&&(a=s[0]/xi,r=s[1]/xi,l=s[2]/xi,g=Math.max(a,r,l),v=Math.min(a,r,l),d=(g+v)/2,g===v?c=f=0:(y=g-v,f=d>.5?y/(2-g-v):y/(g+v),c=g===a?(r-l)/y+(r<l?6:0):g===r?(l-a)/y+2:(a-r)/y+4,c*=60),s[0]=~~(c+.5),s[1]=~~(f*100+.5),s[2]=~~(d*100+.5)),n&&s.length<4&&(s[3]=1),s},tL=function(e){var t=[],n=[],s=-1;return e.split(Pf).forEach(function(a){var r=a.match(pm)||[];t.push.apply(t,r),n.push(s+=r.length+1)}),t.c=n,t},hR=function(e,t,n){var s="",a=(e+s).match(Pf),r=t?"hsla(":"rgba(",l=0,c,f,d,g;if(!a)return e;if(a=a.map(function(v){return(v=eL(v,t,1))&&r+(t?v[0]+","+v[1]+"%,"+v[2]+"%,"+v[3]:v.join(","))+")"}),n&&(d=tL(e),c=n.c,c.join(s)!==d.c.join(s)))for(f=e.replace(Pf,"1").split(pm),g=f.length-1;l<g;l++)s+=f[l]+(~c.indexOf(l)?a.shift()||r+"0,0,0,0)":(d.length?d:a.length?a:n).shift());if(!f)for(f=e.split(Pf),g=f.length-1;l<g;l++)s+=f[l]+a[l];return s+f[g]},Pf=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in kg)i+="|"+e+"\\b";return new RegExp(i+")","gi")}(),WX=/hsl[a]?\(/,nL=function(e){var t=e.join(" "),n;if(Pf.lastIndex=0,Pf.test(t))return n=WX.test(t),e[1]=hR(e[1],n),e[0]=hR(e[0],n,tL(e[1])),!0},Rv,$r=function(){var i=Date.now,e=500,t=33,n=i(),s=n,a=1e3/240,r=a,l=[],c,f,d,g,v,y,S=function A(M){var b=i()-s,C=M===!0,w,R,U,O;if((b>e||b<0)&&(n+=b-t),s+=b,U=s-n,w=U-r,(w>0||C)&&(O=++g.frame,v=U-g.time*1e3,g.time=U=U/1e3,r+=w+(w>=a?4:a-w),R=1),C||(c=f(A)),R)for(y=0;y<l.length;y++)l[y](U,v,O,M)};return g={time:0,frame:0,tick:function(){S(!0)},deltaRatio:function(M){return v/(1e3/(M||60))},wake:function(){LU&&(!tb&&LT()&&(Mc=tb=window,OT=Mc.document||{},lo.gsap=Lr,(Mc.gsapVersions||(Mc.gsapVersions=[])).push(Lr.version),OU(zx||Mc.GreenSockGlobals||!Mc.gsap&&Mc||{}),QU.forEach($U)),d=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&g.sleep(),f=d||function(M){return setTimeout(M,r-g.time*1e3+1|0)},Rv=1,S(2))},sleep:function(){(d?cancelAnimationFrame:clearTimeout)(c),Rv=0,f=Cv},lagSmoothing:function(M,b){e=M||1/0,t=Math.min(b||33,e)},fps:function(M){a=1e3/(M||240),r=g.time*1e3+a},add:function(M,b,C){var w=b?function(R,U,O,I){M(R,U,O,I),g.remove(w)}:M;return g.remove(M),l[C?"unshift":"push"](w),Ym(),w},remove:function(M,b){~(b=l.indexOf(M))&&l.splice(b,1)&&y>=b&&y--},_listeners:l},g}(),Ym=function(){return!Rv&&$r.wake()},Pn={},qX=/^[\d.\-M][\d.\-,\s]/,KX=/["']/g,JX=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),s=n[0],a=1,r=n.length,l,c,f;a<r;a++)c=n[a],l=a!==r-1?c.lastIndexOf(","):c.length,f=c.substr(0,l),t[s]=isNaN(f)?f.replace(KX,"").trim():+f,s=c.substr(l+1).trim();return t},ZX=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),s=e.indexOf("(",t);return e.substring(t,~s&&s<n?e.indexOf(")",n+1):n)},QX=function(e){var t=(e+"").split("("),n=Pn[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[JX(t[1])]:ZX(e).split(",").map(zU)):Pn._CE&&qX.test(e)?Pn._CE("",e):n},iL=function(e){return function(t){return 1-e(1-t)}},sL=function i(e,t){for(var n=e._first,s;n;)n instanceof ar?i(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?i(n.timeline,t):(s=n._ease,n._ease=n._yEase,n._yEase=s,n._yoyo=t)),n=n._next},Rd=function(e,t){return e&&(rs(e)?e:Pn[e]||QX(e))||t},Yd=function(e,t,n,s){n===void 0&&(n=function(c){return 1-t(1-c)}),s===void 0&&(s=function(c){return c<.5?t(c*2)/2:1-t((1-c)*2)/2});var a={easeIn:t,easeOut:n,easeInOut:s},r;return Dr(e,function(l){Pn[l]=lo[l]=a,Pn[r=l.toLowerCase()]=n;for(var c in a)Pn[r+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=Pn[l+"."+c]=a[c]}),a},aL=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},iM=function i(e,t,n){var s=t>=1?t:1,a=(n||(e?.3:.45))/(t<1?t:1),r=a/$M*(Math.asin(1/s)||0),l=function(d){return d===1?1:s*Math.pow(2,-10*d)*EX((d-r)*a)+1},c=e==="out"?l:e==="in"?function(f){return 1-l(1-f)}:aL(l);return a=$M/a,c.config=function(f,d){return i(e,f,d)},c},sM=function i(e,t){t===void 0&&(t=1.70158);var n=function(r){return r?--r*r*((t+1)*r+t)+1:0},s=e==="out"?n:e==="in"?function(a){return 1-n(1-a)}:aL(n);return s.config=function(a){return i(e,a)},s};Dr("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,e){var t=e<5?e+1:e;Yd(i+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});Pn.Linear.easeNone=Pn.none=Pn.Linear.easeIn;Yd("Elastic",iM("in"),iM("out"),iM());(function(i,e){var t=1/e,n=2*t,s=2.5*t,a=function(l){return l<t?i*l*l:l<n?i*Math.pow(l-1.5/e,2)+.75:l<s?i*(l-=2.25/e)*l+.9375:i*Math.pow(l-2.625/e,2)+.984375};Yd("Bounce",function(r){return 1-a(1-r)},a)})(7.5625,2.75);Yd("Expo",function(i){return Math.pow(2,10*(i-1))*i+i*i*i*i*i*i*(1-i)});Yd("Circ",function(i){return-(wU(1-i*i)-1)});Yd("Sine",function(i){return i===1?1:-TX(i*MX)+1});Yd("Back",sM("in"),sM("out"),sM());Pn.SteppedEase=Pn.steps=lo.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,s=e+(t?0:1),a=t?1:0,r=1-Si;return function(l){return((s*n1(0,r,l)|0)+a)*n}}};Vm.ease=Pn["quad.out"];Dr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return IT+=i+","+i+"Params,"});var rL=function(e,t){this.id=bX++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:IU,this.set=t?t.getSetter:kT},Dv=function(){function i(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,jm(this,+t.duration,1,1),this.data=t.data,Fi&&(this._ctx=Fi,Fi.data.push(this)),Rv||$r.wake()}var e=i.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,jm(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,s){if(Ym(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(kS(this,n),!a._dp||a.parent||VU(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&bc(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===Si||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),FU(this,n,s)),this},e.time=function(n,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+cR(this))%(this._dur+this._rDelay)||(n?this._dur:0),s):this._time},e.totalProgress=function(n,s){return arguments.length?this.totalTime(this.totalDuration()*n,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+cR(this),s):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,s){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*a,s):this._repeat?Xm(this._tTime,a)+1:1},e.timeScale=function(n,s){if(!arguments.length)return this._rts===-Si?0:this._rts;if(this._rts===n)return this;var a=this.parent&&this._ts?Vx(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Si?0:this._rts,this.totalTime(n1(-Math.abs(this._delay),this.totalDuration(),a),s!==!1),VS(this),LX(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ym(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Si&&(this._tTime-=Si)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&bc(s,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(Rr(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var s=this.parent||this._dp;return s?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Vx(s.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=RX);var s=pa;return pa=n,zT(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),pa=s,this},e.globalTime=function(n){for(var s=this,a=arguments.length?n:s.rawTime();s;)a=s._start+a/(Math.abs(s._ts)||1),s=s._dp;return!this.parent&&this._sat?this._sat.globalTime(n):a},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,uR(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var s=this._time;return this._rDelay=n,uR(this),s?this.time(s):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,s){return this.totalTime(No(this,n),Rr(s))},e.restart=function(n,s){return this.play().totalTime(n?-this._delay:0,Rr(s)),this._dur||(this._zTime=-Si),this},e.play=function(n,s){return n!=null&&this.seek(n,s),this.reversed(!1).paused(!1)},e.reverse=function(n,s){return n!=null&&this.seek(n||this.totalDuration(),s),this.reversed(!0).paused(!1)},e.pause=function(n,s){return n!=null&&this.seek(n,s),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Si:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Si,this},e.isActive=function(){var n=this.parent||this._dp,s=this._start,a;return!!(!n||this._ts&&this._initted&&n.isActive()&&(a=n.rawTime(!0))>=s&&a<this.endTime(!0)-Si)},e.eventCallback=function(n,s,a){var r=this.vars;return arguments.length>1?(s?(r[n]=s,a&&(r[n+"Params"]=a),n==="onUpdate"&&(this._onUpdate=s)):delete r[n],this):r[n]},e.then=function(n){var s=this;return new Promise(function(a){var r=rs(n)?n:GU,l=function(){var f=s.then;s.then=null,rs(r)&&(r=r(s))&&(r.then||r===s)&&(s.then=f),a(r),s.then=f};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?l():s._prom=l})},e.kill=function(){Vg(this)},i}();co(Dv.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Si,_prom:0,_ps:!1,_rts:1});var ar=function(i){CU(e,i);function e(n,s){var a;return n===void 0&&(n={}),a=i.call(this,n)||this,a.labels={},a.smoothChildTiming=!!n.smoothChildTiming,a.autoRemoveChildren=!!n.autoRemoveChildren,a._sort=Rr(n.sortChildren),Ki&&bc(n.parent||Ki,mu(a),s),n.reversed&&a.reverse(),n.paused&&a.paused(!0),n.scrollTrigger&&kU(mu(a),n.scrollTrigger),a}var t=e.prototype;return t.to=function(s,a,r){return av(0,arguments,this),this},t.from=function(s,a,r){return av(1,arguments,this),this},t.fromTo=function(s,a,r,l){return av(2,arguments,this),this},t.set=function(s,a,r){return a.duration=0,a.parent=this,sv(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new Cs(s,a,No(this,r),1),this},t.call=function(s,a,r){return bc(this,Cs.delayedCall(0,s,a),r)},t.staggerTo=function(s,a,r,l,c,f,d){return r.duration=a,r.stagger=r.stagger||l,r.onComplete=f,r.onCompleteParams=d,r.parent=this,new Cs(s,r,No(this,c)),this},t.staggerFrom=function(s,a,r,l,c,f,d){return r.runBackwards=1,sv(r).immediateRender=Rr(r.immediateRender),this.staggerTo(s,a,r,l,c,f,d)},t.staggerFromTo=function(s,a,r,l,c,f,d,g){return l.startAt=r,sv(l).immediateRender=Rr(l.immediateRender),this.staggerTo(s,a,l,c,f,d,g)},t.render=function(s,a,r){var l=this._time,c=this._dirty?this.totalDuration():this._tDur,f=this._dur,d=s<=0?0:ws(s),g=this._zTime<0!=s<0&&(this._initted||!f),v,y,S,A,M,b,C,w,R,U,O,I;if(this!==Ki&&d>c&&s>=0&&(d=c),d!==this._tTime||r||g){if(l!==this._time&&f&&(d+=this._time-l,s+=this._time-l),v=d,R=this._start,w=this._ts,b=!w,g&&(f||(l=this._zTime),(s||!a)&&(this._zTime=s)),this._repeat){if(O=this._yoyo,M=f+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(M*100+s,a,r);if(v=ws(d%M),d===c?(A=this._repeat,v=f):(U=ws(d/M),A=~~U,A&&A===U&&(v=f,A--),v>f&&(v=f)),U=Xm(this._tTime,M),!l&&this._tTime&&U!==A&&this._tTime-U*M-this._dur<=0&&(U=A),O&&A&1&&(v=f-v,I=1),A!==U&&!this._lock){var P=O&&U&1,N=P===(O&&A&1);if(A<U&&(P=!P),l=P?0:d%f?f:d,this._lock=1,this.render(l||(I?0:ws(A*M)),a,!f)._lock=0,this._tTime=d,!a&&this.parent&&no(this,"onRepeat"),this.vars.repeatRefresh&&!I&&(this.invalidate()._lock=1),l&&l!==this._time||b!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(f=this._dur,c=this._tDur,N&&(this._lock=2,l=P?f:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!I&&this.invalidate()),this._lock=0,!this._ts&&!b)return this;sL(this,I)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(C=IX(this,ws(l),ws(v)),C&&(d-=v-(v=C._start))),this._tTime=d,this._time=v,this._act=!w,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,l=0),!l&&d&&!a&&!U&&(no(this,"onStart"),this._tTime!==d))return this;if(v>=l&&s>=0)for(y=this._first;y;){if(S=y._next,(y._act||v>=y._start)&&y._ts&&C!==y){if(y.parent!==this)return this.render(s,a,r);if(y.render(y._ts>0?(v-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(v-y._start)*y._ts,a,r),v!==this._time||!this._ts&&!b){C=0,S&&(d+=this._zTime=-Si);break}}y=S}else{y=this._last;for(var L=s<0?s:v;y;){if(S=y._prev,(y._act||L<=y._end)&&y._ts&&C!==y){if(y.parent!==this)return this.render(s,a,r);if(y.render(y._ts>0?(L-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(L-y._start)*y._ts,a,r||pa&&zT(y)),v!==this._time||!this._ts&&!b){C=0,S&&(d+=this._zTime=L?-Si:Si);break}}y=S}}if(C&&!a&&(this.pause(),C.render(v>=l?0:-Si)._zTime=v>=l?1:-1,this._ts))return this._start=R,VS(this),this.render(s,a,r);this._onUpdate&&!a&&no(this,"onUpdate",!0),(d===c&&this._tTime>=this.totalDuration()||!d&&l)&&(R===this._start||Math.abs(w)!==Math.abs(this._ts))&&(this._lock||((s||!f)&&(d===c&&this._ts>0||!d&&this._ts<0)&&Hf(this,1),!a&&!(s<0&&!l)&&(d||l||!c)&&(no(this,d===c&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(d<c&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(s,a){var r=this;if(Tu(a)||(a=No(this,a,s)),!(s instanceof Dv)){if(Pa(s))return s.forEach(function(l){return r.add(l,a)}),this;if(Qs(s))return this.addLabel(s,a);if(rs(s))s=Cs.delayedCall(0,s);else return this}return this!==s?bc(this,s,a):this},t.getChildren=function(s,a,r,l){s===void 0&&(s=!0),a===void 0&&(a=!0),r===void 0&&(r=!0),l===void 0&&(l=-Go);for(var c=[],f=this._first;f;)f._start>=l&&(f instanceof Cs?a&&c.push(f):(r&&c.push(f),s&&c.push.apply(c,f.getChildren(!0,a,r)))),f=f._next;return c},t.getById=function(s){for(var a=this.getChildren(1,1,1),r=a.length;r--;)if(a[r].vars.id===s)return a[r]},t.remove=function(s){return Qs(s)?this.removeLabel(s):rs(s)?this.killTweensOf(s):(s.parent===this&&HS(this,s),s===this._recent&&(this._recent=this._last),wd(this))},t.totalTime=function(s,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ws($r.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),i.prototype.totalTime.call(this,s,a),this._forcing=0,this):this._tTime},t.addLabel=function(s,a){return this.labels[s]=No(this,a),this},t.removeLabel=function(s){return delete this.labels[s],this},t.addPause=function(s,a,r){var l=Cs.delayedCall(0,a||Cv,r);return l.data="isPause",this._hasPause=1,bc(this,l,No(this,s))},t.removePause=function(s){var a=this._first;for(s=No(this,s);a;)a._start===s&&a.data==="isPause"&&Hf(a),a=a._next},t.killTweensOf=function(s,a,r){for(var l=this.getTweensOf(s,r),c=l.length;c--;)Df!==l[c]&&l[c].kill(s,a);return this},t.getTweensOf=function(s,a){for(var r=[],l=Ho(s),c=this._first,f=Tu(a),d;c;)c instanceof Cs?DX(c._targets,l)&&(f?(!Df||c._initted&&c._ts)&&c.globalTime(0)<=a&&c.globalTime(c.totalDuration())>a:!a||c.isActive())&&r.push(c):(d=c.getTweensOf(l,a)).length&&r.push.apply(r,d),c=c._next;return r},t.tweenTo=function(s,a){a=a||{};var r=this,l=No(r,s),c=a,f=c.startAt,d=c.onStart,g=c.onStartParams,v=c.immediateRender,y,S=Cs.to(r,co({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:a.duration||Math.abs((l-(f&&"time"in f?f.time:r._time))/r.timeScale())||Si,onStart:function(){if(r.pause(),!y){var M=a.duration||Math.abs((l-(f&&"time"in f?f.time:r._time))/r.timeScale());S._dur!==M&&jm(S,M,0,1).render(S._time,!0,!0),y=1}d&&d.apply(S,g||[])}},a));return v?S.render(0):S},t.tweenFromTo=function(s,a,r){return this.tweenTo(a,co({startAt:{time:No(this,s)}},r))},t.recent=function(){return this._recent},t.nextLabel=function(s){return s===void 0&&(s=this._time),fR(this,No(this,s))},t.previousLabel=function(s){return s===void 0&&(s=this._time),fR(this,No(this,s),1)},t.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+Si)},t.shiftChildren=function(s,a,r){r===void 0&&(r=0);for(var l=this._first,c=this.labels,f;l;)l._start>=r&&(l._start+=s,l._end+=s),l=l._next;if(a)for(f in c)c[f]>=r&&(c[f]+=s);return wd(this)},t.invalidate=function(s){var a=this._first;for(this._lock=0;a;)a.invalidate(s),a=a._next;return i.prototype.invalidate.call(this,s)},t.clear=function(s){s===void 0&&(s=!0);for(var a=this._first,r;a;)r=a._next,this.remove(a),a=r;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),wd(this)},t.totalDuration=function(s){var a=0,r=this,l=r._last,c=Go,f,d,g;if(arguments.length)return r.timeScale((r._repeat<0?r.duration():r.totalDuration())/(r.reversed()?-s:s));if(r._dirty){for(g=r.parent;l;)f=l._prev,l._dirty&&l.totalDuration(),d=l._start,d>c&&r._sort&&l._ts&&!r._lock?(r._lock=1,bc(r,l,d-l._delay,1)._lock=0):c=d,d<0&&l._ts&&(a-=d,(!g&&!r._dp||g&&g.smoothChildTiming)&&(r._start+=d/r._ts,r._time-=d,r._tTime-=d),r.shiftChildren(-d,!1,-1/0),c=0),l._end>a&&l._ts&&(a=l._end),l=f;jm(r,r===Ki&&r._time>a?r._time:a,1,1),r._dirty=0}return r._tDur},e.updateRoot=function(s){if(Ki._ts&&(FU(Ki,Vx(s,Ki)),PU=$r.frame),$r.frame>=oR){oR+=so.autoSleep||120;var a=Ki._first;if((!a||!a._ts)&&so.autoSleep&&$r._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||$r.sleep()}}},e}(Dv);co(ar.prototype,{_lock:0,_hasPause:0,_forcing:0});var $X=function(e,t,n,s,a,r,l){var c=new Br(this._pt,e,t,0,1,hL,null,a),f=0,d=0,g,v,y,S,A,M,b,C;for(c.b=n,c.e=s,n+="",s+="",(b=~s.indexOf("random("))&&(s=wv(s)),r&&(C=[n,s],r(C,e,t),n=C[0],s=C[1]),v=n.match(eM)||[];g=eM.exec(s);)S=g[0],A=s.substring(f,g.index),y?y=(y+1)%5:A.substr(-5)==="rgba("&&(y=1),S!==v[d++]&&(M=parseFloat(v[d-1])||0,c._pt={_next:c._pt,p:A||d===1?A:",",s:M,c:S.charAt(1)==="="?Tm(M,S)-M:parseFloat(S)-M,m:y&&y<4?Math.round:0},f=eM.lastIndex);return c.c=f<s.length?s.substring(f,s.length):"",c.fp=l,(BU.test(s)||b)&&(c.e=0),this._pt=c,c},GT=function(e,t,n,s,a,r,l,c,f,d){rs(s)&&(s=s(a||0,e,r));var g=e[t],v=n!=="get"?n:rs(g)?f?e[t.indexOf("set")||!rs(e["get"+t.substr(3)])?t:"get"+t.substr(3)](f):e[t]():g,y=rs(g)?f?sj:uL:VT,S;if(Qs(s)&&(~s.indexOf("random(")&&(s=wv(s)),s.charAt(1)==="="&&(S=Tm(v,s)+(Ba(v)||0),(S||S===0)&&(s=S))),!d||v!==s||lb)return!isNaN(v*s)&&s!==""?(S=new Br(this._pt,e,t,+v||0,s-(v||0),typeof g=="boolean"?rj:fL,0,y),f&&(S.fp=f),l&&S.modifier(l,this,e),this._pt=S):(!g&&!(t in e)&&NT(t,s),$X.call(this,e,t,v,s,y,c||so.stringFilter,f))},ej=function(e,t,n,s,a){if(rs(e)&&(e=rv(e,a,t,n,s)),!Lc(e)||e.style&&e.nodeType||Pa(e)||RU(e))return Qs(e)?rv(e,a,t,n,s):e;var r={},l;for(l in e)r[l]=rv(e[l],a,t,n,s);return r},oL=function(e,t,n,s,a,r){var l,c,f,d;if(Zr[e]&&(l=new Zr[e]).init(a,l.rawVars?t[e]:ej(t[e],s,a,r,n),n,s,r)!==!1&&(n._pt=c=new Br(n._pt,a,e,0,1,l.render,l,0,l.priority),n!==mm))for(f=n._ptLookup[n._targets.indexOf(a)],d=l._props.length;d--;)f[l._props[d]]=c;return l},Df,lb,HT=function i(e,t,n){var s=e.vars,a=s.ease,r=s.startAt,l=s.immediateRender,c=s.lazy,f=s.onUpdate,d=s.runBackwards,g=s.yoyoEase,v=s.keyframes,y=s.autoRevert,S=e._dur,A=e._startAt,M=e._targets,b=e.parent,C=b&&b.data==="nested"?b.vars.targets:M,w=e._overwrite==="auto"&&!BT,R=e.timeline,U,O,I,P,N,L,k,X,W,$,ce,z,q;if(R&&(!v||!a)&&(a="none"),e._ease=Rd(a,Vm.ease),e._yEase=g?iL(Rd(g===!0?a:g,Vm.ease)):0,g&&e._yoyo&&!e._repeat&&(g=e._yEase,e._yEase=e._ease,e._ease=g),e._from=!R&&!!s.runBackwards,!R||v&&!s.stagger){if(X=M[0]?Cd(M[0]).harness:0,z=X&&s[X.prop],U=Hx(s,PT),A&&(A._zTime<0&&A.progress(1),t<0&&d&&l&&!y?A.render(-1,!0):A.revert(d&&S?F_:wX),A._lazy=0),r){if(Hf(e._startAt=Cs.set(M,co({data:"isStart",overwrite:!1,parent:b,immediateRender:!0,lazy:!A&&Rr(c),startAt:null,delay:0,onUpdate:f&&function(){return no(e,"onUpdate")},stagger:0},r))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(pa||!l&&!y)&&e._startAt.revert(F_),l&&S&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(d&&S&&!A){if(t&&(l=!1),I=co({overwrite:!1,data:"isFromStart",lazy:l&&!A&&Rr(c),immediateRender:l,stagger:0,parent:b},U),z&&(I[X.prop]=z),Hf(e._startAt=Cs.set(M,I)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(pa?e._startAt.revert(F_):e._startAt.render(-1,!0)),e._zTime=t,!l)i(e._startAt,Si,Si);else if(!t)return}for(e._pt=e._ptCache=0,c=S&&Rr(c)||c&&!S,O=0;O<M.length;O++){if(N=M[O],k=N._gsap||FT(M)[O]._gsap,e._ptLookup[O]=$={},nb[k.id]&&Nf.length&&Gx(),ce=C===M?O:C.indexOf(N),X&&(W=new X).init(N,z||U,e,ce,C)!==!1&&(e._pt=P=new Br(e._pt,N,W.name,0,1,W.render,W,0,W.priority),W._props.forEach(function(Q){$[Q]=P}),W.priority&&(L=1)),!X||z)for(I in U)Zr[I]&&(W=oL(I,U,e,ce,N,C))?W.priority&&(L=1):$[I]=P=GT.call(e,N,I,"get",U[I],ce,C,0,s.stringFilter);e._op&&e._op[O]&&e.kill(N,e._op[O]),w&&e._pt&&(Df=e,Ki.killTweensOf(N,$,e.globalTime(t)),q=!e.parent,Df=0),e._pt&&c&&(nb[k.id]=1)}L&&dL(e),e._onInit&&e._onInit(e)}e._onUpdate=f,e._initted=(!e._op||e._pt)&&!q,v&&t<=0&&R.render(Go,!0,!0)},tj=function(e,t,n,s,a,r,l,c){var f=(e._pt&&e._ptCache||(e._ptCache={}))[t],d,g,v,y;if(!f)for(f=e._ptCache[t]=[],v=e._ptLookup,y=e._targets.length;y--;){if(d=v[y][t],d&&d.d&&d.d._pt)for(d=d.d._pt;d&&d.p!==t&&d.fp!==t;)d=d._next;if(!d)return lb=1,e.vars[t]="+=0",HT(e,l),lb=0,c?Ev(t+" not eligible for reset"):1;f.push(d)}for(y=f.length;y--;)g=f[y],d=g._pt||g,d.s=(s||s===0)&&!a?s:d.s+(s||0)+r*d.c,d.c=n-d.s,g.e&&(g.e=gs(n)+Ba(g.e)),g.b&&(g.b=d.s+Ba(g.b))},nj=function(e,t){var n=e[0]?Cd(e[0]).harness:0,s=n&&n.aliases,a,r,l,c;if(!s)return t;a=km({},t);for(r in s)if(r in a)for(c=s[r].split(","),l=c.length;l--;)a[c[l]]=a[r];return a},ij=function(e,t,n,s){var a=t.ease||s||"power1.inOut",r,l;if(Pa(t))l=n[e]||(n[e]=[]),t.forEach(function(c,f){return l.push({t:f/(t.length-1)*100,v:c,e:a})});else for(r in t)l=n[r]||(n[r]=[]),r==="ease"||l.push({t:parseFloat(e),v:t[r],e:a})},rv=function(e,t,n,s,a){return rs(e)?e.call(t,n,s,a):Qs(e)&&~e.indexOf("random(")?wv(e):e},lL=IT+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",cL={};Dr(lL+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return cL[i]=1});var Cs=function(i){CU(e,i);function e(n,s,a,r){var l;typeof s=="number"&&(a.duration=s,s=a,a=null),l=i.call(this,r?s:sv(s))||this;var c=l.vars,f=c.duration,d=c.delay,g=c.immediateRender,v=c.stagger,y=c.overwrite,S=c.keyframes,A=c.defaults,M=c.scrollTrigger,b=c.yoyoEase,C=s.parent||Ki,w=(Pa(n)||RU(n)?Tu(n[0]):"length"in s)?[n]:Ho(n),R,U,O,I,P,N,L,k;if(l._targets=w.length?FT(w):Ev("GSAP target "+n+" not found. https://gsap.com",!so.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=y,S||v||T_(f)||T_(d)){if(s=l.vars,R=l.timeline=new ar({data:"nested",defaults:A||{},targets:C&&C.data==="nested"?C.vars.targets:w}),R.kill(),R.parent=R._dp=mu(l),R._start=0,v||T_(f)||T_(d)){if(I=w.length,L=v&&WU(v),Lc(v))for(P in v)~lL.indexOf(P)&&(k||(k={}),k[P]=v[P]);for(U=0;U<I;U++)O=Hx(s,cL),O.stagger=0,b&&(O.yoyoEase=b),k&&km(O,k),N=w[U],O.duration=+rv(f,mu(l),U,N,w),O.delay=(+rv(d,mu(l),U,N,w)||0)-l._delay,!v&&I===1&&O.delay&&(l._delay=d=O.delay,l._start+=d,O.delay=0),R.to(N,O,L?L(U,N,w):0),R._ease=Pn.none;R.duration()?f=d=0:l.timeline=0}else if(S){sv(co(R.vars.defaults,{ease:"none"})),R._ease=Rd(S.ease||s.ease||"none");var X=0,W,$,ce;if(Pa(S))S.forEach(function(z){return R.to(w,z,">")}),R.duration();else{O={};for(P in S)P==="ease"||P==="easeEach"||ij(P,S[P],O,S.easeEach);for(P in O)for(W=O[P].sort(function(z,q){return z.t-q.t}),X=0,U=0;U<W.length;U++)$=W[U],ce={ease:$.e,duration:($.t-(U?W[U-1].t:0))/100*f},ce[P]=$.v,R.to(w,ce,X),X+=ce.duration;R.duration()<f&&R.to({},{duration:f-R.duration()})}}f||l.duration(f=R.duration())}else l.timeline=0;return y===!0&&!BT&&(Df=mu(l),Ki.killTweensOf(w),Df=0),bc(C,mu(l),a),s.reversed&&l.reverse(),s.paused&&l.paused(!0),(g||!f&&!S&&l._start===ws(C._time)&&Rr(g)&&OX(mu(l))&&C.data!=="nested")&&(l._tTime=-Si,l.render(Math.max(0,-d)||0)),M&&kU(mu(l),M),l}var t=e.prototype;return t.render=function(s,a,r){var l=this._time,c=this._tDur,f=this._dur,d=s<0,g=s>c-Si&&!d?c:s<Si?0:s,v,y,S,A,M,b,C,w,R;if(!f)PX(this,s,a,r);else if(g!==this._tTime||!s||r||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==d||this._lazy){if(v=g,w=this.timeline,this._repeat){if(A=f+this._rDelay,this._repeat<-1&&d)return this.totalTime(A*100+s,a,r);if(v=ws(g%A),g===c?(S=this._repeat,v=f):(M=ws(g/A),S=~~M,S&&S===M?(v=f,S--):v>f&&(v=f)),b=this._yoyo&&S&1,b&&(R=this._yEase,v=f-v),M=Xm(this._tTime,A),v===l&&!r&&this._initted&&S===M)return this._tTime=g,this;S!==M&&(w&&this._yEase&&sL(w,b),this.vars.repeatRefresh&&!b&&!this._lock&&v!==A&&this._initted&&(this._lock=r=1,this.render(ws(A*S),!0).invalidate()._lock=0))}if(!this._initted){if(XU(this,d?s:v,r,a,g))return this._tTime=0,this;if(l!==this._time&&!(r&&this.vars.repeatRefresh&&S!==M))return this;if(f!==this._dur)return this.render(s,a,r)}if(this._tTime=g,this._time=v,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=C=(R||this._ease)(v/f),this._from&&(this.ratio=C=1-C),!l&&g&&!a&&!M&&(no(this,"onStart"),this._tTime!==g))return this;for(y=this._pt;y;)y.r(C,y.d),y=y._next;w&&w.render(s<0?s:w._dur*w._ease(v/this._dur),a,r)||this._startAt&&(this._zTime=s),this._onUpdate&&!a&&(d&&ib(this,s,a,r),no(this,"onUpdate")),this._repeat&&S!==M&&this.vars.onRepeat&&!a&&this.parent&&no(this,"onRepeat"),(g===this._tDur||!g)&&this._tTime===g&&(d&&!this._onUpdate&&ib(this,s,!0,!0),(s||!f)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&Hf(this,1),!a&&!(d&&!l)&&(g||l||b)&&(no(this,g===c?"onComplete":"onReverseComplete",!0),this._prom&&!(g<c&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),i.prototype.invalidate.call(this,s)},t.resetTo=function(s,a,r,l,c){Rv||$r.wake(),this._ts||this.play();var f=Math.min(this._dur,(this._dp._time-this._start)*this._ts),d;return this._initted||HT(this,f),d=this._ease(f/this._dur),tj(this,s,a,r,l,d,f,c)?this.resetTo(s,a,r,l,1):(kS(this,0),this.parent||HU(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(s,a){if(a===void 0&&(a="all"),!s&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?Vg(this):this.scrollTrigger&&this.scrollTrigger.kill(!!pa),this;if(this.timeline){var r=this.timeline.totalDuration();return this.timeline.killTweensOf(s,a,Df&&Df.vars.overwrite!==!0)._first||Vg(this),this.parent&&r!==this.timeline.totalDuration()&&jm(this,this._dur*this.timeline._tDur/r,0,1),this}var l=this._targets,c=s?Ho(s):l,f=this._ptLookup,d=this._pt,g,v,y,S,A,M,b;if((!a||a==="all")&&UX(l,c))return a==="all"&&(this._pt=0),Vg(this);for(g=this._op=this._op||[],a!=="all"&&(Qs(a)&&(A={},Dr(a,function(C){return A[C]=1}),a=A),a=nj(l,a)),b=l.length;b--;)if(~c.indexOf(l[b])){v=f[b],a==="all"?(g[b]=a,S=v,y={}):(y=g[b]=g[b]||{},S=a);for(A in S)M=v&&v[A],M&&((!("kill"in M.d)||M.d.kill(A)===!0)&&HS(this,M,"_pt"),delete v[A]),y!=="all"&&(y[A]=1)}return this._initted&&!this._pt&&d&&Vg(this),this},e.to=function(s,a){return new e(s,a,arguments[2])},e.from=function(s,a){return av(1,arguments)},e.delayedCall=function(s,a,r,l){return new e(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:a,onReverseComplete:a,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:l})},e.fromTo=function(s,a,r){return av(2,arguments)},e.set=function(s,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new e(s,a)},e.killTweensOf=function(s,a,r){return Ki.killTweensOf(s,a,r)},e}(Dv);co(Cs.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Dr("staggerTo,staggerFrom,staggerFromTo",function(i){Cs[i]=function(){var e=new ar,t=ab.call(arguments,0);return t.splice(i==="staggerFromTo"?5:4,0,0),e[i].apply(e,t)}});var VT=function(e,t,n){return e[t]=n},uL=function(e,t,n){return e[t](n)},sj=function(e,t,n,s){return e[t](s.fp,n)},aj=function(e,t,n){return e.setAttribute(t,n)},kT=function(e,t){return rs(e[t])?uL:UT(e[t])&&e.setAttribute?aj:VT},fL=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},rj=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},hL=function(e,t){var n=t._pt,s="";if(!e&&t.b)s=t.b;else if(e===1&&t.e)s=t.e;else{for(;n;)s=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+s,n=n._next;s+=t.c}t.set(t.t,t.p,s,t)},XT=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},oj=function(e,t,n,s){for(var a=this._pt,r;a;)r=a._next,a.p===s&&a.modifier(e,t,n),a=r},lj=function(e){for(var t=this._pt,n,s;t;)s=t._next,t.p===e&&!t.op||t.op===e?HS(this,t,"_pt"):t.dep||(n=1),t=s;return!n},cj=function(e,t,n,s){s.mSet(e,t,s.m.call(s.tween,n,s.mt),s)},dL=function(e){for(var t=e._pt,n,s,a,r;t;){for(n=t._next,s=a;s&&s.pr>t.pr;)s=s._next;(t._prev=s?s._prev:r)?t._prev._next=t:a=t,(t._next=s)?s._prev=t:r=t,t=n}e._pt=a},Br=function(){function i(t,n,s,a,r,l,c,f,d){this.t=n,this.s=a,this.c=r,this.p=s,this.r=l||fL,this.d=c||this,this.set=f||VT,this.pr=d||0,this._next=t,t&&(t._prev=this)}var e=i.prototype;return e.modifier=function(n,s,a){this.mSet=this.mSet||this.set,this.set=cj,this.m=n,this.mt=a,this.tween=s},i}();Dr(IT+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return PT[i]=1});lo.TweenMax=lo.TweenLite=Cs;lo.TimelineLite=lo.TimelineMax=ar;Ki=new ar({sortChildren:!1,defaults:Vm,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});so.stringFilter=nL;var Dd=[],G_={},uj=[],dR=0,fj=0,aM=function(e){return(G_[e]||uj).map(function(t){return t()})},cb=function(){var e=Date.now(),t=[];e-dR>2&&(aM("matchMediaInit"),Dd.forEach(function(n){var s=n.queries,a=n.conditions,r,l,c,f;for(l in s)r=Mc.matchMedia(s[l]).matches,r&&(c=1),r!==a[l]&&(a[l]=r,f=1);f&&(n.revert(),c&&t.push(n))}),aM("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(s){return n.add(null,s)})}),dR=e,aM("matchMedia"))},pL=function(){function i(t,n){this.selector=n&&rb(n),this.data=[],this._r=[],this.isReverted=!1,this.id=fj++,t&&this.add(t)}var e=i.prototype;return e.add=function(n,s,a){rs(n)&&(a=s,s=n,n=rs);var r=this,l=function(){var f=Fi,d=r.selector,g;return f&&f!==r&&f.data.push(r),a&&(r.selector=rb(a)),Fi=r,g=s.apply(r,arguments),rs(g)&&r._r.push(g),Fi=f,r.selector=d,r.isReverted=!1,g};return r.last=l,n===rs?l(r,function(c){return r.add(null,c)}):n?r[n]=l:l},e.ignore=function(n){var s=Fi;Fi=null,n(this),Fi=s},e.getTweens=function(){var n=[];return this.data.forEach(function(s){return s instanceof i?n.push.apply(n,s.getTweens()):s instanceof Cs&&!(s.parent&&s.parent.data==="nested")&&n.push(s)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,s){var a=this;if(n?function(){for(var l=a.getTweens(),c=a.data.length,f;c--;)f=a.data[c],f.data==="isFlip"&&(f.revert(),f.getChildren(!0,!0,!1).forEach(function(d){return l.splice(l.indexOf(d),1)}));for(l.map(function(d){return{g:d._dur||d._delay||d._sat&&!d._sat.vars.immediateRender?d.globalTime(0):-1/0,t:d}}).sort(function(d,g){return g.g-d.g||-1/0}).forEach(function(d){return d.t.revert(n)}),c=a.data.length;c--;)f=a.data[c],f instanceof ar?f.data!=="nested"&&(f.scrollTrigger&&f.scrollTrigger.revert(),f.kill()):!(f instanceof Cs)&&f.revert&&f.revert(n);a._r.forEach(function(d){return d(n,a)}),a.isReverted=!0}():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),s)for(var r=Dd.length;r--;)Dd[r].id===this.id&&Dd.splice(r,1)},e.revert=function(n){this.kill(n||{})},i}(),hj=function(){function i(t){this.contexts=[],this.scope=t,Fi&&Fi.data.push(this)}var e=i.prototype;return e.add=function(n,s,a){Lc(n)||(n={matches:n});var r=new pL(0,a||this.scope),l=r.conditions={},c,f,d;Fi&&!r.selector&&(r.selector=Fi.selector),this.contexts.push(r),s=r.add("onMatch",s),r.queries=n;for(f in n)f==="all"?d=1:(c=Mc.matchMedia(n[f]),c&&(Dd.indexOf(r)<0&&Dd.push(r),(l[f]=c.matches)&&(d=1),c.addListener?c.addListener(cb):c.addEventListener("change",cb)));return d&&s(r,function(g){return r.add(null,g)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(s){return s.kill(n,!0)})},i}(),kx={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(s){return $U(s)})},timeline:function(e){return new ar(e)},getTweensOf:function(e,t){return Ki.getTweensOf(e,t)},getProperty:function(e,t,n,s){Qs(e)&&(e=Ho(e)[0]);var a=Cd(e||{}).get,r=n?GU:zU;return n==="native"&&(n=""),e&&(t?r((Zr[t]&&Zr[t].get||a)(e,t,n,s)):function(l,c,f){return r((Zr[l]&&Zr[l].get||a)(e,l,c,f))})},quickSetter:function(e,t,n){if(e=Ho(e),e.length>1){var s=e.map(function(d){return Lr.quickSetter(d,t,n)}),a=s.length;return function(d){for(var g=a;g--;)s[g](d)}}e=e[0]||{};var r=Zr[t],l=Cd(e),c=l.harness&&(l.harness.aliases||{})[t]||t,f=r?function(d){var g=new r;mm._pt=0,g.init(e,n?d+n:d,mm,0,[e]),g.render(1,g),mm._pt&&XT(1,mm)}:l.set(e,c);return r?f:function(d){return f(e,c,n?d+n:d,l,1)}},quickTo:function(e,t,n){var s,a=Lr.to(e,co((s={},s[t]="+=0.1",s.paused=!0,s.stagger=0,s),n||{})),r=function(c,f,d){return a.resetTo(t,c,f,d)};return r.tween=a,r},isTweening:function(e){return Ki.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Rd(e.ease,Vm.ease)),lR(Vm,e||{})},config:function(e){return lR(so,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,s=e.plugins,a=e.defaults,r=e.extendTimeline;(s||"").split(",").forEach(function(l){return l&&!Zr[l]&&!lo[l]&&Ev(t+" effect requires "+l+" plugin.")}),tM[t]=function(l,c,f){return n(Ho(l),co(c||{},a),f)},r&&(ar.prototype[t]=function(l,c,f){return this.add(tM[t](l,Lc(c)?c:(f=c)&&{},this),f)})},registerEase:function(e,t){Pn[e]=Rd(t)},parseEase:function(e,t){return arguments.length?Rd(e,t):Pn},getById:function(e){return Ki.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new ar(e),s,a;for(n.smoothChildTiming=Rr(e.smoothChildTiming),Ki.remove(n),n._dp=0,n._time=n._tTime=Ki._time,s=Ki._first;s;)a=s._next,(t||!(!s._dur&&s instanceof Cs&&s.vars.onComplete===s._targets[0]))&&bc(n,s,s._start-s._delay),s=a;return bc(Ki,n,0),n},context:function(e,t){return e?new pL(e,t):Fi},matchMedia:function(e){return new hj(e)},matchMediaRefresh:function(){return Dd.forEach(function(e){var t=e.conditions,n,s;for(s in t)t[s]&&(t[s]=!1,n=1);n&&e.revert()})||cb()},addEventListener:function(e,t){var n=G_[e]||(G_[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=G_[e],s=n&&n.indexOf(t);s>=0&&n.splice(s,1)},utils:{wrap:XX,wrapYoyo:jX,distribute:WU,random:KU,snap:qU,normalize:kX,getUnit:Ba,clamp:zX,splitColor:eL,toArray:Ho,selector:rb,mapRange:ZU,pipe:HX,unitize:VX,interpolate:YX,shuffle:YU},install:OU,effects:tM,ticker:$r,updateRoot:ar.updateRoot,plugins:Zr,globalTimeline:Ki,core:{PropTween:Br,globals:NU,Tween:Cs,Timeline:ar,Animation:Dv,getCache:Cd,_removeLinkedListItem:HS,reverting:function(){return pa},context:function(e){return e&&Fi&&(Fi.data.push(e),e._ctx=Fi),Fi},suppressOverwrites:function(e){return BT=e}}};Dr("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return kx[i]=Cs[i]});$r.add(ar.updateRoot);mm=kx.to({},{duration:0});var dj=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},pj=function(e,t){var n=e._targets,s,a,r;for(s in t)for(a=n.length;a--;)r=e._ptLookup[a][s],r&&(r=r.d)&&(r._pt&&(r=dj(r,s)),r&&r.modifier&&r.modifier(t[s],e,n[a],s))},rM=function(e,t){return{name:e,headless:1,rawVars:1,init:function(s,a,r){r._onInit=function(l){var c,f;if(Qs(a)&&(c={},Dr(a,function(d){return c[d]=1}),a=c),t){c={};for(f in a)c[f]=t(a[f]);a=c}pj(l,a)}}}},Lr=kx.registerPlugin({name:"attr",init:function(e,t,n,s,a){var r,l,c;this.tween=n;for(r in t)c=e.getAttribute(r)||"",l=this.add(e,"setAttribute",(c||0)+"",t[r],s,a,0,0,r),l.op=r,l.b=c,this._props.push(r)},render:function(e,t){for(var n=t._pt;n;)pa?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},rM("roundProps",ob),rM("modifiers"),rM("snap",qU))||kx;Cs.version=ar.version=Lr.version="3.13.0";LU=1;LT()&&Ym();Pn.Power0;Pn.Power1;Pn.Power2;Pn.Power3;Pn.Power4;Pn.Linear;Pn.Quad;Pn.Cubic;Pn.Quart;Pn.Quint;Pn.Strong;Pn.Elastic;Pn.Back;Pn.SteppedEase;Pn.Bounce;Pn.Sine;Pn.Expo;Pn.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var pR,Bf,Em,jT,xd,mR,YT,mj=function(){return typeof window<"u"},Eu={},cd=180/Math.PI,Cm=Math.PI/180,fm=Math.atan2,gR=1e8,WT=/([A-Z])/g,gj=/(left|right|width|margin|padding|x)/i,vj=/[\s,\(]\S/,Ec={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},ub=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},yj=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},_j=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},xj=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},mL=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},gL=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},Sj=function(e,t,n){return e.style[t]=n},Aj=function(e,t,n){return e.style.setProperty(t,n)},Mj=function(e,t,n){return e._gsap[t]=n},bj=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},Tj=function(e,t,n,s,a){var r=e._gsap;r.scaleX=r.scaleY=n,r.renderTransform(a,r)},Ej=function(e,t,n,s,a){var r=e._gsap;r[t]=n,r.renderTransform(a,r)},Qi="transform",Ur=Qi+"Origin",Cj=function i(e,t){var n=this,s=this.target,a=s.style,r=s._gsap;if(e in Eu&&a){if(this.tfm=this.tfm||{},e!=="transform")e=Ec[e]||e,~e.indexOf(",")?e.split(",").forEach(function(l){return n.tfm[l]=vu(s,l)}):this.tfm[e]=r.x?r[e]:vu(s,e),e===Ur&&(this.tfm.zOrigin=r.zOrigin);else return Ec.transform.split(",").forEach(function(l){return i.call(n,l,t)});if(this.props.indexOf(Qi)>=0)return;r.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(Ur,t,"")),e=Qi}(a||t)&&this.props.push(e,t,a[e])},vL=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},wj=function(){var e=this.props,t=this.target,n=t.style,s=t._gsap,a,r;for(a=0;a<e.length;a+=3)e[a+1]?e[a+1]===2?t[e[a]](e[a+2]):t[e[a]]=e[a+2]:e[a+2]?n[e[a]]=e[a+2]:n.removeProperty(e[a].substr(0,2)==="--"?e[a]:e[a].replace(WT,"-$1").toLowerCase());if(this.tfm){for(r in this.tfm)s[r]=this.tfm[r];s.svg&&(s.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),a=YT(),(!a||!a.isStart)&&!n[Qi]&&(vL(n),s.zOrigin&&n[Ur]&&(n[Ur]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},yL=function(e,t){var n={target:e,props:[],revert:wj,save:Cj};return e._gsap||Lr.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(s){return n.save(s)}),n},_L,fb=function(e,t){var n=Bf.createElementNS?Bf.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Bf.createElement(e);return n&&n.style?n:Bf.createElement(e)},Vo=function i(e,t,n){var s=getComputedStyle(e);return s[t]||s.getPropertyValue(t.replace(WT,"-$1").toLowerCase())||s.getPropertyValue(t)||!n&&i(e,Wm(t)||t,1)||""},vR="O,Moz,ms,Ms,Webkit".split(","),Wm=function(e,t,n){var s=t||xd,a=s.style,r=5;if(e in a&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);r--&&!(vR[r]+e in a););return r<0?null:(r===3?"ms":r>=0?vR[r]:"")+e},hb=function(){mj()&&window.document&&(pR=window,Bf=pR.document,Em=Bf.documentElement,xd=fb("div")||{style:{}},fb("div"),Qi=Wm(Qi),Ur=Qi+"Origin",xd.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_L=!!Wm("perspective"),YT=Lr.core.reverting,jT=1)},yR=function(e){var t=e.ownerSVGElement,n=fb("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=e.cloneNode(!0),a;s.style.display="block",n.appendChild(s),Em.appendChild(n);try{a=s.getBBox()}catch{}return n.removeChild(s),Em.removeChild(n),a},_R=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},xL=function(e){var t,n;try{t=e.getBBox()}catch{t=yR(e),n=1}return t&&(t.width||t.height)||n||(t=yR(e)),t&&!t.width&&!t.x&&!t.y?{x:+_R(e,["x","cx","x1"])||0,y:+_R(e,["y","cy","y1"])||0,width:0,height:0}:t},SL=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&xL(e))},Hd=function(e,t){if(t){var n=e.style,s;t in Eu&&t!==Ur&&(t=Qi),n.removeProperty?(s=t.substr(0,2),(s==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(s==="--"?t:t.replace(WT,"-$1").toLowerCase())):n.removeAttribute(t)}},Uf=function(e,t,n,s,a,r){var l=new Br(e._pt,t,n,0,1,r?gL:mL);return e._pt=l,l.b=s,l.e=a,e._props.push(n),l},xR={deg:1,rad:1,turn:1},Rj={grid:1,flex:1},Vf=function i(e,t,n,s){var a=parseFloat(n)||0,r=(n+"").trim().substr((a+"").length)||"px",l=xd.style,c=gj.test(t),f=e.tagName.toLowerCase()==="svg",d=(f?"client":"offset")+(c?"Width":"Height"),g=100,v=s==="px",y=s==="%",S,A,M,b;if(s===r||!a||xR[s]||xR[r])return a;if(r!=="px"&&!v&&(a=i(e,t,n,"px")),b=e.getCTM&&SL(e),(y||r==="%")&&(Eu[t]||~t.indexOf("adius")))return S=b?e.getBBox()[c?"width":"height"]:e[d],gs(y?a/S*g:a/100*S);if(l[c?"width":"height"]=g+(v?r:s),A=s!=="rem"&&~t.indexOf("adius")||s==="em"&&e.appendChild&&!f?e:e.parentNode,b&&(A=(e.ownerSVGElement||{}).parentNode),(!A||A===Bf||!A.appendChild)&&(A=Bf.body),M=A._gsap,M&&y&&M.width&&c&&M.time===$r.time&&!M.uncache)return gs(a/M.width*g);if(y&&(t==="height"||t==="width")){var C=e.style[t];e.style[t]=g+s,S=e[d],C?e.style[t]=C:Hd(e,t)}else(y||r==="%")&&!Rj[Vo(A,"display")]&&(l.position=Vo(e,"position")),A===e&&(l.position="static"),A.appendChild(xd),S=xd[d],A.removeChild(xd),l.position="absolute";return c&&y&&(M=Cd(A),M.time=$r.time,M.width=A[d]),gs(v?S*a/g:S&&a?g/S*a:0)},vu=function(e,t,n,s){var a;return jT||hb(),t in Ec&&t!=="transform"&&(t=Ec[t],~t.indexOf(",")&&(t=t.split(",")[0])),Eu[t]&&t!=="transform"?(a=Uv(e,s),a=t!=="transformOrigin"?a[t]:a.svg?a.origin:jx(Vo(e,Ur))+" "+a.zOrigin+"px"):(a=e.style[t],(!a||a==="auto"||s||~(a+"").indexOf("calc("))&&(a=Xx[t]&&Xx[t](e,t,n)||Vo(e,t)||IU(e,t)||(t==="opacity"?1:0))),n&&!~(a+"").trim().indexOf(" ")?Vf(e,t,a,n)+n:a},Dj=function(e,t,n,s){if(!n||n==="none"){var a=Wm(t,e,1),r=a&&Vo(e,a,1);r&&r!==n?(t=a,n=r):t==="borderColor"&&(n=Vo(e,"borderTopColor"))}var l=new Br(this._pt,e.style,t,0,1,hL),c=0,f=0,d,g,v,y,S,A,M,b,C,w,R,U;if(l.b=n,l.e=s,n+="",s+="",s.substring(0,6)==="var(--"&&(s=Vo(e,s.substring(4,s.indexOf(")")))),s==="auto"&&(A=e.style[t],e.style[t]=s,s=Vo(e,t)||s,A?e.style[t]=A:Hd(e,t)),d=[n,s],nL(d),n=d[0],s=d[1],v=n.match(pm)||[],U=s.match(pm)||[],U.length){for(;g=pm.exec(s);)M=g[0],C=s.substring(c,g.index),S?S=(S+1)%5:(C.substr(-5)==="rgba("||C.substr(-5)==="hsla(")&&(S=1),M!==(A=v[f++]||"")&&(y=parseFloat(A)||0,R=A.substr((y+"").length),M.charAt(1)==="="&&(M=Tm(y,M)+R),b=parseFloat(M),w=M.substr((b+"").length),c=pm.lastIndex-w.length,w||(w=w||so.units[t]||R,c===s.length&&(s+=w,l.e+=w)),R!==w&&(y=Vf(e,t,A,w)||0),l._pt={_next:l._pt,p:C||f===1?C:",",s:y,c:b-y,m:S&&S<4||t==="zIndex"?Math.round:0});l.c=c<s.length?s.substring(c,s.length):""}else l.r=t==="display"&&s==="none"?gL:mL;return BU.test(s)&&(l.e=0),this._pt=l,l},SR={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Bj=function(e){var t=e.split(" "),n=t[0],s=t[1]||"50%";return(n==="top"||n==="bottom"||s==="left"||s==="right")&&(e=n,n=s,s=e),t[0]=SR[n]||n,t[1]=SR[s]||s,t.join(" ")},Uj=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,s=n.style,a=t.u,r=n._gsap,l,c,f;if(a==="all"||a===!0)s.cssText="",c=1;else for(a=a.split(","),f=a.length;--f>-1;)l=a[f],Eu[l]&&(c=1,l=l==="transformOrigin"?Ur:Qi),Hd(n,l);c&&(Hd(n,Qi),r&&(r.svg&&n.removeAttribute("transform"),s.scale=s.rotate=s.translate="none",Uv(n,1),r.uncache=1,vL(s)))}},Xx={clearProps:function(e,t,n,s,a){if(a.data!=="isFromStart"){var r=e._pt=new Br(e._pt,t,n,0,0,Uj);return r.u=s,r.pr=-10,r.tween=a,e._props.push(n),1}}},Bv=[1,0,0,1,0,0],AL={},ML=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},AR=function(e){var t=Vo(e,Qi);return ML(t)?Bv:t.substr(7).match(DU).map(gs)},qT=function(e,t){var n=e._gsap||Cd(e),s=e.style,a=AR(e),r,l,c,f;return n.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,a=[c.a,c.b,c.c,c.d,c.e,c.f],a.join(",")==="1,0,0,1,0,0"?Bv:a):(a===Bv&&!e.offsetParent&&e!==Em&&!n.svg&&(c=s.display,s.display="block",r=e.parentNode,(!r||!e.offsetParent&&!e.getBoundingClientRect().width)&&(f=1,l=e.nextElementSibling,Em.appendChild(e)),a=AR(e),c?s.display=c:Hd(e,"display"),f&&(l?r.insertBefore(e,l):r?r.appendChild(e):Em.removeChild(e))),t&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},db=function(e,t,n,s,a,r){var l=e._gsap,c=a||qT(e,!0),f=l.xOrigin||0,d=l.yOrigin||0,g=l.xOffset||0,v=l.yOffset||0,y=c[0],S=c[1],A=c[2],M=c[3],b=c[4],C=c[5],w=t.split(" "),R=parseFloat(w[0])||0,U=parseFloat(w[1])||0,O,I,P,N;n?c!==Bv&&(I=y*M-S*A)&&(P=R*(M/I)+U*(-A/I)+(A*C-M*b)/I,N=R*(-S/I)+U*(y/I)-(y*C-S*b)/I,R=P,U=N):(O=xL(e),R=O.x+(~w[0].indexOf("%")?R/100*O.width:R),U=O.y+(~(w[1]||w[0]).indexOf("%")?U/100*O.height:U)),s||s!==!1&&l.smooth?(b=R-f,C=U-d,l.xOffset=g+(b*y+C*A)-b,l.yOffset=v+(b*S+C*M)-C):l.xOffset=l.yOffset=0,l.xOrigin=R,l.yOrigin=U,l.smooth=!!s,l.origin=t,l.originIsAbsolute=!!n,e.style[Ur]="0px 0px",r&&(Uf(r,l,"xOrigin",f,R),Uf(r,l,"yOrigin",d,U),Uf(r,l,"xOffset",g,l.xOffset),Uf(r,l,"yOffset",v,l.yOffset)),e.setAttribute("data-svg-origin",R+" "+U)},Uv=function(e,t){var n=e._gsap||new rL(e);if("x"in n&&!t&&!n.uncache)return n;var s=e.style,a=n.scaleX<0,r="px",l="deg",c=getComputedStyle(e),f=Vo(e,Ur)||"0",d,g,v,y,S,A,M,b,C,w,R,U,O,I,P,N,L,k,X,W,$,ce,z,q,Q,re,H,G,K,se,J,ne;return d=g=v=A=M=b=C=w=R=0,y=S=1,n.svg=!!(e.getCTM&&SL(e)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(s[Qi]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[Qi]!=="none"?c[Qi]:"")),s.scale=s.rotate=s.translate="none"),I=qT(e,n.svg),n.svg&&(n.uncache?(Q=e.getBBox(),f=n.xOrigin-Q.x+"px "+(n.yOrigin-Q.y)+"px",q=""):q=!t&&e.getAttribute("data-svg-origin"),db(e,q||f,!!q||n.originIsAbsolute,n.smooth!==!1,I)),U=n.xOrigin||0,O=n.yOrigin||0,I!==Bv&&(k=I[0],X=I[1],W=I[2],$=I[3],d=ce=I[4],g=z=I[5],I.length===6?(y=Math.sqrt(k*k+X*X),S=Math.sqrt($*$+W*W),A=k||X?fm(X,k)*cd:0,C=W||$?fm(W,$)*cd+A:0,C&&(S*=Math.abs(Math.cos(C*Cm))),n.svg&&(d-=U-(U*k+O*W),g-=O-(U*X+O*$))):(ne=I[6],se=I[7],H=I[8],G=I[9],K=I[10],J=I[11],d=I[12],g=I[13],v=I[14],P=fm(ne,K),M=P*cd,P&&(N=Math.cos(-P),L=Math.sin(-P),q=ce*N+H*L,Q=z*N+G*L,re=ne*N+K*L,H=ce*-L+H*N,G=z*-L+G*N,K=ne*-L+K*N,J=se*-L+J*N,ce=q,z=Q,ne=re),P=fm(-W,K),b=P*cd,P&&(N=Math.cos(-P),L=Math.sin(-P),q=k*N-H*L,Q=X*N-G*L,re=W*N-K*L,J=$*L+J*N,k=q,X=Q,W=re),P=fm(X,k),A=P*cd,P&&(N=Math.cos(P),L=Math.sin(P),q=k*N+X*L,Q=ce*N+z*L,X=X*N-k*L,z=z*N-ce*L,k=q,ce=Q),M&&Math.abs(M)+Math.abs(A)>359.9&&(M=A=0,b=180-b),y=gs(Math.sqrt(k*k+X*X+W*W)),S=gs(Math.sqrt(z*z+ne*ne)),P=fm(ce,z),C=Math.abs(P)>2e-4?P*cd:0,R=J?1/(J<0?-J:J):0),n.svg&&(q=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!ML(Vo(e,Qi)),q&&e.setAttribute("transform",q))),Math.abs(C)>90&&Math.abs(C)<270&&(a?(y*=-1,C+=A<=0?180:-180,A+=A<=0?180:-180):(S*=-1,C+=C<=0?180:-180)),t=t||n.uncache,n.x=d-((n.xPercent=d&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-d)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+r,n.y=g-((n.yPercent=g&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-g)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+r,n.z=v+r,n.scaleX=gs(y),n.scaleY=gs(S),n.rotation=gs(A)+l,n.rotationX=gs(M)+l,n.rotationY=gs(b)+l,n.skewX=C+l,n.skewY=w+l,n.transformPerspective=R+r,(n.zOrigin=parseFloat(f.split(" ")[2])||!t&&n.zOrigin||0)&&(s[Ur]=jx(f)),n.xOffset=n.yOffset=0,n.force3D=so.force3D,n.renderTransform=n.svg?Oj:_L?bL:Lj,n.uncache=0,n},jx=function(e){return(e=e.split(" "))[0]+" "+e[1]},oM=function(e,t,n){var s=Ba(t);return gs(parseFloat(t)+parseFloat(Vf(e,"x",n+"px",s)))+s},Lj=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,bL(e,t)},nd="0deg",Og="0px",id=") ",bL=function(e,t){var n=t||this,s=n.xPercent,a=n.yPercent,r=n.x,l=n.y,c=n.z,f=n.rotation,d=n.rotationY,g=n.rotationX,v=n.skewX,y=n.skewY,S=n.scaleX,A=n.scaleY,M=n.transformPerspective,b=n.force3D,C=n.target,w=n.zOrigin,R="",U=b==="auto"&&e&&e!==1||b===!0;if(w&&(g!==nd||d!==nd)){var O=parseFloat(d)*Cm,I=Math.sin(O),P=Math.cos(O),N;O=parseFloat(g)*Cm,N=Math.cos(O),r=oM(C,r,I*N*-w),l=oM(C,l,-Math.sin(O)*-w),c=oM(C,c,P*N*-w+w)}M!==Og&&(R+="perspective("+M+id),(s||a)&&(R+="translate("+s+"%, "+a+"%) "),(U||r!==Og||l!==Og||c!==Og)&&(R+=c!==Og||U?"translate3d("+r+", "+l+", "+c+") ":"translate("+r+", "+l+id),f!==nd&&(R+="rotate("+f+id),d!==nd&&(R+="rotateY("+d+id),g!==nd&&(R+="rotateX("+g+id),(v!==nd||y!==nd)&&(R+="skew("+v+", "+y+id),(S!==1||A!==1)&&(R+="scale("+S+", "+A+id),C.style[Qi]=R||"translate(0, 0)"},Oj=function(e,t){var n=t||this,s=n.xPercent,a=n.yPercent,r=n.x,l=n.y,c=n.rotation,f=n.skewX,d=n.skewY,g=n.scaleX,v=n.scaleY,y=n.target,S=n.xOrigin,A=n.yOrigin,M=n.xOffset,b=n.yOffset,C=n.forceCSS,w=parseFloat(r),R=parseFloat(l),U,O,I,P,N;c=parseFloat(c),f=parseFloat(f),d=parseFloat(d),d&&(d=parseFloat(d),f+=d,c+=d),c||f?(c*=Cm,f*=Cm,U=Math.cos(c)*g,O=Math.sin(c)*g,I=Math.sin(c-f)*-v,P=Math.cos(c-f)*v,f&&(d*=Cm,N=Math.tan(f-d),N=Math.sqrt(1+N*N),I*=N,P*=N,d&&(N=Math.tan(d),N=Math.sqrt(1+N*N),U*=N,O*=N)),U=gs(U),O=gs(O),I=gs(I),P=gs(P)):(U=g,P=v,O=I=0),(w&&!~(r+"").indexOf("px")||R&&!~(l+"").indexOf("px"))&&(w=Vf(y,"x",r,"px"),R=Vf(y,"y",l,"px")),(S||A||M||b)&&(w=gs(w+S-(S*U+A*I)+M),R=gs(R+A-(S*O+A*P)+b)),(s||a)&&(N=y.getBBox(),w=gs(w+s/100*N.width),R=gs(R+a/100*N.height)),N="matrix("+U+","+O+","+I+","+P+","+w+","+R+")",y.setAttribute("transform",N),C&&(y.style[Qi]=N)},Nj=function(e,t,n,s,a){var r=360,l=Qs(a),c=parseFloat(a)*(l&&~a.indexOf("rad")?cd:1),f=c-s,d=s+f+"deg",g,v;return l&&(g=a.split("_")[1],g==="short"&&(f%=r,f!==f%(r/2)&&(f+=f<0?r:-r)),g==="cw"&&f<0?f=(f+r*gR)%r-~~(f/r)*r:g==="ccw"&&f>0&&(f=(f-r*gR)%r-~~(f/r)*r)),e._pt=v=new Br(e._pt,t,n,s,f,yj),v.e=d,v.u="deg",e._props.push(n),v},MR=function(e,t){for(var n in t)e[n]=t[n];return e},Pj=function(e,t,n){var s=MR({},n._gsap),a="perspective,force3D,transformOrigin,svgOrigin",r=n.style,l,c,f,d,g,v,y,S;s.svg?(f=n.getAttribute("transform"),n.setAttribute("transform",""),r[Qi]=t,l=Uv(n,1),Hd(n,Qi),n.setAttribute("transform",f)):(f=getComputedStyle(n)[Qi],r[Qi]=t,l=Uv(n,1),r[Qi]=f);for(c in Eu)f=s[c],d=l[c],f!==d&&a.indexOf(c)<0&&(y=Ba(f),S=Ba(d),g=y!==S?Vf(n,c,f,S):parseFloat(f),v=parseFloat(d),e._pt=new Br(e._pt,l,c,g,v-g,ub),e._pt.u=S||0,e._props.push(c));MR(l,s)};Dr("padding,margin,Width,Radius",function(i,e){var t="Top",n="Right",s="Bottom",a="Left",r=(e<3?[t,n,s,a]:[t+a,t+n,s+n,s+a]).map(function(l){return e<2?i+l:"border"+l+i});Xx[e>1?"border"+i:i]=function(l,c,f,d,g){var v,y;if(arguments.length<4)return v=r.map(function(S){return vu(l,S,f)}),y=v.join(" "),y.split(v[0]).length===5?v[0]:y;v=(d+"").split(" "),y={},r.forEach(function(S,A){return y[S]=v[A]=v[A]||v[(A-1)/2|0]}),l.init(c,y,g)}});var TL={name:"css",register:hb,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,s,a){var r=this._props,l=e.style,c=n.vars.startAt,f,d,g,v,y,S,A,M,b,C,w,R,U,O,I,P;jT||hb(),this.styles=this.styles||yL(e),P=this.styles.props,this.tween=n;for(A in t)if(A!=="autoRound"&&(d=t[A],!(Zr[A]&&oL(A,t,n,s,e,a)))){if(y=typeof d,S=Xx[A],y==="function"&&(d=d.call(n,s,e,a),y=typeof d),y==="string"&&~d.indexOf("random(")&&(d=wv(d)),S)S(this,e,A,d,n)&&(I=1);else if(A.substr(0,2)==="--")f=(getComputedStyle(e).getPropertyValue(A)+"").trim(),d+="",Pf.lastIndex=0,Pf.test(f)||(M=Ba(f),b=Ba(d)),b?M!==b&&(f=Vf(e,A,f,b)+b):M&&(d+=M),this.add(l,"setProperty",f,d,s,a,0,0,A),r.push(A),P.push(A,0,l[A]);else if(y!=="undefined"){if(c&&A in c?(f=typeof c[A]=="function"?c[A].call(n,s,e,a):c[A],Qs(f)&&~f.indexOf("random(")&&(f=wv(f)),Ba(f+"")||f==="auto"||(f+=so.units[A]||Ba(vu(e,A))||""),(f+"").charAt(1)==="="&&(f=vu(e,A))):f=vu(e,A),v=parseFloat(f),C=y==="string"&&d.charAt(1)==="="&&d.substr(0,2),C&&(d=d.substr(2)),g=parseFloat(d),A in Ec&&(A==="autoAlpha"&&(v===1&&vu(e,"visibility")==="hidden"&&g&&(v=0),P.push("visibility",0,l.visibility),Uf(this,l,"visibility",v?"inherit":"hidden",g?"inherit":"hidden",!g)),A!=="scale"&&A!=="transform"&&(A=Ec[A],~A.indexOf(",")&&(A=A.split(",")[0]))),w=A in Eu,w){if(this.styles.save(A),y==="string"&&d.substring(0,6)==="var(--"&&(d=Vo(e,d.substring(4,d.indexOf(")"))),g=parseFloat(d)),R||(U=e._gsap,U.renderTransform&&!t.parseTransform||Uv(e,t.parseTransform),O=t.smoothOrigin!==!1&&U.smooth,R=this._pt=new Br(this._pt,l,Qi,0,1,U.renderTransform,U,0,-1),R.dep=1),A==="scale")this._pt=new Br(this._pt,U,"scaleY",U.scaleY,(C?Tm(U.scaleY,C+g):g)-U.scaleY||0,ub),this._pt.u=0,r.push("scaleY",A),A+="X";else if(A==="transformOrigin"){P.push(Ur,0,l[Ur]),d=Bj(d),U.svg?db(e,d,0,O,0,this):(b=parseFloat(d.split(" ")[2])||0,b!==U.zOrigin&&Uf(this,U,"zOrigin",U.zOrigin,b),Uf(this,l,A,jx(f),jx(d)));continue}else if(A==="svgOrigin"){db(e,d,1,O,0,this);continue}else if(A in AL){Nj(this,U,A,v,C?Tm(v,C+d):d);continue}else if(A==="smoothOrigin"){Uf(this,U,"smooth",U.smooth,d);continue}else if(A==="force3D"){U[A]=d;continue}else if(A==="transform"){Pj(this,d,e);continue}}else A in l||(A=Wm(A)||A);if(w||(g||g===0)&&(v||v===0)&&!vj.test(d)&&A in l)M=(f+"").substr((v+"").length),g||(g=0),b=Ba(d)||(A in so.units?so.units[A]:M),M!==b&&(v=Vf(e,A,f,b)),this._pt=new Br(this._pt,w?U:l,A,v,(C?Tm(v,C+g):g)-v,!w&&(b==="px"||A==="zIndex")&&t.autoRound!==!1?xj:ub),this._pt.u=b||0,M!==b&&b!=="%"&&(this._pt.b=f,this._pt.r=_j);else if(A in l)Dj.call(this,e,A,f,C?C+d:d);else if(A in e)this.add(e,A,f||e[A],C?C+d:d,s,a);else if(A!=="parseTransform"){NT(A,d);continue}w||(A in l?P.push(A,0,l[A]):typeof e[A]=="function"?P.push(A,2,e[A]()):P.push(A,1,f||e[A])),r.push(A)}}I&&dL(this)},render:function(e,t){if(t.tween._time||!YT())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:vu,aliases:Ec,getSetter:function(e,t,n){var s=Ec[t];return s&&s.indexOf(",")<0&&(t=s),t in Eu&&t!==Ur&&(e._gsap.x||vu(e,"x"))?n&&mR===n?t==="scale"?bj:Mj:(mR=n||{})&&(t==="scale"?Tj:Ej):e.style&&!UT(e.style[t])?Sj:~t.indexOf("-")?Aj:kT(e,t)},core:{_removeProperty:Hd,_getMatrix:qT}};Lr.utils.checkPrefix=Wm;Lr.core.getStyleSaver=yL;(function(i,e,t,n){var s=Dr(i+","+e+","+t,function(a){Eu[a]=1});Dr(e,function(a){so.units[a]="deg",AL[a]=1}),Ec[s[13]]=i+","+e,Dr(n,function(a){var r=a.split(":");Ec[r[1]]=s[r[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Dr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){so.units[i]="px"});Lr.registerPlugin(TL);var qm=Lr.registerPlugin(TL)||Lr;qm.core.Tween;const bR=[{lat:0},{lat:23.5},{lat:-23.5},{lat:66.5},{lat:-66.5}],lM=12,E_=1.03;function Ij(){const i=ge.useRef(),e=ge.useRef([]),t=ge.useRef([]);Oc(()=>{i.current&&(i.current.rotation.y=IS())}),ge.useEffect(()=>{e.current.forEach(a=>{a&&(a.opacity=0,qm.to(a,{opacity:1,duration:1,ease:"power2.inOut"}))}),t.current.forEach(a=>{a?.material&&(a.material.opacity=0,a.material.transparent=!0,qm.to(a.material,{opacity:1,duration:1,ease:"power2.inOut"}))})},[]);const n=ge.useMemo(()=>bR.map(({lat:a})=>{const r=[],c=ko.degToRad(a),f=Io*Math.cos(c),d=Io*Math.sin(c);for(let g=0;g<=128;g++){const v=g/128*Math.PI*2,y=f*Math.cos(v),S=f*Math.sin(v);r.push(new le(y,d,S))}return new $t().setFromPoints(r)}),[]),s=ge.useMemo(()=>{const a=[];for(let l=0;l<lM;l++){const c=[],f=l/lM*Math.PI*2;for(let d=0;d<=128;d++){const g=d/128*Math.PI-Math.PI/2,v=Io*Math.cos(g)*Math.cos(f),y=Io*Math.sin(g),S=Io*Math.cos(g)*Math.sin(f);c.push(new le(v,y,S))}a.push({geometry:new $t().setFromPoints(c),angle:l/lM*360})}return a},[]);return oe.jsxs("group",{ref:i,scale:[1.01,1.01,1.01],children:[" // Group containing the grid lines and labels",n.map((a,r)=>{const{lat:l}=bR[r],c=ko.degToRad(l),f=new le(Io*Math.cos(c)*E_,Io*Math.sin(c)*E_,0);return oe.jsxs(j_.Fragment,{children:[oe.jsx("line",{geometry:a,children:oe.jsx("lineBasicMaterial",{color:"#cecece",linewidth:1,transparent:!0,opacity:0,ref:d=>e.current.push(d)})}),oe.jsx(YM,{position:f,children:oe.jsx(ZM,{fontSize:.05,color:"#ffffff",anchorX:"center",anchorY:"middle",ref:d=>t.current.push(d),children:`${l}`})})]},`lat-${r}`)}),s.map(({geometry:a,angle:r},l)=>{const c=ko.degToRad(r),f=new le(Io*Math.cos(c)*E_,0,Io*Math.sin(c)*E_);return oe.jsxs(j_.Fragment,{children:[oe.jsx("line",{geometry:a,children:oe.jsx("lineBasicMaterial",{color:"#cecece",linewidth:1,transparent:!0,opacity:0,ref:d=>e.current.push(d)})}),oe.jsx(YM,{position:f,children:oe.jsx(ZM,{fontSize:.05,color:"#ffffff",anchorX:"center",anchorY:"middle",ref:d=>t.current.push(d),children:`${r.toFixed(0)}`})})]},`lon-${l}`)})]})}function Fj(){const i=ge.useRef(),e=ge.useRef(),t=ge.useRef(),n=iU(),{focusTarget:s}=Bl(),{showGridLines:a}=Bl(),r=LH(n,Io);Oc(()=>{const c=IS();t.current&&(t.current.rotation.y=c),i.current&&(i.current.rotation.y=c)});const l=ge.useMemo(()=>e.current?e.current.position.clone().normalize():new le(1,0,0),[]);return oe.jsxs(oe.Fragment,{children:[oe.jsx(FH,{ref:i,sunDirection:l,scale:[1,1,1],position:[0,0,0],name:"Earth"})," // Ajouter la Terre  la scne 3D",oe.jsxs("group",{position:[0,0,0],children:[oe.jsx(mX,{})," // Ajouter la nbuleuse  la scne 3D"]}),a&&oe.jsx(Ij,{})," // Conditionnelle. Ajouter les lignes imaginaires de la Terre  la scne 3D",oe.jsx(fX,{ref:e,position:[5500,2300,0],scale:[4e3,4e3,4e3]})," // Ajouter le soleil  la scne 3D",oe.jsx("hemisphereLight",{skyColor:"#ffffff",groundColor:"#222222",intensity:.5})," // Ajouter une lumire hemisphrique pour la scne 3D",oe.jsx(RV,{position:r,focusTarget:s,name:"ISS"})," // Ajouter la Station Spatiale Internationale (ISS)  la scne 3D",oe.jsx(DV,{focusTarget:s,issPosition:r})," // Ajouter le contrleur de camra  la scne 3D",oe.jsx(vX,{})," // Ajouter l'HDRI  la scne 3D",s!=="iss"&&!a&&oe.jsxs(oe.Fragment,{children:[oe.jsxs("group",{ref:t,scale:[1.05,1.05,1.05],children:[" // Ajouter un groupe pour les marqueurs des villes",oe.jsx(SX,{earthRadius:Io})," // Ajouter les marqueurs des villes  la scne 3D"]}),oe.jsx(OH,{issPosition:n,durationMin:120,steps:120,earthRadiusUnits:Io})," // Ajouter la trajectoire de l'ISS  la scne 3D"]}),oe.jsx(uX,{})," // Ajouter les effets de post-traitement  la scne 3D"]})}function wm({children:i,className:e="",onClick:t}){return oe.jsx("button",{onClick:t,className:`fancy-btn ${e}`,children:oe.jsx("span",{children:i})})}function Ac({icon:i,text:e,onClick:t}){return oe.jsxs("button",{className:"expandable-icon-btn",onClick:t,children:[oe.jsx("div",{className:"icon",children:i}),oe.jsx("span",{className:"label",children:e})]})}function zj(){const[i,e]=ge.useState(0),[t,n]=ge.useState(0),[s,a]=ge.useState(null),[r,l]=ge.useState(!0),[c,f]=ge.useState(null);ge.useEffect(()=>{(async()=>{try{l(!0);const A=await s0();a(A),f(null)}catch(A){f(A.message),console.error("Error fetching TLE:",A)}finally{l(!1)}})()},[]);const d=ge.useMemo(()=>{if(!s)return null;const[S,A]=s;return i0(S,A)},[s]),g=d?d.inclo*(180/Math.PI):0,v=d?d.no*(1440/(2*Math.PI)):0,y=d?24*3600/v:0;return ge.useEffect(()=>{if(!d||y===0)return;const S=()=>{const M=new Date,b=e1(M.getUTCFullYear(),M.getUTCMonth()+1,M.getUTCDate(),M.getUTCHours(),M.getUTCMinutes(),M.getUTCSeconds()),C=t1(d,M);if(C&&C.position){const P=(b-d.jdsatepoch)*1440%(y/60)/(y/60);e(P*100)}const w=M.getTime(),R=new Date(Date.UTC(M.getUTCFullYear(),M.getUTCMonth(),M.getUTCDate())).getTime(),U=(w-R)/1e3,O=Math.floor(U/y)+1;n(O)};S();const A=setInterval(S,1e3);return()=>clearInterval(A)},[d,y]),{inclination:g,orbitPeriodSec:y,percent:i,orbitNumberToday:t,loading:r,error:c,tleData:s}}const Gj="https://iss-country-lookup.powertubeee.workers.dev/";async function Hj(i,e){try{const t=await fetch(`${Gj}?lat=${i}&lon=${e}`);if(!t.ok)throw new Error("Worker Country Error");const n=await t.json();return n?.address?.country?{name:n.address.country,code:n.address.country_code?.toUpperCase()}:{name:"Ocean",code:null}}catch(t){return console.error("Error fetching country from worker:",t),{name:"Error",code:null}}}const Vj=({lat:i,lon:e})=>{const[t,n]=ge.useState("Loading..."),[s,a]=ge.useState(null);return ge.useEffect(()=>{if(!i||!e)return;(async()=>{const l=await Hj(i,e);n(l.name),a(l.code)})()},[i,e]),oe.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[oe.jsx("span",{children:t}),s&&oe.jsx("img",{src:`https://flagcdn.com/w40/${s.toLowerCase()}.png`,alt:`Flag of ${t}`,style:{width:"24px",height:"16px",objectFit:"cover",borderRadius:"2px"}})]})},kj=1458e5,Xj=4378e5;function jj(i){const[e,t]=ge.useState(null),n=ge.useRef(null);return ge.useEffect(()=>{async function s(){const[a,r]=await s0();n.current=i0(a,r)}s()},[]),ge.useEffect(()=>{if(!i||!n.current)return;function s(){const r=new Date,l=n.current,f=(e1(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds()+r.getUTCMilliseconds()/1e3)-l.jdsatepoch)*86400,d=Math.floor(f/86400),g=f%86400,v=Math.floor(g/3600),y=Math.floor(g%3600/60),S=Math.floor(g%60),A=kM.getPosition(r,i.lat,i.lon),M=kM.getMoonPosition(r,i.lat,i.lon),b=-(A.altitude*180)/Math.PI,C=(A.azimuth*180/Math.PI+180)%360-180,w=M.altitude*180/Math.PI,R=(M.azimuth*12/Math.PI+24)%24;let U=null;Yj().then(O=>{U=Wj(O.lat,O.lon,i.lat,i.lon)}).catch(()=>{}),t({keplerianAge:{days:d,hours:v,minutes:y,seconds:S,totalSeconds:f},sunNadir:{lat:b,lon:C},sunAzEl:{azimuth:A.azimuth*180/Math.PI+180,elevation:A.altitude*180/Math.PI},moonDecRA:{dec:w,ra:R},moonAzEl:{azimuth:M.azimuth*180/Math.PI+180,elevation:M.altitude*180/Math.PI},moonDistance:M.distance,txFrequency:kj,rxFrequency:Xj,issAzimuth:U})}s();const a=setInterval(s,1e3);return()=>clearInterval(a)},[i]),e}function Yj(){return new Promise((i,e)=>{if(!navigator.geolocation)return e("Geolocation not supported");navigator.geolocation.getCurrentPosition(t=>i({lat:t.coords.latitude,lon:t.coords.longitude}),t=>e(t))})}function Wj(i,e,t,n){const s=d=>d*Math.PI/180,a=d=>d*180/Math.PI,r=s(n-e),l=Math.sin(r)*Math.cos(s(t)),c=Math.cos(s(i))*Math.sin(s(t))-Math.sin(s(i))*Math.cos(s(t))*Math.cos(r);let f=Math.atan2(l,c);return f=(a(f)+360)%360,f}function qj({isVisible:i}){const[e,t]=ge.useState(i),[n,s]=ge.useState(i?"visible":""),a=iU(),{inclination:r,orbitPeriodSec:l,percent:c,orbitNumberToday:f}=zj(),d=jj(a);return ge.useEffect(()=>{if(i)t(!0),s("visible");else if(e){s("exiting");const g=setTimeout(()=>t(!1),600);return()=>clearTimeout(g)}},[i]),e?oe.jsx("div",{className:`${n} left-panel`,children:oe.jsxs("div",{className:"left-panel-content",children:[oe.jsx("h2",{children:"Orbital Data"}),a?oe.jsxs(oe.Fragment,{children:[oe.jsxs("div",{className:"left-panel-section",children:[oe.jsx("div",{className:"left-panel-section-title",children:"Position"}),oe.jsxs("div",{className:"left-panel-row",children:[oe.jsx("span",{children:a.lat.toFixed(4)}),oe.jsx("span",{className:"left-panel-unit-small",children:"N"}),oe.jsx("div",{className:"left-panel-unit-separator"}),oe.jsx("span",{children:a.lon.toFixed(4)}),oe.jsx("span",{className:"left-panel-unit-small",children:"E"})]})]}),oe.jsxs("div",{className:"left-panel-section",children:[oe.jsx("div",{className:"left-panel-section-title",children:"Altitude"}),oe.jsxs("div",{className:"left-panel-row",children:[oe.jsxs("span",{children:[a.alt.toFixed(4)," km"]}),oe.jsx("span",{className:"left-panel-unit-separator"}),oe.jsxs("span",{children:[(a.alt*.621371).toFixed(4)," miles"]}),oe.jsx("span",{className:"left-panel-unit-separator"}),oe.jsxs("span",{children:[(a.alt*3280.84).toFixed(0)," feet"]})]})]}),oe.jsxs("div",{className:"left-panel-section",children:[oe.jsx("div",{className:"left-panel-section-title",children:"Speed"}),oe.jsxs("div",{className:"left-panel-row",children:[oe.jsxs("span",{children:[a.vel.toLocaleString("en-US",{minimumFractionDigits:4,maximumFractionDigits:4})," km/h"]}),oe.jsx("span",{className:"left-panel-unit-separator"}),oe.jsxs("span",{children:[(a.vel*.621371).toLocaleString("en-US",{minimumFractionDigits:4,maximumFractionDigits:4})," mph"]})]})]}),oe.jsxs("div",{className:"left-panel-section",children:[oe.jsx("div",{className:"left-panel-section-title",children:"Current country"}),oe.jsx("div",{className:"left-panel-row",children:oe.jsx("span",{children:oe.jsx(Vj,{lat:a.lat,lon:a.lon})})})]}),oe.jsxs("div",{className:"left-panel-section",children:[oe.jsx("div",{className:"left-panel-section-title",children:"Orbital inclination"}),oe.jsx("div",{className:"left-panel-row",children:oe.jsxs("span",{children:[r.toFixed(2),""]})})]}),oe.jsxs("div",{className:"left-panel-section",children:[oe.jsx("div",{className:"left-panel-section-title",children:"Orbital period"}),oe.jsx("div",{className:"left-panel-row",children:oe.jsxs("span",{children:[(l/60).toFixed(1)," min"]})})]}),oe.jsxs("div",{className:"left-panel-section",children:[oe.jsx("div",{className:"left-panel-section-title",children:"Progress"}),oe.jsx("div",{className:"left-panel-row",children:oe.jsxs("span",{children:[c.toFixed(1),"% of orbit completed"]})})]}),oe.jsxs("div",{className:"left-panel-section",children:[oe.jsx("div",{className:"left-panel-section-title",children:"Orbit number today (since 00:00 UTC)"}),oe.jsx("div",{className:"left-panel-row",children:oe.jsx("span",{children:f})})]}),oe.jsxs("div",{className:"left-panel-section",children:[oe.jsx("div",{className:"left-panel-section-title",children:"ISS Visibility"}),oe.jsx("div",{className:"left-panel-row",children:a.visibility==="daylight"?oe.jsxs(oe.Fragment,{children:[oe.jsx("span",{role:"img","aria-label":"sun",children:""})," ",oe.jsx("span",{children:a.visibility.charAt(0).toUpperCase()+a.visibility.slice(1)})]}):oe.jsxs(oe.Fragment,{children:[oe.jsx("span",{role:"img","aria-label":"moon",style:{color:"gray"},children:""})," ",oe.jsx("span",{children:a.visibility.charAt(0).toUpperCase()+a.visibility.slice(1)})]})})]})]}):oe.jsx("div",{className:"left-panel-row",children:oe.jsx("span",{children:"Loading ISS Data..."})}),d&&oe.jsxs("div",{className:"left-panel-section",children:[oe.jsx("div",{className:"left-panel-section-title",children:"Keplerian Age"}),oe.jsx("div",{className:"left-panel-row",children:oe.jsxs("span",{children:[d.keplerianAge.days,"d ",d.keplerianAge.hours,"h"," ",d.keplerianAge.minutes,"m ",d.keplerianAge.seconds,"s"]})}),oe.jsx("div",{className:"left-panel-row",children:oe.jsxs("small",{children:["Since TLE epoch (",d.keplerianAge.totalSeconds.toFixed(0)," seconds)"]})})]}),d?.issAzimuth&&oe.jsxs("div",{className:"left-panel-section",children:[oe.jsx("div",{className:"left-panel-section-title",children:"Azimuth (from your location)"}),oe.jsx("div",{className:"left-panel-row",children:oe.jsxs("span",{children:[d.issAzimuth.toFixed(1),""]})})]}),d&&oe.jsxs("div",{className:"left-panel-section",children:[oe.jsx("div",{className:"left-panel-section-title",children:"Sun (Az/El)"}),oe.jsx("div",{className:"left-panel-row",children:oe.jsxs("span",{children:[d.sunAzEl.azimuth.toFixed(1)," / ",d.sunAzEl.elevation.toFixed(1),""]})})]}),d&&oe.jsxs("div",{className:"left-panel-section",children:[oe.jsx("div",{className:"left-panel-section-title",children:"Moon"}),oe.jsx("div",{className:"left-panel-row",children:oe.jsxs("span",{children:["Dec: ",d.moonDecRA.dec.toFixed(1)," / RA: ",d.moonDecRA.ra.toFixed(1),"h"]})}),oe.jsx("div",{className:"left-panel-row",children:oe.jsxs("span",{children:["Az: ",d.moonAzEl.azimuth.toFixed(1)," / El: ",d.moonAzEl.elevation.toFixed(1),""]})}),oe.jsx("div",{className:"left-panel-row",children:oe.jsxs("span",{children:["Distance: ",d.moonDistance.toLocaleString()," km"]})})]}),d&&oe.jsxs("div",{className:"left-panel-section",children:[oe.jsx("div",{className:"left-panel-section-title",children:"Radio Frequencies"}),oe.jsxs("div",{className:"left-panel-row",children:[oe.jsxs("span",{children:["TX: ",d.txFrequency/1e6," MHz"]}),oe.jsx("span",{className:"left-panel-unit-separator"}),oe.jsxs("span",{children:["RX: ",d.rxFrequency/1e6," MHz"]})]})]})]})}):null}function TR({isVisible:i,children:e,onClose:t}){const[n,s]=ge.useState(i),[a,r]=ge.useState(i?"visible":""),l=ge.useRef(null);ge.useEffect(()=>{if(i)s(!0),r("visible");else if(n){r("exiting");const f=setTimeout(()=>s(!1),600);return()=>clearTimeout(f)}},[i]);const c=()=>{r("exiting"),setTimeout(()=>{t?.()},600)};return ge.useEffect(()=>{const f=d=>{l.current&&!l.current.contains(d.target)&&c()};return n&&document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[n]),n?oe.jsxs("div",{ref:l,className:`center-panel ${a}`,children:[oe.jsx("button",{className:"center-panel-close-button",onClick:c,children:""}),oe.jsx("div",{className:"center-panel-content",children:e})]}):null}async function Kj(i,e,t,n="11786111520a2445cff1b163c383f320"){const s=`https://api.openweathermap.org/data/2.5/forecast?lat=${i}&lon=${e}&appid=${n}&units=metric`;console.log(s);const a=await fetch(s);if(!a.ok)throw new Error("Erreur mto");const r=await a.json(),l=Math.floor(t/1e3);let c=r.list[0];for(const f of r.list)Math.abs(f.dt-l)<Math.abs(c.dt-l)&&(c=f);return{condition:c.weather[0].description,icon:`https://openweathermap.org/img/wn/${c.weather[0].icon}@2x.png`,clouds:c.clouds.all,visibility:c.visibility}}function Jj(){const i=document.documentElement;document.fullscreenElement?document.exitFullscreen():i.requestFullscreen().catch(e=>{console.error(`Erreur lors de l'activation du plein cran : ${e.message}`)})}const Zj=i=>oe.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,children:oe.jsx("path",{d:"M1.55555 12.4444H3.11111C3.33148 12.4444 3.51633 12.5191 3.66566 12.6684C3.815 12.8178 3.8894 13.0024 3.88889 13.2222C3.88837 13.4421 3.8137 13.6269 3.66489 13.7768C3.51607 13.9266 3.33148 14.001 3.11111 14H0.777777C0.557407 14 0.372815 13.9253 0.224 13.776C0.0751852 13.6267 0.000518518 13.4421 0 13.2222V10.8889C0 10.6685 0.0746667 10.4839 0.224 10.3351C0.373333 10.1863 0.557926 10.1116 0.777777 10.1111C0.997629 10.1106 1.18248 10.1853 1.33233 10.3351C1.48218 10.485 1.55659 10.6695 1.55555 10.8889V12.4444ZM12.4444 12.4444V10.8889C12.4444 10.6685 12.5191 10.4839 12.6684 10.3351C12.8178 10.1863 13.0024 10.1116 13.2222 10.1111C13.4421 10.1106 13.6269 10.1853 13.7768 10.3351C13.9266 10.485 14.001 10.6695 14 10.8889V13.2222C14 13.4426 13.9253 13.6274 13.776 13.7768C13.6267 13.9261 13.4421 14.0005 13.2222 14H10.8889C10.6685 14 10.4839 13.9253 10.3351 13.776C10.1863 13.6267 10.1116 13.4421 10.1111 13.2222C10.1106 13.0024 10.1853 12.8178 10.3351 12.6684C10.485 12.5191 10.6695 12.4444 10.8889 12.4444H12.4444ZM1.55555 1.55555V3.11111C1.55555 3.33148 1.48089 3.51633 1.33155 3.66566C1.18222 3.815 0.997629 3.8894 0.777777 3.88889C0.557926 3.88837 0.373333 3.8137 0.224 3.66489C0.0746667 3.51607 0 3.33148 0 3.11111V0.777777C0 0.557407 0.0746667 0.372815 0.224 0.224C0.373333 0.0751852 0.557926 0.000518518 0.777777 0H3.11111C3.33148 0 3.51633 0.0746667 3.66566 0.224C3.815 0.373333 3.8894 0.557926 3.88889 0.777777C3.88837 0.997629 3.8137 1.18248 3.66489 1.33233C3.51607 1.48218 3.33148 1.55659 3.11111 1.55555H1.55555ZM12.4444 1.55555H10.8889C10.6685 1.55555 10.4839 1.48089 10.3351 1.33155C10.1863 1.18222 10.1116 0.997629 10.1111 0.777777C10.1106 0.557926 10.1853 0.373333 10.3351 0.224C10.485 0.0746667 10.6695 0 10.8889 0H13.2222C13.4426 0 13.6274 0.0746667 13.7768 0.224C13.9261 0.373333 14.0005 0.557926 14 0.777777V3.11111C14 3.33148 13.9253 3.51633 13.776 3.66566C13.6267 3.815 13.4421 3.8894 13.2222 3.88889C13.0024 3.88837 12.8178 3.8137 12.6684 3.66489C12.5191 3.51607 12.4444 3.33148 12.4444 3.11111V1.55555Z",fill:"currentColor"})}),Qj=i=>oe.jsx("svg",{width:"20",height:"16",viewBox:"0 0 20 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,children:oe.jsx("path",{d:"M4.34132 0.920895C4.4343 1.01377 4.50806 1.12406 4.55838 1.24545C4.6087 1.36685 4.63461 1.49698 4.63461 1.62839C4.63461 1.75981 4.6087 1.88994 4.55838 2.01133C4.50806 2.13273 4.4343 2.24302 4.34132 2.33589C2.84076 3.83671 1.99777 5.8721 1.99777 7.99439C1.99777 10.1167 2.84076 12.1521 4.34132 13.6529C4.43683 13.7451 4.51301 13.8555 4.56542 13.9775C4.61783 14.0995 4.64542 14.2307 4.64657 14.3635C4.64773 14.4963 4.62242 14.628 4.57214 14.7508C4.52186 14.8737 4.44761 14.9854 4.35372 15.0793C4.25982 15.1732 4.14817 15.2474 4.02527 15.2977C3.90238 15.348 3.7707 15.3733 3.63792 15.3721C3.50514 15.371 3.37392 15.3434 3.25192 15.291C3.12991 15.2386 3.01957 15.1624 2.92732 15.0669C-0.97968 11.1609 -0.97968 4.82689 2.92732 0.920895C3.11485 0.733424 3.36916 0.628108 3.63432 0.628108C3.89948 0.628108 4.15379 0.733424 4.34132 0.920895ZM17.0733 0.920895C20.9793 4.82789 20.9793 11.1609 17.0733 15.0669C16.8858 15.2545 16.6314 15.36 16.3662 15.3601C16.1009 15.3602 15.8465 15.2549 15.6588 15.0674C15.4712 14.8799 15.3657 14.6255 15.3656 14.3602C15.3655 14.095 15.4708 13.8405 15.6583 13.6529C17.1589 12.1521 18.0019 10.1167 18.0019 7.99439C18.0019 5.8721 17.1589 3.83671 15.6583 2.33589C15.4707 2.14825 15.3653 1.89376 15.3653 1.62839C15.3653 1.36303 15.4707 1.10854 15.6583 0.920895C15.846 0.733254 16.1005 0.627838 16.3658 0.627838C16.6312 0.627838 16.8857 0.733254 17.0733 0.920895ZM7.30832 3.79489C7.49579 3.98242 7.60111 4.23673 7.60111 4.50189C7.60111 4.76706 7.49579 5.02137 7.30832 5.20889C6.94427 5.57291 6.65549 6.00506 6.45847 6.48068C6.26145 6.95631 6.16004 7.46608 6.16004 7.98089C6.16004 8.49571 6.26145 9.00548 6.45847 9.48111C6.65549 9.95673 6.94427 10.3889 7.30832 10.7529C7.40117 10.8458 7.4748 10.9561 7.52502 11.0775C7.57524 11.1988 7.60107 11.3289 7.60102 11.4602C7.60098 11.5916 7.57506 11.7216 7.52475 11.843C7.47444 11.9643 7.40073 12.0745 7.30782 12.1674C7.21491 12.2602 7.10462 12.3339 6.98325 12.3841C6.86189 12.4343 6.73182 12.4601 6.60047 12.4601C6.46912 12.4601 6.33907 12.4341 6.21773 12.3838C6.0964 12.3335 5.98617 12.2598 5.89332 12.1669C4.78315 11.0567 4.15946 9.55094 4.15946 7.98089C4.15946 6.41085 4.78315 4.9051 5.89332 3.79489C5.98619 3.70192 6.09648 3.62816 6.21788 3.57783C6.33928 3.52751 6.46941 3.50161 6.60082 3.50161C6.73224 3.50161 6.86236 3.52751 6.98376 3.57783C7.10516 3.62816 7.21545 3.70192 7.30832 3.79489ZM14.2663 3.79489C15.3765 4.9051 16.0002 6.41085 16.0002 7.98089C16.0002 9.55094 15.3765 11.0567 14.2663 12.1669C14.0777 12.3491 13.8251 12.4498 13.5629 12.4476C13.3007 12.4453 13.0499 12.3401 12.8645 12.1547C12.6791 11.9693 12.5739 11.7185 12.5716 11.4563C12.5694 11.1941 12.6702 10.9415 12.8523 10.7529C13.2164 10.3889 13.5051 9.95673 13.7022 9.48111C13.8992 9.00548 14.0006 8.49571 14.0006 7.98089C14.0006 7.46608 13.8992 6.95631 13.7022 6.48068C13.5051 6.00506 13.2164 5.57291 12.8523 5.20889C12.6702 5.02029 12.5694 4.76769 12.5716 4.50549C12.5739 4.2433 12.6791 3.99248 12.8645 3.80708C13.0499 3.62167 13.3007 3.5165 13.5629 3.51422C13.8251 3.51194 14.0777 3.61274 14.2663 3.79489ZM10.0803 6.56489C10.4781 6.56489 10.8597 6.72293 11.141 7.00423C11.4223 7.28554 11.5803 7.66707 11.5803 8.06489C11.5803 8.46272 11.4223 8.84425 11.141 9.12556C10.8597 9.40686 10.4781 9.56489 10.0803 9.56489C9.6825 9.56489 9.30096 9.40686 9.01966 9.12556C8.73836 8.84425 8.58032 8.46272 8.58032 8.06489C8.58032 7.66707 8.73836 7.28554 9.01966 7.00423C9.30096 6.72293 9.6825 6.56489 10.0803 6.56489Z",fill:"currentColor"})}),$j=i=>oe.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,children:oe.jsx("path",{d:"M13 7.998H8V12.998C8 13.2632 7.89464 13.5176 7.70711 13.7051C7.51957 13.8926 7.26522 13.998 7 13.998C6.73478 13.998 6.48043 13.8926 6.29289 13.7051C6.10536 13.5176 6 13.2632 6 12.998V7.998H1C0.734784 7.998 0.48043 7.89264 0.292893 7.70511C0.105357 7.51757 0 7.26322 0 6.998C0 6.73278 0.105357 6.47843 0.292893 6.29089C0.48043 6.10336 0.734784 5.998 1 5.998H6V0.998001C6 0.732785 6.10536 0.47843 6.29289 0.290894C6.48043 0.103358 6.73478 -0.0019989 7 -0.0019989C7.26522 -0.0019989 7.51957 0.103358 7.70711 0.290894C7.89464 0.47843 8 0.732785 8 0.998001V5.998H13C13.2652 5.998 13.5196 6.10336 13.7071 6.29089C13.8946 6.47843 14 6.73278 14 6.998C14 7.26322 13.8946 7.51757 13.7071 7.70511C13.5196 7.89264 13.2652 7.998 13 7.998Z",fill:"currentColor"})}),eY=i=>oe.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,children:oe.jsx("path",{d:"M18 12.998H6C5.73478 12.998 5.48043 12.8926 5.29289 12.7051C5.10536 12.5176 5 12.2632 5 11.998C5 11.7328 5.10536 11.4784 5.29289 11.2909C5.48043 11.1034 5.73478 10.998 6 10.998H18C18.2652 10.998 18.5196 11.1034 18.7071 11.2909C18.8946 11.4784 19 11.7328 19 11.998C19 12.2632 18.8946 12.5176 18.7071 12.7051C18.5196 12.8926 18.2652 12.998 18 12.998Z",fill:"currentColor"})}),tY=i=>oe.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,children:oe.jsx("path",{d:"M13.5 7C13.5 8.72391 12.8152 10.3772 11.5962 11.5962C10.3772 12.8152 8.72391 13.5 7 13.5M13.5 7C13.5 5.27609 12.8152 3.62279 11.5962 2.40381C10.3772 1.18482 8.72391 0.5 7 0.5M13.5 7C13.5 8.657 10.59 10 7 10C3.41 10 0.5 8.657 0.5 7M13.5 7C13.5 5.343 10.59 4 7 4C3.41 4 0.5 5.343 0.5 7M7 13.5C5.27609 13.5 3.62279 12.8152 2.40381 11.5962C1.18482 10.3772 0.5 8.72391 0.5 7M7 13.5C8.657 13.5 10 10.59 10 7C10 3.41 8.657 0.5 7 0.5M7 13.5C5.343 13.5 4 10.59 4 7C4 3.41 5.343 0.5 7 0.5M7 0.5C5.27609 0.5 3.62279 1.18482 2.40381 2.40381C1.18482 3.62279 0.5 5.27609 0.5 7",stroke:"currentColor"})}),ER=i=>oe.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,children:oe.jsx("path",{d:"M10 20C8.61667 20 7.31667 19.7373 6.1 19.212C4.88334 18.6867 3.825 17.9743 2.925 17.075C2.025 16.1757 1.31267 15.1173 0.788001 13.9C0.263335 12.6827 0.000667932 11.3827 1.26582e-06 10C-0.000665401 8.61733 0.262001 7.31733 0.788001 6.1C1.314 4.88267 2.02633 3.82433 2.925 2.925C3.82367 2.02567 4.882 1.31333 6.1 0.788C7.318 0.262667 8.618 0 10 0C11.382 0 12.682 0.262667 13.9 0.788C15.118 1.31333 16.1763 2.02567 17.075 2.925C17.9737 3.82433 18.6863 4.88267 19.213 6.1C19.7397 7.31733 20.002 8.61733 20 10C19.998 11.3827 19.7353 12.6827 19.212 13.9C18.6887 15.1173 17.9763 16.1757 17.075 17.075C16.1737 17.9743 15.1153 18.687 13.9 19.213C12.6847 19.739 11.3847 20.0013 10 20ZM10 18C10.9333 18 11.8127 17.8543 12.638 17.563C13.4633 17.2717 14.2173 16.859 14.9 16.325L13.475 14.9C12.9917 15.25 12.4543 15.521 11.863 15.713C11.2717 15.905 10.6507 16.0007 10 16C8.33333 16 6.91667 15.4167 5.75 14.25C4.58333 13.0833 4 11.6667 4 10C4 8.33333 4.58333 6.91667 5.75 5.75C6.91667 4.58333 8.33333 4 10 4C11.6667 4 13.0833 4.58333 14.25 5.75C15.4167 6.91667 16 8.33333 16 10C16 10.65 15.9 11.275 15.7 11.875C15.5 12.475 15.225 13.0167 14.875 13.5L16.3 14.925C16.8333 14.2417 17.25 13.4833 17.55 12.65C17.85 11.8167 18 10.9333 18 10C18 7.76667 17.225 5.875 15.675 4.325C14.125 2.775 12.2333 2 10 2C7.76667 2 5.875 2.775 4.325 4.325C2.775 5.875 2 7.76667 2 10C2 12.2333 2.775 14.125 4.325 15.675C5.875 17.225 7.76667 18 10 18ZM10 14C10.3667 14 10.721 13.9543 11.063 13.863C11.405 13.7717 11.7257 13.634 12.025 13.45L10.5 11.925C10.4167 11.9583 10.3333 11.9793 10.25 11.988C10.1667 11.9967 10.0833 12.0007 10 12C9.45 12 8.97933 11.8043 8.588 11.413C8.19667 11.0217 8.00067 10.5507 8 10C7.99933 9.44933 8.19533 8.97867 8.588 8.588C8.98067 8.19733 9.45133 8.00133 10 8C10.5487 7.99867 11.0197 8.19467 11.413 8.588C11.8063 8.98133 12.002 9.452 12 10C12 10.1 11.996 10.196 11.988 10.288C11.98 10.38 11.959 10.4673 11.925 10.55L13.425 12.05C13.6083 11.75 13.75 11.4293 13.85 11.088C13.95 10.7467 14 10.384 14 10C14 8.9 13.6083 7.95833 12.825 7.175C12.0417 6.39167 11.1 6 10 6C8.9 6 7.95833 6.39167 7.175 7.175C6.39167 7.95833 6 8.9 6 10C6 11.1 6.39167 12.0417 7.175 12.825C7.95833 13.6083 8.9 14 10 14Z",fill:"currentColor"})}),nY=i=>oe.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,children:oe.jsx("path",{d:"M11.3333 14C10.7315 14 10.2199 13.7958 9.79861 13.3875C9.37731 12.9792 9.16667 12.4833 9.16667 11.9C9.16667 11.83 9.18472 11.6667 9.22083 11.41L4.14722 8.54C3.95463 8.715 3.73194 8.8522 3.47917 8.9516C3.22639 9.051 2.95556 9.10047 2.66667 9.1C2.06481 9.1 1.55324 8.89583 1.13194 8.4875C0.710648 8.07917 0.5 7.58333 0.5 7C0.5 6.41667 0.710648 5.92083 1.13194 5.5125C1.55324 5.10417 2.06481 4.9 2.66667 4.9C2.95556 4.9 3.22639 4.9497 3.47917 5.0491C3.73194 5.1485 3.95463 5.28547 4.14722 5.46L9.22083 2.59C9.19676 2.50833 9.18183 2.4297 9.17605 2.3541C9.17028 2.2785 9.16715 2.1938 9.16667 2.1C9.16667 1.51667 9.37731 1.02083 9.79861 0.6125C10.2199 0.204167 10.7315 0 11.3333 0C11.9352 0 12.4468 0.204167 12.8681 0.6125C13.2894 1.02083 13.5 1.51667 13.5 2.1C13.5 2.68333 13.2894 3.17917 12.8681 3.5875C12.4468 3.99583 11.9352 4.2 11.3333 4.2C11.0444 4.2 10.7736 4.1503 10.5208 4.0509C10.2681 3.9515 10.0454 3.81453 9.85278 3.64L4.77917 6.51C4.80324 6.59167 4.81841 6.67053 4.82467 6.7466C4.83093 6.82267 4.83381 6.90713 4.83333 7C4.83285 7.09287 4.82996 7.17757 4.82467 7.2541C4.81937 7.33063 4.8042 7.40927 4.77917 7.49L9.85278 10.36C10.0454 10.185 10.2681 10.048 10.5208 9.9491C10.7736 9.85017 11.0444 9.80047 11.3333 9.8C11.9352 9.8 12.4468 10.0042 12.8681 10.4125C13.2894 10.8208 13.5 11.3167 13.5 11.9C13.5 12.4833 13.2894 12.9792 12.8681 13.3875C12.4468 13.7958 11.9352 14 11.3333 14Z",fill:"currentColor"})}),iY=i=>oe.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,children:oe.jsx("path",{d:"M3 15H1C0.71667 15 0.479337 14.904 0.288004 14.712C0.0966702 14.52 0.000670115 14.2827 3.44827e-06 14C-0.000663218 13.7173 0.0953369 13.48 0.288004 13.288C0.48067 13.096 0.718003 13 1 13H4C4.28334 13 4.521 13.096 4.713 13.288C4.905 13.48 5.00067 13.7173 5 14V17C5 17.2833 4.904 17.521 4.712 17.713C4.52 17.905 4.28267 18.0007 4 18C3.71734 17.9993 3.48 17.9033 3.288 17.712C3.096 17.5207 3 17.2833 3 17V15ZM15 15V17C15 17.2833 14.904 17.521 14.712 17.713C14.52 17.905 14.2827 18.0007 14 18C13.7173 17.9993 13.48 17.9033 13.288 17.712C13.096 17.5207 13 17.2833 13 17V14C13 13.7167 13.096 13.4793 13.288 13.288C13.48 13.0967 13.7173 13.0007 14 13H17C17.2833 13 17.521 13.096 17.713 13.288C17.905 13.48 18.0007 13.7173 18 14C17.9993 14.2827 17.9033 14.5203 17.712 14.713C17.5207 14.9057 17.2833 15.0013 17 15H15ZM3 3V1C3 0.71667 3.096 0.479337 3.288 0.288004C3.48 0.0966702 3.71734 0.000670115 4 3.44827e-06C4.28267 -0.000663218 4.52034 0.0953369 4.713 0.288004C4.90567 0.48067 5.00134 0.718003 5 1V4C5 4.28334 4.904 4.521 4.712 4.713C4.52 4.905 4.28267 5.00067 4 5H1C0.71667 5 0.479337 4.904 0.288004 4.712C0.0966702 4.52 0.000670115 4.28267 3.44827e-06 4C-0.000663218 3.71734 0.0953369 3.48 0.288004 3.288C0.48067 3.096 0.718003 3 1 3H3ZM15 3H17C17.2833 3 17.521 3.096 17.713 3.288C17.905 3.48 18.0007 3.71734 18 4C17.9993 4.28267 17.9033 4.52034 17.712 4.713C17.5207 4.90567 17.2833 5.00134 17 5H14C13.7167 5 13.4793 4.904 13.288 4.712C13.0967 4.52 13.0007 4.28267 13 4V1C13 0.71667 13.096 0.479337 13.288 0.288004C13.48 0.0966702 13.7173 0.000670115 14 3.44827e-06C14.2827 -0.000663218 14.5203 0.0953369 14.713 0.288004C14.9057 0.48067 15.0013 0.718003 15 1V3Z",fill:"currentColor"})}),sY="/3DWebSite-ISSTracker/assets/profile-D2H3mCxS.png";function aY({onClose:i}){const e=ge.useRef();ge.useEffect(()=>(qm.fromTo(e.current,{y:"100%",opacity:0},{y:"0%",opacity:1,duration:.5,ease:"power3.out"}),()=>{}),[]);const t=()=>{qm.to(e.current,{y:"100%",opacity:0,duration:.4,ease:"power3.in",onComplete:i})};return oe.jsxs("div",{className:"about-me-overlay",ref:e,children:[oe.jsx("img",{src:sY,alt:"Profile"}),oe.jsxs("h1",{children:[oe.jsx("span",{children:"I'm Nicolas Adamczyk"}),", Computer Vision student based in Paris"]}),oe.jsx("p",{children:"I'm a student at the University of Paris Cit since 2022. I specialize in computer vision and enjoy exploring the intersection of AI and space technologies. I maintain and experiment with AI and space-related software projects."}),oe.jsxs("div",{className:"about-me-buttons",children:[oe.jsx(wm,{onClick:()=>window.open("https://www.linkedin.com/in/nicolasadamczyk/","_blank"),children:"Connect with me"}),oe.jsx(wm,{onClick:()=>window.open("https://www.linkedin.com/in/nicolasadamczyk/","_blank"),children:"My Resume"}),oe.jsx("div",{className:"about-me-close-button",children:oe.jsx(wm,{onClick:t,children:"Back"})})]})]})}const rY=i=>oe.jsx("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,children:oe.jsx("path",{d:"M15 7L13.5 8.5M14.469 15.856L15.856 14.469C16.51 13.815 16.837 13.488 17.244 13.488C17.651 13.488 17.977 13.815 18.631 14.468L20.019 15.856C20.673 16.51 21 16.837 21 17.244C21 17.651 20.673 17.977 20.019 18.631L18.63 20.02C17.976 20.674 17.65 21.001 17.243 21.001C16.836 21.001 16.509 20.674 15.855 20.02L14.47 18.63C13.816 17.976 13.489 17.65 13.489 17.243C13.489 16.836 13.816 16.509 14.469 15.855M15 15L13 13M9 9L7 7M15.201 6.799C15.5817 7.17983 16.0338 7.48192 16.5313 7.68803C17.0288 7.89414 17.562 8.00022 18.1005 8.00022C18.639 8.00022 19.1722 7.89414 19.6697 7.68803C20.1672 7.48192 20.6193 7.17983 21 6.799L15.201 1C14.8202 1.38073 14.5181 1.83276 14.312 2.33026C14.1059 2.82776 13.9998 3.36099 13.9998 3.8995C13.9998 4.43801 14.1059 4.97124 14.312 5.46874C14.5181 5.96624 14.8202 6.41827 15.201 6.799ZM13.832 12.001C14.434 11.399 14.735 11.098 14.735 10.724C14.735 10.349 14.435 10.048 13.832 9.446L12.555 8.17C11.953 7.568 11.652 7.267 11.277 7.267C10.903 7.267 10.602 7.567 10 8.17L5.794 12.376C5.53555 12.6261 5.32946 12.9251 5.18775 13.2556C5.04603 13.5862 4.97152 13.9416 4.96856 14.3012C4.96561 14.6609 5.03426 15.0175 5.17051 15.3503C5.30677 15.6831 5.50791 15.9855 5.76221 16.2398C6.01651 16.4941 6.31889 16.6952 6.65171 16.8315C6.98453 16.9677 7.34114 17.0364 7.70077 17.0334C8.06039 17.0305 8.41583 16.956 8.74636 16.8143C9.0769 16.6725 9.37592 16.4664 9.626 16.208L13.832 12.001ZM1.981 3.369L3.37 1.98C4.023 1.327 4.349 1 4.756 1C5.163 1 5.49 1.327 6.144 1.981L7.53 3.37C8.184 4.024 8.511 4.35 8.511 4.757C8.511 5.164 8.184 5.491 7.531 6.145L6.143 7.53C5.489 8.184 5.162 8.511 4.755 8.511C4.348 8.511 4.022 8.184 3.368 7.531L1.98 6.143C1.327 5.49 1 5.163 1 4.756C1 4.349 1.327 4.023 1.981 3.369Z",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})}),oY=i=>oe.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i,children:oe.jsx("path",{d:"M13.83 7.805L8.99998 3L4.16998 7.805C4.11299 7.8484 4.066 7.90353 4.03217 7.96667C3.99834 8.0298 3.97848 8.09947 3.97392 8.17096C3.96935 8.24244 3.98021 8.31407 4.00573 8.38099C4.03126 8.44792 4.07087 8.50858 4.12188 8.55886C4.17289 8.60915 4.23411 8.64789 4.30139 8.67246C4.36867 8.69703 4.44045 8.70685 4.51186 8.70127C4.58327 8.69569 4.65265 8.67483 4.7153 8.64011C4.77795 8.60538 4.8324 8.5576 4.87498 8.5L8.49998 4.905V14.47C8.49998 14.6026 8.55266 14.7298 8.64643 14.8236C8.74019 14.9173 8.86737 14.97 8.99998 14.97C9.13259 14.97 9.25977 14.9173 9.35353 14.8236C9.4473 14.7298 9.49998 14.6026 9.49998 14.47V4.905L13.125 8.5C13.2191 8.59349 13.3466 8.64575 13.4792 8.64528C13.6119 8.64481 13.739 8.59165 13.8325 8.4975C13.926 8.40335 13.9782 8.27591 13.9778 8.14323C13.9773 8.01055 13.9241 7.88349 13.83 7.79V7.805Z",fill:"currentColor"})});function lY(){const{setFocusTarget:i}=Bl(),{zoomIn:e,zoomOut:t}=Bl(),{toggleGridLines:n}=Bl(),{recenterCamera:s}=Bl(),{setThermalView:a}=Bl(),{centerPanelCity:r,closeCenterPanel:l}=Bl(),[c,f]=ge.useState(null),[d,g]=ge.useState({}),[v,y]=ge.useState(!1),[S,A]=ge.useState(!0),[M,b]=ge.useState(!1),[C,w]=ge.useState(null),[R,U]=ge.useState(!0),[O,I]=ge.useState(new Date);ge.useEffect(()=>{const L=setInterval(()=>{I(new Date)},1e3);return()=>clearInterval(L)},[]),ge.useEffect(()=>{const L=k=>f(k.detail);return window.addEventListener("iss-pass-prediction",L),()=>window.removeEventListener("iss-pass-prediction",L)},[]),ge.useEffect(()=>{r?(U(S),A(!1)):A(R)},[r]),ge.useEffect(()=>{const L=()=>{y(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",L),()=>document.removeEventListener("fullscreenchange",L)},[]);const P=()=>A(!S),N=()=>w(null);return ge.useEffect(()=>{Array.isArray(c)&&c.forEach(L=>{if(!L?.start||isNaN(new Date(L.start)))return;const k=new Date(L.start),X=k.getTime();d[X]||Kj(L.lat,L.lon,k).then(W=>{g($=>({...$,[X]:W}))})})},[c]),oe.jsxs("div",{className:"absolute inset-0 text-white pointer-events-none",children:[oe.jsx("img",{className:"absolute top-10 left-14 pointer-events-auto",src:"/src/assets/Logo_2.png",alt:"Logo_2"}),oe.jsx("div",{className:"font-f1 absolute top-13.5 right-14 pointer-events-auto",children:oe.jsxs("p",{children:[oe.jsx("span",{className:"date-part",children:new Intl.DateTimeFormat("en-GB",{timeZone:"UTC",weekday:"short",year:"numeric",month:"short",day:"2-digit"}).format(O)})," ",oe.jsx("span",{className:"time-part",children:new Intl.DateTimeFormat("en-GB",{timeZone:"UTC",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(O)})," ","UTC"]})}),oe.jsx(qj,{isVisible:S}),oe.jsxs("div",{className:"pointer-events-auto",children:[r&&oe.jsx(TR,{isVisible:!0,onClose:l,children:Array.isArray(c)&&c.length>0?c[0].found?c.map((L,k)=>{const X=d[L.start.getTime()],W={timeZone:L.timezone,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},$={timeZone:L.timezone,weekday:"short",year:"numeric",month:"short",day:"2-digit"};X?.clouds>90||X?.clouds>70||X?.clouds>50||X?.clouds>30;const ce=()=>{const z=Intl.DateTimeFormat().resolvedOptions().timeZone;return(z.split("/")[1]||z).replace(/_/g," ")};return oe.jsxs("div",{className:"pass-section",children:[oe.jsxs("h2",{className:"pass-section-title",children:["ISS Overpass #",k+1," above ",L.city]}),oe.jsxs("div",{className:"pass-content-row",children:[oe.jsxs("div",{className:"pass-info-block",children:[oe.jsxs("div",{className:"pass-row",children:[oe.jsx("strong",{children:" Date:"})," ",L.start.toLocaleDateString("en-US",$)]}),oe.jsxs("div",{className:"pass-row",children:[oe.jsx("strong",{children:" Start Time:"})," ",L.start.toLocaleTimeString("en-US",W)," (Your Local time : ",ce(),")"]}),oe.jsxs("div",{className:"pass-row",children:[oe.jsx("strong",{children:" End Time:"})," ",L.end.toLocaleTimeString("en-US",W)," (Your Local time : ",ce(),")"]}),oe.jsxs("div",{className:"pass-row",children:[oe.jsx("strong",{children:" Duration:"})," ",L.duration.toFixed(1)," minutes"]}),oe.jsxs("div",{className:"pass-row",children:[oe.jsx("strong",{children:" Visibility Radius:"})," ",L.radius," km"]})]}),oe.jsx("div",{className:"pass-vertical-separator"}),oe.jsx("div",{className:"pass-info-block",children:X?oe.jsxs(oe.Fragment,{children:[oe.jsxs("div",{className:"pass-row",children:[oe.jsx("strong",{children:" Condition: "})," ",X.condition]}),oe.jsxs("div",{className:"pass-row",children:[oe.jsx("strong",{children:" Cloud cover: "})," ",X.clouds,"%"]})]}):oe.jsx("div",{className:"pass-row",children:"Loading weather data..."})}),oe.jsx("div",{className:"pass-horizontal-separator"})]})]},k)}):oe.jsxs("div",{className:"pass-section pass-no-prediction",children:[" No ISS passes predicted over ",c[0].city," in the next few days"]}):oe.jsx("div",{className:"pass-section pass-no-selection",children:"Select a city to view upcoming ISS passes"})}),C==="video"&&oe.jsx(TR,{isVisible:!0,onClose:()=>N(),children:oe.jsx("iframe",{width:"100%",height:"100%",src:"https://www.youtube-nocookie.com/embed/H999s0P1Er0",title:"NASA Live Stream",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}),oe.jsxs("div",{className:"focus-buttons",children:[oe.jsx(wm,{onClick:()=>i("earth"),children:"Focus Earth"}),oe.jsx(wm,{onClick:()=>i("iss"),children:"Focus ISS"})]}),oe.jsxs("div",{className:"right-buttons",children:[oe.jsx(Ac,{icon:oe.jsx(rY,{style:{width:"24px",height:"24px"}}),text:"Orbital Data",onClick:P}),oe.jsx(Ac,{icon:oe.jsx(ER,{style:{width:"20px",height:"20px"}}),text:"Recenter",onClick:s}),oe.jsx(Ac,{icon:oe.jsx(nY,{style:{width:"20px",height:"20px"}}),text:"Share",onClick:P}),oe.jsx(Ac,{icon:oe.jsx(tY,{style:{width:"24px",height:"24px"}}),text:"Toggle Imaginary Lines",onClick:n}),oe.jsx(Ac,{icon:oe.jsx($j,{style:{width:"20px",height:"20px"}}),text:"Zoom In",onClick:e}),oe.jsx(Ac,{icon:oe.jsx(eY,{style:{width:"28px",height:"28px"}}),text:"Zoom Out",onClick:t}),oe.jsx(Ac,{icon:oe.jsx(Qj,{style:{width:"24px",height:"24px"}}),text:"Watch Live Stream",onClick:()=>w("video")}),oe.jsx(Ac,{icon:oe.jsx(ER,{style:{width:"24px",height:"24px"}}),text:"Thermal View",onClick:()=>{i("iss"),a(L=>!L)}}),oe.jsx(Ac,{icon:v?oe.jsx(iY,{style:{width:"20px",height:"20px"}}):oe.jsx(Zj,{style:{width:"20px",height:"20px"}}),text:"Fullscreen",onClick:Jj})]}),oe.jsx("div",{className:"see-more-button pointer-events-auto",children:oe.jsx(Ac,{icon:oe.jsx(oY,{style:{width:"24px",height:"24px"}}),text:"About Me",onClick:()=>b(!0)})}),M&&oe.jsx(aY,{onClose:()=>b(!1)})]})}const KT=ge.createContext({});function JT(i){const e=ge.useRef(null);return e.current===null&&(e.current=i()),e.current}const ZT=typeof window<"u",EL=ZT?ge.useLayoutEffect:ge.useEffect,XS=ge.createContext(null);function QT(i,e){i.indexOf(e)===-1&&i.push(e)}function $T(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}const Cu=(i,e,t)=>t>e?e:t<i?i:t;let eE=()=>{};const wu={},CL=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i);function wL(i){return typeof i=="object"&&i!==null}const RL=i=>/^0[^.\s]+$/u.test(i);function tE(i){let e;return()=>(e===void 0&&(e=i()),e)}const Xo=i=>i,cY=(i,e)=>t=>e(i(t)),i1=(...i)=>i.reduce(cY),Lv=(i,e,t)=>{const n=e-i;return n===0?1:(t-i)/n};class nE{constructor(){this.subscriptions=[]}add(e){return QT(this.subscriptions,e),()=>$T(this.subscriptions,e)}notify(e,t,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,n);else for(let a=0;a<s;a++){const r=this.subscriptions[a];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const wc=i=>i*1e3,Rc=i=>i/1e3;function DL(i,e){return e?i*(1e3/e):0}const BL=(i,e,t)=>(((1-3*t+3*e)*i+(3*t-6*e))*i+3*e)*i,uY=1e-7,fY=12;function hY(i,e,t,n,s){let a,r,l=0;do r=e+(t-e)/2,a=BL(r,n,s)-i,a>0?t=r:e=r;while(Math.abs(a)>uY&&++l<fY);return r}function s1(i,e,t,n){if(i===e&&t===n)return Xo;const s=a=>hY(a,0,1,i,t);return a=>a===0||a===1?a:BL(s(a),e,n)}const UL=i=>e=>e<=.5?i(2*e)/2:(2-i(2*(1-e)))/2,LL=i=>e=>1-i(1-e),OL=s1(.33,1.53,.69,.99),iE=LL(OL),NL=UL(iE),PL=i=>(i*=2)<1?.5*iE(i):.5*(2-Math.pow(2,-10*(i-1))),sE=i=>1-Math.sin(Math.acos(i)),IL=LL(sE),FL=UL(sE),dY=s1(.42,0,1,1),pY=s1(0,0,.58,1),zL=s1(.42,0,.58,1),mY=i=>Array.isArray(i)&&typeof i[0]!="number",GL=i=>Array.isArray(i)&&typeof i[0]=="number",gY={linear:Xo,easeIn:dY,easeInOut:zL,easeOut:pY,circIn:sE,circInOut:FL,circOut:IL,backIn:iE,backInOut:NL,backOut:OL,anticipate:PL},vY=i=>typeof i=="string",CR=i=>{if(GL(i)){eE(i.length===4);const[e,t,n,s]=i;return s1(e,t,n,s)}else if(vY(i))return gY[i];return i},C_=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],wR={value:null};function yY(i,e){let t=new Set,n=new Set,s=!1,a=!1;const r=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function f(g){r.has(g)&&(d.schedule(g),i()),c++,g(l)}const d={schedule:(g,v=!1,y=!1)=>{const A=y&&s?t:n;return v&&r.add(g),A.has(g)||A.add(g),g},cancel:g=>{n.delete(g),r.delete(g)},process:g=>{if(l=g,s){a=!0;return}s=!0,[t,n]=[n,t],t.forEach(f),e&&wR.value&&wR.value.frameloop[e].push(c),c=0,t.clear(),s=!1,a&&(a=!1,d.process(g))}};return d}const _Y=40;function HL(i,e){let t=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,r=C_.reduce((w,R)=>(w[R]=yY(a,e?R:void 0),w),{}),{setup:l,read:c,resolveKeyframes:f,preUpdate:d,update:g,preRender:v,render:y,postRender:S}=r,A=()=>{const w=wu.useManualTiming?s.timestamp:performance.now();t=!1,wu.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(w-s.timestamp,_Y),1)),s.timestamp=w,s.isProcessing=!0,l.process(s),c.process(s),f.process(s),d.process(s),g.process(s),v.process(s),y.process(s),S.process(s),s.isProcessing=!1,t&&e&&(n=!1,i(A))},M=()=>{t=!0,n=!0,s.isProcessing||i(A)};return{schedule:C_.reduce((w,R)=>{const U=r[R];return w[R]=(O,I=!1,P=!1)=>(t||M(),U.schedule(O,I,P)),w},{}),cancel:w=>{for(let R=0;R<C_.length;R++)r[C_[R]].cancel(w)},state:s,steps:r}}const{schedule:Gi,cancel:kf,state:fa,steps:cM}=HL(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xo,!0);let H_;function xY(){H_=void 0}const wr={now:()=>(H_===void 0&&wr.set(fa.isProcessing||wu.useManualTiming?fa.timestamp:performance.now()),H_),set:i=>{H_=i,queueMicrotask(xY)}},VL=i=>e=>typeof e=="string"&&e.startsWith(i),aE=VL("--"),SY=VL("var(--"),rE=i=>SY(i)?AY.test(i.split("/*")[0].trim()):!1,AY=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,r0={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},Ov={...r0,transform:i=>Cu(0,1,i)},w_={...r0,default:1},ov=i=>Math.round(i*1e5)/1e5,oE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function MY(i){return i==null}const bY=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,lE=(i,e)=>t=>!!(typeof t=="string"&&bY.test(t)&&t.startsWith(i)||e&&!MY(t)&&Object.prototype.hasOwnProperty.call(t,e)),kL=(i,e,t)=>n=>{if(typeof n!="string")return n;const[s,a,r,l]=n.match(oE);return{[i]:parseFloat(s),[e]:parseFloat(a),[t]:parseFloat(r),alpha:l!==void 0?parseFloat(l):1}},TY=i=>Cu(0,255,i),uM={...r0,transform:i=>Math.round(TY(i))},Sd={test:lE("rgb","red"),parse:kL("red","green","blue"),transform:({red:i,green:e,blue:t,alpha:n=1})=>"rgba("+uM.transform(i)+", "+uM.transform(e)+", "+uM.transform(t)+", "+ov(Ov.transform(n))+")"};function EY(i){let e="",t="",n="",s="";return i.length>5?(e=i.substring(1,3),t=i.substring(3,5),n=i.substring(5,7),s=i.substring(7,9)):(e=i.substring(1,2),t=i.substring(2,3),n=i.substring(3,4),s=i.substring(4,5),e+=e,t+=t,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const pb={test:lE("#"),parse:EY,transform:Sd.transform},a1=i=>({test:e=>typeof e=="string"&&e.endsWith(i)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${i}`}),Tf=a1("deg"),Dc=a1("%"),Qt=a1("px"),CY=a1("vh"),wY=a1("vw"),RR={...Dc,parse:i=>Dc.parse(i)/100,transform:i=>Dc.transform(i*100)},gm={test:lE("hsl","hue"),parse:kL("hue","saturation","lightness"),transform:({hue:i,saturation:e,lightness:t,alpha:n=1})=>"hsla("+Math.round(i)+", "+Dc.transform(ov(e))+", "+Dc.transform(ov(t))+", "+ov(Ov.transform(n))+")"},Es={test:i=>Sd.test(i)||pb.test(i)||gm.test(i),parse:i=>Sd.test(i)?Sd.parse(i):gm.test(i)?gm.parse(i):pb.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?Sd.transform(i):gm.transform(i),getAnimatableNone:i=>{const e=Es.parse(i);return e.alpha=0,Es.transform(e)}},RY=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function DY(i){return isNaN(i)&&typeof i=="string"&&(i.match(oE)?.length||0)+(i.match(RY)?.length||0)>0}const XL="number",jL="color",BY="var",UY="var(",DR="${}",LY=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Nv(i){const e=i.toString(),t=[],n={color:[],number:[],var:[]},s=[];let a=0;const l=e.replace(LY,c=>(Es.test(c)?(n.color.push(a),s.push(jL),t.push(Es.parse(c))):c.startsWith(UY)?(n.var.push(a),s.push(BY),t.push(c)):(n.number.push(a),s.push(XL),t.push(parseFloat(c))),++a,DR)).split(DR);return{values:t,split:l,indexes:n,types:s}}function YL(i){return Nv(i).values}function WL(i){const{split:e,types:t}=Nv(i),n=e.length;return s=>{let a="";for(let r=0;r<n;r++)if(a+=e[r],s[r]!==void 0){const l=t[r];l===XL?a+=ov(s[r]):l===jL?a+=Es.transform(s[r]):a+=s[r]}return a}}const OY=i=>typeof i=="number"?0:Es.test(i)?Es.getAnimatableNone(i):i;function NY(i){const e=YL(i);return WL(i)(e.map(OY))}const Xf={test:DY,parse:YL,createTransformer:WL,getAnimatableNone:NY};function fM(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*(2/3-t)*6:i}function PY({hue:i,saturation:e,lightness:t,alpha:n}){i/=360,e/=100,t/=100;let s=0,a=0,r=0;if(!e)s=a=r=t;else{const l=t<.5?t*(1+e):t+e-t*e,c=2*t-l;s=fM(c,l,i+1/3),a=fM(c,l,i),r=fM(c,l,i-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(r*255),alpha:n}}function Yx(i,e){return t=>t>0?e:i}const $i=(i,e,t)=>i+(e-i)*t,hM=(i,e,t)=>{const n=i*i,s=t*(e*e-n)+n;return s<0?0:Math.sqrt(s)},IY=[pb,Sd,gm],FY=i=>IY.find(e=>e.test(i));function BR(i){const e=FY(i);if(!e)return!1;let t=e.parse(i);return e===gm&&(t=PY(t)),t}const UR=(i,e)=>{const t=BR(i),n=BR(e);if(!t||!n)return Yx(i,e);const s={...t};return a=>(s.red=hM(t.red,n.red,a),s.green=hM(t.green,n.green,a),s.blue=hM(t.blue,n.blue,a),s.alpha=$i(t.alpha,n.alpha,a),Sd.transform(s))},mb=new Set(["none","hidden"]);function zY(i,e){return mb.has(i)?t=>t<=0?i:e:t=>t>=1?e:i}function GY(i,e){return t=>$i(i,e,t)}function cE(i){return typeof i=="number"?GY:typeof i=="string"?rE(i)?Yx:Es.test(i)?UR:kY:Array.isArray(i)?qL:typeof i=="object"?Es.test(i)?UR:HY:Yx}function qL(i,e){const t=[...i],n=t.length,s=i.map((a,r)=>cE(a)(a,e[r]));return a=>{for(let r=0;r<n;r++)t[r]=s[r](a);return t}}function HY(i,e){const t={...i,...e},n={};for(const s in t)i[s]!==void 0&&e[s]!==void 0&&(n[s]=cE(i[s])(i[s],e[s]));return s=>{for(const a in n)t[a]=n[a](s);return t}}function VY(i,e){const t=[],n={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],r=i.indexes[a][n[a]],l=i.values[r]??0;t[s]=l,n[a]++}return t}const kY=(i,e)=>{const t=Xf.createTransformer(e),n=Nv(i),s=Nv(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?mb.has(i)&&!s.values.length||mb.has(e)&&!n.values.length?zY(i,e):i1(qL(VY(n,s),s.values),t):Yx(i,e)};function KL(i,e,t){return typeof i=="number"&&typeof e=="number"&&typeof t=="number"?$i(i,e,t):cE(i)(i,e)}const XY=i=>{const e=({timestamp:t})=>i(t);return{start:(t=!0)=>Gi.update(e,t),stop:()=>kf(e),now:()=>fa.isProcessing?fa.timestamp:wr.now()}},JL=(i,e,t=10)=>{let n="";const s=Math.max(Math.round(e/t),2);for(let a=0;a<s;a++)n+=Math.round(i(a/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Wx=2e4;function uE(i){let e=0;const t=50;let n=i.next(e);for(;!n.done&&e<Wx;)e+=t,n=i.next(e);return e>=Wx?1/0:e}function jY(i,e=100,t){const n=t({...i,keyframes:[0,e]}),s=Math.min(uE(n),Wx);return{type:"keyframes",ease:a=>n.next(s*a).value/e,duration:Rc(s)}}const YY=5;function ZL(i,e,t){const n=Math.max(e-YY,0);return DL(t-i(n),e-n)}const as={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dM=.001;function WY({duration:i=as.duration,bounce:e=as.bounce,velocity:t=as.velocity,mass:n=as.mass}){let s,a,r=1-e;r=Cu(as.minDamping,as.maxDamping,r),i=Cu(as.minDuration,as.maxDuration,Rc(i)),r<1?(s=f=>{const d=f*r,g=d*i,v=d-t,y=gb(f,r),S=Math.exp(-g);return dM-v/y*S},a=f=>{const g=f*r*i,v=g*t+t,y=Math.pow(r,2)*Math.pow(f,2)*i,S=Math.exp(-g),A=gb(Math.pow(f,2),r);return(-s(f)+dM>0?-1:1)*((v-y)*S)/A}):(s=f=>{const d=Math.exp(-f*i),g=(f-t)*i+1;return-dM+d*g},a=f=>{const d=Math.exp(-f*i),g=(t-f)*(i*i);return d*g});const l=5/i,c=KY(s,a,l);if(i=wc(i),isNaN(c))return{stiffness:as.stiffness,damping:as.damping,duration:i};{const f=Math.pow(c,2)*n;return{stiffness:f,damping:r*2*Math.sqrt(n*f),duration:i}}}const qY=12;function KY(i,e,t){let n=t;for(let s=1;s<qY;s++)n=n-i(n)/e(n);return n}function gb(i,e){return i*Math.sqrt(1-e*e)}const JY=["duration","bounce"],ZY=["stiffness","damping","mass"];function LR(i,e){return e.some(t=>i[t]!==void 0)}function QY(i){let e={velocity:as.velocity,stiffness:as.stiffness,damping:as.damping,mass:as.mass,isResolvedFromDuration:!1,...i};if(!LR(i,ZY)&&LR(i,JY))if(i.visualDuration){const t=i.visualDuration,n=2*Math.PI/(t*1.2),s=n*n,a=2*Cu(.05,1,1-(i.bounce||0))*Math.sqrt(s);e={...e,mass:as.mass,stiffness:s,damping:a}}else{const t=WY(i);e={...e,...t,mass:as.mass},e.isResolvedFromDuration=!0}return e}function qx(i=as.visualDuration,e=as.bounce){const t=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:e}:i;let{restSpeed:n,restDelta:s}=t;const a=t.keyframes[0],r=t.keyframes[t.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:f,mass:d,duration:g,velocity:v,isResolvedFromDuration:y}=QY({...t,velocity:-Rc(t.velocity||0)}),S=v||0,A=f/(2*Math.sqrt(c*d)),M=r-a,b=Rc(Math.sqrt(c/d)),C=Math.abs(M)<5;n||(n=C?as.restSpeed.granular:as.restSpeed.default),s||(s=C?as.restDelta.granular:as.restDelta.default);let w;if(A<1){const U=gb(b,A);w=O=>{const I=Math.exp(-A*b*O);return r-I*((S+A*b*M)/U*Math.sin(U*O)+M*Math.cos(U*O))}}else if(A===1)w=U=>r-Math.exp(-b*U)*(M+(S+b*M)*U);else{const U=b*Math.sqrt(A*A-1);w=O=>{const I=Math.exp(-A*b*O),P=Math.min(U*O,300);return r-I*((S+A*b*M)*Math.sinh(P)+U*M*Math.cosh(P))/U}}const R={calculatedDuration:y&&g||null,next:U=>{const O=w(U);if(y)l.done=U>=g;else{let I=U===0?S:0;A<1&&(I=U===0?wc(S):ZL(w,U,O));const P=Math.abs(I)<=n,N=Math.abs(r-O)<=s;l.done=P&&N}return l.value=l.done?r:O,l},toString:()=>{const U=Math.min(uE(R),Wx),O=JL(I=>R.next(U*I).value,U,30);return U+"ms "+O},toTransition:()=>{}};return R}qx.applyToOptions=i=>{const e=jY(i,100,qx);return i.ease=e.ease,i.duration=wc(e.duration),i.type="keyframes",i};function vb({keyframes:i,velocity:e=0,power:t=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:r,min:l,max:c,restDelta:f=.5,restSpeed:d}){const g=i[0],v={done:!1,value:g},y=P=>l!==void 0&&P<l||c!==void 0&&P>c,S=P=>l===void 0?c:c===void 0||Math.abs(l-P)<Math.abs(c-P)?l:c;let A=t*e;const M=g+A,b=r===void 0?M:r(M);b!==M&&(A=b-g);const C=P=>-A*Math.exp(-P/n),w=P=>b+C(P),R=P=>{const N=C(P),L=w(P);v.done=Math.abs(N)<=f,v.value=v.done?b:L};let U,O;const I=P=>{y(v.value)&&(U=P,O=qx({keyframes:[v.value,S(v.value)],velocity:ZL(w,P,v.value),damping:s,stiffness:a,restDelta:f,restSpeed:d}))};return I(0),{calculatedDuration:null,next:P=>{let N=!1;return!O&&U===void 0&&(N=!0,R(P),I(P)),U!==void 0&&P>=U?O.next(P-U):(!N&&R(P),v)}}}function $Y(i,e,t){const n=[],s=t||wu.mix||KL,a=i.length-1;for(let r=0;r<a;r++){let l=s(i[r],i[r+1]);if(e){const c=Array.isArray(e)?e[r]||Xo:e;l=i1(c,l)}n.push(l)}return n}function eW(i,e,{clamp:t=!0,ease:n,mixer:s}={}){const a=i.length;if(eE(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const r=i[0]===i[1];i[0]>i[a-1]&&(i=[...i].reverse(),e=[...e].reverse());const l=$Y(e,n,s),c=l.length,f=d=>{if(r&&d<i[0])return e[0];let g=0;if(c>1)for(;g<i.length-2&&!(d<i[g+1]);g++);const v=Lv(i[g],i[g+1],d);return l[g](v)};return t?d=>f(Cu(i[0],i[a-1],d)):f}function tW(i,e){const t=i[i.length-1];for(let n=1;n<=e;n++){const s=Lv(0,e,n);i.push($i(t,1,s))}}function nW(i){const e=[0];return tW(e,i.length-1),e}function iW(i,e){return i.map(t=>t*e)}function sW(i,e){return i.map(()=>e||zL).splice(0,i.length-1)}function lv({duration:i=300,keyframes:e,times:t,ease:n="easeInOut"}){const s=mY(n)?n.map(CR):CR(n),a={done:!1,value:e[0]},r=iW(t&&t.length===e.length?t:nW(e),i),l=eW(r,e,{ease:Array.isArray(s)?s:sW(e,s)});return{calculatedDuration:i,next:c=>(a.value=l(c),a.done=c>=i,a)}}const aW=i=>i!==null;function fE(i,{repeat:e,repeatType:t="loop"},n,s=1){const a=i.filter(aW),l=s<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!l||n===void 0?a[l]:n}const rW={decay:vb,inertia:vb,tween:lv,keyframes:lv,spring:qx};function QL(i){typeof i.type=="string"&&(i.type=rW[i.type])}class hE{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const oW=i=>i/100;class dE extends hE{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==wr.now()&&this.tick(wr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;QL(e);const{type:t=lv,repeat:n=0,repeatDelay:s=0,repeatType:a,velocity:r=0}=e;let{keyframes:l}=e;const c=t||lv;c!==lv&&typeof l[0]!="number"&&(this.mixKeyframes=i1(oW,KL(l[0],l[1])),l=[0,100]);const f=c({...e,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-r})),f.calculatedDuration===null&&(f.calculatedDuration=uE(f));const{calculatedDuration:d}=f;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=f}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:n,totalDuration:s,mixKeyframes:a,mirroredGenerator:r,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:f=0,keyframes:d,repeat:g,repeatType:v,repeatDelay:y,type:S,onUpdate:A,finalKeyframe:M}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const b=this.currentTime-f*(this.playbackSpeed>=0?1:-1),C=this.playbackSpeed>=0?b<0:b>s;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let w=this.currentTime,R=n;if(g){const P=Math.min(this.currentTime,s)/l;let N=Math.floor(P),L=P%1;!L&&P>=1&&(L=1),L===1&&N--,N=Math.min(N,g+1),!!(N%2)&&(v==="reverse"?(L=1-L,y&&(L-=y/l)):v==="mirror"&&(R=r)),w=Cu(0,1,L)*l}const U=C?{done:!1,value:d[0]}:R.next(w);a&&(U.value=a(U.value));let{done:O}=U;!C&&c!==null&&(O=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return I&&S!==vb&&(U.value=fE(d,this.options,M,this.speed)),A&&A(U.value),I&&this.finish(),U}then(e,t){return this.finished.then(e,t)}get duration(){return Rc(this.calculatedDuration)}get time(){return Rc(this.currentTime)}set time(e){e=wc(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(wr.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Rc(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=XY,startTime:t}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=t??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(wr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function lW(i){for(let e=1;e<i.length;e++)i[e]??(i[e]=i[e-1])}const Ad=i=>i*180/Math.PI,yb=i=>{const e=Ad(Math.atan2(i[1],i[0]));return _b(e)},cW={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:i=>(Math.abs(i[0])+Math.abs(i[3]))/2,rotate:yb,rotateZ:yb,skewX:i=>Ad(Math.atan(i[1])),skewY:i=>Ad(Math.atan(i[2])),skew:i=>(Math.abs(i[1])+Math.abs(i[2]))/2},_b=i=>(i=i%360,i<0&&(i+=360),i),OR=yb,NR=i=>Math.sqrt(i[0]*i[0]+i[1]*i[1]),PR=i=>Math.sqrt(i[4]*i[4]+i[5]*i[5]),uW={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:NR,scaleY:PR,scale:i=>(NR(i)+PR(i))/2,rotateX:i=>_b(Ad(Math.atan2(i[6],i[5]))),rotateY:i=>_b(Ad(Math.atan2(-i[2],i[0]))),rotateZ:OR,rotate:OR,skewX:i=>Ad(Math.atan(i[4])),skewY:i=>Ad(Math.atan(i[1])),skew:i=>(Math.abs(i[1])+Math.abs(i[4]))/2};function xb(i){return i.includes("scale")?1:0}function Sb(i,e){if(!i||i==="none")return xb(e);const t=i.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(t)n=uW,s=t;else{const l=i.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=cW,s=l}if(!s)return xb(e);const a=n[e],r=s[1].split(",").map(hW);return typeof a=="function"?a(r):r[a]}const fW=(i,e)=>{const{transform:t="none"}=getComputedStyle(i);return Sb(t,e)};function hW(i){return parseFloat(i.trim())}const o0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],l0=new Set(o0),IR=i=>i===r0||i===Qt,dW=new Set(["x","y","z"]),pW=o0.filter(i=>!dW.has(i));function mW(i){const e=[];return pW.forEach(t=>{const n=i.getValue(t);n!==void 0&&(e.push([t,n.get()]),n.set(t.startsWith("scale")?1:0))}),e}const Bd={width:({x:i},{paddingLeft:e="0",paddingRight:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),height:({y:i},{paddingTop:e="0",paddingBottom:t="0"})=>i.max-i.min-parseFloat(e)-parseFloat(t),top:(i,{top:e})=>parseFloat(e),left:(i,{left:e})=>parseFloat(e),bottom:({y:i},{top:e})=>parseFloat(e)+(i.max-i.min),right:({x:i},{left:e})=>parseFloat(e)+(i.max-i.min),x:(i,{transform:e})=>Sb(e,"x"),y:(i,{transform:e})=>Sb(e,"y")};Bd.translateX=Bd.x;Bd.translateY=Bd.y;const Ud=new Set;let Ab=!1,Mb=!1,bb=!1;function $L(){if(Mb){const i=Array.from(Ud).filter(n=>n.needsMeasurement),e=new Set(i.map(n=>n.element)),t=new Map;e.forEach(n=>{const s=mW(n);s.length&&(t.set(n,s),n.render())}),i.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=t.get(n);s&&s.forEach(([a,r])=>{n.getValue(a)?.set(r)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Mb=!1,Ab=!1,Ud.forEach(i=>i.complete(bb)),Ud.clear()}function eO(){Ud.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(Mb=!0)})}function gW(){bb=!0,eO(),$L(),bb=!1}class pE{constructor(e,t,n,s,a,r=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=s,this.element=a,this.isAsync=r}scheduleResolve(){this.state="scheduled",this.isAsync?(Ud.add(this),Ab||(Ab=!0,Gi.read(eO),Gi.resolveKeyframes($L))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:s}=this;if(e[0]===null){const a=s?.get(),r=e[e.length-1];if(a!==void 0)e[0]=a;else if(n&&t){const l=n.readValue(t,r);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=r),s&&a===void 0&&s.set(e[0])}lW(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ud.delete(this)}cancel(){this.state==="scheduled"&&(Ud.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const vW=i=>i.startsWith("--");function yW(i,e,t){vW(e)?i.style.setProperty(e,t):i.style[e]=t}const _W=tE(()=>window.ScrollTimeline!==void 0),xW={};function SW(i,e){const t=tE(i);return()=>xW[e]??t()}const tO=SW(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Xg=([i,e,t,n])=>`cubic-bezier(${i}, ${e}, ${t}, ${n})`,FR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xg([0,.65,.55,1]),circOut:Xg([.55,0,1,.45]),backIn:Xg([.31,.01,.66,-.59]),backOut:Xg([.33,1.53,.69,.99])};function nO(i,e){if(i)return typeof i=="function"?tO()?JL(i,e):"ease-out":GL(i)?Xg(i):Array.isArray(i)?i.map(t=>nO(t,e)||FR.easeOut):FR[i]}function AW(i,e,t,{delay:n=0,duration:s=300,repeat:a=0,repeatType:r="loop",ease:l="easeOut",times:c}={},f=void 0){const d={[e]:t};c&&(d.offset=c);const g=nO(l,s);Array.isArray(g)&&(d.easing=g);const v={delay:n,duration:s,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:a+1,direction:r==="reverse"?"alternate":"normal"};return f&&(v.pseudoElement=f),i.animate(d,v)}function iO(i){return typeof i=="function"&&"applyToOptions"in i}function MW({type:i,...e}){return iO(i)&&tO()?i.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class bW extends hE{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:n,keyframes:s,pseudoElement:a,allowFlatten:r=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=r,this.options=e,eE(typeof e.type!="string");const f=MW(e);this.animation=AW(t,n,s,f,a),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=fE(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):yW(t,n,d),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Rc(Number(e))}get time(){return Rc(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=wc(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&_W()?(this.animation.timeline=e,Xo):t(this)}}const sO={anticipate:PL,backInOut:NL,circInOut:FL};function TW(i){return i in sO}function EW(i){typeof i.ease=="string"&&TW(i.ease)&&(i.ease=sO[i.ease])}const zR=10;class CW extends bW{constructor(e){EW(e),QL(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:n,onComplete:s,element:a,...r}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const l=new dE({...r,autoplay:!1}),c=wc(this.finishedTime??this.time);t.setWithVelocity(l.sample(c-zR).value,l.sample(c).value,zR),l.stop()}}const GR=(i,e)=>e==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(Xf.test(i)||i==="0")&&!i.startsWith("url("));function wW(i){const e=i[0];if(i.length===1)return!0;for(let t=0;t<i.length;t++)if(i[t]!==e)return!0}function RW(i,e,t,n){const s=i[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=i[i.length-1],r=GR(s,e),l=GR(a,e);return!r||!l?!1:wW(i)||(t==="spring"||iO(t))&&n}function mE(i){return wL(i)&&"offsetHeight"in i}const DW=new Set(["opacity","clipPath","filter","transform"]),BW=tE(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function UW(i){const{motionValue:e,name:t,repeatDelay:n,repeatType:s,damping:a,type:r}=i;if(!mE(e?.owner?.current))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return BW()&&t&&DW.has(t)&&(t!=="transform"||!c)&&!l&&!n&&s!=="mirror"&&a!==0&&r!=="inertia"}const LW=40;class OW extends hE{constructor({autoplay:e=!0,delay:t=0,type:n="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:r="loop",keyframes:l,name:c,motionValue:f,element:d,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=wr.now();const v={autoplay:e,delay:t,type:n,repeat:s,repeatDelay:a,repeatType:r,name:c,motionValue:f,element:d,...g},y=d?.KeyframeResolver||pE;this.keyframeResolver=new y(l,(S,A,M)=>this.onKeyframesResolved(S,A,v,!M),c,f,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,n,s){this.keyframeResolver=void 0;const{name:a,type:r,velocity:l,delay:c,isHandoff:f,onUpdate:d}=n;this.resolvedAt=wr.now(),RW(e,a,r,l)||((wu.instantAnimations||!c)&&d?.(fE(e,n,t)),e[0]=e[e.length-1],n.duration=0,n.repeat=0);const v={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>LW?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...n,keyframes:e},y=!f&&UW(v)?new CW({...v,element:v.motionValue.owner.current}):new dE(v);y.finished.then(()=>this.notifyFinished()).catch(Xo),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),gW()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const NW=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function PW(i){const e=NW.exec(i);if(!e)return[,];const[,t,n,s]=e;return[`--${t??n}`,s]}function aO(i,e,t=1){const[n,s]=PW(i);if(!n)return;const a=window.getComputedStyle(e).getPropertyValue(n);if(a){const r=a.trim();return CL(r)?parseFloat(r):r}return rE(s)?aO(s,e,t+1):s}function gE(i,e){return i?.[e]??i?.default??i}const rO=new Set(["width","height","top","left","right","bottom",...o0]),IW={test:i=>i==="auto",parse:i=>i},oO=i=>e=>e.test(i),lO=[r0,Qt,Dc,Tf,wY,CY,IW],HR=i=>lO.find(oO(i));function FW(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||RL(i):!0}const zW=new Set(["brightness","contrast","saturate","opacity"]);function GW(i){const[e,t]=i.slice(0,-1).split("(");if(e==="drop-shadow")return i;const[n]=t.match(oE)||[];if(!n)return i;const s=t.replace(n,"");let a=zW.has(e)?1:0;return n!==t&&(a*=100),e+"("+a+s+")"}const HW=/\b([a-z-]*)\(.*?\)/gu,Tb={...Xf,getAnimatableNone:i=>{const e=i.match(HW);return e?e.map(GW).join(" "):i}},VR={...r0,transform:Math.round},VW={rotate:Tf,rotateX:Tf,rotateY:Tf,rotateZ:Tf,scale:w_,scaleX:w_,scaleY:w_,scaleZ:w_,skew:Tf,skewX:Tf,skewY:Tf,distance:Qt,translateX:Qt,translateY:Qt,translateZ:Qt,x:Qt,y:Qt,z:Qt,perspective:Qt,transformPerspective:Qt,opacity:Ov,originX:RR,originY:RR,originZ:Qt},vE={borderWidth:Qt,borderTopWidth:Qt,borderRightWidth:Qt,borderBottomWidth:Qt,borderLeftWidth:Qt,borderRadius:Qt,radius:Qt,borderTopLeftRadius:Qt,borderTopRightRadius:Qt,borderBottomRightRadius:Qt,borderBottomLeftRadius:Qt,width:Qt,maxWidth:Qt,height:Qt,maxHeight:Qt,top:Qt,right:Qt,bottom:Qt,left:Qt,padding:Qt,paddingTop:Qt,paddingRight:Qt,paddingBottom:Qt,paddingLeft:Qt,margin:Qt,marginTop:Qt,marginRight:Qt,marginBottom:Qt,marginLeft:Qt,backgroundPositionX:Qt,backgroundPositionY:Qt,...VW,zIndex:VR,fillOpacity:Ov,strokeOpacity:Ov,numOctaves:VR},kW={...vE,color:Es,backgroundColor:Es,outlineColor:Es,fill:Es,stroke:Es,borderColor:Es,borderTopColor:Es,borderRightColor:Es,borderBottomColor:Es,borderLeftColor:Es,filter:Tb,WebkitFilter:Tb},cO=i=>kW[i];function uO(i,e){let t=cO(i);return t!==Tb&&(t=Xf),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const XW=new Set(["auto","none","0"]);function jW(i,e,t){let n=0,s;for(;n<i.length&&!s;){const a=i[n];typeof a=="string"&&!XW.has(a)&&Nv(a).values.length&&(s=i[n]),n++}if(s&&t)for(const a of e)i[a]=uO(t,s)}class YW extends pE{constructor(e,t,n,s,a){super(e,t,n,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let f=e[c];if(typeof f=="string"&&(f=f.trim(),rE(f))){const d=aO(f,t.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!rO.has(n)||e.length!==2)return;const[s,a]=e,r=HR(s),l=HR(a);if(r!==l)if(IR(r)&&IR(l))for(let c=0;c<e.length;c++){const f=e[c];typeof f=="string"&&(e[c]=parseFloat(f))}else Bd[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let s=0;s<e.length;s++)(e[s]===null||FW(e[s]))&&n.push(s);n.length&&jW(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Bd[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const a=n.length-1,r=n[a];n[a]=Bd[t](e.measureViewportBox(),window.getComputedStyle(e.current)),r!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=r),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function WW(i,e,t){if(i instanceof EventTarget)return[i];if(typeof i=="string"){let n=document;const s=t?.[i]??n.querySelectorAll(i);return s?Array.from(s):[]}return Array.from(i)}const fO=(i,e)=>e&&typeof i=="number"?e.transform(i):i,kR=30,qW=i=>!isNaN(parseFloat(i));class KW{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{const a=wr.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty();s&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=wr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=qW(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new nE);const n=this.events[e].add(t);return e==="change"?()=>{n(),Gi.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=wr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>kR)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,kR);return DL(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Km(i,e){return new KW(i,e)}const{schedule:yE}=HL(queueMicrotask,!1),wl={x:!1,y:!1};function hO(){return wl.x||wl.y}function JW(i){return i==="x"||i==="y"?wl[i]?null:(wl[i]=!0,()=>{wl[i]=!1}):wl.x||wl.y?null:(wl.x=wl.y=!0,()=>{wl.x=wl.y=!1})}function dO(i,e){const t=WW(i),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[t,s,()=>n.abort()]}function XR(i){return!(i.pointerType==="touch"||hO())}function ZW(i,e,t={}){const[n,s,a]=dO(i,t),r=l=>{if(!XR(l))return;const{target:c}=l,f=e(c,l);if(typeof f!="function"||!c)return;const d=g=>{XR(g)&&(f(g),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return n.forEach(l=>{l.addEventListener("pointerenter",r,s)}),a}const pO=(i,e)=>e?i===e?!0:pO(i,e.parentElement):!1,_E=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,QW=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function $W(i){return QW.has(i.tagName)||i.tabIndex!==-1}const V_=new WeakSet;function jR(i){return e=>{e.key==="Enter"&&i(e)}}function pM(i,e){i.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const eq=(i,e)=>{const t=i.currentTarget;if(!t)return;const n=jR(()=>{if(V_.has(t))return;pM(t,"down");const s=jR(()=>{pM(t,"up")}),a=()=>pM(t,"cancel");t.addEventListener("keyup",s,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",n,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",n),e)};function YR(i){return _E(i)&&!hO()}function tq(i,e,t={}){const[n,s,a]=dO(i,t),r=l=>{const c=l.currentTarget;if(!YR(l))return;V_.add(c);const f=e(c,l),d=(y,S)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),V_.has(c)&&V_.delete(c),YR(y)&&typeof f=="function"&&f(y,{success:S})},g=y=>{d(y,c===window||c===document||t.useGlobalTarget||pO(c,y.target))},v=y=>{d(y,!1)};window.addEventListener("pointerup",g,s),window.addEventListener("pointercancel",v,s)};return n.forEach(l=>{(t.useGlobalTarget?window:l).addEventListener("pointerdown",r,s),mE(l)&&(l.addEventListener("focus",f=>eq(f,s)),!$W(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function mO(i){return wL(i)&&"ownerSVGElement"in i}function nq(i){return mO(i)&&i.tagName==="svg"}const Na=i=>!!(i&&i.getVelocity),iq=[...lO,Es,Xf],sq=i=>iq.find(oO(i)),xE=ge.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});class aq extends ge.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const n=t.offsetParent,s=mE(n)&&n.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function rq({children:i,isPresent:e,anchorX:t,root:n}){const s=ge.useId(),a=ge.useRef(null),r=ge.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=ge.useContext(xE);return ge.useInsertionEffect(()=>{const{width:c,height:f,top:d,left:g,right:v}=r.current;if(e||!a.current||!c||!f)return;const y=t==="left"?`left: ${g}`:`right: ${v}`;a.current.dataset.motionPopId=s;const S=document.createElement("style");l&&(S.nonce=l);const A=n??document.head;return A.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${f}px !important;
            ${y}px !important;
            top: ${d}px !important;
          }
        `),()=>{A.removeChild(S),A.contains(S)&&A.removeChild(S)}},[e]),oe.jsx(aq,{isPresent:e,childRef:a,sizeRef:r,children:ge.cloneElement(i,{ref:a})})}const oq=({children:i,initial:e,isPresent:t,onExitComplete:n,custom:s,presenceAffectsLayout:a,mode:r,anchorX:l,root:c})=>{const f=JT(lq),d=ge.useId();let g=!0,v=ge.useMemo(()=>(g=!1,{id:d,initial:e,isPresent:t,custom:s,onExitComplete:y=>{f.set(y,!0);for(const S of f.values())if(!S)return;n&&n()},register:y=>(f.set(y,!1),()=>f.delete(y))}),[t,f,n]);return a&&g&&(v={...v}),ge.useMemo(()=>{f.forEach((y,S)=>f.set(S,!1))},[t]),ge.useEffect(()=>{!t&&!f.size&&n&&n()},[t]),r==="popLayout"&&(i=oe.jsx(rq,{isPresent:t,anchorX:l,root:c,children:i})),oe.jsx(XS.Provider,{value:v,children:i})};function lq(){return new Map}function gO(i=!0){const e=ge.useContext(XS);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,a=ge.useId();ge.useEffect(()=>{if(i)return s(a)},[i]);const r=ge.useCallback(()=>i&&n&&n(a),[a,n,i]);return!t&&n?[!1,r]:[!0]}const R_=i=>i.key||"";function WR(i){const e=[];return ge.Children.forEach(i,t=>{ge.isValidElement(t)&&e.push(t)}),e}const cq=({children:i,custom:e,initial:t=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:a="sync",propagate:r=!1,anchorX:l="left",root:c})=>{const[f,d]=gO(r),g=ge.useMemo(()=>WR(i),[i]),v=r&&!f?[]:g.map(R_),y=ge.useRef(!0),S=ge.useRef(g),A=JT(()=>new Map),[M,b]=ge.useState(g),[C,w]=ge.useState(g);EL(()=>{y.current=!1,S.current=g;for(let O=0;O<C.length;O++){const I=R_(C[O]);v.includes(I)?A.delete(I):A.get(I)!==!0&&A.set(I,!1)}},[C,v.length,v.join("-")]);const R=[];if(g!==M){let O=[...g];for(let I=0;I<C.length;I++){const P=C[I],N=R_(P);v.includes(N)||(O.splice(I,0,P),R.push(P))}return a==="wait"&&R.length&&(O=R),w(WR(O)),b(g),null}const{forceRender:U}=ge.useContext(KT);return oe.jsx(oe.Fragment,{children:C.map(O=>{const I=R_(O),P=r&&!f?!1:g===C||v.includes(I),N=()=>{if(A.has(I))A.set(I,!0);else return;let L=!0;A.forEach(k=>{k||(L=!1)}),L&&(U?.(),w(S.current),r&&d?.(),n&&n())};return oe.jsx(oq,{isPresent:P,initial:!y.current||t?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,root:c,onExitComplete:P?void 0:N,anchorX:l,children:O},I)})})},vO=ge.createContext({strict:!1}),qR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Jm={};for(const i in qR)Jm[i]={isEnabled:e=>qR[i].some(t=>!!e[t])};function uq(i){for(const e in i)Jm[e]={...Jm[e],...i[e]}}const fq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Kx(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||fq.has(i)}let yO=i=>!Kx(i);function hq(i){typeof i=="function"&&(yO=e=>e.startsWith("on")?!Kx(e):i(e))}try{hq(require("@emotion/is-prop-valid").default)}catch{}function dq(i,e,t){const n={};for(const s in i)s==="values"&&typeof i.values=="object"||(yO(s)||t===!0&&Kx(s)||!e&&!Kx(s)||i.draggable&&s.startsWith("onDrag"))&&(n[s]=i[s]);return n}function pq(i){if(typeof Proxy>"u")return i;const e=new Map,t=(...n)=>i(...n);return new Proxy(t,{get:(n,s)=>s==="create"?i:(e.has(s)||e.set(s,i(s)),e.get(s))})}const jS=ge.createContext({});function YS(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}function Pv(i){return typeof i=="string"||Array.isArray(i)}const SE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],AE=["initial",...SE];function WS(i){return YS(i.animate)||AE.some(e=>Pv(i[e]))}function _O(i){return!!(WS(i)||i.variants)}function mq(i,e){if(WS(i)){const{initial:t,animate:n}=i;return{initial:t===!1||Pv(t)?t:void 0,animate:Pv(n)?n:void 0}}return i.inherit!==!1?e:{}}function gq(i){const{initial:e,animate:t}=mq(i,ge.useContext(jS));return ge.useMemo(()=>({initial:e,animate:t}),[KR(e),KR(t)])}function KR(i){return Array.isArray(i)?i.join(" "):i}const vq=Symbol.for("motionComponentSymbol");function vm(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function yq(i,e,t){return ge.useCallback(n=>{n&&i.onMount&&i.onMount(n),e&&(n?e.mount(n):e.unmount()),t&&(typeof t=="function"?t(n):vm(t)&&(t.current=n))},[e])}const ME=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_q="framerAppearId",xO="data-"+ME(_q),SO=ge.createContext({});function xq(i,e,t,n,s){const{visualElement:a}=ge.useContext(jS),r=ge.useContext(vO),l=ge.useContext(XS),c=ge.useContext(xE).reducedMotion,f=ge.useRef(null);n=n||r.renderer,!f.current&&n&&(f.current=n(i,{visualState:e,parent:a,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=f.current,g=ge.useContext(SO);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&Sq(f.current,t,s,g);const v=ge.useRef(!1);ge.useInsertionEffect(()=>{d&&v.current&&d.update(t,l)});const y=t[xO],S=ge.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return EL(()=>{d&&(v.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),yE.render(d.render),S.current&&d.animationState&&d.animationState.animateChanges())}),ge.useEffect(()=>{d&&(!S.current&&d.animationState&&d.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),S.current=!1))}),d}function Sq(i,e,t,n){const{layoutId:s,layout:a,drag:r,dragConstraints:l,layoutScroll:c,layoutRoot:f,layoutCrossfade:d}=e;i.projection=new t(i.latestValues,e["data-framer-portal-id"]?void 0:AO(i.parent)),i.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!r||l&&vm(l),visualElement:i,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:f})}function AO(i){if(i)return i.options.allowProjection!==!1?i.projection:AO(i.parent)}function Aq({preloadedFeatures:i,createVisualElement:e,useRender:t,useVisualState:n,Component:s}){i&&uq(i);function a(l,c){let f;const d={...ge.useContext(xE),...l,layoutId:Mq(l)},{isStatic:g}=d,v=gq(l),y=n(l,g);if(!g&&ZT){bq();const S=Tq(d);f=S.MeasureLayout,v.visualElement=xq(s,y,d,e,S.ProjectionNode)}return oe.jsxs(jS.Provider,{value:v,children:[f&&v.visualElement?oe.jsx(f,{visualElement:v.visualElement,...d}):null,t(s,l,yq(y,v.visualElement,c),y,g,v.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const r=ge.forwardRef(a);return r[vq]=s,r}function Mq({layoutId:i}){const e=ge.useContext(KT).id;return e&&i!==void 0?e+"-"+i:i}function bq(i,e){ge.useContext(vO).strict}function Tq(i){const{drag:e,layout:t}=Jm;if(!e&&!t)return{};const n={...e,...t};return{MeasureLayout:e?.isEnabled(i)||t?.isEnabled(i)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const Iv={};function Eq(i){for(const e in i)Iv[e]=i[e],aE(e)&&(Iv[e].isCSSVariable=!0)}function MO(i,{layout:e,layoutId:t}){return l0.has(i)||i.startsWith("origin")||(e||t!==void 0)&&(!!Iv[i]||i==="opacity")}const Cq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wq=o0.length;function Rq(i,e,t){let n="",s=!0;for(let a=0;a<wq;a++){const r=o0[a],l=i[r];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(r.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||t){const f=fO(l,vE[r]);if(!c){s=!1;const d=Cq[r]||r;n+=`${d}(${f}) `}t&&(e[r]=f)}}return n=n.trim(),t?n=t(e,s?"":n):s&&(n="none"),n}function bE(i,e,t){const{style:n,vars:s,transformOrigin:a}=i;let r=!1,l=!1;for(const c in e){const f=e[c];if(l0.has(c)){r=!0;continue}else if(aE(c)){s[c]=f;continue}else{const d=fO(f,vE[c]);c.startsWith("origin")?(l=!0,a[c]=d):n[c]=d}}if(e.transform||(r||t?n.transform=Rq(e,i.transform,t):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:f="50%",originZ:d=0}=a;n.transformOrigin=`${c} ${f} ${d}`}}const TE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function bO(i,e,t){for(const n in e)!Na(e[n])&&!MO(n,t)&&(i[n]=e[n])}function Dq({transformTemplate:i},e){return ge.useMemo(()=>{const t=TE();return bE(t,e,i),Object.assign({},t.vars,t.style)},[e])}function Bq(i,e){const t=i.style||{},n={};return bO(n,t,i),Object.assign(n,Dq(i,e)),n}function Uq(i,e){const t={},n=Bq(i,e);return i.drag&&i.dragListener!==!1&&(t.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(t.tabIndex=0),t.style=n,t}const Lq={offset:"stroke-dashoffset",array:"stroke-dasharray"},Oq={offset:"strokeDashoffset",array:"strokeDasharray"};function Nq(i,e,t=1,n=0,s=!0){i.pathLength=1;const a=s?Lq:Oq;i[a.offset]=Qt.transform(-n);const r=Qt.transform(e),l=Qt.transform(t);i[a.array]=`${r} ${l}`}function TO(i,{attrX:e,attrY:t,attrScale:n,pathLength:s,pathSpacing:a=1,pathOffset:r=0,...l},c,f,d){if(bE(i,l,f),c){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:g,style:v}=i;g.transform&&(v.transform=g.transform,delete g.transform),(v.transform||g.transformOrigin)&&(v.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),v.transform&&(v.transformBox=d?.transformBox??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),t!==void 0&&(g.y=t),n!==void 0&&(g.scale=n),s!==void 0&&Nq(g,s,a,r,!1)}const EO=()=>({...TE(),attrs:{}}),CO=i=>typeof i=="string"&&i.toLowerCase()==="svg";function Pq(i,e,t,n){const s=ge.useMemo(()=>{const a=EO();return TO(a,e,CO(n),i.transformTemplate,i.style),{...a.attrs,style:{...a.style}}},[e]);if(i.style){const a={};bO(a,i.style,i),s.style={...a,...s.style}}return s}const Iq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function EE(i){return typeof i!="string"||i.includes("-")?!1:!!(Iq.indexOf(i)>-1||/[A-Z]/u.test(i))}function Fq(i=!1){return(t,n,s,{latestValues:a},r)=>{const c=(EE(t)?Pq:Uq)(n,a,r,t),f=dq(n,typeof t=="string",i),d=t!==ge.Fragment?{...f,...c,ref:s}:{},{children:g}=n,v=ge.useMemo(()=>Na(g)?g.get():g,[g]);return ge.createElement(t,{...d,children:v})}}function JR(i){const e=[{},{}];return i?.values.forEach((t,n)=>{e[0][n]=t.get(),e[1][n]=t.getVelocity()}),e}function CE(i,e,t,n){if(typeof e=="function"){const[s,a]=JR(n);e=e(t!==void 0?t:i.custom,s,a)}if(typeof e=="string"&&(e=i.variants&&i.variants[e]),typeof e=="function"){const[s,a]=JR(n);e=e(t!==void 0?t:i.custom,s,a)}return e}function k_(i){return Na(i)?i.get():i}function zq({scrapeMotionValuesFromProps:i,createRenderState:e},t,n,s){return{latestValues:Gq(t,n,s,i),renderState:e()}}const wO=i=>(e,t)=>{const n=ge.useContext(jS),s=ge.useContext(XS),a=()=>zq(i,e,n,s);return t?a():JT(a)};function Gq(i,e,t,n){const s={},a=n(i,{});for(const v in a)s[v]=k_(a[v]);let{initial:r,animate:l}=i;const c=WS(i),f=_O(i);e&&f&&!c&&i.inherit!==!1&&(r===void 0&&(r=e.initial),l===void 0&&(l=e.animate));let d=t?t.initial===!1:!1;d=d||r===!1;const g=d?l:r;if(g&&typeof g!="boolean"&&!YS(g)){const v=Array.isArray(g)?g:[g];for(let y=0;y<v.length;y++){const S=CE(i,v[y]);if(S){const{transitionEnd:A,transition:M,...b}=S;for(const C in b){let w=b[C];if(Array.isArray(w)){const R=d?w.length-1:0;w=w[R]}w!==null&&(s[C]=w)}for(const C in A)s[C]=A[C]}}}return s}function wE(i,e,t){const{style:n}=i,s={};for(const a in n)(Na(n[a])||e.style&&Na(e.style[a])||MO(a,i)||t?.getValue(a)?.liveStyle!==void 0)&&(s[a]=n[a]);return s}const Hq={useVisualState:wO({scrapeMotionValuesFromProps:wE,createRenderState:TE})};function RO(i,e,t){const n=wE(i,e,t);for(const s in i)if(Na(i[s])||Na(e[s])){const a=o0.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[a]=i[s]}return n}const Vq={useVisualState:wO({scrapeMotionValuesFromProps:RO,createRenderState:EO})};function kq(i,e){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const r={...EE(n)?Vq:Hq,preloadedFeatures:i,useRender:Fq(s),createVisualElement:e,Component:n};return Aq(r)}}function Fv(i,e,t){const n=i.getProps();return CE(n,e,t!==void 0?t:n.custom,i)}const Eb=i=>Array.isArray(i);function Xq(i,e,t){i.hasValue(e)?i.getValue(e).set(t):i.addValue(e,Km(t))}function jq(i){return Eb(i)?i[i.length-1]||0:i}function Yq(i,e){const t=Fv(i,e);let{transitionEnd:n={},transition:s={},...a}=t||{};a={...a,...n};for(const r in a){const l=jq(a[r]);Xq(i,r,l)}}function Wq(i){return!!(Na(i)&&i.add)}function Cb(i,e){const t=i.getValue("willChange");if(Wq(t))return t.add(e);if(!t&&wu.WillChange){const n=new wu.WillChange("auto");i.addValue("willChange",n),n.add(e)}}function DO(i){return i.props[xO]}const qq=i=>i!==null;function Kq(i,{repeat:e,repeatType:t="loop"},n){const s=i.filter(qq),a=e&&t!=="loop"&&e%2===1?0:s.length-1;return s[a]}const Jq={type:"spring",stiffness:500,damping:25,restSpeed:10},Zq=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),Qq={type:"keyframes",duration:.8},$q={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},eK=(i,{keyframes:e})=>e.length>2?Qq:l0.has(i)?i.startsWith("scale")?Zq(e[1]):Jq:$q;function tK({when:i,delay:e,delayChildren:t,staggerChildren:n,staggerDirection:s,repeat:a,repeatType:r,repeatDelay:l,from:c,elapsed:f,...d}){return!!Object.keys(d).length}const RE=(i,e,t,n={},s,a)=>r=>{const l=gE(n,i)||{},c=l.delay||n.delay||0;let{elapsed:f=0}=n;f=f-wc(c);const d={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-f,onUpdate:v=>{e.set(v),l.onUpdate&&l.onUpdate(v)},onComplete:()=>{r(),l.onComplete&&l.onComplete()},name:i,motionValue:e,element:a?void 0:s};tK(l)||Object.assign(d,eK(i,d)),d.duration&&(d.duration=wc(d.duration)),d.repeatDelay&&(d.repeatDelay=wc(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let g=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(g=!0)),(wu.instantAnimations||wu.skipAnimations)&&(g=!0,d.duration=0,d.delay=0),d.allowFlatten=!l.type&&!l.ease,g&&!a&&e.get()!==void 0){const v=Kq(d.keyframes,l);if(v!==void 0){Gi.update(()=>{d.onUpdate(v),d.onComplete()});return}}return l.isSync?new dE(d):new OW(d)};function nK({protectedKeys:i,needsAnimating:e},t){const n=i.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,n}function BO(i,e,{delay:t=0,transitionOverride:n,type:s}={}){let{transition:a=i.getDefaultTransition(),transitionEnd:r,...l}=e;n&&(a=n);const c=[],f=s&&i.animationState&&i.animationState.getState()[s];for(const d in l){const g=i.getValue(d,i.latestValues[d]??null),v=l[d];if(v===void 0||f&&nK(f,d))continue;const y={delay:t,...gE(a||{},d)},S=g.get();if(S!==void 0&&!g.isAnimating&&!Array.isArray(v)&&v===S&&!y.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const b=DO(i);if(b){const C=window.MotionHandoffAnimation(b,d,Gi);C!==null&&(y.startTime=C,A=!0)}}Cb(i,d),g.start(RE(d,g,v,i.shouldReduceMotion&&rO.has(d)?{type:!1}:y,i,A));const M=g.animation;M&&c.push(M)}return r&&Promise.all(c).then(()=>{Gi.update(()=>{r&&Yq(i,r)})}),c}function wb(i,e,t={}){const n=Fv(i,e,t.type==="exit"?i.presenceContext?.custom:void 0);let{transition:s=i.getDefaultTransition()||{}}=n||{};t.transitionOverride&&(s=t.transitionOverride);const a=n?()=>Promise.all(BO(i,n,t)):()=>Promise.resolve(),r=i.variantChildren&&i.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:d,staggerDirection:g}=s;return iK(i,e,c,f,d,g,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,f]=l==="beforeChildren"?[a,r]:[r,a];return c().then(()=>f())}else return Promise.all([a(),r(t.delay)])}function iK(i,e,t=0,n=0,s=0,a=1,r){const l=[],c=i.variantChildren.size,f=(c-1)*s,d=typeof n=="function",g=d?v=>n(v,c):a===1?(v=0)=>v*s:(v=0)=>f-v*s;return Array.from(i.variantChildren).sort(sK).forEach((v,y)=>{v.notify("AnimationStart",e),l.push(wb(v,e,{...r,delay:t+(d?0:n)+g(y)}).then(()=>v.notify("AnimationComplete",e)))}),Promise.all(l)}function sK(i,e){return i.sortNodePosition(e)}function aK(i,e,t={}){i.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(a=>wb(i,a,t));n=Promise.all(s)}else if(typeof e=="string")n=wb(i,e,t);else{const s=typeof e=="function"?Fv(i,e,t.custom):e;n=Promise.all(BO(i,s,t))}return n.then(()=>{i.notify("AnimationComplete",e)})}function UO(i,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==i.length)return!1;for(let n=0;n<t;n++)if(e[n]!==i[n])return!1;return!0}const rK=AE.length;function LO(i){if(!i)return;if(!i.isControllingVariants){const t=i.parent?LO(i.parent)||{}:{};return i.props.initial!==void 0&&(t.initial=i.props.initial),t}const e={};for(let t=0;t<rK;t++){const n=AE[t],s=i.props[n];(Pv(s)||s===!1)&&(e[n]=s)}return e}const oK=[...SE].reverse(),lK=SE.length;function cK(i){return e=>Promise.all(e.map(({animation:t,options:n})=>aK(i,t,n)))}function uK(i){let e=cK(i),t=ZR(),n=!0;const s=c=>(f,d)=>{const g=Fv(i,d,c==="exit"?i.presenceContext?.custom:void 0);if(g){const{transition:v,transitionEnd:y,...S}=g;f={...f,...S,...y}}return f};function a(c){e=c(i)}function r(c){const{props:f}=i,d=LO(i.parent)||{},g=[],v=new Set;let y={},S=1/0;for(let M=0;M<lK;M++){const b=oK[M],C=t[b],w=f[b]!==void 0?f[b]:d[b],R=Pv(w),U=b===c?C.isActive:null;U===!1&&(S=M);let O=w===d[b]&&w!==f[b]&&R;if(O&&n&&i.manuallyAnimateOnMount&&(O=!1),C.protectedKeys={...y},!C.isActive&&U===null||!w&&!C.prevProp||YS(w)||typeof w=="boolean")continue;const I=fK(C.prevProp,w);let P=I||b===c&&C.isActive&&!O&&R||M>S&&R,N=!1;const L=Array.isArray(w)?w:[w];let k=L.reduce(s(b),{});U===!1&&(k={});const{prevResolvedValues:X={}}=C,W={...X,...k},$=q=>{P=!0,v.has(q)&&(N=!0,v.delete(q)),C.needsAnimating[q]=!0;const Q=i.getValue(q);Q&&(Q.liveStyle=!1)};for(const q in W){const Q=k[q],re=X[q];if(y.hasOwnProperty(q))continue;let H=!1;Eb(Q)&&Eb(re)?H=!UO(Q,re):H=Q!==re,H?Q!=null?$(q):v.add(q):Q!==void 0&&v.has(q)?$(q):C.protectedKeys[q]=!0}C.prevProp=w,C.prevResolvedValues=k,C.isActive&&(y={...y,...k}),n&&i.blockInitialAnimation&&(P=!1),P&&(!(O&&I)||N)&&g.push(...L.map(q=>({animation:q,options:{type:b}})))}if(v.size){const M={};if(typeof f.initial!="boolean"){const b=Fv(i,Array.isArray(f.initial)?f.initial[0]:f.initial);b&&b.transition&&(M.transition=b.transition)}v.forEach(b=>{const C=i.getBaseTarget(b),w=i.getValue(b);w&&(w.liveStyle=!0),M[b]=C??null}),g.push({animation:M})}let A=!!g.length;return n&&(f.initial===!1||f.initial===f.animate)&&!i.manuallyAnimateOnMount&&(A=!1),n=!1,A?e(g):Promise.resolve()}function l(c,f){if(t[c].isActive===f)return Promise.resolve();i.variantChildren?.forEach(g=>g.animationState?.setActive(c,f)),t[c].isActive=f;const d=r(c);for(const g in t)t[g].protectedKeys={};return d}return{animateChanges:r,setActive:l,setAnimateFunction:a,getState:()=>t,reset:()=>{t=ZR(),n=!0}}}function fK(i,e){return typeof e=="string"?e!==i:Array.isArray(e)?!UO(e,i):!1}function sd(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ZR(){return{animate:sd(!0),whileInView:sd(),whileHover:sd(),whileTap:sd(),whileDrag:sd(),whileFocus:sd(),exit:sd()}}class Qf{constructor(e){this.isMounted=!1,this.node=e}update(){}}class hK extends Qf{constructor(e){super(e),e.animationState||(e.animationState=uK(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();YS(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let dK=0;class pK extends Qf{constructor(){super(...arguments),this.id=dK++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const mK={animation:{Feature:hK},exit:{Feature:pK}};function zv(i,e,t,n={passive:!0}){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t)}function r1(i){return{point:{x:i.pageX,y:i.pageY}}}const gK=i=>e=>_E(e)&&i(e,r1(e));function cv(i,e,t,n){return zv(i,e,gK(t),n)}function OO({top:i,left:e,right:t,bottom:n}){return{x:{min:e,max:t},y:{min:i,max:n}}}function vK({x:i,y:e}){return{top:e.min,right:i.max,bottom:e.max,left:i.min}}function yK(i,e){if(!e)return i;const t=e({x:i.left,y:i.top}),n=e({x:i.right,y:i.bottom});return{top:t.y,left:t.x,bottom:n.y,right:n.x}}const NO=1e-4,_K=1-NO,xK=1+NO,PO=.01,SK=0-PO,AK=0+PO;function rr(i){return i.max-i.min}function MK(i,e,t){return Math.abs(i-e)<=t}function QR(i,e,t,n=.5){i.origin=n,i.originPoint=$i(e.min,e.max,i.origin),i.scale=rr(t)/rr(e),i.translate=$i(t.min,t.max,i.origin)-i.originPoint,(i.scale>=_K&&i.scale<=xK||isNaN(i.scale))&&(i.scale=1),(i.translate>=SK&&i.translate<=AK||isNaN(i.translate))&&(i.translate=0)}function uv(i,e,t,n){QR(i.x,e.x,t.x,n?n.originX:void 0),QR(i.y,e.y,t.y,n?n.originY:void 0)}function $R(i,e,t){i.min=t.min+e.min,i.max=i.min+rr(e)}function bK(i,e,t){$R(i.x,e.x,t.x),$R(i.y,e.y,t.y)}function eD(i,e,t){i.min=e.min-t.min,i.max=i.min+rr(e)}function fv(i,e,t){eD(i.x,e.x,t.x),eD(i.y,e.y,t.y)}const tD=()=>({translate:0,scale:1,origin:0,originPoint:0}),ym=()=>({x:tD(),y:tD()}),nD=()=>({min:0,max:0}),ms=()=>({x:nD(),y:nD()});function Po(i){return[i("x"),i("y")]}function mM(i){return i===void 0||i===1}function Rb({scale:i,scaleX:e,scaleY:t}){return!mM(i)||!mM(e)||!mM(t)}function ud(i){return Rb(i)||IO(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function IO(i){return iD(i.x)||iD(i.y)}function iD(i){return i&&i!=="0%"}function Jx(i,e,t){const n=i-t,s=e*n;return t+s}function sD(i,e,t,n,s){return s!==void 0&&(i=Jx(i,s,n)),Jx(i,t,n)+e}function Db(i,e=0,t=1,n,s){i.min=sD(i.min,e,t,n,s),i.max=sD(i.max,e,t,n,s)}function FO(i,{x:e,y:t}){Db(i.x,e.translate,e.scale,e.originPoint),Db(i.y,t.translate,t.scale,t.originPoint)}const aD=.999999999999,rD=1.0000000000001;function TK(i,e,t,n=!1){const s=t.length;if(!s)return;e.x=e.y=1;let a,r;for(let l=0;l<s;l++){a=t[l],r=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&xm(i,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),r&&(e.x*=r.x.scale,e.y*=r.y.scale,FO(i,r)),n&&ud(a.latestValues)&&xm(i,a.latestValues))}e.x<rD&&e.x>aD&&(e.x=1),e.y<rD&&e.y>aD&&(e.y=1)}function _m(i,e){i.min=i.min+e,i.max=i.max+e}function oD(i,e,t,n,s=.5){const a=$i(i.min,i.max,s);Db(i,e,t,a,n)}function xm(i,e){oD(i.x,e.x,e.scaleX,e.scale,e.originX),oD(i.y,e.y,e.scaleY,e.scale,e.originY)}function zO(i,e){return OO(yK(i.getBoundingClientRect(),e))}function EK(i,e,t){const n=zO(i,t),{scroll:s}=e;return s&&(_m(n.x,s.offset.x),_m(n.y,s.offset.y)),n}const GO=({current:i})=>i?i.ownerDocument.defaultView:null,lD=(i,e)=>Math.abs(i-e);function CK(i,e){const t=lD(i.x,e.x),n=lD(i.y,e.y);return Math.sqrt(t**2+n**2)}class HO{constructor(e,t,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:r=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=vM(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,S=CK(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!S)return;const{point:A}=v,{timestamp:M}=fa;this.history.push({...A,timestamp:M});const{onStart:b,onMove:C}=this.handlers;y||(b&&b(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),C&&C(this.lastMoveEvent,v)},this.handlePointerMove=(v,y)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=gM(y,this.transformPagePoint),Gi.update(this.updatePoint,!0)},this.handlePointerUp=(v,y)=>{this.end();const{onEnd:S,onSessionEnd:A,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=vM(v.type==="pointercancel"?this.lastMoveEventInfo:gM(y,this.transformPagePoint),this.history);this.startEvent&&S&&S(v,b),A&&A(v,b)},!_E(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=n,this.distanceThreshold=r,this.contextWindow=s||window;const l=r1(e),c=gM(l,this.transformPagePoint),{point:f}=c,{timestamp:d}=fa;this.history=[{...f,timestamp:d}];const{onSessionStart:g}=t;g&&g(e,vM(c,this.history)),this.removeListeners=i1(cv(this.contextWindow,"pointermove",this.handlePointerMove),cv(this.contextWindow,"pointerup",this.handlePointerUp),cv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),kf(this.updatePoint)}}function gM(i,e){return e?{point:e(i.point)}:i}function cD(i,e){return{x:i.x-e.x,y:i.y-e.y}}function vM({point:i},e){return{point:i,delta:cD(i,VO(e)),offset:cD(i,wK(e)),velocity:RK(e,.1)}}function wK(i){return i[0]}function VO(i){return i[i.length-1]}function RK(i,e){if(i.length<2)return{x:0,y:0};let t=i.length-1,n=null;const s=VO(i);for(;t>=0&&(n=i[t],!(s.timestamp-n.timestamp>wc(e)));)t--;if(!n)return{x:0,y:0};const a=Rc(s.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const r={x:(s.x-n.x)/a,y:(s.y-n.y)/a};return r.x===1/0&&(r.x=0),r.y===1/0&&(r.y=0),r}function DK(i,{min:e,max:t},n){return e!==void 0&&i<e?i=n?$i(e,i,n.min):Math.max(i,e):t!==void 0&&i>t&&(i=n?$i(t,i,n.max):Math.min(i,t)),i}function uD(i,e,t){return{min:e!==void 0?i.min+e:void 0,max:t!==void 0?i.max+t-(i.max-i.min):void 0}}function BK(i,{top:e,left:t,bottom:n,right:s}){return{x:uD(i.x,t,s),y:uD(i.y,e,n)}}function fD(i,e){let t=e.min-i.min,n=e.max-i.max;return e.max-e.min<i.max-i.min&&([t,n]=[n,t]),{min:t,max:n}}function UK(i,e){return{x:fD(i.x,e.x),y:fD(i.y,e.y)}}function LK(i,e){let t=.5;const n=rr(i),s=rr(e);return s>n?t=Lv(e.min,e.max-n,i.min):n>s&&(t=Lv(i.min,i.max-s,e.min)),Cu(0,1,t)}function OK(i,e){const t={};return e.min!==void 0&&(t.min=e.min-i.min),e.max!==void 0&&(t.max=e.max-i.min),t}const Bb=.35;function NK(i=Bb){return i===!1?i=0:i===!0&&(i=Bb),{x:hD(i,"left","right"),y:hD(i,"top","bottom")}}function hD(i,e,t){return{min:dD(i,e),max:dD(i,t)}}function dD(i,e){return typeof i=="number"?i:i[e]||0}const PK=new WeakMap;class IK{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ms(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(r1(g).point)},r=(g,v)=>{const{drag:y,dragPropagation:S,onDragStart:A}=this.getProps();if(y&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=JW(y),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Po(b=>{let C=this.getAxisMotionValue(b).get()||0;if(Dc.test(C)){const{projection:w}=this.visualElement;if(w&&w.layout){const R=w.layout.layoutBox[b];R&&(C=rr(R)*(parseFloat(C)/100))}}this.originPoint[b]=C}),A&&Gi.postRender(()=>A(g,v)),Cb(this.visualElement,"transform");const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},l=(g,v)=>{this.latestPointerEvent=g,this.latestPanInfo=v;const{dragPropagation:y,dragDirectionLock:S,onDirectionLock:A,onDrag:M}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:b}=v;if(S&&this.currentDirection===null){this.currentDirection=FK(b),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",v.point,b),this.updateAxis("y",v.point,b),this.visualElement.render(),M&&M(g,v)},c=(g,v)=>{this.latestPointerEvent=g,this.latestPanInfo=v,this.stop(g,v),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>Po(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new HO(e,{onSessionStart:a,onStart:r,onMove:l,onSessionEnd:c,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:GO(this.visualElement)})}stop(e,t){const n=e||this.latestPointerEvent,s=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!n)return;const{velocity:r}=s;this.startAnimation(r);const{onDragEnd:l}=this.getProps();l&&Gi.postRender(()=>l(n,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:s}=this.getProps();if(!n||!D_(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let r=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(r=DK(r,this.constraints[e],this.elastic[e])),a.set(r)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&vm(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=BK(n.layoutBox,e):this.constraints=!1,this.elastic=NK(t),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Po(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=OK(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!vm(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=EK(n,s.root,this.visualElement.getTransformPagePoint());let r=UK(s.layout.layoutBox,a);if(t){const l=t(vK(r));this.hasMutatedConstraints=!!l,l&&(r=OO(l))}return r}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:s,dragTransition:a,dragSnapToOrigin:r,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},f=Po(d=>{if(!D_(d,t,this.currentDirection))return;let g=c&&c[d]||{};r&&(g={min:0,max:0});const v=s?200:1e6,y=s?40:1e7,S={type:"inertia",velocity:n?e[d]:0,bounceStiffness:v,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...a,...g};return this.startAxisValueAnimation(d,S)});return Promise.all(f).then(l)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return Cb(this.visualElement,e),n.start(RE(e,n,0,t,this.visualElement,!1))}stopAnimation(){Po(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Po(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[t];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Po(t=>{const{drag:n}=this.getProps();if(!D_(t,n,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(t);if(s&&s.layout){const{min:r,max:l}=s.layout.layoutBox[t];a.set(e[t]-$i(r,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!vm(t)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Po(r=>{const l=this.getAxisMotionValue(r);if(l&&this.constraints!==!1){const c=l.get();s[r]=LK({min:c,max:c},this.constraints[r])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Po(r=>{if(!D_(r,e,null))return;const l=this.getAxisMotionValue(r),{min:c,max:f}=this.constraints[r];l.set($i(c,f,s[r]))})}addListeners(){if(!this.visualElement.current)return;PK.set(this.visualElement,this);const e=this.visualElement.current,t=cv(e,"pointerdown",c=>{const{drag:f,dragListener:d=!0}=this.getProps();f&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();vm(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Gi.read(n);const r=zv(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(Po(d=>{const g=this.getAxisMotionValue(d);g&&(this.originPoint[d]+=c[d].translate,g.set(g.get()+c[d].translate))}),this.visualElement.render())});return()=>{r(),t(),a(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:r=Bb,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:s,dragConstraints:a,dragElastic:r,dragMomentum:l}}}function D_(i,e,t){return(e===!0||e===i)&&(t===null||t===i)}function FK(i,e=10){let t=null;return Math.abs(i.y)>e?t="y":Math.abs(i.x)>e&&(t="x"),t}class zK extends Qf{constructor(e){super(e),this.removeGroupControls=Xo,this.removeListeners=Xo,this.controls=new IK(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xo}unmount(){this.removeGroupControls(),this.removeListeners()}}const pD=i=>(e,t)=>{i&&Gi.postRender(()=>i(e,t))};class GK extends Qf{constructor(){super(...arguments),this.removePointerDownListener=Xo}onPointerDown(e){this.session=new HO(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:GO(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:pD(e),onStart:pD(t),onMove:n,onEnd:(a,r)=>{delete this.session,s&&Gi.postRender(()=>s(a,r))}}}mount(){this.removePointerDownListener=cv(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const X_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mD(i,e){return e.max===e.min?0:i/(e.max-e.min)*100}const Ng={correct:(i,e)=>{if(!e.target)return i;if(typeof i=="string")if(Qt.test(i))i=parseFloat(i);else return i;const t=mD(i,e.target.x),n=mD(i,e.target.y);return`${t}% ${n}%`}},HK={correct:(i,{treeScale:e,projectionDelta:t})=>{const n=i,s=Xf.parse(i);if(s.length>5)return n;const a=Xf.createTransformer(i),r=typeof s[0]!="number"?1:0,l=t.x.scale*e.x,c=t.y.scale*e.y;s[0+r]/=l,s[1+r]/=c;const f=$i(l,c,.5);return typeof s[2+r]=="number"&&(s[2+r]/=f),typeof s[3+r]=="number"&&(s[3+r]/=f),a(s)}};let gD=!1;class VK extends ge.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:s}=this.props,{projection:a}=e;Eq(kK),a&&(t.group&&t.group.add(a),n&&n.register&&s&&n.register(a),gD&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),X_.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:s,isPresent:a}=this.props,{projection:r}=n;return r&&(r.isPresent=a,gD=!0,s||e.layoutDependency!==t||t===void 0||e.isPresent!==a?r.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?r.promote():r.relegate()||Gi.postRender(()=>{const l=r.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),yE.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kO(i){const[e,t]=gO(),n=ge.useContext(KT);return oe.jsx(VK,{...i,layoutGroup:n,switchLayoutGroup:ge.useContext(SO),isPresent:e,safeToRemove:t})}const kK={borderRadius:{...Ng,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ng,borderTopRightRadius:Ng,borderBottomLeftRadius:Ng,borderBottomRightRadius:Ng,boxShadow:HK};function XK(i,e,t){const n=Na(i)?i:Km(i);return n.start(RE("",n,e,t)),n.animation}const jK=(i,e)=>i.depth-e.depth;class YK{constructor(){this.children=[],this.isDirty=!1}add(e){QT(this.children,e),this.isDirty=!0}remove(e){$T(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(jK),this.isDirty=!1,this.children.forEach(e)}}function WK(i,e){const t=wr.now(),n=({timestamp:s})=>{const a=s-t;a>=e&&(kf(n),i(a-e))};return Gi.setup(n,!0),()=>kf(n)}const XO=["TopLeft","TopRight","BottomLeft","BottomRight"],qK=XO.length,vD=i=>typeof i=="string"?parseFloat(i):i,yD=i=>typeof i=="number"||Qt.test(i);function KK(i,e,t,n,s,a){s?(i.opacity=$i(0,t.opacity??1,JK(n)),i.opacityExit=$i(e.opacity??1,0,ZK(n))):a&&(i.opacity=$i(e.opacity??1,t.opacity??1,n));for(let r=0;r<qK;r++){const l=`border${XO[r]}Radius`;let c=_D(e,l),f=_D(t,l);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||yD(c)===yD(f)?(i[l]=Math.max($i(vD(c),vD(f),n),0),(Dc.test(f)||Dc.test(c))&&(i[l]+="%")):i[l]=f}(e.rotate||t.rotate)&&(i.rotate=$i(e.rotate||0,t.rotate||0,n))}function _D(i,e){return i[e]!==void 0?i[e]:i.borderRadius}const JK=jO(0,.5,IL),ZK=jO(.5,.95,Xo);function jO(i,e,t){return n=>n<i?0:n>e?1:t(Lv(i,e,n))}function xD(i,e){i.min=e.min,i.max=e.max}function Oo(i,e){xD(i.x,e.x),xD(i.y,e.y)}function SD(i,e){i.translate=e.translate,i.scale=e.scale,i.originPoint=e.originPoint,i.origin=e.origin}function AD(i,e,t,n,s){return i-=e,i=Jx(i,1/t,n),s!==void 0&&(i=Jx(i,1/s,n)),i}function QK(i,e=0,t=1,n=.5,s,a=i,r=i){if(Dc.test(e)&&(e=parseFloat(e),e=$i(r.min,r.max,e/100)-r.min),typeof e!="number")return;let l=$i(a.min,a.max,n);i===a&&(l-=e),i.min=AD(i.min,e,t,l,s),i.max=AD(i.max,e,t,l,s)}function MD(i,e,[t,n,s],a,r){QK(i,e[t],e[n],e[s],e.scale,a,r)}const $K=["x","scaleX","originX"],eJ=["y","scaleY","originY"];function bD(i,e,t,n){MD(i.x,e,$K,t?t.x:void 0,n?n.x:void 0),MD(i.y,e,eJ,t?t.y:void 0,n?n.y:void 0)}function TD(i){return i.translate===0&&i.scale===1}function YO(i){return TD(i.x)&&TD(i.y)}function ED(i,e){return i.min===e.min&&i.max===e.max}function tJ(i,e){return ED(i.x,e.x)&&ED(i.y,e.y)}function CD(i,e){return Math.round(i.min)===Math.round(e.min)&&Math.round(i.max)===Math.round(e.max)}function WO(i,e){return CD(i.x,e.x)&&CD(i.y,e.y)}function wD(i){return rr(i.x)/rr(i.y)}function RD(i,e){return i.translate===e.translate&&i.scale===e.scale&&i.originPoint===e.originPoint}class nJ{constructor(){this.members=[]}add(e){QT(this.members,e),e.scheduleRender()}remove(e){if($T(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let n;for(let s=t;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function iJ(i,e,t){let n="";const s=i.x.translate/e.x,a=i.y.translate/e.y,r=t?.z||0;if((s||a||r)&&(n=`translate3d(${s}px, ${a}px, ${r}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:f,rotate:d,rotateX:g,rotateY:v,skewX:y,skewY:S}=t;f&&(n=`perspective(${f}px) ${n}`),d&&(n+=`rotate(${d}deg) `),g&&(n+=`rotateX(${g}deg) `),v&&(n+=`rotateY(${v}deg) `),y&&(n+=`skewX(${y}deg) `),S&&(n+=`skewY(${S}deg) `)}const l=i.x.scale*e.x,c=i.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const yM=["","X","Y","Z"],sJ=1e3;let aJ=0;function _M(i,e,t,n){const{latestValues:s}=e;s[i]&&(t[i]=s[i],e.setStaticValue(i,0),n&&(n[i]=0))}function qO(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:e}=i.options;if(!e)return;const t=DO(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:s,layoutId:a}=i.options;window.MotionCancelOptimisedAnimation(t,"transform",Gi,!(s||a))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&qO(n)}function KO({attachResizeListener:i,defaultParent:e,measureScroll:t,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(r={},l=e?.()){this.id=aJ++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(lJ),this.nodes.forEach(hJ),this.nodes.forEach(dJ),this.nodes.forEach(cJ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=r,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new YK)}addEventListener(r,l){return this.eventHandlers.has(r)||this.eventHandlers.set(r,new nE),this.eventHandlers.get(r).add(l)}notifyListeners(r,...l){const c=this.eventHandlers.get(r);c&&c.notify(...l)}hasListeners(r){return this.eventHandlers.has(r)}mount(r){if(this.instance)return;this.isSVG=mO(r)&&!nq(r),this.instance=r;const{layoutId:l,layout:c,visualElement:f}=this.options;if(f&&!f.current&&f.mount(r),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),i){let d,g=0;const v=()=>this.root.updateBlockedByResize=!1;Gi.read(()=>{g=window.innerWidth}),i(r,()=>{const y=window.innerWidth;y!==g&&(g=y,this.root.updateBlockedByResize=!0,d&&d(),d=WK(v,250),X_.hasAnimatedSinceResize&&(X_.hasAnimatedSinceResize=!1,this.nodes.forEach(UD)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:g,hasRelativeLayoutChanged:v,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||f.getDefaultTransition()||yJ,{onLayoutAnimationStart:A,onLayoutAnimationComplete:M}=f.getProps(),b=!this.targetLayout||!WO(this.targetLayout,y),C=!g&&v;if(this.options.layoutRoot||this.resumeFrom||C||g&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...gE(S,"layout"),onPlay:A,onComplete:M};(f.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(d,C)}else g||UD(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const r=this.getStack();r&&r.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),kf(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(pJ),this.animationId++)}getTransformTemplate(){const{visualElement:r}=this.options;return r&&r.getProps().transformTemplate}willUpdate(r=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&qO(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const g=this.path[d];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),r&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(DD);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(BD);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(fJ),this.nodes.forEach(rJ),this.nodes.forEach(oJ)):this.nodes.forEach(BD),this.clearAllSnapshots();const l=wr.now();fa.delta=Cu(0,1e3/60,l-fa.timestamp),fa.timestamp=l,fa.isProcessing=!0,cM.update.process(fa),cM.preRender.process(fa),cM.render.process(fa),fa.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,yE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(uJ),this.sharedNodes.forEach(mJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gi.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!rr(this.snapshot.measuredBox.x)&&!rr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const r=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ms(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,r?r.layoutBox:void 0)}updateScroll(r="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===r&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:r,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const r=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!YO(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,d=f!==this.prevTransformTemplateValue;r&&this.instance&&(l||ud(this.latestValues)||d)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(r=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return r&&(c=this.removeTransform(c)),_J(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:r}=this.options;if(!r)return ms();const l=r.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(xJ))){const{scroll:f}=this.root;f&&(_m(l.x,f.offset.x),_m(l.y,f.offset.y))}return l}removeElementScroll(r){const l=ms();if(Oo(l,r),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:d,options:g}=f;f!==this.root&&d&&g.layoutScroll&&(d.wasRoot&&Oo(l,r),_m(l.x,d.offset.x),_m(l.y,d.offset.y))}return l}applyTransform(r,l=!1){const c=ms();Oo(c,r);for(let f=0;f<this.path.length;f++){const d=this.path[f];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&xm(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ud(d.latestValues)&&xm(c,d.latestValues)}return ud(this.latestValues)&&xm(c,this.latestValues),c}removeTransform(r){const l=ms();Oo(l,r);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!ud(f.latestValues))continue;Rb(f.latestValues)&&f.updateSnapshot();const d=ms(),g=f.measurePageBox();Oo(d,g),bD(l,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,d)}return ud(this.latestValues)&&bD(l,this.latestValues),l}setTargetDelta(r){this.targetDelta=r,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(r){this.options={...this.options,...r,crossfade:r.crossfade!==void 0?r.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fa.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(r=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(r||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:g}=this.options;if(!(!this.layout||!(d||g))){if(this.resolvedRelativeTargetAt=fa.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ms(),this.relativeTargetOrigin=ms(),fv(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Oo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ms(),this.targetWithTransforms=ms()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Oo(this.target,this.layout.layoutBox),FO(this.target,this.targetDelta)):Oo(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ms(),this.relativeTargetOrigin=ms(),fv(this.relativeTargetOrigin,this.target,v.target),Oo(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Rb(this.parent.latestValues)||IO(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const r=this.getLead(),l=!!this.resumingFrom||this!==r;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===fa.timestamp&&(c=!1),c)return;const{layout:f,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||d))return;Oo(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,v=this.treeScale.y;TK(this.layoutCorrected,this.treeScale,this.path,l),r.layout&&!r.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(r.target=r.layout.layoutBox,r.targetWithTransforms=ms());const{target:y}=r;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(SD(this.prevProjectionDelta.x,this.projectionDelta.x),SD(this.prevProjectionDelta.y,this.projectionDelta.y)),uv(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==v||!RD(this.projectionDelta.x,this.prevProjectionDelta.x)||!RD(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(r=!0){if(this.options.visualElement?.scheduleRender(),r){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ym(),this.projectionDelta=ym(),this.projectionDeltaWithTransform=ym()}setAnimationOrigin(r,l=!1){const c=this.snapshot,f=c?c.latestValues:{},d={...this.latestValues},g=ym();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const v=ms(),y=c?c.source:void 0,S=this.layout?this.layout.source:void 0,A=y!==S,M=this.getStack(),b=!M||M.members.length<=1,C=!!(A&&!b&&this.options.crossfade===!0&&!this.path.some(vJ));this.animationProgress=0;let w;this.mixTargetDelta=R=>{const U=R/1e3;LD(g.x,r.x,U),LD(g.y,r.y,U),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fv(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),gJ(this.relativeTarget,this.relativeTargetOrigin,v,U),w&&tJ(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=ms()),Oo(w,this.relativeTarget)),A&&(this.animationValues=d,KK(d,f,this.latestValues,U,C,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(r){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(kf(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gi.update(()=>{X_.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Km(0)),this.currentAnimation=XK(this.motionValue,[0,1e3],{...r,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),r.onUpdate&&r.onUpdate(l)},onStop:()=>{},onComplete:()=>{r.onComplete&&r.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const r=this.getStack();r&&r.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sJ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const r=this.getLead();let{targetWithTransforms:l,target:c,layout:f,latestValues:d}=r;if(!(!l||!c||!f)){if(this!==r&&this.layout&&f&&JO(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||ms();const g=rr(this.layout.layoutBox.x);c.x.min=r.target.x.min,c.x.max=c.x.min+g;const v=rr(this.layout.layoutBox.y);c.y.min=r.target.y.min,c.y.max=c.y.min+v}Oo(l,c),xm(l,d),uv(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(r,l){this.sharedNodes.has(r)||this.sharedNodes.set(r,new nJ),this.sharedNodes.get(r).add(l);const f=l.options.initialPromotionConfig;l.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(l):void 0})}isLead(){const r=this.getStack();return r?r.lead===this:!0}getLead(){const{layoutId:r}=this.options;return r?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:r}=this.options;return r?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:r}=this.options;if(r)return this.root.sharedNodes.get(r)}promote({needsReset:r,transition:l,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),r&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const r=this.getStack();return r?r.relegate(this):!1}resetSkewAndRotation(){const{visualElement:r}=this.options;if(!r)return;let l=!1;const{latestValues:c}=r;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const f={};c.z&&_M("z",r,f,this.animationValues);for(let d=0;d<yM.length;d++)_M(`rotate${yM[d]}`,r,f,this.animationValues),_M(`skew${yM[d]}`,r,f,this.animationValues);r.render();for(const d in f)r.setStaticValue(d,f[d]),this.animationValues&&(this.animationValues[d]=f[d]);r.scheduleRender()}applyProjectionStyles(r,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){r.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,r.visibility="",r.opacity="",r.pointerEvents=k_(l?.pointerEvents)||"",r.transform=c?c(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(r.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,r.pointerEvents=k_(l?.pointerEvents)||""),this.hasProjected&&!ud(this.latestValues)&&(r.transform=c?c({},""):"none",this.hasProjected=!1);return}r.visibility="";const d=f.animationValues||f.latestValues;this.applyTransformsToTarget();let g=iJ(this.projectionDeltaWithTransform,this.treeScale,d);c&&(g=c(d,g)),r.transform=g;const{x:v,y}=this.projectionDelta;r.transformOrigin=`${v.origin*100}% ${y.origin*100}% 0`,f.animationValues?r.opacity=f===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:r.opacity=f===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const S in Iv){if(d[S]===void 0)continue;const{correct:A,applyTo:M,isCSSVariable:b}=Iv[S],C=g==="none"?d[S]:A(d[S],f);if(M){const w=M.length;for(let R=0;R<w;R++)r[M[R]]=C}else b?this.options.visualElement.renderState.vars[S]=C:r[S]=C}this.options.layoutId&&(r.pointerEvents=f===this?k_(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(r=>r.currentAnimation?.stop()),this.root.nodes.forEach(DD),this.root.sharedNodes.clear()}}}function rJ(i){i.updateLayout()}function oJ(i){const e=i.resumeFrom?.snapshot||i.snapshot;if(i.isLead()&&i.layout&&e&&i.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:n}=i.layout,{animationType:s}=i.options,a=e.source!==i.layout.source;s==="size"?Po(d=>{const g=a?e.measuredBox[d]:e.layoutBox[d],v=rr(g);g.min=t[d].min,g.max=g.min+v}):JO(s,e.layoutBox,t)&&Po(d=>{const g=a?e.measuredBox[d]:e.layoutBox[d],v=rr(t[d]);g.max=g.min+v,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[d].max=i.relativeTarget[d].min+v)});const r=ym();uv(r,t,e.layoutBox);const l=ym();a?uv(l,i.applyTransform(n,!0),e.measuredBox):uv(l,t,e.layoutBox);const c=!YO(r);let f=!1;if(!i.resumeFrom){const d=i.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:g,layout:v}=d;if(g&&v){const y=ms();fv(y,e.layoutBox,g.layoutBox);const S=ms();fv(S,t,v.layoutBox),WO(y,S)||(f=!0),d.options.layoutRoot&&(i.relativeTarget=S,i.relativeTargetOrigin=y,i.relativeParent=d)}}}i.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:l,layoutDelta:r,hasLayoutChanged:c,hasRelativeLayoutChanged:f})}else if(i.isLead()){const{onExitComplete:t}=i.options;t&&t()}i.options.transition=void 0}function lJ(i){i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function cJ(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function uJ(i){i.clearSnapshot()}function DD(i){i.clearMeasurements()}function BD(i){i.isLayoutDirty=!1}function fJ(i){const{visualElement:e}=i.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),i.resetTransform()}function UD(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function hJ(i){i.resolveTargetDelta()}function dJ(i){i.calcProjection()}function pJ(i){i.resetSkewAndRotation()}function mJ(i){i.removeLeadSnapshot()}function LD(i,e,t){i.translate=$i(e.translate,0,t),i.scale=$i(e.scale,1,t),i.origin=e.origin,i.originPoint=e.originPoint}function OD(i,e,t,n){i.min=$i(e.min,t.min,n),i.max=$i(e.max,t.max,n)}function gJ(i,e,t,n){OD(i.x,e.x,t.x,n),OD(i.y,e.y,t.y,n)}function vJ(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const yJ={duration:.45,ease:[.4,0,.1,1]},ND=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),PD=ND("applewebkit/")&&!ND("chrome/")?Math.round:Xo;function ID(i){i.min=PD(i.min),i.max=PD(i.max)}function _J(i){ID(i.x),ID(i.y)}function JO(i,e,t){return i==="position"||i==="preserve-aspect"&&!MK(wD(e),wD(t),.2)}function xJ(i){return i!==i.root&&i.scroll?.wasRoot}const SJ=KO({attachResizeListener:(i,e)=>zv(i,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xM={current:void 0},ZO=KO({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!xM.current){const i=new SJ({});i.mount(window),i.setOptions({layoutScroll:!0}),xM.current=i}return xM.current},resetTransform:(i,e)=>{i.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),AJ={pan:{Feature:GK},drag:{Feature:zK,ProjectionNode:ZO,MeasureLayout:kO}};function FD(i,e,t){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",t==="Start");const s="onHover"+t,a=n[s];a&&Gi.postRender(()=>a(e,r1(e)))}class MJ extends Qf{mount(){const{current:e}=this.node;e&&(this.unmount=ZW(e,(t,n)=>(FD(this.node,n,"Start"),s=>FD(this.node,s,"End"))))}unmount(){}}class bJ extends Qf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=i1(zv(this.node.current,"focus",()=>this.onFocus()),zv(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function zD(i,e,t){const{props:n}=i;if(i.current instanceof HTMLButtonElement&&i.current.disabled)return;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",t==="Start");const s="onTap"+(t==="End"?"":t),a=n[s];a&&Gi.postRender(()=>a(e,r1(e)))}class TJ extends Qf{mount(){const{current:e}=this.node;e&&(this.unmount=tq(e,(t,n)=>(zD(this.node,n,"Start"),(s,{success:a})=>zD(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ub=new WeakMap,SM=new WeakMap,EJ=i=>{const e=Ub.get(i.target);e&&e(i)},CJ=i=>{i.forEach(EJ)};function wJ({root:i,...e}){const t=i||document;SM.has(t)||SM.set(t,{});const n=SM.get(t),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(CJ,{root:i,...e})),n[s]}function RJ(i,e,t){const n=wJ(e);return Ub.set(i,t),n.observe(i),()=>{Ub.delete(i),n.unobserve(i)}}const DJ={some:0,all:1};class BJ extends Qf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:s="some",once:a}=e,r={root:t?t.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:DJ[s]},l=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,a&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:d,onViewportLeave:g}=this.node.getProps(),v=f?d:g;v&&v(c)};return RJ(this.node.current,r,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(UJ(e,t))&&this.startObserver()}unmount(){}}function UJ({viewport:i={}},{viewport:e={}}={}){return t=>i[t]!==e[t]}const LJ={inView:{Feature:BJ},tap:{Feature:TJ},focus:{Feature:bJ},hover:{Feature:MJ}},OJ={layout:{ProjectionNode:ZO,MeasureLayout:kO}},Lb={current:null},QO={current:!1};function NJ(){if(QO.current=!0,!!ZT)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),e=()=>Lb.current=i.matches;i.addEventListener("change",e),e()}else Lb.current=!1}const PJ=new WeakMap;function IJ(i,e,t){for(const n in e){const s=e[n],a=t[n];if(Na(s))i.addValue(n,s);else if(Na(a))i.addValue(n,Km(s,{owner:i}));else if(a!==s)if(i.hasValue(n)){const r=i.getValue(n);r.liveStyle===!0?r.jump(s):r.hasAnimated||r.set(s)}else{const r=i.getStaticValue(n);i.addValue(n,Km(r!==void 0?r:s,{owner:i}))}}for(const n in t)e[n]===void 0&&i.removeValue(n);return e}const GD=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class FJ{scrapeMotionValuesFromProps(e,t,n){return{}}constructor({parent:e,props:t,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:a,visualState:r},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=pE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=wr.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Gi.render(this.render,!1,!0))};const{latestValues:c,renderState:f}=r;this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=f,this.parent=e,this.props=t,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=WS(t),this.isVariantNode=_O(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...g}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in g){const y=g[v];c[v]!==void 0&&Na(y)&&y.set(c[v],!1)}}mount(e){this.current=e,PJ.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,n)=>this.bindToMotionValue(n,t)),QO.current||NJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Lb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),kf(this.notifyUpdate),kf(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=l0.has(e);n&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Gi.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),a(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Jm){const t=Jm[e];if(!t)continue;const{isEnabled:n,Feature:s}=t;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ms()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<GD.length;n++){const s=GD[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,r=e[a];r&&(this.propEventSubscriptions[s]=this.on(s,r))}this.prevMotionValues=IJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&t!==void 0&&(n=Km(t===null?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(CL(n)||RL(n))?n=parseFloat(n):!sq(n)&&Xf.test(t)&&(n=uO(e,t)),this.setBaseTarget(e,Na(n)?n.get():n)),Na(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let n;if(typeof t=="string"||typeof t=="object"){const a=CE(this.props,t,this.presenceContext?.custom);a&&(n=a[e])}if(t&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Na(s)?s:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new nE),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class $O extends FJ{constructor(){super(...arguments),this.KeyframeResolver=YW}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:n}){delete t[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Na(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function eN(i,{style:e,vars:t},n,s){const a=i.style;let r;for(r in e)a[r]=e[r];s?.applyProjectionStyles(a,n);for(r in t)a.setProperty(r,t[r])}function zJ(i){return window.getComputedStyle(i)}class GJ extends $O{constructor(){super(...arguments),this.type="html",this.renderInstance=eN}readValueFromInstance(e,t){if(l0.has(t))return this.projection?.isProjecting?xb(t):fW(e,t);{const n=zJ(e),s=(aE(t)?n.getPropertyValue(t):n[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return zO(e,t)}build(e,t,n){bE(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return wE(e,t,n)}}const tN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function HJ(i,e,t,n){eN(i,e,void 0,n);for(const s in e.attrs)i.setAttribute(tN.has(s)?s:ME(s),e.attrs[s])}class VJ extends $O{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ms}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(l0.has(t)){const n=cO(t);return n&&n.default||0}return t=tN.has(t)?t:ME(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return RO(e,t,n)}build(e,t,n){TO(e,t,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,t,n,s){HJ(e,t,n,s)}mount(e){this.isSVGTag=CO(e.tagName),super.mount(e)}}const kJ=(i,e)=>EE(i)?new VJ(e):new GJ(e,{allowProjection:i!==ge.Fragment}),XJ=kq({...mK,...LJ,...AJ,...OJ},kJ),jJ=pq(XJ);function YJ({onStart:i,isVisible:e}){const t=ge.useRef(null),n=ge.useRef(null),s=ge.useRef(null),a=ge.useRef(null);return ge.useEffect(()=>{e&&qm.timeline().fromTo(n.current,{opacity:0,x:-50},{opacity:1,x:0,duration:1,ease:"power3.out"}).fromTo(s.current,{opacity:0,x:-50},{opacity:1,x:0,duration:.8,ease:"power3.out"},"-=0.6").fromTo(a.current,{opacity:0,x:-50},{opacity:1,x:0,duration:.8,ease:"power3.out"},"-=0.5")},[e]),oe.jsx(cq,{children:e&&oe.jsxs(jJ.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},transition:{duration:.8},className:"fixed inset-0 bg-black text-white z-50 pointer-events-auto",ref:t,children:[oe.jsx("div",{className:"absolute inset-0 z-[-1] bg-cover bg-center blur-md opacity-40",style:{backgroundImage:"url('/src/assets/screen.png')"}}),oe.jsx("div",{className:"fixed top-10 left-14",children:oe.jsx("img",{src:"/src/assets/Logo_2.png",alt:"Logo_2"})}),oe.jsx("div",{className:"flex flex-col justify-center h-full px-14 pt-10 pb-16",children:oe.jsxs("div",{className:"flex flex-col items-center text-center flex-grow justify-center gap-12",children:[oe.jsx("h1",{ref:n,className:"text-[3.375rem] font-bold leading-snug",style:{fontFamily:"Foundry Context Bold, sans-serif"},children:"Discover The ISS Like Never Before"}),oe.jsx("p",{ref:s,className:"text-sm tracking-[0.05em] max-w-2xl",style:{fontFamily:"Foundry Context Medium, sans-serif"},children:"Experience real-time tracking, stunning realism, and space like youre aboard"}),oe.jsx("div",{ref:a,children:oe.jsx(wm,{onClick:i,children:"Start Now"})}),oe.jsxs("div",{className:"flex flex-col items-center gap-6 mt-10",children:[oe.jsx("div",{className:"w-full h-px bg-white opacity-20"}),oe.jsxs("div",{className:"flex flex-wrap justify-center gap-8 text-sm max-w-5xl text-center",children:[oe.jsx("p",{className:"max-w-[12rem]",children:"Real-time orbital exploration, visualized and analyzed."}),oe.jsx("p",{className:"max-w-[12rem]",children:"Track the ISS path, country flyovers, and environmental conditions"}),oe.jsx("p",{className:"max-w-[12rem]",children:"Dive into dynamic stats, solar weather, and live satellite activity"}),oe.jsx("p",{className:"max-w-[12rem]",children:"Explore live altitude & velocity changes in real time"})]})]})]})})]},"landing")})}function WJ(){return oe.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",background:"black",color:"white",fontSize:"2rem",zIndex:999},children:"Loading"})}function qJ(){const[i,e]=ge.useState(!0),[t,n]=ge.useState(!1),[s,a]=ge.useState(!0),r=()=>{e(!1),setTimeout(()=>{n(!0)},800)};return oe.jsxs(oe.Fragment,{children:[oe.jsx(YJ,{onStart:r,isVisible:i}),t&&oe.jsx(oe.Fragment,{children:oe.jsxs(NH,{children:[s&&oe.jsx(WJ,{})," ",oe.jsx(vH,{camera:{position:[0,0,5],fov:50,near:.05,far:16e3},style:{height:"100vh",background:"black"},gl:{preserveDrawingBuffer:!0,antialias:!0,physicallyCorrectLights:!0,toneMapping:$x,outputEncoding:void 0},dpr:window.devicePixelRatio<2?1:2,resize:{debounce:200},shadows:!0,onCreated:()=>{a(!1)},children:oe.jsx(Fj,{})}),oe.jsx(lY,{})]})})]})}JN.createRoot(document.getElementById("root")).render(oe.jsx(ge.StrictMode,{children:oe.jsx(qJ,{})}));
